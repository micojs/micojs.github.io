!function r(i,s,a){function o(t,e){if(!s[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=s[t]={exports:{}},i[t][0].call(n.exports,function(e){return o(i[t][1][e]||e)},n,n.exports,r,i,s,a)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Var=r.UnaryExpression=r.Scope=r.Return=r.Program=r.Pop=r.Objekt=r.Method=r.LookUp=r.Location=r.Literal=r.Error=r.Deref=r.Continue=r.CallExpression=r.Break=r.BinaryExpression=r.AssignmentExpression=r.Array=void 0,r.getUniqueId=getUniqueId,r.getUniqueName=function getUniqueName(e="_"){return e+n()};let n=1;function getUniqueId(){return n++}class Expr{constructor(){this.id=n++,this.parent=null,this.program=null}setProgram(e){this.program=e}toJSON(){return{constructor:this.constructor.name}}}class Pop extends Expr{}r.Pop=Pop;class Deref extends Expr{}r.Deref=Deref;class Return extends Expr{constructor(e){super(),this.hasValue=e}toJSON(){return{constructor:this.constructor.name,hasValue:this.hasValue}}}r.Return=Return;class Break extends Expr{constructor(e){super(),this.target=e}toJSON(){return{constructor:this.constructor.name,target:this.target?this.target.id:null}}}r.Break=Break;class Continue extends Expr{constructor(e){super(),this.target=e}toJSON(){return{constructor:this.constructor.name,target:this.target?this.target.id:null}}}r.Continue=Continue;class Array extends Expr{constructor(e){super(),this.length=e}toJSON(){return{constructor:this.constructor.name,length:this.length}}}r.Array=Array;class Objekt extends Expr{constructor(e,t){super(),this.length=e,this.construct=t}toJSON(){return{constructor:this.constructor.name,length:this.length}}}r.Objekt=Objekt;class CallExpression extends Expr{constructor(e,t,r,n){super(),this.argc=e,this.isNew=t,this.isForward=r,this.discardResult=!!n}toJSON(){return{constructor:this.constructor.name,argc:this.argc,isNew:this.isNew,isForward:this.isForward}}}r.CallExpression=CallExpression;class AssignmentExpression extends Expr{constructor(e){super(),this.operator=e}toJSON(){return{constructor:this.constructor.name,operator:this.operator}}}r.AssignmentExpression=AssignmentExpression;class BinaryExpression extends Expr{constructor(e){super(),this.operator=e}toJSON(){return{constructor:this.constructor.name,operator:this.operator}}}r.BinaryExpression=BinaryExpression;class UnaryExpression extends Expr{constructor(e,t){super(),this.operator=e,this.prefix=t}toJSON(){return{constructor:this.constructor.name,operator:this.operator}}}r.UnaryExpression=UnaryExpression;class LookUp extends Expr{constructor(e){if(super(),void 0===e)throw new Error("Internal error: invalid LookUp");this.variable=e,this.container=null}toJSON(){return{constructor:this.constructor.name,variable:this.variable,container:this.container}}}r.LookUp=LookUp;class Literal extends Expr{constructor(e){super(),this.value=e}toJSON(){return{constructor:this.constructor.name,value:this.value}}}r.Literal=Literal;class Var{constructor(e="var",t=void 0,r){this.id=n++,this.kind=e,this.name=t,this.location=null,this.parent=null,this.context=null,this.deref=null,this.read=0,this.write=0,this.program=null}setProgram(e){this.program=e}toJSON(){return{constructor:this.constructor.name,id:this.id,name:this.name,parent:this.parent?this.parent.name:null,kind:this.kind}}addDeref(e){this.deref||(this.deref={}),this.deref[e]=e}isCaptured(){return this.parent.method.captured&&this.id in this.parent.method.captured}rename(e){this.parent?(this.parent.remove(this),this.name=e,this.parent.add(this)):this.name=e}}r.Var=Var;class Scope extends Expr{constructor(e){super(),this.name=e,this.variables=[],this.index=Object.create(null),this.parent=null,this.children=[],this.method=null,this.transparent=!1,this.breakable=!1,this.hasBreak=!1,this.continuable=!1,this.hasContinue=!1,this.returnable=!1,this.debug=null,this.program=null,this.temporaries=[],this.preEnter=void 0,this.enterCondition=void 0,this.failEnter=void 0,this.preLoop=void 0,this.loopCondition=void 0}toJSON(){return{constructor:this.constructor.name,id:this.id,name:this.name,index:this.index,parent:this.parent?this.parent.name:null,preEnter:this.preEnter,enterCondition:this.enterCondition,failEnter:this.failEnter,children:this.children,loopCondition:this.loopCondition,preLoop:this.preLoop}}label(e){return e+"_"+this.id+(this.debug?`/*${this.debug}*/`:"")}has(e,t){return this.transparent&&this.parent?this.parent.has(e,t):e in this.index||t&&this.parent&&this.parent.has(e,!0)}find(e,t){var r;return this.transparent&&this.parent?this.parent.find(e,t):(r=this.index[e])||(t&&this.parent?(r=this.parent.find(e,!0))&&r.parent.method!=this.method&&r.parent.method.parent?this.method.capture(r):r:void 0)}remove(e){var t;this.transparent&&this.parent?this.parent.remove(e):e&&e.parent==this&&(-1!=(t=this.variables.indexOf(e))&&(this.variables[t]=this.variables[this.variables.length-1],this.variables.pop()),this.index[e.name]==e&&delete this.index[e.name],delete this.index[e.id])}addPreEnter(){var e=new Scope;return(this.preEnter=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(preEnter)"),e}addEnterCondition(){var e=new Scope;return(this.enterCondition=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(enterCondition)"),e}addFailEnter(){var e=new Scope;return(this.failEnter=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(failEnter)"),e}addPreLoop(){var e=new Scope;return(this.preLoop=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(preLoop)"),e}addLoopCondition(){var e=new Scope;return(this.loopCondition=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(loopCondition)"),e}setProgram(e){if(e!=this.program){this.program=e;for(var t of this.variables)t.setProgram(e);for(var r of this.children)r.setProgram(e)}}_reg(e){return this.transparent?this.parent._reg(e):(e.name&&(this.index[e.name]=e),e.id&&(this.index[e.id]=e),this)}add(e){if(!e)throw new Error("Internal Error: adding null to scope");if(this.program&&e.setProgram(this.program),e instanceof Var)e.parent=this._reg(e),e.parent.variables.push(e);else if(e instanceof Method)e.parent=this._reg(e),e.parent.children.push(e);else if(e instanceof Scope)this._reg(e),e.parent=this,e.parent.children.push(e),e.method=this.method;else{if(!(e instanceof Expr))throw new Error("Internal Error: Can't add to scope: ",e);this.children.push(e),e.parent=this}}}class Method extends(r.Scope=Scope){constructor(e){super(),this.name=e,(this.method=this).args=new Var,this.add(this.args),this.add(new Var("const","this")),this.isNative=!1,this.isClass=!1,this.captures=void 0,this.captured=void 0,this.returnable=!0}guessObjectSize(e){e=e||new Set;let t=0;for(var r in this.index.this.deref||{})e.has(r)||(e.add(r),t++);for(var n in this.index){n=this.index[n];n instanceof Method&&!n.isClass&&(t+=n.guessObjectSize(e))}return t}toJSON(){return Object.assign(super.toJSON(),{name:this.name,args:this.args,isNative:this.isNative})}capture(e){var t=new Var("capture",e.name);return t.context=e.parent.method.setCaptured(e),this.add(t),this.captures||(this.captures={}),this.captures[t.context.id]=e.id,t}setCaptured(e){return this.captured||(this.captured={},this.context=new Var("var"),this.add(this.context)),this.captured[e.id]=e,this.context}}r.Method=Method;r.Program=class Program{constructor(){this.main=new Method("_main"),this.main.setProgram(this),this.resources=new Var("var","R"),this.resourceData={},this.strings=[],this.sourceAST=[],this.main.add(this.resources)}toJSON(){return{constructor:this.constructor.name,main:this.main}}};r.Location=class Location{constructor(e,t,r){this.file=e,this.line=t,this.column=r}clone(){return new Location(this.file,this.line,this.column)}};class Error{constructor(e,t){this.message=e,this.location=t}toJSON(){return{constructor:this.constructor.name,message:this.message,location:this.location}}}r.Error=Error},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cppWriter=function cppWriter(r,e){const n=new CPP;Array.isArray(e.strings)&&e.strings.forEach(e=>literalToString(e,!0));Array.isArray(e.globals)&&e.globals.forEach(e=>{let t=r.main.index[e];t||(t=new f.Var("var",e),r.main.add(t)),n.globals[t.id]=t});Array.isArray(e.strings)&&e.strings.forEach(e=>{literalToString(e,!0)});return n.write(r),n.toString(e.platform)};var f=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var r,n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((s=i?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("./IR.js"));function _getRequireWildcardCache(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(_getRequireWildcardCache=function(e){return e?r:t})(e))}const s={std:`
$[[minStringTable]]

#define PRINT(str) printf("%s", str)
#define PRINTLN() printf("\\n");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);

#include "js.hpp"

$[[translated]]

int main() {
  {
    js::Local args = js::arguments(0);
    $[[main]](args, false);
  }
  js::gc();
  return 0;
}
`,blit:`
#define RESOURCEREF(x) ((js::ResourceRef*)res::x)
#define RESOURCEDECL(x) const uint8_t x[]
#define PRINT(str) blit::debug((const char*)(str))
#define PRINTLN() blit::debug("\\n\\r");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);

$[[minStringTable]]

#include "blit.h"

namespace res {
$[[resources]]
}

$[[translated]]

void JSinit() {
  {
    js::Local args = js::arguments(0);
    js::call($[[main]], args, false);
    js::call($[[init]], args, false);
  }
  js::gc();
}

void JSrender(uint32_t time) {
  PROFILER;
  js::Local args = js::arguments(1);
  js::set(args, V_0, time);
  js::call($[[render]], args, false);
}

void JSupdate(uint32_t time, uint32_t updateCount) {
  PROFILER;
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, time);
    for (uint32_t i = 0; i < updateCount; ++i)
      js::call($[[update]], args, false);
  }
}
`,pokitto:`
#define RESOURCEREF(x) ((js::ResourceRef*)resource::x)
#define RESOURCEDECL(x) const uint8_t x[]
#define PRINT(str) LOG((const char*)(str))
#define PRINTLN() LOG("\\n");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);

$[[minStringTable]]

#include "api.h"

namespace resource {
$[[resources]]
}

$[[translated]]

void JSinit() {
  {
    js::Local args = js::arguments(0);
    js::call($[[main]], args, false);
    js::call($[[init]], args, false);
  }
  js::gc();
}

void JSupdate() {
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, Pokitto::Core::getTime());
    js::call($[[update]], args, false);
    js::call($[[render]], args, false);
  }
}
`,espboy:`
#define RESOURCEREF(x) ((js::ResourceRef*)res::x)
#define RESOURCEDECL(x) const uint8_t PROGMEM x[]
#define PRINT(str) Serial.print((const char*)str)
#define PRINTLN() Serial.print("\\n");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);
$[[minStringTable]]

#include "espboy.hpp"

namespace res {
$[[resources]]
}

$[[translated]]

void JSinit() {
  {
    js::Local args = js::arguments(0);
    js::call($[[main]], args, false);
    js::call($[[init]], args, false);
  }
  js::gc();
}

void JSupdate(uint32_t time, uint32_t updateCount) {
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, time);
    for (uint32_t i = 0; i < updateCount; ++i)
      js::call($[[update]], args, false);
    js::call($[[render]], args, false);
  }
}
`,meta:`
#define RESOURCEREF(x) ((js::ResourceRef*)res::x)
#define RESOURCEDECL(x) const uint8_t x[]
#define PRINT(str) SerialUSB.print((const char*)str)
#define PRINTLN() SerialUSB.print("\\n");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);
$[[minStringTable]]

#include "meta.hpp"

namespace res {
$[[resources]]
}

$[[translated]]

void JSinit() {
  {
    js::Local args = js::arguments(0);
    js::call($[[main]], args, false);
    js::call($[[init]], args, false);
  }
  js::gc();
}

void JSupdate(uint32_t time, uint32_t updateCount) {
  PROFILER;
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, time);
    for (uint32_t i = 0; i < updateCount; ++i)
      js::call($[[update]], args, false);
    js::call($[[render]], args, false);
  }
}
`};let i;function literalToString(e,t){let r=e+"",n=-1;return"string"==typeof e||t?(-1==(n=i.stringTable.indexOf(r))&&(n=i.stringTable.length,i.stringTable.push(r)),r=`js::BufferRef{stringTable[${n}]}`):(0|e)!=e?r+="f":r=`int32_t(${r})`,t&&((t="V_"+(e+"").replace(/([^a-zA-Z_0-9])/g,(e,t)=>t.charCodeAt(0)))in i.minStringTable||(i.minStringTable[t]=r),r=t),r}function local(e){return e instanceof f.Literal?`{${encode(e)}}`:encode(e)}function encode(e,t){switch(e.constructor.name){case"Method":if(e.isNative&&e.name)return e.name;case"Var":return i.globals[e.id]?e.name:e.name?`_${e.id}/*${e.name}*/`:"_"+e.id;case"Literal":return literalToString(e.value,!!t);case"LookUp":var r=e.container||e.parent;if(r instanceof f.Var){if(r.read++,e.variable instanceof f.Literal&&(r.addDeref(e.variable.value),r==i.program.resources)){if(e.variable.value in i.program.resourceData)return`RESOURCEREF(${e.variable.value})`;throw"No resource named "+e.variable.value}return`js::get(${encode(r)}, ${encode(e.variable,!0)})`}if(r instanceof f.Scope)return encode(r.find(e.variable,!0))}return e.constructor.name}class CPP{constructor(){this.minStringTable={},this.globals={},this.stringTable=[],this.out=[],this.method=null,this.indent=0,this.stack=[],this.main=null,this.program=null,i=this,["","buffer","length","__proto__","this","undefined","[Object]","[Resource]","[Array]","[Function]","null","true","false","this","0","1","2","3","4","5","//new","//method"].forEach(e=>literalToString(e,!0))}error(e,t){throw new f.Error(e,t)}write(e){var t=this[e.constructor.name];if(t)return t.call(this,e);this.error("No writer for "+e.constructor.name,e.location)}Program(e){(i=this).program=e,this.main=e.main,this.out.push(this.write(e.main)),this.writeStringTable()}writeStringTable(){this.out.unshift(["","js::Buffer* const stringTable[] = ","{",this.stringTable.map((e,t)=>`(js::Buffer*) _str${t}.data()`).join(",\n  "),"};","",`const uint32_t stringTableSize = ${this.stringTable.length};`,""]),this.out.unshift([this.stringTable.map((e,t)=>{var r=JSON.stringify(e);return`STRDECL(_str${t}, ${e.length+1}, ${r});`})])}Break(e){return`goto ${e.target.label("failEnter")}; // break`}Continue(e){return`goto ${e.target.label("preLoop")}; // continue`}Return(e){return[this.Deref(),e.hasValue?`return {${encode(this.stack.pop())}};`:"return {};"]}Method(e){var t,r;this.out.unshift(`js::Local ${encode(e)}(js::Local&, bool);`),e.isNative||(t=this.method,r=["",`js::Local ${encode(this.method=e)}(js::Local& ${encode(e.args)}, bool isNew)`],this.out.push(r),r.push(this.Scope(e,!0)),this.method=t)}declare(e){return"capture"==e.kind?`js::Tagged& ${encode(e)} = *js::getTaggedPtr(js::to<js::Object*>(${encode(this.method.args)}), ${literalToString(e.name,!0)}, true);`:e.isCaptured()?`js::Tagged& ${encode(e)} = *js::set(${encode(this.method.context)}, ${literalToString(e.name,!0)}, {});`:`js::Local ${encode(e)}; // `+e.kind}Scope(e,t){var r,n,i,s=[],a=[],o=["// begin "+e.debug,e.transparent?"":"{",a,s],u=[e.transparent?"":"}","// end "+e.debug],l=e.children.map(e=>this.write(e)),c=(!t||(t=e.children[e.children.length-1])&&t instanceof f.Return||l.push("return {};"),e.preEnter&&o.push(this.Scope(e.preEnter,!1)),e.loopCondition?(t=e.label("enterCondition"),i=e.label("failEnter"),r=e.label("preLoop"),o.push(t+":;"),e.enterCondition&&(o.push(this.write(e.enterCondition)),o.push(this.Deref()),o.push(`if (!js::to<bool>(${encode(this.stack.pop())})) goto ${i};`)),e.hasContinue&&l.push(r+":;"),e.preLoop&&(l.push(this.write(e.preLoop)),this.stack.pop()),e.loopCondition&&e.loopCondition.children[0]&&((r=e.loopCondition.children[0])instanceof f.Literal&&r.value?l.push(`goto ${t};`):r instanceof f.Literal&&!r.value||(l.push(this.write(e.loopCondition)),l.push(`if (js::to<bool>(${encode(this.stack.pop())})) goto ${t};`))),u.unshift(i+":;")):e.enterCondition&&(o.push(this.write(e.enterCondition)),o.push(this.Deref()),r=e.label("failEnter"),o.push(`if (!js::to<bool>(${encode(this.stack.pop())})) goto ${r};`),e.failEnter?(t=e.label("afterFail"),u.unshift([`goto ${t};`,r+":;",this.write(e.failEnter),t+":;"])):u.push(r+":;")),{}),h=(c[e.method.args.id]=e.method.args,e.context&&(c[e.context.id]=e.context,a.push(this.declare(e.context)),a.push(`${encode(e.context)} = js::alloc(${Object.keys(e.captured).length});`)),e.index);for(n in h){var p,d=h[n];!(d.id in c)&&d instanceof f.Var&&(c[d.id]=d,p=this.declare(d),e==this.main&&d.name?this.out.unshift(p):s.push(p))}return e instanceof f.Method&&(s.unshift("PROFILER;"),(i=e.index.this).read||i.write)&&s.push(`js::initThis(${encode(e.index.this)}, ${encode(e.args)}, ${e.guessObjectSize()}, isNew);`),[o,l,u]}LookUp(e){this.stack.push(e)}Literal(e){this.stack.push(e)}Deref(){var e=this.stack.pop();if(e instanceof f.LookUp){var t=e.container||e.parent;if(t instanceof f.Var)return r=new f.Var,this.method.add(r),this.stack.push(r),`${encode(r)} = ${encode(e)};`;if(t instanceof f.Scope){var r=t.find(e.variable,!0);if(r||this.error(`ReferenceError: ${e.variable} is not defined`,e.location),this.stack.push(r),r instanceof f.Method)return this.Deref()}else this.error("Null context in lookup")}else{if(e instanceof f.Method&&e.captures)return r=encode(t=new f.Var),this.method.add(t),this.stack.push(t),(t=[]).push(""+r+` = js::alloc(1, ${encode(this.method.context)});`),t.push(`js::set(${r}, V_4747method, ${encode(e)});`),t;this.stack.push(e)}}Pop(){this.stack.pop()}AssignmentExpression(e){let t=this.stack.pop();t||this.error("Missing right-hand side for "+e.operator);var r=this.stack.pop(),n=(r||this.error("Missing left-hand side for "+e.operator+encode(t)),r instanceof f.LookUp||this.error("Invalid assignment left-hand side "+encode(r)),r.container||r.parent),i=[];return"="!=e.operator&&(this.stack.push(r),i.push(this.Deref()),this.stack.push(t),i.push(this.BinaryExpression(e)),t=this.stack.pop()),n instanceof f.Var?(n.read++,r.variable instanceof f.Literal?(n.addDeref(r.variable.value),i.push(`js::set(${encode(n)}, ${encode(r.variable,!0)}, ${encode(t)});`)):i.push(`js::set(${encode(n)}, ${encode(r.variable)}, ${encode(t)});`)):n instanceof f.Scope&&((e=n.find(r.variable,!0))||this.error(`Variable ${r.variable} not defined`),i.push(`${encode(e)} = ${encode(t)};`),e.write++),this.stack.push(t),i}UnaryExpression(e){var t=this.stack.pop(),r=new f.Var,n=(e.parent.method.add(r),{true:{"++":"preinc","--":"predec","!":"not","-":"neg","+":"pos"},false:{"++":"inc","--":"dec"}}[!!e.prefix][e.operator]);return this.stack.push(r),`js::op_${n}(${encode(r)}, ${encode(t)}); // `+e.operator}BinaryExpression(e){var t=[],r=this.stack.pop(),n=(t.push(this.Deref()),this.stack.pop());switch(e.operator){case".":case"[]":var i=new f.LookUp(r);return i.container=n,this.stack.push(i),t}var s=new f.Var;e.parent.add(s),this.stack.push(s),s.write++;return t.push(`js::op_${{"+":"add","-":"sub","*":"mul","%":"mod","/":"div","<":"lt","<=":"leq",">":"gt",">=":"geq","!=":"neq","==":"eq","===":"seq","!==":"sneq","|":"or","&":"and","^":"xor","<<":"shl",">>":"shr",">>>":"sru","+=":"add","-=":"sub","*=":"mul","%=":"mod","/=":"div","|=":"or","&=":"and","^=":"xor","<<=":"shl",">>=":"shr",">>>=":"sru"}[e.operator]||e.operator}(${encode(s)}, ${local(n)}, ${local(r)});`),t}Array(t){var e=new f.Var,r=(this.method.add(e),e.write++,[]),n=[],i=encode(e);r.push(`${i} = js::arguments(${t.length});`),r.push(n);for(let e=0;e<t.length;++e)n[t.length-e-1]=`js::set(${i}, ${literalToString(t.length-e-1,!0)}, ${encode(this.stack.pop())});`;return this.stack.push(e),r}Objekt(t){var e=new f.Var,r=(this.method.add(e),e.write++,[]),n=[],i=encode(e);r.push(`${i} = js::alloc(${t.length});`),r.push(n);for(let e=0;e<t.length;++e){var s=this.stack.pop(),a=this.stack.pop();n[t.length-e-1]=`js::set(${i}, ${literalToString(a.variable,!0)}, ${encode(s)});`}return this.stack.push(e),r}CallExpression(t){if(t.isForward){const s=this.stack.pop(),o=encode(s);return`js::call(${o}, ${encode(this.method.args)}, false);`}var e,r=this.method.temporaries.pop(),n=(r||(r=new f.Var,this.method.add(r)),t.discardResult||(e=new f.Var,this.method.add(e)),[]),i=encode(r);for(let e=0;e<t.argc;++e)n[t.argc-e-1]=`js::set(${i}, ${literalToString(t.argc-e-1,!0)}, ${encode(this.stack.pop())});`;const s=this.stack.pop();this.stack.push(s),n.push(this.Deref());let a=t.argc;const o=encode(this.stack.pop());t.isNew?a++:s.container&&(n.push(`js::set(${i}, V_this, ${encode(s.container)});`),a++),this.stack.push(e),this.method.temporaries.push(r);r=e?encode(e)+" = ":"";return[`${i} = js::arguments(${a});`,n,r+`js::call(${o}, ${i}, ${t.isNew});`,i+".reset();"]}toString(e){let n=Object.keys(this.minStringTable).map(e=>`#define ${e} `+this.minStringTable[e]).join("\n"),i="";return toString.call(this,this.out),(s[e]||s.std).replace(/\$\[\[([^\]]+)\]\]/g,(e,t)=>{if("minStringTable"==t)return n;if("translated"==t)return i;if("resources"==t)return Object.keys(this.program.resourceData).map(e=>{var r=this.program.resourceData[e];if(!r)return"// RESOURCEDECL(${res}); // built-in";var n=[];for(let e=0,t=r.length;e<t;e+=2)n.push(parseInt(r.substr(e,2),16));return`RESOURCEDECL(${e}) = {${n.join(",")}};`}).join("\n");let r=this.main;return(r="main"!=t?this.main.find(t,!0):r)||this.error("Could not find "+t),encode(r)});function toString(r){for(let e=0,t=r.length;e<t;++e){var n=r[e];"string"==typeof n?("}"==n[0]&&this.indent--,i=(i+="    ".repeat(this.indent))+n+"\n","{"==n&&this.indent++):void 0!==n&&toString.call(this,n)}}}}},{"./IR.js":1}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dataProg=function dataProg(e,t,r,n){r=r.split("/").pop().split(".")[0];return t.resourceData[r]=e,t}},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.esAST=function esAST(e,t,r){var n="object"==typeof i&&i.esprima?i.esprima:s,n=n.parse(e,{loc:!0});return n.file=r,n},i.esProg=function esProg(e,t,r,n){a=n;n=new ProgramParser(t);return n.location.file=e.file,n.parse(e),t.sourceAST.unshift(e),t};var s=_interopRequireWildcard(e("./node_modules/esprima/dist/esprima.js")),o=_interopRequireWildcard(e("./IR.js"));function _getRequireWildcardCache(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(_getRequireWildcardCache=function(e){return e?r:t})(e))}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var r,n,i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((n=s?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r]);return i.default=e,t&&t.set(e,i),i}let a;class ProgramParser{constructor(e){this.program=e,this.scope=null,this.location=new o.Location,this.node=null,this.discardResult=0,this.scopeStack=[],this.parse=(e,...t)=>{var r,n=this[e.type];if(n)return r=this.node,this.setNode(e),n=n.call(this,e,...t),this.setNode(r),n;throw console.error("Don't know how to parse "+e.type+" inside",this.node?this.node.type:"null"),console.log(JSON.stringify(e,0,4)),new o.Error("Internal error",this.location)}}getNodeLocation(e){return e&&e.loc&&e.loc.start?new o.Location(this.location.file,e.loc.start.line,e.loc.start.column):this.location.clone()}setNode(e){(this.node=e)&&e.loc&&e.loc.start&&(this.location.column=e.loc.start.column,this.location.line=e.loc.start.line)}error(e){throw new o.Error(e,this.location)}push(e,t){this.scopeStack.push(e);var r=this.scope;t(this.scope=e),this.scope=r,this.scopeStack.pop()}Program(t){this.push(this.program.main,e=>{t.body.forEach(e=>this.parse(e))})}BreakStatement(t){for(let e=this.scopeStack.length-1;-1<e;--e){var r=this.scopeStack[e];if(r.breakable&&(!t.label||r.name==t.label.name))return r.hasBreak=!0,void this.scope.add(new o.Break(r))}}ContinueStatement(t){for(let e=this.scopeStack.length-1;-1<e;--e){var r=this.scopeStack[e];if(r.continuable&&(!t.label||r.name==t.label.name))return r.hasContinue=!0,void this.scope.add(new o.Continue(r))}}BlockStatement(r,e=null){this.discardResult=1,e||(e=new o.Scope,this.scope.add(e)),this.push(e,e=>{for(var t of r.body)if(this.parse(t),a.opts.cancel){a.opts.cancel=!1;break}})}LabeledStatement(e,t){this.discardResult=1,(t=t||new o.Scope).name=e.label.name,this.parse(e.body,t)}IfStatement(t,r){r=r||new o.Scope,this.scope.add(r),r.debug="if",this.push(r.addEnterCondition(),e=>{this.discardResult=0,this.parse(t.test),this.discardResult=1}),t.alternate&&this.push(r.addFailEnter(),e=>{this.parse(t.alternate)}),this.push(r,e=>{this.parse(t.consequent,r)})}WhileStatement(t,r){r=r||new o.Scope,this.scope.add(r),r.continuable=!0,r.breakable=!0,this.push(r.addEnterCondition(),e=>{this.discardResult=0,this.parse(t.test),this.discardResult=1}),this.push(r.addLoopCondition(),e=>{this.scope.add(new o.Literal(!0))}),this.push(r,e=>{this.parse(t.body,r)})}ForOfStatement(i,s){s=s||new o.Scope,this.scope.add(s),s.continuable=!0,s.breakable=!0,s.debug="forOf",this.push(s,e=>{const t=new o.Var,r=(s.add(t),new o.Var);s.add(r);let n;this.push(s.addPreEnter(),e=>{e.add(new o.LookUp(r.id)),e.add(new o.Literal(0)),e.add(new o.AssignmentExpression("=")),e.add(new o.Pop),e.add(new o.LookUp(t.id)),this.parse(i.right),e.add(new o.AssignmentExpression("=")),e.add(new o.Pop),this.parse(i.left),(n=e.find(i.left.declarations[0].id.name,!0))||this.error("Could not find iterator "+i.left.declarations[0].id.name)}),this.push(s.addEnterCondition(),e=>{e.add(new o.LookUp(r.id)),e.add(new o.LookUp(t.id)),e.add(new o.Deref),e.add(new o.Literal("length")),e.add(new o.BinaryExpression(".")),e.add(new o.BinaryExpression("<"))}),this.push(s.addPreLoop(),e=>{e.add(new o.LookUp(r.id)),e.add(new o.Literal(1)),e.add(new o.AssignmentExpression("+=")),e.add(new o.Pop)}),this.push(s.addLoopCondition(),e=>{e.add(new o.Literal(!0))}),s.add(new o.LookUp(n.id)),s.add(new o.LookUp(t.id)),s.add(new o.Deref),s.add(new o.LookUp(r.id)),s.add(new o.Deref),s.add(new o.BinaryExpression(".")),s.add(new o.AssignmentExpression("=")),this.parse(i.body,s)})}ForStatement(t,r){r=r||new o.Scope,this.scope.add(r),r.continuable=!0,r.breakable=!0,this.push(r,e=>{t.init&&this.push(r.addPreEnter(),e=>{this.parse(t.init)}),t.test&&this.push(r.addEnterCondition(),e=>{this.discardResult=0,this.parse(t.test),this.discardResult=1}),t.update&&this.push(r.addPreLoop(),e=>{this.parse(t.update)}),this.push(r.addLoopCondition(),e=>{this.scope.add(new o.Literal(!0))}),this.parse(t.body,r)})}DoWhileStatement(t,r){r=r||new o.Scope,this.scope.add(r),r.continuable=!0,r.breakable=!0,this.push(r.addLoopCondition(),e=>{this.discardResult=0,this.parse(t.test),this.discardResult=1}),this.push(r,e=>{this.parse(t.body,r)})}VariableDeclaration(t){t.declarations.forEach(e=>this.parse(e,t.kind))}VariableDeclarator(e,t){var r=e.id,n=("Identifier"!=r.type&&this.error("Unsupported initializer type: "+r.type),"var"==t?this.scope.method:this.scope),i=n.find(r.name,!1);i?"var"==t&&"var"==i.kind||this.error("redeclaration of "+i.kind+" "+i.name):n.add(new o.Var(t,r.name,this.location.clone())),e.init&&(this.discardResult=0,this.parse({type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:r.name},right:e.init}),this.scope.add(new o.Pop),this.discardResult=1)}ClassDeclaration(t){var e,r,n=new o.Method(t.id?t.id.name:void 0),i=(n.isClass=!0,this.scope.add(n),this.push(n,e=>{this.parse(t.body)}),n.index.this),s={};for(e in n.index){var a=n.index[e];!(a.id in s)&&a instanceof o.Method&&((s[a.id]=a).index.this,i.addDeref(a.name),n.add(new o.LookUp("this")),n.add(new o.Deref),n.add(new o.Literal(a.name)),n.add(new o.BinaryExpression(".")),n.add(new o.LookUp(a.id)),n.add(new o.AssignmentExpression("=")),n.add(new o.Pop))}n.index.constructor&&(((r=new o.LookUp("constructor")).container=n).add(r),n.add(new o.CallExpression(0,!0,!0,this.discardResult)))}ClassBody(e){e.body.forEach(e=>this.parse(e))}EmptyStatement(e){}AssignmentExpression(e){this.discardResult=0,this.parse(e.left),this.parse(e.right),this.scope.add(new o.Deref),this.scope.add(new o.AssignmentExpression(e.operator))}ExpressionStatement(e){"Literal"==e.expression.type&&"string"==typeof e.expression.value?a.pragma(e.expression.value):(this.discardResult=1,this.parse(e.expression),this.scope.add(new o.Pop))}ReturnStatement(e){this.discardResult=0,e.argument&&this.parse(e.argument),this.scope.add(new o.Return(!!e.argument))}Identifier(e){this.scope.add(new o.LookUp(e.name))}ThisExpression(e){this.scope.add(new o.LookUp("this"))}ObjectExpression(e){e.properties.forEach(e=>{this.parse(e.key),this.parse(e.value)}),this.scope.add(new o.Objekt(e.properties.length,!1))}ArrayExpression(e){e.elements.forEach(e=>{this.parse(e)}),this.scope.add(new o.Array(e.elements.length))}Literal(e){this.scope.add(new o.Literal(e.value))}UnaryExpression(e){this.parse(e.argument),this.scope.add(new o.UnaryExpression(e.operator,e.prefix))}UpdateExpression(e){this.discardResult=0,this.parse(e.argument),this.scope.add(new o.UnaryExpression(e.operator,e.prefix))}BinaryExpression(e){this.parse(e.left),this.scope.add(new o.Deref),this.parse(e.right),this.scope.add(new o.Deref),this.scope.add(new o.BinaryExpression(e.operator)),"."==e.operator&&console.log(e)}LogicalExpression(t){"&&"!=t.operator&&"||"!=t.operator&&this.error("Unimplemented operator "+t.operator);const r=new o.Var("var"),n=(this.scope.add(r),this.scope.add(new o.LookUp(r.id)),this.parse(t.left),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop),new o.Scope);n.debug=t.operator,this.scope.add(n),this.push(n,e=>{this.push(n.addEnterCondition(),e=>{this.scope.add(new o.LookUp(r.id))}),this.push("&&"==t.operator?n:n.addFailEnter(),e=>{this.scope.add(new o.LookUp(r.id)),this.parse(t.right),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop)})}),this.scope.add(new o.LookUp(r.id))}MemberExpression(e){this.parse(e.object),this.scope.add(new o.Deref),e.computed?this.parse(e.property):this.scope.add(new o.Literal(e.property.name)),this.scope.add(new o.BinaryExpression(e.computed?"[]":"."))}CallExpression(e,t){var r=this.discardResult;this.discardResult=0,this.parse(e.callee),e.arguments.forEach(e=>{this.parse(e),this.scope.add(new o.Deref)}),this.scope.add(new o.CallExpression(e.arguments.length,!!t,!1,r))}NewExpression(e){this.CallExpression(e,!0)}ArrowFunctionExpression(e){e=this.FunctionDeclaration(e,!0);this.scope.add(new o.LookUp(e.id))}FunctionExpression(e){e=this.FunctionDeclaration(e);this.scope.add(new o.LookUp(e.id))}MethodDefinition(e){this.FunctionDeclaration(e.value,e.key.name)}FunctionDeclaration(t,e){const a=new o.Method(e||(t.id?t.id.name:void 0));return this.scope.add(a),this.push(a,e=>{let r=!1,n=!1,i=(t.params.forEach((e,t)=>{"AssignmentPattern"==e.type&&(r=!0),"arguments"==e.name&&(n=!0)}),a.args);n&&(i=new o.Var("var","arguments"),this.scope.add(i));const s=r?new o.Var("var"):null;s?(this.scope.add(s),this.scope.add(new o.LookUp(s.id)),this.scope.add(new o.LookUp(i.id)),n&&(this.scope.add(new o.LookUp(a.args.id)),this.scope.add(new o.AssignmentExpression("="))),this.scope.add(new o.Literal("length")),this.scope.add(new o.BinaryExpression(".")),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop)):n&&(this.scope.add(new o.LookUp(i.id)),this.scope.add(new o.LookUp(a.args.id)),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop)),t.params.forEach((t,r)=>{const n=new o.Var("var",t.name,this.getNodeLocation(t));var e;"Identifier"==t.type?(this.scope.add(new o.LookUp(n.id)),this.scope.add(new o.LookUp(i.id)),this.scope.add(new o.Deref),this.scope.add(new o.Literal(r)),this.scope.add(new o.BinaryExpression(".")),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop)):"AssignmentPattern"==t.type&&(n.rename(t.left.name),this.scope.add(new o.LookUp(n.id)),this.scope.add(new o.LookUp(a.args.id)),this.scope.add(new o.Literal(r)),this.scope.add(new o.BinaryExpression(".")),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop),e=new o.Scope,this.scope.add(e),this.push(e.addEnterCondition(),e=>{this.scope.add(new o.LookUp(s.id)),this.scope.add(new o.Literal(r)),this.scope.add(new o.BinaryExpression("<="))}),this.push(e,e=>{this.scope.add(new o.LookUp(n.id)),this.parse(t.right),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop)})),this.scope.add(n)}),this.discardResult=0,this.parse(t.body,a),t.expression&&(this.scope.add(new o.Deref),this.scope.add(new o.Return(!0)))}),a}}},{"./IR.js":1,"./node_modules/esprima/dist/esprima.js":55}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jsWriter=function jsWriter(t,e){var r=Object.keys(t.resourceData).map(e=>{var r=t.resourceData[e];if(!r)return`//R.${e}; // built-in`;var n=[];for(let e=0,t=r.length;e<t;e+=2)n.push(parseInt(r.substr(e,2),16));return`R.${e} = Uint8Array.from([${n.join(",")}]);`}).join("\n");return r+"\n"+t.sourceAST.map(e=>function toString(e){return n.generate(e,{format:{indent:{style:""},quotes:"auto",compact:!0}})}(e)).join("\n")};!function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return;if(null===e||"object"!=typeof e&&"function"!=typeof e)return;t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var r,n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((s=i?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r])}n.default=e,t&&t.set(e,n)}(e("./IR.js"));function _getRequireWildcardCache(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(_getRequireWildcardCache=function(e){return e?r:t})(e))}e("esprima");const n=e("escodegen");e("esmangle")},{"./IR.js":1,escodegen:8,esmangle:15,esprima:55}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JSC=void 0;var n=e("./esProg.js"),i=e("./dataProg.js"),s=e("./cppWriter.js"),a=e("./jsWriter.js"),o=e("./jsonWriter.js"),u=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var r,n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var s;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((s=i?Object.getOwnPropertyDescriptor(e,r):null)&&(s.get||s.set)?Object.defineProperty(n,r,s):n[r]=e[r])}n.default=e,t&&t.set(e,n);return n}(e("./IR.js"));function _getRequireWildcardCache(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(_getRequireWildcardCache=function(e){return e?r:t})(e))}const l={cpp:s.cppWriter,json:o.jsonWriter,js:a.jsWriter},c={js:[n.esAST,n.esProg],raw:[i.dataProg]};r.JSC=class JSC{constructor(e){var t;this.program=new u.Program,this.opts={},this.dependencies={},this.reader=e,this.lock=!1;for(t of`
                debug, Array,
                rand,
                abs, floor, round, ceil, sqrt,
                cos, sin, atan2, tan,
                min, max,
                vectorLength, angleDifference
                `.trim().split(/\s*,\s*/))this.addSysCall(t)}write(e,t={}){var r=l[e];if(r)return r(this.program,Object.assign({},t,this.opts));throw new Error("No writer for format "+e)}process(){if(!this.lock){this.lock++;let e;do{for(var t in e=!1,this.dependencies){var r=this.dependencies[t];"string"==typeof r&&(console.log("Dependency ",t),e=!0,this.add(t,r),this.dependencies[t]=null)}}while(e);this.lock--}}add(t,e){var r=t.split(".").pop().toLowerCase(),n=c[r];if(!n)throw new Error("No transformer queue for "+r,new u.Location(t));let i=e;n.forEach(e=>i=e(i,this.program,t,this)||i)}pragma(e){var e=e.trim().split(" "),t=this[e[0]];t&&(e.shift(),t.apply(this,e))}include(e){e in this.dependencies||(this.dependencies[e]=this.reader(e))}ifeq(e,t){this.set("cancel",this.opts[e]!=t)}ifneq(e,t){this.set("cancel",this.opts[e]==t)}getOpt(e){return this.opts[e]}set(e,t){this.opts[e]=t}push(e,...t){let r=this.opts[e];r&&Array.isArray(r)||(r=[],this.opts[e]=r),r.push(...t)}registerBuiltinResource(...e){e.forEach(e=>{this.program.resourceData[e]=null})}addSysCall(...e){e.forEach(e=>{e=new u.Method(e);e.isNative=!0,this.program.main.add(e)})}}},{"./IR.js":1,"./cppWriter.js":2,"./dataProg.js":3,"./esProg.js":4,"./jsWriter.js":5,"./jsonWriter.js":7}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jsonWriter=function jsonWriter(e){return JSON.stringify(e,0,2)}},{}],8:[function(B,e,I){!function(k){!function(){!function(){"use strict";var i,f,m,l,a,o,c,h,p,d,u,S,g,A,y,s,v,_,C,e,t;function isStatement(e){return CodeGenerator.Statement.hasOwnProperty(e.type)}var w,r=B("estraverse"),b=B("esutils"),E=r.Syntax,F={"||":(w={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21}).LogicalOR,"&&":w.LogicalAND,"|":w.BitwiseOR,"^":w.BitwiseXOR,"&":w.BitwiseAND,"==":w.Equality,"!=":w.Equality,"===":w.Equality,"!==":w.Equality,is:w.Equality,isnt:w.Equality,"<":w.Relational,">":w.Relational,"<=":w.Relational,">=":w.Relational,in:w.Relational,instanceof:w.Relational,"<<":w.BitwiseSHIFT,">>":w.BitwiseSHIFT,">>>":w.BitwiseSHIFT,"+":w.Additive,"-":w.Additive,"*":w.Multiplicative,"%":w.Multiplicative,"/":w.Multiplicative,"**":w.Exponentiation},x=7,D=1;function getDefaultOptions(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function stringRepeat(e,t){var r="";for(t|=0;0<t;t>>>=1,e+=e)1&t&&(r+=e);return r}function endsWithLineTerminator(e){var t=e.length;return t&&b.code.isLineTerminator(e.charCodeAt(t-1))}function merge(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}function updateDeeply(e,t){var r,n;function isHashObject(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}for(r in t)t.hasOwnProperty(r)&&(isHashObject(n=t[r])?isHashObject(e[r])?updateDeeply(e[r],n):e[r]=updateDeeply({},n):e[r]=n);return e}function escapeRegExpCharacter(e,t){return 8232==(-2&e)?(t?"u":"\\u")+(8232===e?"2028":"2029"):10===e||13===e?(t?"":"\\")+(10===e?"n":"r"):String.fromCharCode(e)}function escapeString(e){for(var t,r,n,i="",s=0,a=0,o=0,u=e.length;o<u;++o){if(39===(t=e.charCodeAt(o)))++s;else if(34===t)++a;else if(47===t&&l)i+="\\";else{if(b.code.isLineTerminator(t)||92===t){i+=function escapeDisallowedCharacter(e){if(92===e)return"\\\\";if(10===e)return"\\n";if(13===e)return"\\r";if(8232===e)return"\\u2028";if(8233===e)return"\\u2029";throw new Error("Incorrectly classified character")}(t);continue}if(!b.code.isIdentifierPartES5(t)&&(l&&t<32||!l&&!h&&(t<32||126<t))){i+=function escapeAllowedCharacter(e,t){var r;return 8===e?"\\b":12===e?"\\f":9===e?"\\t":(r=e.toString(16).toUpperCase(),l||255<e?"\\u"+"0000".slice(r.length)+r:0!==e||b.code.isDecimalDigit(t)?11===e?"\\x0B":"\\x"+"00".slice(r.length)+r:"\\0")}(t,e.charCodeAt(o+1));continue}}i+=String.fromCharCode(t)}if(n=(r=!("double"===c||"auto"===c&&a<s))?"'":'"',!(r?s:a))return n+i+n;for(e=i,i=n,o=0,u=e.length;o<u;++o)(39===(t=e.charCodeAt(o))&&r||34===t&&!r)&&(i+="\\"),i+=String.fromCharCode(t);return i+n}function toSourceNodeWhenNeeded(e,t){if(!v)return Array.isArray(e)?function flattenToString(e){for(var t,r="",n=0,i=e.length;n<i;++n)t=e[n],r+=Array.isArray(t)?flattenToString(t):t;return r}(e):e;if(null==t){if(e instanceof i)return e;t={}}return null==t.loc?new i(null,null,v,e,t.name||null):new i(t.loc.start.line,t.loc.start.column,!0===v?t.loc.source||null:v,e,t.name||null)}function join(e,t){var r,n=toSourceNodeWhenNeeded(e).toString();return 0===n.length?[t]:0===(r=toSourceNodeWhenNeeded(t).toString()).length?[e]:(n=n.charCodeAt(n.length-1),r=r.charCodeAt(0),(43===n||45===n)&&n===r||b.code.isIdentifierPartES5(n)&&b.code.isIdentifierPartES5(r)||47===n&&105===r?[e,d||" ",t]:b.code.isWhiteSpace(n)||b.code.isLineTerminator(n)||b.code.isWhiteSpace(r)||b.code.isLineTerminator(r)?[e,t]:[e,d,t])}function addIndent(e){return[f,e]}function withIndent(e){var t=f;e(f+=m),f=t}function generateComment(e,t){var r;return"Line"===e.type?endsWithLineTerminator(e.value)?"//"+e.value:(r="//"+e.value,C||(r+="\n"),r):y.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)?function adjustMultilineComment(e,t){for(var r,n,i,s,a=e.split(/\r\n|[\r\n]/),o=Number.MAX_VALUE,u=1,l=a.length;u<l;++u){for(r=a[u],n=0;n<r.length&&b.code.isWhiteSpace(r.charCodeAt(n));)++n;n<o&&(o=n)}for(void 0!==t?(i=f,"*"===a[1][o]&&(t+=" "),f=t):(1&o&&--o,i=f),u=1,l=a.length;u<l;++u)s=toSourceNodeWhenNeeded(addIndent(a[u].slice(o))),a[u]=v?s.join(""):s;return f=i,a.join("\n")}("/*"+e.value+"*/",t):"/*"+e.value+"*/"}function addComments(e,t){var r,n,i,s,a,o,u,l,c,h,p,d;if(e.leadingComments&&0<e.leadingComments.length){if(s=t,C){for(t=[],l=(i=e.leadingComments[0]).extendedRange,c=i.range,0<(d=((p=_.substring(l[0],c[0])).match(/\n/g)||[]).length)?(t.push(stringRepeat("\n",d)),t.push(addIndent(generateComment(i)))):(t.push(p),t.push(generateComment(i))),h=c,r=1,n=e.leadingComments.length;r<n;r++)c=(i=e.leadingComments[r]).range,d=(_.substring(h[1],c[0]).match(/\n/g)||[]).length,t.push(stringRepeat("\n",d)),t.push(addIndent(generateComment(i))),h=c;d=(_.substring(c[1],l[1]).match(/\n/g)||[]).length,t.push(stringRepeat("\n",d))}else for(i=e.leadingComments[0],t=[],g&&e.type===E.Program&&0===e.body.length&&t.push("\n"),t.push(generateComment(i)),endsWithLineTerminator(toSourceNodeWhenNeeded(t).toString())||t.push("\n"),r=1,n=e.leadingComments.length;r<n;++r)endsWithLineTerminator(toSourceNodeWhenNeeded(u=[generateComment(i=e.leadingComments[r])]).toString())||u.push("\n"),t.push([f,u]);t.push([f,s])}if(e.trailingComments)if(C)l=(i=e.trailingComments[0]).extendedRange,c=i.range,0<(d=((p=_.substring(l[0],c[0])).match(/\n/g)||[]).length)?(t.push(stringRepeat("\n",d)),t.push(addIndent(generateComment(i)))):(t.push(p),t.push(generateComment(i)));else for(a=!endsWithLineTerminator(toSourceNodeWhenNeeded(t).toString()),o=stringRepeat(" ",function calculateSpaces(e){for(var t=e.length-1;0<=t&&!b.code.isLineTerminator(e.charCodeAt(t));--t);return e.length-1-t}(toSourceNodeWhenNeeded([f,t,m]).toString())),r=0,n=e.trailingComments.length;r<n;++r)i=e.trailingComments[r],a?(t=0===r?[t,m]:[t,o]).push(generateComment(i,o)):t=[t,addIndent(generateComment(i))],r===n-1||endsWithLineTerminator(toSourceNodeWhenNeeded(t).toString())||(t=[t,"\n"]);return t}function generateBlankLines(e,t,r){for(var n=0,i=e;i<t;i++)"\n"===_[i]&&n++;for(i=1;i<n;i++)r.push(p)}function parenthesize(e,t,r){return t<r?["(",e,")"]:e}function generateVerbatimString(e){for(var t=e.split(/\r\n|\n/),r=1,n=t.length;r<n;r++)t[r]=p+f+t[r];return t}function CodeGenerator(){}function generateIdentifier(e){return toSourceNodeWhenNeeded(e.name,e)}function generateAsyncPrefix(e,t){return e.async?"async"+(t?d||" ":d):""}function generateStarSuffix(e){return e.generator&&!y.moz.starlessGenerator?"*"+d:""}function generateMethodPrefix(e){var t=e.value,r="";return t.async&&(r+=generateAsyncPrefix(t,!e.computed)),t.generator&&(r+=generateStarSuffix(t)?"*":""),r}function generateInternal(e){var t=new CodeGenerator;if(isStatement(e))return t.generateStatement(e,D);if(function isExpression(e){return CodeGenerator.Expression.hasOwnProperty(e.type)}(e))return t.generateExpression(e,w.Sequence,x);throw new Error("Unknown node type: "+e.type)}CodeGenerator.prototype.maybeBlock=function(e,t){var r,n=this,i=!y.comment||!e.leadingComments;return e.type===E.BlockStatement&&i?[d,this.generateStatement(e,t)]:e.type===E.EmptyStatement&&i?";":(withIndent(function(){r=[p,addIndent(n.generateStatement(e,t))]}),r)},CodeGenerator.prototype.maybeBlockSuffix=function(e,t){var r=endsWithLineTerminator(toSourceNodeWhenNeeded(t).toString());return e.type!==E.BlockStatement||y.comment&&e.leadingComments||r?r?[t,f]:[t,p,f]:[t,d]},CodeGenerator.prototype.generatePattern=function(e,t,r){return e.type===E.Identifier?generateIdentifier(e):this.generateExpression(e,t,r)},CodeGenerator.prototype.generateFunctionParams=function(e){var t,r,n,i=!1;if(e.type!==E.ArrowFunctionExpression||e.rest||e.defaults&&0!==e.defaults.length||1!==e.params.length||e.params[0].type!==E.Identifier){for((n=e.type===E.ArrowFunctionExpression?[generateAsyncPrefix(e,!1)]:[]).push("("),e.defaults&&(i=!0),t=0,r=e.params.length;t<r;++t)i&&e.defaults[t]?n.push(this.generateAssignment(e.params[t],e.defaults[t],"=",w.Assignment,x)):n.push(this.generatePattern(e.params[t],w.Assignment,x)),t+1<r&&n.push(","+d);e.rest&&(e.params.length&&n.push(","+d),n.push("..."),n.push(generateIdentifier(e.rest))),n.push(")")}else n=[generateAsyncPrefix(e,!0),generateIdentifier(e.params[0])];return n},CodeGenerator.prototype.generateFunctionBody=function(e){var t,r=this.generateFunctionParams(e);return e.type===E.ArrowFunctionExpression&&(r.push(d),r.push("=>")),e.expression?(r.push(d),"{"===(t=this.generateExpression(e.body,w.Assignment,x)).toString().charAt(0)&&(t=["(",t,")"]),r.push(t)):r.push(this.maybeBlock(e.body,9)),r},CodeGenerator.prototype.generateIterationForStatement=function(e,t,r){var n=["for"+(t.await?(d||" ")+"await":"")+d+"("],i=this;return withIndent(function(){t.left.type===E.VariableDeclaration?withIndent(function(){n.push(t.left.kind+(d||" ")),n.push(i.generateStatement(t.left.declarations[0],0))}):n.push(i.generateExpression(t.left,w.Call,x)),n=join(n,e),n=[join(n,i.generateExpression(t.right,w.Assignment,x)),")"]}),n.push(this.maybeBlock(t.body,r)),n},CodeGenerator.prototype.generatePropertyKey=function(e,t){var r=[];return t&&r.push("["),r.push(this.generateExpression(e,w.Assignment,x)),t&&r.push("]"),r},CodeGenerator.prototype.generateAssignment=function(e,t,r,n,i){return w.Assignment<n&&(i|=1),parenthesize([this.generateExpression(e,w.Call,i),d+r+d,this.generateExpression(t,w.Assignment,i)],w.Assignment,n)},CodeGenerator.prototype.semicolon=function(e){return!S&&32&e?"":";"},merge(CodeGenerator.prototype,CodeGenerator.Statement={BlockStatement:function(i,s){var a,o,u=["{",p],l=this;return withIndent(function(){var e,t,r,n;for(0===i.body.length&&C&&2<(a=i.range)[1]-a[0]&&(o=_.substring(a[0]+1,a[1]-1),(u="\n"===o[0]?["{"]:u).push(o)),n=D,8&s&&(n|=16),e=0,t=i.body.length;e<t;++e)C&&(0===e&&(i.body[0].leadingComments&&(a=i.body[0].leadingComments[0].extendedRange,"\n"===(o=_.substring(a[0],a[1]))[0])&&(u=["{"]),i.body[0].leadingComments||generateBlankLines(i.range[0],i.body[0].range[0],u)),0<e)&&(i.body[e-1].trailingComments||i.body[e].leadingComments||generateBlankLines(i.body[e-1].range[1],i.body[e].range[0],u)),e===t-1&&(n|=32),r=i.body[e].leadingComments&&C?l.generateStatement(i.body[e],n):addIndent(l.generateStatement(i.body[e],n)),u.push(r),endsWithLineTerminator(toSourceNodeWhenNeeded(r).toString())||C&&e<t-1&&i.body[e+1].leadingComments||u.push(p),!C||e!==t-1||i.body[e].trailingComments||generateBlankLines(i.body[e].range[1],i.range[1],u)}),u.push([f,"}"]),u},BreakStatement:function(e,t){return e.label?"break "+e.label.name+this.semicolon(t):"break"+this.semicolon(t)},ContinueStatement:function(e,t){return e.label?"continue "+e.label.name+this.semicolon(t):"continue"+this.semicolon(t)},ClassBody:function(n,e){var i=["{",p],s=this;return withIndent(function(e){for(var t=0,r=n.body.length;t<r;++t)i.push(e),i.push(s.generateExpression(n.body[t],w.Sequence,x)),t+1<r&&i.push(p)}),endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())||i.push(p),i.push(f),i.push("}"),i},ClassDeclaration:function(e,t){var r,n=["class"];return e.id&&(n=join(n,this.generateExpression(e.id,w.Sequence,x))),e.superClass&&(r=join("extends",this.generateExpression(e.superClass,w.Unary,x)),n=join(n,r)),n.push(d),n.push(this.generateStatement(e.body,33)),n},DirectiveStatement:function(e,t){return y.raw&&e.raw?e.raw+this.semicolon(t):function escapeDirective(e){for(var t,r="double"===c?'"':"'",n=0,i=e.length;n<i;++n){if(39===(t=e.charCodeAt(n))){r='"';break}if(34===t){r="'";break}92===t&&++n}return r+e+r}(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,t){var r=join("do",this.maybeBlock(e.body,D));return join(this.maybeBlockSuffix(e.body,r),["while"+d+"(",this.generateExpression(e.test,w.Sequence,x),")"+this.semicolon(t)])},CatchClause:function(t,e){var r,n=this;return withIndent(function(){var e;t.param?(r=["catch"+d+"(",n.generateExpression(t.param,w.Sequence,x),")"],t.guard&&(e=n.generateExpression(t.guard,w.Sequence,x),r.splice(2,0," if ",e))):r=["catch"]}),r.push(this.maybeBlock(t.body,D)),r},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){return";"},ExportDefaultDeclaration:function(e,t){var r=32&t?33:D,n=join(n=["export"],"default");return n=isStatement(e.declaration)?join(n,this.generateStatement(e.declaration,r)):join(n,this.generateExpression(e.declaration,w.Assignment,x)+this.semicolon(t))},ExportNamedDeclaration:function(n,e){var i=["export"],s=this,t=32&e?33:D;return n.declaration?join(i,this.generateStatement(n.declaration,t)):(n.specifiers&&(0===n.specifiers.length?i=join(i,"{"+d+"}"):n.specifiers[0].type===E.ExportBatchSpecifier?i=join(i,this.generateExpression(n.specifiers[0],w.Sequence,x)):(i=join(i,"{"),withIndent(function(e){var t,r;for(i.push(p),t=0,r=n.specifiers.length;t<r;++t)i.push(e),i.push(s.generateExpression(n.specifiers[t],w.Sequence,x)),t+1<r&&i.push(","+p)}),endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())||i.push(p),i.push(f+"}")),n.source?i=join(i,["from"+d,this.generateExpression(n.source,w.Sequence,x),this.semicolon(e)]):i.push(this.semicolon(e))),i)},ExportAllDeclaration:function(e,t){return["export"+d,"*"+d,"from"+d,this.generateExpression(e.source,w.Sequence,x),this.semicolon(t)]},ExpressionStatement:function(e,t){var r,n;return 123===(n=toSourceNodeWhenNeeded(r=[this.generateExpression(e.expression,w.Sequence,x)]).toString()).charCodeAt(0)||function isClassPrefixed(e){return"class"===e.slice(0,5)&&(123===(e=e.charCodeAt(5))||b.code.isWhiteSpace(e)||b.code.isLineTerminator(e))}(n)||function isFunctionPrefixed(e){return"function"===e.slice(0,8)&&(40===(e=e.charCodeAt(8))||b.code.isWhiteSpace(e)||42===e||b.code.isLineTerminator(e))}(n)||function isAsyncPrefixed(e){var t,r,n;if("async"===e.slice(0,5)&&b.code.isWhiteSpace(e.charCodeAt(5))){for(r=6,n=e.length;r<n&&b.code.isWhiteSpace(e.charCodeAt(r));++r);return r!==n?"function"===e.slice(r,r+8)&&(40===(t=e.charCodeAt(r+8))||b.code.isWhiteSpace(t)||42===t||b.code.isLineTerminator(t)):void 0}}(n)||A&&16&t&&e.expression.type===E.Literal&&"string"==typeof e.expression.value?r=["(",r,")"+this.semicolon(t)]:r.push(this.semicolon(t)),r},ImportDeclaration:function(n,e){var i,s,a=this;return 0===n.specifiers.length?["import",d,this.generateExpression(n.source,w.Sequence,x),this.semicolon(e)]:(i=["import"],s=0,n.specifiers[s].type===E.ImportDefaultSpecifier&&(i=join(i,[this.generateExpression(n.specifiers[s],w.Sequence,x)]),++s),n.specifiers[s]&&(0!==s&&i.push(","),n.specifiers[s].type===E.ImportNamespaceSpecifier?i=join(i,[d,this.generateExpression(n.specifiers[s],w.Sequence,x)]):(i.push(d+"{"),n.specifiers.length-s==1?(i.push(d),i.push(this.generateExpression(n.specifiers[s],w.Sequence,x)),i.push(d+"}"+d)):(withIndent(function(e){var t,r;for(i.push(p),t=s,r=n.specifiers.length;t<r;++t)i.push(e),i.push(a.generateExpression(n.specifiers[t],w.Sequence,x)),t+1<r&&i.push(","+p)}),endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())||i.push(p),i.push(f+"}"+d)))),i=join(i,["from"+d,this.generateExpression(n.source,w.Sequence,x),this.semicolon(e)]))},VariableDeclarator:function(e,t){t=1&t?x:6;return e.init?[this.generateExpression(e.id,w.Assignment,t),d,"=",d,this.generateExpression(e.init,w.Assignment,t)]:this.generatePattern(e.id,w.Assignment,t)},VariableDeclaration:function(e,t){var r,n,i,s,a,o=this;function block(){for(s=e.declarations[0],y.comment&&s.leadingComments?(r.push("\n"),r.push(addIndent(o.generateStatement(s,a)))):(r.push(d||" "),r.push(o.generateStatement(s,a))),n=1,i=e.declarations.length;n<i;++n)s=e.declarations[n],y.comment&&s.leadingComments?(r.push(","+p),r.push(addIndent(o.generateStatement(s,a)))):(r.push(","+d),r.push(o.generateStatement(s,a)))}return r=[e.kind],a=1&t?D:0,1<e.declarations.length?withIndent(block):block(),r.push(this.semicolon(t)),r},ThrowStatement:function(e,t){return[join("throw",this.generateExpression(e.argument,w.Sequence,x)),this.semicolon(t)]},TryStatement:function(e,t){var r,n,i,s=["try",this.maybeBlock(e.block,D)];if(s=this.maybeBlockSuffix(e.block,s),e.handlers)for(r=0,n=e.handlers.length;r<n;++r)s=join(s,this.generateStatement(e.handlers[r],D)),!e.finalizer&&r+1===n||(s=this.maybeBlockSuffix(e.handlers[r].body,s));else{for(r=0,n=(i=e.guardedHandlers||[]).length;r<n;++r)s=join(s,this.generateStatement(i[r],D)),!e.finalizer&&r+1===n||(s=this.maybeBlockSuffix(i[r].body,s));if(e.handler)if(Array.isArray(e.handler))for(r=0,n=e.handler.length;r<n;++r)s=join(s,this.generateStatement(e.handler[r],D)),!e.finalizer&&r+1===n||(s=this.maybeBlockSuffix(e.handler[r].body,s));else s=join(s,this.generateStatement(e.handler,D)),e.finalizer&&(s=this.maybeBlockSuffix(e.handler.body,s))}return s=e.finalizer?join(s,["finally",this.maybeBlock(e.finalizer,D)]):s},SwitchStatement:function(e,t){var r,n,i,s,a,o=this;if(withIndent(function(){r=["switch"+d+"(",o.generateExpression(e.discriminant,w.Sequence,x),")"+d+"{"+p]}),e.cases)for(a=D,i=0,s=e.cases.length;i<s;++i)i===s-1&&(a|=32),n=addIndent(this.generateStatement(e.cases[i],a)),r.push(n),endsWithLineTerminator(toSourceNodeWhenNeeded(n).toString())||r.push(p);return r.push([f,"}"]),r},SwitchCase:function(e,t){var r,n,i,s,a,o=this;return withIndent(function(){for(r=e.test?[join("case",o.generateExpression(e.test,w.Sequence,x)),":"]:["default:"],i=0,(s=e.consequent.length)&&e.consequent[0].type===E.BlockStatement&&(n=o.maybeBlock(e.consequent[0],D),r.push(n),i=1),i===s||endsWithLineTerminator(toSourceNodeWhenNeeded(r).toString())||r.push(p),a=D;i<s;++i)i===s-1&&32&t&&(a|=32),n=addIndent(o.generateStatement(e.consequent[i],a)),r.push(n),i+1===s||endsWithLineTerminator(toSourceNodeWhenNeeded(n).toString())||r.push(p)}),r},IfStatement:function(e,t){var r,n,i=this;return withIndent(function(){r=["if"+d+"(",i.generateExpression(e.test,w.Sequence,x),")"]}),n=D,32&t&&(n|=32),e.alternate?(r.push(this.maybeBlock(e.consequent,D)),r=this.maybeBlockSuffix(e.consequent,r),r=e.alternate.type===E.IfStatement?join(r,["else ",this.generateStatement(e.alternate,n)]):join(r,join("else",this.maybeBlock(e.alternate,n)))):r.push(this.maybeBlock(e.consequent,n)),r},ForStatement:function(e,t){var r,n=this;return withIndent(function(){r=["for"+d+"("],e.init?e.init.type===E.VariableDeclaration?r.push(n.generateStatement(e.init,0)):(r.push(n.generateExpression(e.init,w.Sequence,6)),r.push(";")):r.push(";"),e.test&&(r.push(d),r.push(n.generateExpression(e.test,w.Sequence,x))),r.push(";"),e.update&&(r.push(d),r.push(n.generateExpression(e.update,w.Sequence,x))),r.push(")")}),r.push(this.maybeBlock(e.body,32&t?33:D)),r},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,32&t?33:D)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,32&t?33:D)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,32&t?33:D)]},Program:function(e,t){for(var r,n=e.body.length,i=[g&&0<n?"\n":""],s=17,a=0;a<n;++a)g||a!==n-1||(s|=32),C&&(0!==a||e.body[0].leadingComments||generateBlankLines(e.range[0],e.body[a].range[0],i),0<a)&&(e.body[a-1].trailingComments||e.body[a].leadingComments||generateBlankLines(e.body[a-1].range[1],e.body[a].range[0],i)),r=addIndent(this.generateStatement(e.body[a],s)),i.push(r),a+1<n&&!endsWithLineTerminator(toSourceNodeWhenNeeded(r).toString())&&(C&&e.body[a+1].leadingComments||i.push(p)),!C||a!==n-1||e.body[a].trailingComments||generateBlankLines(e.body[a].range[1],e.range[1],i);return i},FunctionDeclaration:function(e,t){return[generateAsyncPrefix(e,!0),"function",generateStarSuffix(e)||d||" ",e.id?generateIdentifier(e.id):"",this.generateFunctionBody(e)]},ReturnStatement:function(e,t){return e.argument?[join("return",this.generateExpression(e.argument,w.Sequence,x)),this.semicolon(t)]:["return"+this.semicolon(t)]},WhileStatement:function(e,t){var r,n=this;return withIndent(function(){r=["while"+d+"(",n.generateExpression(e.test,w.Sequence,x),")"]}),r.push(this.maybeBlock(e.body,32&t?33:D)),r},WithStatement:function(e,t){var r,n=this;return withIndent(function(){r=["with"+d+"(",n.generateExpression(e.object,w.Sequence,x),")"]}),r.push(this.maybeBlock(e.body,32&t?33:D)),r}}),merge(CodeGenerator.prototype,CodeGenerator.Expression={SequenceExpression:function(e,t,r){var n,i,s;for(w.Sequence<t&&(r|=1),n=[],i=0,s=e.expressions.length;i<s;++i)n.push(this.generateExpression(e.expressions[i],w.Assignment,r)),i+1<s&&n.push(","+d);return parenthesize(n,w.Sequence,t)},AssignmentExpression:function(e,t,r){return this.generateAssignment(e.left,e.right,e.operator,t,r)},ArrowFunctionExpression:function(e,t,r){return parenthesize(this.generateFunctionBody(e),w.ArrowFunction,t)},ConditionalExpression:function(e,t,r){return w.Conditional<t&&(r|=1),parenthesize([this.generateExpression(e.test,w.LogicalOR,r),d+"?"+d,this.generateExpression(e.consequent,w.Assignment,r),d+":"+d,this.generateExpression(e.alternate,w.Assignment,r)],w.Conditional,t)},LogicalExpression:function(e,t,r){return this.BinaryExpression(e,t,r)},BinaryExpression:function(e,t,r){var n,i=F[e.operator],s="**"===e.operator?w.Postfix:i,a="**"===e.operator?i:i+1;return i<t&&(r|=1),n=47===(n=(s=this.generateExpression(e.left,s,r)).toString()).charCodeAt(n.length-1)&&b.code.isIdentifierPartES5(e.operator.charCodeAt(0))?[s,d||" ",e.operator]:join(s,e.operator),s=this.generateExpression(e.right,a,r),"/"===e.operator&&"/"===s.toString().charAt(0)||"<"===e.operator.slice(-1)&&"!--"===s.toString().slice(0,3)?(n.push(d||" "),n.push(s)):n=join(n,s),"in"!==e.operator||1&r?parenthesize(n,i,t):["(",n,")"]},CallExpression:function(e,t,r){var n,i,s=[this.generateExpression(e.callee,w.Call,3)];for(e.optional&&s.push("?."),s.push("("),n=0,i=e.arguments.length;n<i;++n)s.push(this.generateExpression(e.arguments[n],w.Assignment,x)),n+1<i&&s.push(","+d);return s.push(")"),2&r?parenthesize(s,w.Call,t):["(",s,")"]},ChainExpression:function(e,t,r){return w.OptionalChaining<t&&(r|=2),parenthesize(this.generateExpression(e.expression,w.OptionalChaining,r),w.OptionalChaining,t)},NewExpression:function(e,t,r){var n,i,s=e.arguments.length,a=4&r&&!u&&0===s?5:1,o=join("new",this.generateExpression(e.callee,w.New,a));if(!(4&r)||u||0<s){for(o.push("("),n=0,i=s;n<i;++n)o.push(this.generateExpression(e.arguments[n],w.Assignment,x)),n+1<i&&o.push(","+d);o.push(")")}return parenthesize(o,w.New,t)},MemberExpression:function(e,t,r){var n=[this.generateExpression(e.object,w.Call,2&r?3:1)];return e.computed?(e.optional&&n.push("?."),n.push("["),n.push(this.generateExpression(e.property,w.Sequence,2&r?x:5)),n.push("]")):(e.optional||e.object.type!==E.Literal||"number"!=typeof e.object.value||(r=toSourceNodeWhenNeeded(n).toString()).indexOf(".")<0&&!/[eExX]/.test(r)&&b.code.isDecimalDigit(r.charCodeAt(r.length-1))&&!(2<=r.length&&48===r.charCodeAt(0))&&n.push(" "),n.push(e.optional?"?.":"."),n.push(generateIdentifier(e.property))),parenthesize(n,w.Member,t)},MetaProperty:function(e,t,r){var n=[];return n.push("string"==typeof e.meta?e.meta:generateIdentifier(e.meta)),n.push("."),n.push("string"==typeof e.property?e.property:generateIdentifier(e.property)),parenthesize(n,w.Member,t)},UnaryExpression:function(e,t,r){var n,i,s=this.generateExpression(e.argument,w.Unary,x);return""===d?n=join(e.operator,s):(n=[e.operator],2<e.operator.length?n=join(n,s):(e=(e=toSourceNodeWhenNeeded(n).toString()).charCodeAt(e.length-1),i=s.toString().charCodeAt(0),((43===e||45===e)&&e===i||b.code.isIdentifierPartES5(e)&&b.code.isIdentifierPartES5(i))&&n.push(d||" "),n.push(s))),parenthesize(n,w.Unary,t)},YieldExpression:function(e,t,r){var n=e.delegate?"yield*":"yield";return parenthesize(n=e.argument?join(n,this.generateExpression(e.argument,w.Yield,x)):n,w.Yield,t)},AwaitExpression:function(e,t,r){return parenthesize(join(e.all?"await*":"await",this.generateExpression(e.argument,w.Await,x)),w.Await,t)},UpdateExpression:function(e,t,r){return e.prefix?parenthesize([e.operator,this.generateExpression(e.argument,w.Unary,x)],w.Unary,t):parenthesize([this.generateExpression(e.argument,w.Postfix,x),e.operator],w.Postfix,t)},FunctionExpression:function(e,t,r){var n=[generateAsyncPrefix(e,!0),"function"];return e.id?(n.push(generateStarSuffix(e)||d||" "),n.push(generateIdentifier(e.id))):n.push(generateStarSuffix(e)||d),n.push(this.generateFunctionBody(e)),n},ArrayPattern:function(e,t,r){return this.ArrayExpression(e,t,r,!0)},ArrayExpression:function(n,e,t,r){var i,s,a=this;return n.elements.length?(s=!r&&1<n.elements.length,i=["[",s?p:""],withIndent(function(e){for(var t=0,r=n.elements.length;t<r;++t)n.elements[t]?(i.push(s?e:""),i.push(a.generateExpression(n.elements[t],w.Assignment,x))):(s&&i.push(e),t+1===r&&i.push(",")),t+1<r&&i.push(","+(s?p:d))}),s&&!endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())&&i.push(p),i.push(s?f:""),i.push("]"),i):"[]"},RestElement:function(e,t,r){return"..."+this.generatePattern(e.argument)},ClassExpression:function(e,t,r){var n,i=["class"];return e.id&&(i=join(i,this.generateExpression(e.id,w.Sequence,x))),e.superClass&&(n=join("extends",this.generateExpression(e.superClass,w.Unary,x)),i=join(i,n)),i.push(d),i.push(this.generateStatement(e.body,33)),i},MethodDefinition:function(e,t,r){var n=e.static?["static"+d]:[],e="get"===e.kind||"set"===e.kind?[join(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]:[generateMethodPrefix(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)];return join(n,e)},Property:function(e,t,r){return"get"===e.kind||"set"===e.kind?[e.kind,d||" ",this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:e.shorthand?"AssignmentPattern"===e.value.type?this.AssignmentPattern(e.value,w.Sequence,x):this.generatePropertyKey(e.key,e.computed):e.method?[generateMethodPrefix(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:[this.generatePropertyKey(e.key,e.computed),":"+d,this.generateExpression(e.value,w.Assignment,x)]},ObjectExpression:function(n,e,t){var i,s,a,o=this;return n.properties.length?(i=1<n.properties.length,withIndent(function(){a=o.generateExpression(n.properties[0],w.Sequence,x)}),i||function hasLineTerminator(e){return/[\r\n]/g.test(e)}(toSourceNodeWhenNeeded(a).toString())?(withIndent(function(e){var t,r;if(s=["{",p,e,a],i)for(s.push(","+p),t=1,r=n.properties.length;t<r;++t)s.push(e),s.push(o.generateExpression(n.properties[t],w.Sequence,x)),t+1<r&&s.push(","+p)}),endsWithLineTerminator(toSourceNodeWhenNeeded(s).toString())||s.push(p),s.push(f),s.push("}"),s):["{",d,a,d,"}"]):"{}"},AssignmentPattern:function(e,t,r){return this.generateAssignment(e.left,e.right,"=",t,r)},ObjectPattern:function(n,e,t){var i,r,s,a,o,u=this;if(!n.properties.length)return"{}";if(a=!1,1===n.properties.length)(o=n.properties[0]).type===E.Property&&o.value.type!==E.Identifier&&(a=!0);else for(r=0,s=n.properties.length;r<s;++r)if((o=n.properties[r]).type===E.Property&&!o.shorthand){a=!0;break}return i=["{",a?p:""],withIndent(function(e){for(var t=0,r=n.properties.length;t<r;++t)i.push(a?e:""),i.push(u.generateExpression(n.properties[t],w.Sequence,x)),t+1<r&&i.push(","+(a?p:d))}),a&&!endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())&&i.push(p),i.push(a?f:""),i.push("}"),i},ThisExpression:function(e,t,r){return"this"},Super:function(e,t,r){return"super"},Identifier:generateIdentifier,ImportDefaultSpecifier:function(e,t,r){return generateIdentifier(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,r){var n=["*"],e=e.id||e.local;return e&&n.push(d+"as"+(d||" ")+generateIdentifier(e)),n},ImportSpecifier:function(e,t,r){var n=e.imported,i=[n.name],e=e.local;return e&&e.name!==n.name&&i.push((d||" ")+"as"+(d||" ")+generateIdentifier(e)),i},ExportSpecifier:function(e,t,r){var n=e.local,i=[n.name],e=e.exported;return e&&e.name!==n.name&&i.push((d||" ")+"as"+(d||" ")+generateIdentifier(e)),i},Literal:function(e,t,r){var n;if(e.hasOwnProperty("raw")&&s&&y.raw)try{if((n=s(e.raw).body[0].expression).type===E.Literal&&n.value===e.value)return e.raw}catch(e){}return e.regex?"/"+e.regex.pattern+"/"+e.regex.flags:null===e.value?"null":"string"==typeof e.value?escapeString(e.value):"number"==typeof e.value?function generateNumber(e){var t,r,n,i,s;if(e!=e)throw new Error("Numeric literal whose value is NaN");if(e<0||0===e&&1/e<0)throw new Error("Numeric literal whose value is negative");if(e===1/0)return l?"null":a?"1e400":"1e+400";if(t=""+e,a&&!(t.length<3)){for(r=t.indexOf("."),l||48!==t.charCodeAt(0)||1!==r||(r=0,t=t.slice(1)),t=(n=t).replace("e+","e"),(i=0)<(s=n.indexOf("e"))&&(i=+n.slice(s+1),n=n.slice(0,s)),0<=r&&(i-=n.length-r-1,n=+(n.slice(0,r)+n.slice(r+1))+""),s=0;48===n.charCodeAt(n.length+s-1);)--s;0!==s&&(i-=s,n=n.slice(0,s)),0!==i&&(n+="e"+i),(n.length<t.length||o&&1e12<e&&Math.floor(e)===e&&(n="0x"+e.toString(16)).length<t.length)&&+n===e&&(t=n)}return t}(e.value):"boolean"==typeof e.value?e.value?"true":"false":function generateRegExp(e){var t,r,n,i,s,a,o=e.toString();if(e.source){if(!(t=o.match(/\/([^/]*)$/)))return o;for(t=t[1],o="",a=s=!1,r=0,n=e.source.length;r<n;++r)i=e.source.charCodeAt(r),a=a?(o+=escapeRegExpCharacter(i,a),!1):(s?93===i&&(s=!1):47===i?o+="\\":91===i&&(s=!0),o+=escapeRegExpCharacter(i,a),92===i);return"/"+o+"/"+t}return o}(e.value)},GeneratorExpression:function(e,t,r){return this.ComprehensionExpression(e,t,r)},ComprehensionExpression:function(e,t,r){var n,i,s,a=this,o=e.type===E.GeneratorExpression?["("]:["["];return y.moz.comprehensionExpressionStartsWithAssignment&&(s=this.generateExpression(e.body,w.Assignment,x),o.push(s)),e.blocks&&withIndent(function(){for(n=0,i=e.blocks.length;n<i;++n)s=a.generateExpression(e.blocks[n],w.Sequence,x),0<n||y.moz.comprehensionExpressionStartsWithAssignment?o=join(o,s):o.push(s)}),e.filter&&(o=join(o,"if"+d),s=this.generateExpression(e.filter,w.Sequence,x),o=join(o,["(",s,")"])),y.moz.comprehensionExpressionStartsWithAssignment||(s=this.generateExpression(e.body,w.Assignment,x),o=join(o,s)),o.push(e.type===E.GeneratorExpression?")":"]"),o},ComprehensionBlock:function(e,t,r){var n=e.left.type===E.VariableDeclaration?[e.left.kind,d||" ",this.generateStatement(e.left.declarations[0],0)]:this.generateExpression(e.left,w.Call,x);return n=join(n,e.of?"of":"in"),n=join(n,this.generateExpression(e.right,w.Sequence,x)),["for"+d+"(",n,")"]},SpreadElement:function(e,t,r){return["...",this.generateExpression(e.argument,w.Assignment,x)]},TaggedTemplateExpression:function(e,t,r){var n=3;return parenthesize([this.generateExpression(e.tag,w.Call,n=2&r?n:1),this.generateExpression(e.quasi,w.Primary,4)],w.TaggedTemplate,t)},TemplateElement:function(e,t,r){return e.value.raw},TemplateLiteral:function(e,t,r){for(var n=["`"],i=0,s=e.quasis.length;i<s;++i)n.push(this.generateExpression(e.quasis[i],w.Primary,x)),i+1<s&&(n.push("${"+d),n.push(this.generateExpression(e.expressions[i],w.Sequence,x)),n.push(d+"}"));return n.push("`"),n},ModuleSpecifier:function(e,t,r){return this.Literal(e,t,r)},ImportExpression:function(e,t,r){return parenthesize(["import(",this.generateExpression(e.source,w.Assignment,x),")"],w.Call,t)}}),CodeGenerator.prototype.generateExpression=function(e,t,r){var n=e.type||E.Property;return y.verbatim&&e.hasOwnProperty(y.verbatim)?function generateVerbatim(e,t){var r=e[y.verbatim],n="string"==typeof r?parenthesize(generateVerbatimString(r),w.Sequence,t):parenthesize(n=generateVerbatimString(r.content),null!=r.precedence?r.precedence:w.Sequence,t);return toSourceNodeWhenNeeded(n,e)}(e,t):(n=this[n](e,t,r),toSourceNodeWhenNeeded(n=y.comment?addComments(e,n):n,e))},e={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!(CodeGenerator.prototype.generateStatement=function(e,t){var t=this[e.type](e,t),r=toSourceNodeWhenNeeded(t=y.comment?addComments(e,t):t).toString();return e.type!==E.Program||g||""!==p||"\n"!==r.charAt(r.length-1)||(t=v?toSourceNodeWhenNeeded(t).replaceRight(/\s+$/,""):r.replace(/\s+$/,"")),toSourceNodeWhenNeeded(t,e)}),semicolons:!1},t=getDefaultOptions().format,I.version=B("./package.json").version,I.generate=function generate(e,t){var r,n=getDefaultOptions();return f=null!=t?("string"==typeof t.indent&&(n.format.indent.style=t.indent),"number"==typeof t.base&&(n.format.indent.base=t.base),t=updateDeeply(n,t),m=t.format.indent.style,"string"==typeof t.base?t.base:stringRepeat(m,t.format.indent.base)):stringRepeat(m=(t=n).format.indent.style,t.format.indent.base),l=t.format.json,a=t.format.renumber,o=!l&&t.format.hexadecimal,c=l?"double":t.format.quotes,h=t.format.escapeless,p=t.format.newline,d=t.format.space,t.format.compact&&(p=d=m=f=""),u=t.format.parentheses,S=t.format.semicolons,g=t.format.safeConcatenation,A=t.directive,s=l?null:t.parse,v=t.sourceMap,_=t.sourceCode,C=t.format.preserveBlankLines&&null!==_,y=t,v&&(i=(I.browser?k.sourceMap:B("source-map")).SourceNode),n=generateInternal(e),v?(r=n.toStringWithSourceMap({file:t.file,sourceRoot:t.sourceMapRoot}),t.sourceContent&&r.map.setSourceContent(t.sourceMap,t.sourceContent),t.sourceMapWithCode?r:r.map.toString()):(r={code:n.toString(),map:null},t.sourceMapWithCode?r:r.code)},I.attachComments=r.attachComments,I.Precedence=updateDeeply({},w),I.browser=!1,I.FORMAT_MINIFY=e,I.FORMAT_DEFAULTS=t}()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./package.json":9,estraverse:62,esutils:66,"source-map":77}],9:[function(e,t,r){t.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:"2.0.0",engines:{node:">=6.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^5.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies:{"source-map":"~0.6.1"},devDependencies:{acorn:"^7.3.1",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^4.2.0","chai-exclude":"^2.0.2","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}},{}],10:[function(e,t,i){!function(r,n){"use strict";"function"==typeof define&&define.amd?define("escope",["exports","estraverse"],function(e,t){r(e,n,t)}):void 0!==i?r(i,n,e("estraverse")):r(function namespace(e,t){for(var r,n=e.split("."),i=0,s=n.length;i<s;++i)r=n[i],t=t.hasOwnProperty(r)?t[r]:t[r]={};return t}("escope",n),n,n.estraverse)}(function(e,t,r){"use strict";var o,n,a,i,u;function assert(e,t){if(!e)throw new Error(t)}function Reference(e,t,r,n,i){this.identifier=e,this.from=t,this.tainted=!1,this.resolved=null,this.flag=r,this.isWrite()&&(this.writeExpr=n),this.__maybeImplicitGlobal=i}function Variable(e,t){this.name=e,this.identifiers=[],this.references=[],this.defs=[],this.tainted=!1,this.stack=!0,this.scope=t}function Scope(e,t){this.type=e.type===o.CatchClause?"catch":e.type===o.WithStatement?"with":e.type===o.Program?"global":"function",this.set=new n,this.taints=new n,this.dynamic="global"===this.type||"with"===this.type,this.block=e,this.through=[],this.variables=[],this.references=[],this.left=[],this.variableScope="global"===this.type||"function"===this.type?this:a.variableScope,this.functionExpressionScope=!1,this.directCallToEvalScope=!1,this.thisFound=!1,"function"===this.type&&e.body,t.naming?(this.__define(e.id,{type:Variable.FunctionName,name:e.id,node:e}),this.functionExpressionScope=!0):("function"===this.type&&(t=new Variable("arguments",this),this.taints.set("arguments",!0),this.set.set("arguments",t),this.variables.push(t)),e.type===o.FunctionExpression&&e.id&&new Scope(e,{naming:!0})),this.upper=a,this.isStrict=function isStrictScope(e,t){var r,n,i,s,a;if(e.upper&&e.upper.isStrict)return!0;if("function"===e.type)r=t.body;else{if("global"!==e.type)return!1;r=t}if(u.directive){for(n=0,i=r.body.length;n<i&&"DirectiveStatement"===(s=r.body[n]).type;++n)if('"use strict"'===s.raw||"'use strict'"===s.raw)return!0}else for(n=0,i=r.body.length;n<i&&(s=r.body[n]).type===o.ExpressionStatement&&((a=s.expression).type===o.Literal&&"string"==typeof a.value);++n)if(null!=a.raw){if('"use strict"'===a.raw||"'use strict'"===a.raw)return!0}else if("use strict"===a.value)return!0;return!1}(this,e),this.childScopes=[],a&&a.childScopes.push(this),"global"===(a=this).type&&(this.implicit={set:new n,variables:[]}),i.push(this)}function ScopeManager(e){this.scopes=e,this.attached=!1}o=r.Syntax,void 0!==t.Map?n=t.Map:((n=function Map(){this.__data={}}).prototype.get=function MapGet(e){if(this.__data.hasOwnProperty(e="$"+e))return this.__data[e]},n.prototype.has=function MapHas(e){return this.__data.hasOwnProperty(e="$"+e)},n.prototype.set=function MapSet(e,t){this.__data[e="$"+e]=t},n.prototype.delete=function MapDelete(e){return delete this.__data[e="$"+e]}),Reference.READ=1,Reference.WRITE=2,Reference.RW=3,Reference.prototype.isStatic=function isStatic(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()},Reference.prototype.isWrite=function isWrite(){return this.flag&Reference.WRITE},Reference.prototype.isRead=function isRead(){return this.flag&Reference.READ},Reference.prototype.isReadOnly=function isReadOnly(){return this.flag===Reference.READ},Reference.prototype.isWriteOnly=function isWriteOnly(){return this.flag===Reference.WRITE},Reference.prototype.isReadWrite=function isReadWrite(){return this.flag===Reference.RW},Variable.CatchClause="CatchClause",Variable.Parameter="Parameter",Variable.FunctionName="FunctionName",Variable.Variable="Variable",Variable.ImplicitGlobalVariable="ImplicitGlobalVariable",Scope.prototype.__close=function __close(){var e,t,r,n,i,s;if(!this.dynamic||u.optimistic)for(e=0,t=this.left.length;e<t;++e)r=this.left[e],this.__resolve(r)||this.__delegateToUpperScope(r);else if("with"===this.type)for(e=0,t=this.left.length;e<t;++e)(r=this.left[e]).tainted=!0,this.__delegateToUpperScope(r);else for(e=0,t=this.left.length;e<t;++e)for(r=this.left[e],n=this;n.through.push(r),n=n.upper;);if("global"===this.type){for(s=[],e=0,t=this.left.length;e<t;++e)(r=this.left[e]).__maybeImplicitGlobal&&!this.set.has(r.identifier.name)&&s.push(r.__maybeImplicitGlobal);for(e=0,t=s.length;e<t;++e)this.__defineImplicit((i=s[e]).left,{type:Variable.ImplicitGlobalVariable,name:i.left,node:i})}this.left=null,a=this.upper},Scope.prototype.__resolve=function __resolve(e){var t=e.identifier.name;return!!this.set.has(t)&&((t=this.set.get(t)).references.push(e),t.stack=t.stack&&e.from.variableScope===this.variableScope,e.tainted&&(t.tainted=!0,this.taints.set(t.name,!0)),e.resolved=t,!0)},Scope.prototype.__delegateToUpperScope=function __delegateToUpperScope(e){this.upper&&this.upper.left.push(e),this.through.push(e)},Scope.prototype.__defineImplicit=function __defineImplicit(e,t){var r,n;e&&e.type===o.Identifier&&(r=e.name,this.implicit.set.has(r)?((n=this.implicit.set.get(r)).identifiers.push(e),n.defs.push(t)):((n=new Variable(r,this)).identifiers.push(e),n.defs.push(t),this.implicit.set.set(r,n),this.implicit.variables.push(n)))},Scope.prototype.__define=function __define(e,t){var r,n;e&&e.type===o.Identifier&&(r=e.name,this.set.has(r)?((n=this.set.get(r)).identifiers.push(e),n.defs.push(t)):((n=new Variable(r,this)).identifiers.push(e),n.defs.push(t),this.set.set(r,n),this.variables.push(n)))},Scope.prototype.__referencing=function __referencing(e,t,r,n){e&&e.type===o.Identifier&&(e=new Reference(e,this,t||Reference.READ,r,n),this.references.push(e),this.left.push(e))},Scope.prototype.__detectEval=function __detectEval(){var e=this;for(this.directCallToEvalScope=!0;e.dynamic=!0,e=e.upper;);},Scope.prototype.__detectThis=function __detectThis(){this.thisFound=!0},Scope.prototype.__isClosed=function isClosed(){return null===this.left},Scope.prototype.resolve=function resolve(e){var t,r,n;for(assert(this.__isClosed(),"scope should be closed"),assert(e.type===o.Identifier,"target should be identifier"),r=0,n=this.references.length;r<n;++r)if((t=this.references[r]).identifier===e)return t;return null},Scope.prototype.isStatic=function isStatic(){return!this.dynamic},Scope.prototype.isArgumentsMaterialized=function isArgumentsMaterialized(){var e;return"function"!==this.type||!this.isStatic()||(assert(e=this.set.get("arguments"),"always have arguments variable"),e.tainted)||0!==e.references.length},Scope.prototype.isThisMaterialized=function isThisMaterialized(){return"function"!==this.type||!this.isStatic()||this.thisFound},Scope.mangledName="__$escope$__",Scope.prototype.attach=function attach(){this.functionExpressionScope||(this.block[Scope.mangledName]=this)},Scope.prototype.detach=function detach(){this.functionExpressionScope||delete this.block[Scope.mangledName]},Scope.prototype.isUsedName=function(e){if(this.set.has(e))return!0;for(var t=0,r=this.through.length;t<r;++t)if(this.through[t].identifier.name===e)return!0;return!1},ScopeManager.prototype.__get=function __get(e){var t,r,n;if(this.attached)return e[Scope.mangledName]||null;if(Scope.isScopeRequired(e))for(t=0,r=this.scopes.length;t<r;++t)if(!(n=this.scopes[t]).functionExpressionScope&&n.block===e)return n;return null},ScopeManager.prototype.acquire=function acquire(e){return this.__get(e)},ScopeManager.prototype.release=function release(e){var t=this.__get(e);if(t)for(t=t.upper;t;){if(!t.functionExpressionScope)return t;t=t.upper}return null},ScopeManager.prototype.attach=function attach(){for(var e=0,t=this.scopes.length;e<t;++e)this.scopes[e].attach();this.attached=!0},ScopeManager.prototype.detach=function detach(){for(var e=0,t=this.scopes.length;e<t;++e)this.scopes[e].detach();this.attached=!1},Scope.isScopeRequired=function isScopeRequired(e){return Scope.isVariableScopeRequired(e)||e.type===o.WithStatement||e.type===o.CatchClause},Scope.isVariableScopeRequired=function isVariableScopeRequired(e){return e.type===o.Program||e.type===o.FunctionExpression||e.type===o.FunctionDeclaration},e.version="1.0.3",e.Reference=Reference,e.Variable=Variable,e.Scope=Scope,e.ScopeManager=ScopeManager,e.analyze=function analyze(e,t){return u=function updateDeeply(e,t){var r,n;function isHashObject(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}for(r in t)t.hasOwnProperty(r)&&(isHashObject(n=t[r])?isHashObject(e[r])?updateDeeply(e[r],n):e[r]=updateDeeply({},n):e[r]=n);return e}(function defaultOptions(){return{optimistic:!1,directive:!1,ecmaVersion:5}}(),t),t=i=[],a=null,r.traverse(e,{enter:function enter(e){var t,r,n;switch(Scope.isScopeRequired(e)&&new Scope(e,{}),e.type){case o.AssignmentExpression:"="===e.operator?a.__referencing(e.left,Reference.WRITE,e.right,!a.isStrict&&null!=e.left.name&&e):a.__referencing(e.left,Reference.RW,e.right),a.__referencing(e.right);break;case o.ArrayExpression:for(t=0,r=e.elements.length;t<r;++t)a.__referencing(e.elements[t]);break;case o.BlockStatement:break;case o.BinaryExpression:a.__referencing(e.left),a.__referencing(e.right);break;case o.BreakStatement:break;case o.CallExpression:for(a.__referencing(e.callee),t=0,r=e.arguments.length;t<r;++t)a.__referencing(e.arguments[t]);u.ignoreEval||e.callee.type!==o.Identifier||"eval"!==e.callee.name||a.variableScope.__detectEval();break;case o.CatchClause:a.__define(e.param,{type:Variable.CatchClause,name:e.param,node:e});break;case o.ConditionalExpression:a.__referencing(e.test),a.__referencing(e.consequent),a.__referencing(e.alternate);break;case o.ContinueStatement:case o.DirectiveStatement:break;case o.DoWhileStatement:a.__referencing(e.test);break;case o.DebuggerStatement:case o.EmptyStatement:break;case o.ExpressionStatement:a.__referencing(e.expression);break;case o.ForStatement:a.__referencing(e.init),a.__referencing(e.test),a.__referencing(e.update);break;case o.ForInStatement:e.left.type===o.VariableDeclaration?a.__referencing(e.left.declarations[0].id,Reference.WRITE,null,!1):a.__referencing(e.left,Reference.WRITE,null,!a.isStrict&&null!=e.left.name&&e),a.__referencing(e.right);break;case o.FunctionDeclaration:for(a.upper.__define(e.id,{type:Variable.FunctionName,name:e.id,node:e}),t=0,r=e.params.length;t<r;++t)a.__define(e.params[t],{type:Variable.Parameter,name:e.params[t],node:e,index:t});break;case o.FunctionExpression:for(t=0,r=e.params.length;t<r;++t)a.__define(e.params[t],{type:Variable.Parameter,name:e.params[t],node:e,index:t});break;case o.Identifier:break;case o.IfStatement:a.__referencing(e.test);break;case o.Literal:case o.LabeledStatement:break;case o.LogicalExpression:a.__referencing(e.left),a.__referencing(e.right);break;case o.MemberExpression:a.__referencing(e.object),e.computed&&a.__referencing(e.property);break;case o.NewExpression:for(a.__referencing(e.callee),t=0,r=e.arguments.length;t<r;++t)a.__referencing(e.arguments[t]);break;case o.ObjectExpression:for(t=0;t<e.properties.length;t++)"init"===e.properties[t].kind&&a.__referencing(e.properties[t].value);break;case o.Program:case o.Property:break;case o.ReturnStatement:a.__referencing(e.argument);break;case o.SequenceExpression:for(t=0,r=e.expressions.length;t<r;++t)a.__referencing(e.expressions[t]);break;case o.SwitchStatement:a.__referencing(e.discriminant);break;case o.SwitchCase:a.__referencing(e.test);break;case o.ThisExpression:a.variableScope.__detectThis();break;case o.ThrowStatement:a.__referencing(e.argument);break;case o.TryStatement:break;case o.UnaryExpression:a.__referencing(e.argument);break;case o.UpdateExpression:a.__referencing(e.argument,Reference.RW,null);break;case o.VariableDeclaration:for(t=0,r=e.declarations.length;t<r;++t)n=e.declarations[t],a.variableScope.__define(n.id,{type:Variable.Variable,name:n.id,node:n,index:t,parent:e}),n.init&&(a.__referencing(n.id,Reference.WRITE,n.init,!1),a.__referencing(n.init));break;case o.VariableDeclarator:break;case o.WhileStatement:a.__referencing(e.test);break;case o.WithStatement:a.upper.__referencing(e.object)}},leave:function leave(e){for(;a&&e===a.block;)a.__close()}}),assert(null===a),u=i=null,new ScopeManager(t)}},this)},{estraverse:11}],11:[function(t,e,r){!function clone(e){"use strict";var r,m,u,n,i,g,y,v,_;function deepCopy(e){var t,r,n={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],n[t]="object"==typeof r&&null!==r?deepCopy(r):r);return n}function F(){}function Reference(e,t){this.parent=e,this.key=t}function Element(e,t,r,n){this.node=e,this.path=t,this.wrap=r,this.ref=n}function Controller(){}function isNode(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function isProperty(e,t){return(e===r.ObjectExpression||e===r.ObjectPattern)&&"properties"===t}function traverse(e,t){return(new Controller).traverse(e,t)}function extendCommentRange(t,e){var r=function upperBound(e,t){for(var r,n,i=e.length,s=0;i;)t(e[n=s+(r=i>>>1)])?i=r:(s=n+1,i-=1+r);return s}(e,function search(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],r!==e.length&&(t.extendedRange[1]=e[r].range[0]),0<=--r&&(t.extendedRange[0]=e[r].range[1]),t}return m=(m=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.create||function(e){return F.prototype=e,new F},g=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},n={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={Break:y={},Skip:v={},Remove:_={}},Reference.prototype.replace=function replace(e){this.parent[this.key]=e},Reference.prototype.remove=function remove(){return m(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},Controller.prototype.path=function path(){var e,t,r,n,i;function addToPath(e,t){if(m(t))for(r=0,n=t.length;r<n;++r)e.push(t[r]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)addToPath(i,this.__leavelist[e].path);return addToPath(i,this.__current.path),i},Controller.prototype.type=function(){return this.current().type||this.__current.wrap},Controller.prototype.parents=function parents(){for(var e=[],t=1,r=this.__leavelist.length;t<r;++t)e.push(this.__leavelist[t].node);return e},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(e,t){var r=void 0,n=this.__current;return this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},Controller.prototype.notify=function notify(e){this.__state=e},Controller.prototype.skip=function(){this.notify(v)},Controller.prototype.break=function(){this.notify(y)},Controller.prototype.remove=function(){this.notify(_)},Controller.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=n,t.keys&&(this.__keys=function extend(e,t){for(var r,n=g(t),i=0,s=n.length;i<s;i+=1)e[r=n[i]]=t[r];return e}(i(this.__keys),t.keys))},Controller.prototype.traverse=function traverse(e,t){var r,n,i,s,a,o,u,l,c,h,p,d;for(this.__initialize(e,t),d={},r=this.__worklist,n=this.__leavelist,r.push(new Element(e,null,null,null)),n.push(new Element(null,null,null,null));r.length;)if((i=r.pop())===d){if(i=n.pop(),o=this.__execute(t.leave,i),this.__state===y||o===y)return}else if(i.node){if(o=this.__execute(t.enter,i),this.__state===y||o===y)return;if(r.push(d),n.push(i),this.__state!==v&&o!==v){if(s=i.node,a=i.wrap||s.type,!(h=this.__keys[a])){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=g(s)}for(l=h.length;0<=--l;)if(p=s[u=h[l]])if(m(p)){for(c=p.length;0<=--c;)if(p[c]){if(isProperty(a,h[l]))i=new Element(p[c],[u,c],"Property",null);else{if(!isNode(p[c]))continue;i=new Element(p[c],[u,c],null,null)}r.push(i)}}else isNode(p)&&r.push(new Element(p,u,null,null))}}},Controller.prototype.replace=function replace(e,t){function removeElem(e){var t,r,n,i;if(e.ref.remove())for(r=e.ref.key,i=e.ref.parent,t=s.length;t--;)if((n=s[t]).ref&&n.ref.parent===i){if(n.ref.key<r)break;--n.ref.key}}var s,r,n,i,a,o,u,l,c,h,p,d,f;for(this.__initialize(e,t),p={},s=this.__worklist,r=this.__leavelist,o=new Element(e,null,null,new Reference(d={root:e},"root")),s.push(o),r.push(o);s.length;)if((o=s.pop())===p){if(o=r.pop(),void 0!==(a=this.__execute(t.leave,o))&&a!==y&&a!==v&&a!==_&&o.ref.replace(a),this.__state!==_&&a!==_||removeElem(o),this.__state===y||a===y)return d.root}else{if(void 0!==(a=this.__execute(t.enter,o))&&a!==y&&a!==v&&a!==_&&(o.ref.replace(a),o.node=a),this.__state!==_&&a!==_||(removeElem(o),o.node=null),this.__state===y||a===y)return d.root;if((n=o.node)&&(s.push(p),r.push(o),this.__state!==v)&&a!==v){if(i=o.wrap||n.type,!(c=this.__keys[i])){if(!this.__fallback)throw new Error("Unknown node type "+i+".");c=g(n)}for(u=c.length;0<=--u;)if(h=n[f=c[u]])if(m(h)){for(l=h.length;0<=--l;)if(h[l]){if(isProperty(i,c[u]))o=new Element(h[l],[f,l],"Property",new Reference(h,l));else{if(!isNode(h[l]))continue;o=new Element(h[l],[f,l],null,new Reference(h,l))}s.push(o)}}else isNode(h)&&s.push(new Element(h,f,null,new Reference(n,f)))}}return d.root},e.version=t("./package.json").version,e.Syntax=r,e.traverse=traverse,e.replace=function replace(e,t){return(new Controller).replace(e,t)},e.attachComments=function attachComments(e,t,r){var n,i,s,a,o=[];if(!e.range)throw new Error("attachComments needs range information");if(r.length){for(s=0,i=t.length;s<i;s+=1)o.push(extendCommentRange(deepCopy(t[s]),r));a=0,traverse(e,{enter:function(e){for(var t;a<o.length&&!((t=o[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}}),a=0,traverse(e,{leave:function(e){for(var t;a<o.length&&(t=o[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}})}else if(t.length){for(s=0,i=t.length;s<i;s+=1)(n=deepCopy(t[s])).extendedRange=[0,e.range[0]],o.push(n);e.leadingComments=o}return e},e.VisitorKeys=n,e.VisitorOption=u,e.Controller=Controller,e.cloneEnvironment=function(){return clone({})},e}(r)},{"./package.json":12}],12:[function(e,t,r){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"2.0.0",engines:{node:">=0.10.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/estraverse/raw/master/LICENSE.BSD"}],scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"}}},{}],13:[function(e,t,r){!function(){"use strict";var r,s,a;function escapeString(e){for(var t,r="",n=0,i=(e=void 0===e[0]?a.stringToArray(e):e).length;n<i;n+=1)"'"===(t=e[n])?r+="\\'":0<="\\\n\r\u2028\u2029".indexOf(t)?r+=function escapeDisallowedCharacter(e){var t="\\";switch(e){case"\\":t+="\\";break;case"\n":t+="n";break;case"\r":t+="r";break;case"\u2028":t+="u2028";break;case"\u2029":t+="u2029";break;default:throw new Error("Incorrectly classified character")}return t}(t):r+=" "<=t&&t<="~"?t:function escapeAllowedCharacter(e,t){var r=e.charCodeAt(0),n=r.toString(16),i="\\";switch(e){case"\b":i+="b";break;case"\f":i+="f";break;case"\t":i+="t";break;default:255<r?i+="u"+"0000".slice(n.length)+n:"\0"===e&&"0123456789".indexOf(t)<0?i+="0":i+="\v"===e?"v":"x"+"00".slice(n.length)+n}return i}(t,e[n+1]);return r}function annotateDirective(e,t){t=t.get("destructive",{pathName:r})?e:a.deepCopy(e);return a.traverse(t,{enter:function enter(e,t){var r,n,i;if(e.type===s.Program||e.type===s.BlockStatement&&(t.type===s.FunctionExpression||t.type===s.FunctionDeclaration))for(n=0,i=e.body.length;n<i;++n){if(!function isDirective(e){return e.type===s.ExpressionStatement&&(e=e.expression).type===s.Literal&&"string"==typeof e.value}(r=e.body[n]))return;r.type=s.DirectiveStatement,r.expression.raw?(r.directive=r.expression.raw.substring(1,r.expression.raw.length-1),r.value=r.expression.value,r.raw=r.expression.raw):(r.directive=escapeString(r.expression.value),r.value=r.expression.value,r.raw="'"+r.directive+"'"),delete r.expression}}}),t}r="annotate-directive",a=e("./common"),s=a.Syntax,annotateDirective.passName=r,t.exports=annotateDirective}()},{"./common":14}],14:[function(p,e,d){!function(){"use strict";var s,i,e,t,r,n,a,o,u,l,c,h;function arrayLast(e){return e[e.length-1]}function deepCopy(e){return function deepCopyInternal(e,t){var r,n;for(r in e)0!==r.lastIndexOf("__",0)&&e.hasOwnProperty(r)&&("object"==typeof(n=e[r])&&null!==n&&(n=n instanceof RegExp?new RegExp(n):deepCopyInternal(n,i(n)?[]:{})),t[r]=n);return t}(e,i(e)?[]:{})}function moveLocation(e,t){return null!=e.loc&&(t.loc=deepCopy(e.loc)),t}function isNegative(e){return e==e&&(e<0||0===e&&1/e<0)}function isNumberLiteral(e){return e.type===s.Literal&&"number"==typeof e.value}function isOptimizedArgument(e){return isNumberLiteral(e)&&1===String(e.value).length}function generateNegativeNode(e,t){e={type:s.UnaryExpression,operator:"-",argument:{type:s.Literal,value:-e}};return t?moveLocation(t,e):e}function generateUndefined(e){var t={type:s.UnaryExpression,operator:"void",argument:{type:s.Literal,value:0}};return e?moveLocation(e,t):t}function generateNaN(e){var t={type:s.BinaryExpression,operator:"/",left:{type:s.Literal,value:0},right:{type:s.Literal,value:0}};return e?moveLocation(e,t):t}function isReference(e){e=e.type;return e===s.Identifier||e===s.MemberExpression}a=p("estraverse"),o=p("escope"),u=p("esutils"),s=a.Syntax,i=(i=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},l={}.hasOwnProperty,r=function has(e,t){return l.call(e,t)},c=Array.prototype.slice,e=function arrayFrom(e){return c.call(e)},h=Array.prototype.slice,t=function arrayOf(){return h.call(arguments)},n=Object.is||function sameValue(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},d.deepCopy=deepCopy,d.stringRepeat=function stringRepeat(e,t){var r="";for(t|=0;0<t;t>>>=1,e+=e)1&t&&(r+=e);return r},d.sameValue=n,d.Array={isArray:i,from:e,of:t,last:arrayLast,empty:function arrayEmpty(e){return 0===e.length}},d.Object={isObject:function isObject(e){return"object"==typeof e&&null!==e},has:r},d.Syntax=s,d.traverse=a.traverse,d.replace=a.replace,d.VisitorKeys=a.VisitorKeys,d.VisitorOption=a.VisitorOption,d.assert=function assert(e,t){if(!e)throw new Error(t)},d.unreachable=function unreachable(){throw new Error("Unreachable point. logically broken.")},d.isIdentifier=function isIdentifier(e){return!u.keyword.isKeywordES5(e,!0)&&!u.keyword.isRestrictedWord(e)&&u.keyword.isIdentifierName(e)},d.moveLocation=moveLocation,d.deleteLocation=function deleteLocation(e){return!!e.hasOwnProperty("loc")&&delete e.loc},d.convertToEmptyStatement=function convertToEmptyStatement(e){for(var t=a.VisitorKeys[e.type],r=0,n=t.length;r<n;++r)delete e[t[r]];return e.type=s.EmptyStatement,e},d.mayBeCompletionValue=function mayBeCompletionValue(e,t){var r,n;if(e.type===s.ExpressionStatement)for(r=t.length-1;0<=r;--r,e=n)switch((n=t[r]).type){case s.FunctionExpression:case s.FunctionDeclaration:return!1;case s.BlockStatement:case s.Program:if(arrayLast(n.body)!==e)return!1;break;case s.SwitchCase:if(arrayLast(n.consequent)!==e)return!1}return!0},d.isNegative=isNegative,d.isFunctionBody=function isFunctionBody(e,t){return e.type===s.BlockStatement&&(t.type===s.FunctionDeclaration||t.type===s.FunctionExpression)},d.SpecialNode={generateNegative:generateNegativeNode,isNegative:function isNegativeNode(e){return e.type===s.UnaryExpression&&"-"===e.operator&&isNumberLiteral(e.argument)},generateUndefined:generateUndefined,isUndefined:function isUndefined(e){return e.type===s.UnaryExpression&&"void"===e.operator&&isOptimizedArgument(e.argument)},generateNaN:generateNaN,isNaN:function isNaNNode(e){return!(e.type!==s.BinaryExpression||!isOptimizedArgument(e.left)||!isOptimizedArgument(e.right))&&0===e.left.value&&0===e.right.value},isReference:isReference,canExtractSequence:function canExtractSequence(e,t,r){var n;if(t.type===s.CallExpression)return e.type===s.Identifier?"eval"!==e.name&&(n=r.resolve(e))&&n.isStatic():e.type!==s.MemberExpression;if(t.type===s.UnaryExpression){if("delete"===t.operator)return!isReference(e);if("typeof"===t.operator&&e.type===s.Identifier)return(n=r.resolve(e))&&n.isStatic()}else if(t.type===s.UpdateExpression)return!isReference(e);return!0},generateFromValue:function generateFromValue(e){if("number"==typeof e){if(isNaN(e))return generateNaN();if(isNegative(e))return generateNegativeNode(e)}return void 0===e?generateUndefined():{type:s.Literal,value:e}}},d.delegateVariableDeclarations=function delegateVariableDeclarations(r,e){var n,i=[];return a.traverse(r,{enter:function(e){var t,r,n;if(e.type===s.VariableDeclaration){if("let"!==e.kind&&"const"!==e.kind){for(t=0,r=e.declarations.length;t<r;++t)delete(n=e.declarations[t]).init,i.push(n);return a.VisitorOption.Skip}}else if(o.Scope.isVariableScopeRequired(e))return a.VisitorOption.Skip}}),i.length?(n=null,a.traverse(e.body,{enter:function(e,t){return e===r||o.Scope.isVariableScopeRequired(e)?a.VisitorOption.Skip:e.type===s.VariableDeclaration&&"var"===e.kind&&t.type!==s.ForInStatement?(n=e,a.VisitorOption.Break):void 0}}),n?(n.declarations=n.declarations.concat(i),null):{type:s.VariableDeclaration,kind:"var",declarations:i}):null},d.isScopedDeclaration=function isScopedDeclaration(e){return e.type===s.VariableDeclaration&&("let"===e.kind||"const"===e.kind)||e.type===s.FunctionDeclaration}}()},{escope:10,estraverse:50,esutils:53}],15:[function(t,e,n){!function(){"use strict";var e,c,l,r,h,p;function recover(e,t){return c.traverse(e,{leave:function leave(e){e.type===r.IfStatement&&e.alternate&&e.consequent.type!==r.BlockStatement&&function trailingIf(e){for(;;){switch(e.type){case r.IfStatement:if(!e.alternate)return 1;e=e.alternate;continue;case r.LabeledStatement:case r.ForStatement:case r.ForInStatement:case r.WhileStatement:case r.WithStatement:e=e.body;continue}return}}(e.consequent)&&(e.consequent={type:r.BlockStatement,body:[e.consequent]}),t||e.type!==r.DirectiveStatement||(e.type=r.ExpressionStatement,e.expression=c.moveLocation(e,{type:r.Literal,value:e.value,raw:e.raw}),delete e.directive,delete e.value,delete e.raw)}}),e}function iteration(e,t,r){var n,i,s,a,o,u,l;for(l=r.get("destructive")?e:c.deepCopy(e),o=[],u=[],n=0,i=t.length;n<i;++n)!function addPass(e){(e="function"!=typeof e?e[Object.keys(e)[0]]:e).hasOwnProperty("passName")?e.passName:e.name,u.push(e),o.push(!0)}(t[n]);do{for(a=!1,n=0,i=u.length;n<i;++n)s=u[n],o[n]&&((s=s(l,r)).modified?function fillStatuses(e){for(var t=0,r=o.length;t<r;++t)o[t]=e}(a=!0):o[n]=!1,l=s.result)}while(a);return l}e=t("esshorten"),c=t("./common"),l=t("./options"),h=t("./pass"),p=t("./annotate-directive"),r=c.Syntax,n.version=t("../package.json").version,n.mangle=e.mangle,n.optimize=function optimize(e,t,r){var n,i,s,a,o,u;for(e=p(e,new l({destructive:!1})),null==t&&(t=h.__defaultPipeline),r=new l(r),n=0,i=t.length;n<i;++n)if(o=t[n],c.Array.isArray(o))e=iteration(e,o,r);else if(o.once)for(s=0,a=(u=o.pass).length;s<a;++s)e=u[s](e,r).result;return recover(e,r.get("directive"))},n.pass=h}()},{"../package.json":54,"./annotate-directive":13,"./common":14,"./options":18,"./pass":19,esshorten:56}],16:[function(e,t,r){!function(){"use strict";var s,n;function isConstant(e,t){return e.type===s.Literal?"object"!=typeof e.value||null===e.value||t:e.type===s.UnaryExpression?"void"===e.operator||"delete"===e.operator||"!"===e.operator?isConstant(e.argument,!0):isConstant(e.argument,!1):e.type===s.BinaryExpression?"in"!==e.operator&&"instanceof"!==e.operator&&isConstant(e.left,!1)&&isConstant(e.right,!1):e.type===s.LogicalExpression&&isConstant(e.left,!0)&&isConstant(e.right,!0)}function getConstant(e){return e.type===s.Literal?e.value:e.type===s.UnaryExpression?doUnary(e.operator,getConstant(e.argument)):e.type===s.BinaryExpression?doBinary(e.operator,getConstant(e.left),getConstant(e.right)):e.type===s.LogicalExpression?doLogical(e.operator,getConstant(e.left),getConstant(e.right)):void n.unreachable()}function doLogical(e,t,r){return"||"===e?t||r:"&&"===e?t&&r:void n.unreachable()}function doUnary(e,t){switch(e){case"+":return+t;case"-":return-t;case"~":return~t;case"!":return!t;case"delete":return!0;case"void":return;case"typeof":return typeof t}n.unreachable()}function doBinary(e,t,r){switch(e){case"|":return t|r;case"^":return t^r;case"&":return t&r;case"==":return t==r;case"!=":return t!=r;case"===":return t===r;case"!==":return t!==r;case"<":return t<r;case">":return r<t;case"<=":return t<=r;case">=":return r<=t;case"<<":return t<<r;case">>":return t>>r;case">>>":return t>>>r;case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r;case"%":return t%r}n.unreachable()}n=e("./common"),s=n.Syntax,r.constant={doBinary:doBinary,doUnary:doUnary,doLogical:doLogical,evaluate:getConstant,isConstant:isConstant},r.hasSideEffect=function hasSideEffect(e,i){return function visit(e){var t,r,n;switch(e.type){case s.AssignmentExpression:return!0;case s.ArrayExpression:for(t=0,r=e.elements.length;t<r;++t)if(null!==e.elements[t]&&visit(e.elements[t]))return!0;return!1;case s.BinaryExpression:return!isConstant(e);case s.CallExpression:return!0;case s.ConditionalExpression:return visit(e.test)||visit(e.consequent)||visit(e.alternate);case s.FunctionExpression:return!1;case s.Identifier:return!(n=i.resolve(e))||!n.isStatic();case s.Literal:return!1;case s.LogicalExpression:return visit(e.left)||visit(e.right);case s.MemberExpression:case s.NewExpression:return!0;case s.ObjectExpression:for(t=0,r=e.properties.length;t<r;++t)if(visit(e.properties[t]))return!0;return!1;case s.Property:return visit(e.value);case s.SequenceExpression:for(t=0,r=e.expressions.length;t<r;++t)if(visit(e.expressions[t]))return!0;return!1;case s.ThisExpression:return!1;case s.UnaryExpression:return"void"===e.operator||"delete"===e.operator||"typeof"===e.operator||"!"===e.operator?visit(e.argument):!isConstant(e);case s.UpdateExpression:return!0}return!0}(e)},r.booleanCondition=function booleanCondition(e){var t;switch(e.type){case s.AssignmentExpression:return booleanCondition(e.right);case s.ArrayExpression:return!0;case s.BinaryExpression:return isConstant(e)?!!getConstant(e):null;case s.CallExpression:return null;case s.ConditionalExpression:return!0===(t=booleanCondition(e.test))?booleanCondition(e.consequent):!1===t?booleanCondition(e.alternate):(t=booleanCondition(e.consequent))===booleanCondition(e.alternate)?t:null;case s.FunctionExpression:return!0;case s.Identifier:return null;case s.Literal:return!!getConstant(e);case s.LogicalExpression:return"&&"===e.operator?null===(t=booleanCondition(e.left))?null:!!t&&booleanCondition(e.right):null===(t=booleanCondition(e.left))?null:!!t||booleanCondition(e.right);case s.MemberExpression:return null;case s.NewExpression:case s.ObjectExpression:return!0;case s.Property:return n.unreachable(),null;case s.SequenceExpression:return booleanCondition(n.Array.last(e.expressions));case s.ThisExpression:return null;case s.UnaryExpression:return"void"!==e.operator&&("typeof"===e.operator||("!"===e.operator?null===(t=booleanCondition(e.argument))?null:!t:isConstant(e)?!!getConstant(e):null));case s.UpdateExpression:return null}return null}}()},{"./common":14}],17:[function(e,r,t){!function(t){!function(){!function(){"use strict";var e;void 0!==t.Map?e=t.Map:((e=function Map(){this.__data={}}).prototype.get=function MapGet(e){if(this.__data.hasOwnProperty(e="$"+e))return this.__data[e]},e.prototype.has=function MapHas(e){return this.__data.hasOwnProperty(e="$"+e)},e.prototype.set=function MapSet(e,t){this.__data[e="$"+e]=t},e.prototype.delete=function MapDelete(e){return delete this.__data[e="$"+e]},e.prototype.clear=function MapClear(){this.__data={}},e.prototype.forEach=function MapForEach(e,t){var r,n;for(r in this.__data)this.__data.hasOwnProperty(r)&&(n=r.substring(1),e.call(t,this.__data[r],n,this))},e.prototype.keys=function MapKeys(){var e,t=[];for(e in this.__data)this.__data.hasOwnProperty(e)&&t.push(e.substring(1));return t},e.prototype.values=function MapValues(){var e,t=[];for(e in this.__data)this.__data.hasOwnProperty(e)&&t.push(this.__data[e]);return t},e.prototype.items=function MapItems(){var e,t=[];for(e in this.__data)this.__data.hasOwnProperty(e)&&t.push([e.substring(1),this.__data[e]]);return t}),r.exports=e}()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,r){!function(){"use strict";var s;function Options(e){var t={destructive:!0,preserveCompletionValue:!1};this.data=null==e?t:function extend(e,t){var r,n,i;for(r in t)s.Object.has(t,r)&&(r in e&&(n=e[r],i=t[r],s.Object.isObject(i))&&s.Object.isObject(n)?e[r]=extend(n,i):e[r]=t[r]);return e}(t,e)}s=e("./common"),Options.prototype.get=function get(e,t){return(null!=t&&s.Object.has(t,"pathName")&&null!=(t=this.data[t.pathName])&&s.Object.has(t,e)?t:this.data)[e]},t.exports=Options}()},{"./common":14}],19:[function(n,e,i){!function(){"use strict";var t,s,e,r,a;function initialize(e,t){var r,n,i;for(s[e]={},r=0,n=t.length;r<n;++r)i=t[r],a.assert(null==s[e][i.passName],"don't create duplicate pass names"),s[e][i.passName]=i;a.assert(null==s.__direct[i.passName],"don't create duplicate pass names"),s.__direct[i.passName]=i}a=n("./common"),t=n("./query"),s={__direct:{}},e=[n("./pass/hoist-variable-to-arguments"),n("./pass/transform-dynamic-to-static-property-access"),n("./pass/transform-dynamic-to-static-property-definition"),n("./pass/transform-immediate-function-call"),n("./pass/transform-logical-association"),n("./pass/reordering-function-declarations"),n("./pass/remove-unused-label"),n("./pass/remove-empty-statement"),n("./pass/remove-wasted-blocks"),n("./pass/transform-to-compound-assignment"),n("./pass/transform-to-sequence-expression"),n("./pass/transform-branch-to-expression"),n("./pass/transform-typeof-undefined"),n("./pass/reduce-sequence-expression"),n("./pass/reduce-branch-jump"),n("./pass/reduce-multiple-if-statements"),n("./pass/dead-code-elimination"),n("./pass/remove-side-effect-free-expressions"),n("./pass/remove-context-sensitive-expressions"),n("./pass/tree-based-constant-folding"),n("./pass/concatenate-variable-definition"),n("./pass/drop-variable-definition"),n("./pass/remove-unreachable-branch"),n("./pass/eliminate-duplicate-function-declarations")],r=[n("./post/transform-static-to-dynamic-property-access"),n("./post/transform-infinity"),n("./post/rewrite-boolean"),n("./post/rewrite-conditional-expression"),n("./post/omit-parens-in-void-context-iife")],initialize("pass",e),initialize("post",r),i.require=function passRequire(e){return a.Object.has(s.__direct,e)?s.__direct[e]:t.get(s,e.split("/"))},i.Registry=s,i.__defaultPipeline=[e,{once:!0,pass:r}]}()},{"./common":14,"./pass/concatenate-variable-definition":20,"./pass/dead-code-elimination":21,"./pass/drop-variable-definition":22,"./pass/eliminate-duplicate-function-declarations":23,"./pass/hoist-variable-to-arguments":24,"./pass/reduce-branch-jump":25,"./pass/reduce-multiple-if-statements":26,"./pass/reduce-sequence-expression":27,"./pass/remove-context-sensitive-expressions":28,"./pass/remove-empty-statement":29,"./pass/remove-side-effect-free-expressions":30,"./pass/remove-unreachable-branch":31,"./pass/remove-unused-label":32,"./pass/remove-wasted-blocks":33,"./pass/reordering-function-declarations":34,"./pass/transform-branch-to-expression":35,"./pass/transform-dynamic-to-static-property-access":36,"./pass/transform-dynamic-to-static-property-definition":37,"./pass/transform-immediate-function-call":38,"./pass/transform-logical-association":39,"./pass/transform-to-compound-assignment":40,"./pass/transform-to-sequence-expression":41,"./pass/transform-typeof-undefined":42,"./pass/tree-based-constant-folding":43,"./post/omit-parens-in-void-context-iife":44,"./post/rewrite-boolean":45,"./post/rewrite-conditional-expression":46,"./post/transform-infinity":47,"./post/transform-static-to-dynamic-property-access":48,"./query":49}],20:[function(e,t,r){!function(){"use strict";var r,l,n,c;function concatenateVariableDefinition(e,t){t=t.get("destructive",{pathName:r})?e:n.deepCopy(e);return c=!1,n.traverse(t,{leave:function leave(e){var t,r,n,i,s,a,o,u;if(e.type===l.BlockStatement||e.type===l.Program){for(o=null,u=[],t=0,r=e.body.length;t<r;++t)if((s=e.body[t]).type===l.VariableDeclaration&&"var"===s.kind)if(o)for(c=!0,n=0,i=s.declarations.length;n<i;++n)a=s.declarations[n],o.declarations.push(a);else u.push(o=s);else o=null,u.push(s);e.body=u}}}),{result:t,modified:c}}r="concatenate-variable-definition",n=e("../common"),l=n.Syntax,concatenateVariableDefinition.passName=r,t.exports=concatenateVariableDefinition}()},{"../common":14}],21:[function(e,t,r){!function(){"use strict";var r,l,c,h,p;function JumpTarget(e,t,r){this.node=e,this.type=r,this.labels=t.labels||[],t.labels=null}function Jumps(){this.targets=[]}function Status(e){this.current=[],this.upper=e,this.jumps=new Jumps,this.labels=null,this.next()}function Context(e){(e.__$context=this).node=e}function visitLoopBody(e,t){var r=function getForwardLastNode(e){for(;;){switch(e.type){case l.IfStatement:if(e.alternate)return null;e=e.consequent;continue;case l.WithStatement:case l.LabeledStatement:e=e.body;continue;case l.BlockStatement:if(e.body.length){e=c.Array.last(e.body);continue}}return e}}(t);return r&&r.type===l.ContinueStatement&&h.jumps.lookupContinuableTarget(r.label)===e&&(p=!0,c.convertToEmptyStatement(r)),visit(t)}function visit(e){var u=!1;return e?(c.traverse(e,{enter:function enter(e){var t,r,n,i,s,a,o;switch(Status.isRequired(e)&&(h=new Status(h)),u|=!h.isDead(),e.type){case l.Program:return e.body=eliminate(0,e.body),c.VisitorOption.Skip;case l.BlockStatement:return h.jumps.push(new JumpTarget(e,h,JumpTarget.NAMED_ONLY)),e.body=eliminate(0,e.body),h.jumps.pop(),h.resolveJump(e),c.VisitorOption.Skip;case l.BreakStatement:return e.label&&h.labels&&h.labels.indexOf(e.label)?(p=!0,c.convertToEmptyStatement(e)):h.jumpTo(h.jumps.lookupBreakableTarget(e.label)),c.VisitorOption.Skip;case l.CatchClause:return u|=visit(e.body),c.VisitorOption.Skip;case l.ContinueStatement:return h.jumpTo(h.jumps.lookupContinuableTarget(e.label)),c.VisitorOption.Skip;case l.DoWhileStatement:return h.jumps.push(new JumpTarget(e,h,JumpTarget.ITERATION)),u|=visitLoopBody(e,e.body),h.jumps.pop(),u|=visit(e.test),h.resolveJump(e),h.revive(),c.VisitorOption.Skip;case l.DebuggerStatement:case l.EmptyStatement:return c.VisitorOption.Skip;case l.ExpressionStatement:break;case l.ForStatement:return u=(u|=visit(e.init))|visit(e.test),h.jumps.push(new JumpTarget(e,h,JumpTarget.ITERATION)),u|=visitLoopBody(e,e.body),h.jumps.pop(),u|=visit(e.update),h.resolveJump(e),h.revive(),c.VisitorOption.Skip;case l.ForInStatement:return u=(u|=visit(e.left))|visit(e.right),h.jumps.push(new JumpTarget(e,h,JumpTarget.ITERATION)),u|=visitLoopBody(e,e.body),h.jumps.pop(),h.resolveJump(e),h.revive(),c.VisitorOption.Skip;case l.IfStatement:return u=(u|=visit(e.test))|visit(e.consequent),e.alternate?(i=!h.isDead(),h.revive()||h.insert(e),u|=visit(e.alternate),s=!h.isDead(),h.erase(e)&&h.revive(),(a=Context.lookup(e))&&(a.consequent=i,a.alternate=s)):h.revive(),c.VisitorOption.Skip;case l.LabeledStatement:h.register(e);break;case l.ReturnStatement:return u|=visit(e.argument),h.kill(),c.VisitorOption.Skip;case l.SwitchStatement:for(visit(e.discriminant),h.jumps.push(new JumpTarget(e,h,JumpTarget.SWITCH)),t=0,r=e.cases.length;t<r;++t)n=e.cases[t],u|=visit(n),n.test||(o=!0),h.isDead()&&t+1<r&&h.next();return h.jumps.pop(),h.resolveJump(e),h.isDead()&&!o&&h.next(),c.VisitorOption.Skip;case l.SwitchCase:return e.test&&(u|=visit(e.test)),e.consequent=eliminate(0,e.consequent),c.VisitorOption.Skip;case l.ThrowStatement:return u|=visit(e.argument),h.kill(),c.VisitorOption.Skip;case l.TryStatement:return u|=visit(e.block),e.handlers&&e.handlers.length&&(h.revive()||h.insert(e),e.handlers=eliminate(0,e.handlers),h.erase(e))&&h.revive(),e.finalizer&&(h.revive()||h.insert(e),u|=visit(e.finalizer),h.erase(e)||h.kill()),c.VisitorOption.Skip;case l.WhileStatement:return u|=visit(e.test),h.jumps.push(new JumpTarget(e,h,JumpTarget.ITERATION)),u|=visitLoopBody(e,e.body),h.jumps.pop(),h.resolveJump(e),h.revive(),c.VisitorOption.Skip;case l.WithStatement:break;case l.VariableDeclaration:case l.FunctionDeclaration:u=!0}},leave:function leave(e){Status.isRequired(e)?h=h.upper:e.type===l.LabeledStatement&&h.unregister()}}),u):!h.isDead();function eliminate(e,t){for(var r,n,i,s=[],a=0,o=t.length;a<o;++a)(r=t[a]).type===l.IfStatement?(i=new Context(r),n=visit(r),i.detach()):n=visit(r),n?(u|=1,s.push(r),r.type!==l.IfStatement||!r.alternate||i.consequent&&i.alternate||i.consequent===i.alternate||(p=!0,i.consequent?(r.test=c.moveLocation(r.test,{type:l.UnaryExpression,operator:"!",argument:r.test}),s.push(r.consequent),r.consequent=r.alternate):s.push(r.alternate),r.alternate=null)):p=!0;return s}}function deadCodeElimination(e,t){t=t.get("destructive",{pathName:r})?e:c.deepCopy(e);return h=null,p=!1,visit(t),c.assert(null===h,"status should be null"),{result:t,modified:p}}r="dead-code-elimination",c=e("../common"),l=c.Syntax,JumpTarget.NAMED_ONLY=0,JumpTarget.ITERATION=2,JumpTarget.SWITCH=3,JumpTarget.prototype.isIteration=function isIteration(){return this.type===JumpTarget.ITERATION},JumpTarget.prototype.isAnonymous=function isAnonymous(){return 2&this.type},JumpTarget.prototype.contains=function contains(e){return-1!==this.labels.indexOf(e)},Jumps.prototype.lookupContinuableTarget=function lookupContinuableTarget(e){for(var t,r=this.targets.length-1;0<=r;--r)if((t=this.targets[r]).isIteration()&&(!e||t.contains(e.name)))return t.node;c.unreachable()},Jumps.prototype.lookupBreakableTarget=function lookupBreakableTarget(e){for(var t,r=this.targets.length-1;0<=r;--r)if(t=this.targets[r],e){if(t.contains(e.name))return t.node}else if(t.isAnonymous())return t.node;c.unreachable()},Jumps.prototype.push=function push(e){this.targets.push(e)},Jumps.prototype.pop=function pop(){this.targets.pop()},Status.NEXT={},Status.prototype.insert=function insert(e){this.current.push(e)},Status.prototype.erase=function erase(e){e=this.current.indexOf(e);return-1!==e&&(this.current.splice(e,1),!0)},Status.prototype.kill=function kill(){return this.erase(Status.NEXT)},Status.prototype.has=function has(e){return-1!==this.current.indexOf(e)},Status.prototype.jumpTo=function jumpTo(e){this.kill(),this.insert(e)},Status.prototype.resolveJump=function resolveJump(e){e=this.current.indexOf(e);-1!==e&&(this.current.splice(e,1),this.insert(Status.NEXT))},Status.prototype.clear=function clear(){this.current.length=0},Status.prototype.next=function next(){this.insert(Status.NEXT)},Status.prototype.isDead=function isDead(){return!this.has(Status.NEXT)},Status.prototype.revive=function revive(){return!!this.isDead()&&(this.next(),!0)},Status.prototype.register=function register(e){this.labels||(this.labels=[]),this.labels.push(e.label.name)},Status.prototype.unregister=function unregister(){this.labels=null},Status.isRequired=function isRequired(e){var t=e.type;return c.assert(e,"should be node"),t===l.Program||t===l.FunctionExpression||t===l.FunctionDeclaration},Context.prototype.detach=function detach(){delete this.node.__$context},Context.lookup=function lookup(e){return e.__$context},deadCodeElimination.passName=r,t.exports=deadCodeElimination}()},{"../common":14}],22:[function(e,t,r){!function(){"use strict";var r,c,h,p,n,d;function removeDefinition(e,t,r){var n,i,s;for(e.declarations.splice(t,1),n=0,i=r.references.length;n<i;++n)s=r.references[n],h.assert(!s.isRead()),s.isWrite()&&s.writeExpr.__$parent$__.type===c.AssignmentExpression&&!function overrideExpression(e,t){for(var r in e)delete e[r];for(r in t)e[r]=t[r]}(s.writeExpr.__$parent$__,s.writeExpr)}function dropVariableDefinition(e,t){var u,l,t=t.get("destructive",{pathName:r})?e:h.deepCopy(e);return p=!1,l=null,(u=n.analyze(t,{directive:!0})).attach(),function attachParent(e){h.traverse(e,{enter:function(e,t){e.__$parent$__=t}})}(t),t=h.replace(t,{enter:function enter(e,t){var r,n,i,s,a,o=e;if(l&&l.variableScope.isStatic()){if(i=function getCandidates(e){var t,r,n,i,s,a,o;if(!e.candidates){for(a=[],s=[],t=0,r=e.variables.length;t<r;++t)for(n=0,i=(o=e.variables[t]).identifiers.length;n<i;++n)s.push(o.identifiers[n]),a.push(o);e.candidates={slots:a,identifiers:s}}return e.candidates}(l.variableScope),e.type===c.VariableDeclaration&&"var"===e.kind){for(r=e.declarations.length;r--;)n=e.declarations[r],-1===(s=i.identifiers.indexOf(n.id))||!function isRemovableDefinition(e){var t,r,n,i;if(1===e.identifiers.length){if(0!==e.references.length)for(t=0,r=e.references.length;t<r;++t){if((n=e.references[t]).isRead())return;if(n.isWrite()){if(!n.writeExpr)return;if(!(i=n.writeExpr.__$parent$__))return;if(i.type!==c.AssignmentExpression&&i.type!==c.VariableDeclarator)return;if(d.hasSideEffect(n.writeExpr,n.from))return}}return 1}}(a=i.slots[s])||(p=!0,removeDefinition(e,r,a));0===e.declarations.length&&(o=t.type===c.ForStatement?null:h.moveLocation(e,{type:c.EmptyStatement}))}if(e.type===c.FunctionDeclaration&&-1!==(s=i.identifiers.indexOf(e.id))&&1===(a=i.slots[s]).identifiers.length&&0===a.references.length)return p=!0,o=h.moveLocation(e,{type:c.EmptyStatement})}return l=u.acquire(e)||l,o},leave:function leave(e){l=u.release(e)||l}}),u.detach(),function removeParent(e){h.traverse(e,{enter:function(e){delete e.__$parent$__,delete e.__$escope$__}})}(t),{result:t,modified:p}}r="drop-variable-definition",h=e("../common"),n=e("escope"),d=e("../evaluator"),c=h.Syntax,dropVariableDefinition.passName=r,t.exports=dropVariableDefinition}()},{"../common":14,"../evaluator":16,escope:10}],23:[function(e,t,r){!function(){"use strict";var r,a,o,u,l;function main(e,t){var t=t.get("destructive",{pathName:r})?e:u.deepCopy(e),i=0,n=l=!1,s=[new o];return t=u.replace(t,{enter:function enter(e){var t,r,n;e.type===a.FunctionDeclaration&&(r=e.id.name,(t=u.Array.last(s)).has(r)?((n=t.get(r)).declarations.push(e),++n.count):t.set(r,n={declarations:[e],count:1})),e.type===a.BlockStatement&&s.push(new o),e.type!==a.FunctionDeclaration&&e.type!==a.FunctionExpression||++i},leave:function leave(e){var t,r;return e.type===a.BlockStatement&&(t=s.pop(),0===i?0!==t.keys().length&&(n=!0):r=function unique(r,n){return u.replace(n,{enter:function(e){var t;return e.type===a.FunctionDeclaration&&(t=e.id.name,--(t=r.get(t)).count,0!==t.count)?(l=!0,u.moveLocation(e,{type:a.EmptyStatement})):e!==n&&e.type===a.BlockStatement?this.skip():void 0}})}(t,e)),e.type!==a.FunctionDeclaration&&e.type!==a.FunctionExpression||--i,r}}),u.assert(1===s.length,"global map remains"),{result:t=n?t:function uniqueInGlobal(n,i){return u.replace(i,{enter:function(e){var t,r;return e.type===a.FunctionDeclaration&&(t=e.id.name,r=(t=n.get(t)).count===t.declarations.length,--t.count,1<t.declarations.length)?r?(l=!0,u.Array.last(t.declarations)):(l=!0,u.moveLocation(e,{type:a.EmptyStatement})):e!==i&&e.type===a.BlockStatement?this.skip():void 0}})}(s[0],t),modified:l}}r="eliminate-duplicate-function-declarations",u=e("../common"),o=e("../map"),a=u.Syntax,main.passName=r,t.exports=main}()},{"../common":14,"../map":17}],24:[function(e,t,r){!function(){"use strict";var i,o,u,s,l;function hoistVariableToArguments(e,t){var r,n,t=t.get("destructive",{pathName:i})?e:u.deepCopy(e);return l=!1,(n=s.analyze(t,{directive:!(r=null)})).attach(),u.traverse(t,{enter:function enter(e){var t;e.type!==o.CallExpression&&e.type!==o.NewExpression||(t=e.callee).type!==o.FunctionExpression||t.id||t.params.length!==e.arguments.length||(r=n.acquire(t)).isArgumentsMaterialized()||e.type===o.NewExpression&&r.isThisMaterialized()||!function hoist(i){function hoisting(e){for(var t=!1,r=0,n=i.params.length;r<n;++r)if(e.name===i.params[r].name){t=!0;break}t||i.params.push(e)}i.body=u.replace(i.body,{enter:function(e,t){var r,n,i,s,a;if(e.type===o.FunctionExpression||e.type===o.FunctionDeclaration)this.skip();else if(e.type===o.VariableDeclaration&&"var"===e.kind){if(t.type===o.ForInStatement)return u.assert(1===e.declarations.length,"for-in declaration length should be 1"),(s=e.declarations[0]).init||s.id.type!==o.Identifier?void 0:(hoisting(s.id),l=!0,s.id);for(t=t.type===o.ForStatement,i=[],r=0,n=e.declarations.length;r<n;++r){if((s=e.declarations[r]).id.type!==o.Identifier)return;hoisting(s.id),s.init&&i.push(u.moveLocation(s,{type:o.AssignmentExpression,operator:"=",left:s.id,right:s.init}))}return(l=!0,0===i.length)?t?null:u.moveLocation(e,{type:o.EmptyStatement}):(a=1===i.length?i[0]:u.moveLocation(e,{type:o.SequenceExpression,expressions:i}),t?a:u.moveLocation(e,{type:o.ExpressionStatement,expression:a}))}}})}(t)}}),n.detach(),{result:t,modified:l}}i="hoist-variable-to-arguments",s=e("escope"),u=e("../common"),o=u.Syntax,hoistVariableToArguments.passName=i,t.exports=hoistVariableToArguments}()},{"../common":14,escope:10}],25:[function(e,t,r){!function(){"use strict";var r,s,a,o;function reduce(e,t){var r,n=e[t],i=e[t+1];return n.type===s.IfStatement&&!n.alternate&&n.consequent.type===s.ReturnStatement&&i.type===s.ReturnStatement&&(o=!0,e.splice(t,1),r=n.consequent.argument,i=i.argument,r||i?(r=r||a.SpecialNode.generateUndefined(),i=i||a.SpecialNode.generateUndefined(),e[t]=a.moveLocation(n,{type:s.ReturnStatement,argument:{type:s.ConditionalExpression,test:n.test,consequent:r,alternate:i}})):e[t]=a.moveLocation(n,{type:s.ReturnStatement,argument:{type:s.SequenceExpression,expressions:[n.test,a.SpecialNode.generateUndefined()]}}),1)}function reduceBranchJump(e,t){t=t.get("destructive",{pathName:r})?e:a.deepCopy(e);return o=!1,a.traverse(t,{leave:function leave(e,t){var r;switch(e.type){case s.BlockStatement:case s.Program:for(r=0;r<e.body.length-1;)reduce(e.body,r)||++r;a.isFunctionBody(e,t)&&0<e.body.length&&(r=e.body.length-1,function reduceLast(e,t){var r,n=e[t];n.type!==s.IfStatement||n.alternate||n.consequent.type===s.ReturnStatement&&(o=!0,(r=n.consequent.argument)?e[t]=a.moveLocation(n,{type:s.ReturnStatement,argument:{type:s.ConditionalExpression,test:n.test,consequent:r,alternate:a.SpecialNode.generateUndefined()}}):e[t]=a.moveLocation(n,{type:s.ReturnStatement,argument:{type:s.SequenceExpression,expressions:[n.test,a.SpecialNode.generateUndefined()]}}))}(e.body,r));break;case s.SwitchCase:for(r=0;r<e.consequent.length-1;)reduce(e.consequent,r)||++r}}}),{result:t,modified:o}}r="reduce-branch-jump",a=e("../common"),s=a.Syntax,reduceBranchJump.passName=r,t.exports=reduceBranchJump}()},{"../common":14}],26:[function(e,t,r){!function(){"use strict";var r,n,i,s;function reduceMultipleIfStatements(e,t){t=t.get("destructive",{pathName:r})?e:i.deepCopy(e);return s=!1,i.traverse(t,{leave:function leave(e){e.type!==n.IfStatement||e.alternate||e.consequent.type!==n.IfStatement||e.consequent.alternate||(s=!0,e.test={type:n.LogicalExpression,operator:"&&",left:e.test,right:e.consequent.test},e.consequent=e.consequent.consequent)}}),{result:t,modified:s}}r="reduce-multiple-if-statements",i=e("../common"),n=i.Syntax,reduceMultipleIfStatements.passName=r,t.exports=reduceMultipleIfStatements}()},{"../common":14}],27:[function(e,t,r){!function(){"use strict";var r,o,u,s,a,l;function isStoreSideEffectFree(e,t){return!s.hasSideEffect(e,t)||e.type===o.Identifier||e.type===o.MemberExpression&&!(s.hasSideEffect(e.object,t)||e.computed&&!function isLoadSideEffectFree(e,t){var r;return s.constant.isConstant(e)&&(null===(r=s.constant.evaluate(e))||"object"!=typeof r)||e.type===o.Identifier&&(r=t.resolve(e))&&r.isStatic()}(e.property,t))}function reduceSequenceExpression(e,t){var n,i,t=t.get("destructive",{pathName:r})?e:u.deepCopy(e);return l=!1,n=null,(i=a.analyze(t,{directive:!0})).attach(),t=u.replace(t,{enter:function enter(e){n=i.acquire(e)||n},leave:function leave(e){var t,r;switch(e.type){case o.SequenceExpression:!function reduce(e){for(var t,r,n,i=[],s=0,a=e.expressions.length;s<a;++s)if((n=e.expressions[s]).type===o.SequenceExpression)for(l=!0,u.deleteLocation(e),t=0,r=n.expressions.length;t<r;++t)i.push(n.expressions[t]);else i.push(n);e.expressions=i}(e);break;case o.ConditionalExpression:e.test.type===o.SequenceExpression&&(l=!0,t=e.test,e.test=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e);break;case o.LogicalExpression:e.left.type===o.SequenceExpression&&(l=!0,t=e.left,e.left=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e);break;case o.BinaryExpression:e.left.type===o.SequenceExpression?(l=!0,t=e.left,e.left=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e):e.right.type!==o.SequenceExpression||s.hasSideEffect(e.left,n)||(l=!0,t=e.right,e.right=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e);break;case o.UpdateExpression:case o.UnaryExpression:if(e.argument.type===o.SequenceExpression){if(r=u.Array.last(e.argument.expressions),!u.SpecialNode.canExtractSequence(r,e,n))break;l=!0,t=e.argument,e.argument=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e}break;case o.AssignmentExpression:"="===e.operator&&e.right.type===o.SequenceExpression&&isStoreSideEffectFree(e.left,n)&&(l=!0,t=e.right,e.right=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e)}return n=i.release(e)||n,t}}),i.detach(),{result:t,modified:l}}r="reduce-sequence-expression",a=e("escope"),u=e("../common"),s=e("../evaluator"),o=u.Syntax,reduceSequenceExpression.passName=r,t.exports=reduceSequenceExpression}()},{"../common":14,"../evaluator":16,escope:10}],28:[function(e,t,r){!function(){"use strict";var r,o,u,n,l,c;function Transformer(e,t,r,n){this.transform=e,this.booleanFunction=t,this.voidFunction=r,this.scope=n}function voidContext(e,t){return new Transformer(Transformer.prototype.voidTransformation,booleanContext,voidContext,t).apply(e)}function booleanContext(e,t){return new Transformer(Transformer.prototype.booleanTransformation,booleanContext,booleanContext,t).apply(e)}function removeContextSensitiveExpressions(e,t){var n,i,s,a,e=t.get("destructive",{pathName:r})?e:u.deepCopy(e);return c=!1,n=0,i=t.get("preserveCompletionValue",{pathName:r}),s=null,(a=l.analyze(e,{directive:!0})).attach(),e=u.replace(e,{enter:function enter(e){var t,r;switch(s=a.acquire(e)||s,e.type!==o.FunctionExpression&&e.type!==o.FunctionDeclaration||++n,e.type){case o.AssignmentExpression:case o.ArrayExpression:case o.BlockStatement:case o.BinaryExpression:case o.BreakStatement:case o.CallExpression:case o.CatchClause:break;case o.ConditionalExpression:e.test=booleanContext(e.test,s);break;case o.ContinueStatement:break;case o.DoWhileStatement:e.test=booleanContext(e.test,s);break;case o.DebuggerStatement:case o.EmptyStatement:break;case o.ExpressionStatement:i&&0===n||(e.expression=voidContext(e.expression,s));break;case o.FunctionExpression:case o.ForInStatement:case o.FunctionDeclaration:break;case o.ForStatement:e.init&&e.init.type!==o.VariableDeclaration&&(e.init=voidContext(e.init,s)),e.test&&(e.test=booleanContext(e.test,s)),e.update&&(e.update=voidContext(e.update,s));break;case o.Identifier:break;case o.IfStatement:e.test=booleanContext(e.test,s);break;case o.Literal:case o.LabeledStatement:case o.LogicalExpression:case o.MemberExpression:case o.NewExpression:case o.ObjectExpression:case o.Program:case o.Property:case o.ReturnStatement:break;case o.SequenceExpression:for(t=0,r=e.expressions.length-1;t<r;++t)e.expressions[t]=voidContext(e.expressions[t],s);break;case o.SwitchStatement:case o.SwitchCase:case o.ThisExpression:case o.ThrowStatement:case o.TryStatement:break;case o.UnaryExpression:"!"===e.operator?e.argument=booleanContext(e.argument,s):"void"===e.operator&&(e.argument=voidContext(e.argument,s));break;case o.UpdateExpression:case o.VariableDeclaration:case o.VariableDeclarator:break;case o.WhileStatement:e.test=booleanContext(e.test,s);break;case o.WithStatement:}},leave:function leave(e){s=a.release(e)||s,e.type!==o.FunctionExpression&&e.type!==o.FunctionDeclaration||--n}}),a.detach(),{result:e,modified:c}}r="remove-context-sensitive-expressions",u=e("../common"),n=e("../evaluator"),l=e("escope"),o=u.Syntax,Transformer.prototype.booleanTransformation=function(e){var t;do{if(e.type===o.UnaryExpression){if("!"===e.operator&&e.argument.type===o.UnaryExpression&&"!"===e.argument.operator){c=!0,e=e.argument.argument;continue}}else if(e.type===o.LogicalExpression){if(e.left.type===o.UnaryExpression&&"!"===e.left.operator&&e.right.type===o.UnaryExpression&&"!"===e.right.operator){c=!0,e.left=e.left.argument,e.right=e.right.argument,e.operator="||"===e.operator?"&&":"||",e=u.moveLocation(e,{type:o.UnaryExpression,operator:"!",argument:e});continue}}else e.type===o.ConditionalExpression&&e.test.type===o.UnaryExpression&&"!"===e.test.operator&&(c=!0,e.test=e.test.argument,t=e.consequent,e.consequent=e.alternate,e.alternate=t);break}while(1);return e},Transformer.prototype.voidTransformation=function(e){var t,r;do{if((e=this.booleanTransformation(e)).type===o.UnaryExpression){if("!"===e.operator||"void"===e.operator){c=!0,e=e.argument;continue}}else e.type===o.LogicalExpression?e.left.type===o.UnaryExpression&&"!"===e.left.operator&&(c=!0,e.left=e.left.argument,e.operator="||"===e.operator?"&&":"||"):e.type===o.ConditionalExpression&&(t=n.hasSideEffect(e.consequent,this.scope),r=n.hasSideEffect(e.alternate,this.scope),t||r?t?r||(c=!0,e=u.moveLocation(e,{type:o.LogicalExpression,operator:"&&",left:e.test,right:e.consequent})):(c=!0,e=u.moveLocation(e,{type:o.LogicalExpression,operator:"||",left:e.test,right:e.alternate})):(c=!0,e=e.test));break}while(1);return e},Transformer.prototype.apply=function(e){for(;;)if(e===(e=this.transform(e))){e.type===o.LogicalExpression?(e.left=this.booleanFunction(e.left,this.scope),e.right=this.voidFunction(e.right,this.scope)):e.type===o.ConditionalExpression?(e.consequent=this.voidFunction(e.consequent,this.scope),e.alternate=this.voidFunction(e.alternate,this.scope)):e.type===o.SequenceExpression&&(e.expressions[e.expressions.length-1]=this.voidFunction(u.Array.last(e.expressions),this.scope));break}return e},removeContextSensitiveExpressions.passName=r,t.exports=removeContextSensitiveExpressions}()},{"../common":14,"../evaluator":16,escope:10}],29:[function(e,t,r){!function(){"use strict";var r,s,n,a;function remove(e){for(var t,r=[],n=0,i=e.length;n<i;++n)(t=e[n]).type===s.EmptyStatement?a=!0:r.push(t);return r}function removeEmptyStatement(e,t){return a=!1,t=t.get("destructive",{pathName:r})?e:n.deepCopy(e),n.traverse(t,{enter:function enter(e){var t;switch(e.type){case s.BlockStatement:case s.Program:e.body=remove(e.body);break;case s.SwitchCase:e.consequent=remove(e.consequent);break;case s.IfStatement:!function removeAlternate(e){e.alternate&&(e.alternate.type===s.EmptyStatement?(a=!0,e.alternate=null):e.consequent.type===s.EmptyStatement&&(a=!0,e.consequent=e.alternate,e.alternate=null,e.test=n.moveLocation(e.test,{type:s.UnaryExpression,operator:"!",argument:e.test})))}(e);break;case s.SwitchStatement:e.cases.length&&!(t=n.Array.last(e.cases)).test&&n.Array.empty(t.consequent)&&(a=!0,e.cases.pop())}}}),{result:t,modified:a}}r="remove-empty-statement",n=e("../common"),s=n.Syntax,removeEmptyStatement.passName=r,t.exports=removeEmptyStatement}()},{"../common":14}],30:[function(e,t,r){!function(){"use strict";var s,a,l,o,c,h;function removeSideEffectFreeExpressions(e,t){var n,i,r;function isResultNeeded(e,t){return!!(e.type!==a.ExpressionStatement||r&&"global"===t.type)}return e=t.get("destructive",{pathName:s})?e:l.deepCopy(e),r=t.get("preserveCompletionValue",{pathName:s}),h=!1,n=null,(i=o.analyze(e,{directive:!0})).attach(),e=l.replace(e,{enter:function enter(e,t){var r=e;return n=i.acquire(e)||n,(r=r.type===a.SequenceExpression?function reduce(e,t,r,n){var i,s,a,o,u;for(l.assert(1<e.expressions.length,"expressions should be more than one"),o=[],i=0,s=e.expressions.length;i<s;++i)u=a,a=e.expressions[i],(i+1===s&&n||c.hasSideEffect(a,t))&&o.push(a);if(!n&&0===o.length)return h=!0,a;for(l.assert(0<o.length,"result should be more than zero");;){if(s===o.length)return e;if(1!==o.length)return h=!0,e.expressions=o,e;if(l.SpecialNode.canExtractSequence(o[0],r,t))return h=!0,o[0];o.unshift(u)}}(r,n,t,isResultNeeded(t,n)):r).type===a.SequenceExpression&&(l.assert(1<r.expressions.length,"sequences' length should be more than 1"),(e=l.Array.last(r.expressions)).type!==a.UnaryExpression||"void"!==e.operator||c.hasSideEffect(e.argument,n)||(h=!0,r.expressions.pop(),t=l.moveLocation(e,{type:a.UnaryExpression,operator:"void",argument:l.Array.last(r.expressions)}),1===r.expressions.length?r=t:r.expressions[r.expressions.length-1]=t)),isResultNeeded(r,n)||c.hasSideEffect(r.expression,n)||(h=!0,r=l.moveLocation(r,{type:a.EmptyStatement})),r},leave:function leave(e){n=i.release(e)||n}}),i.detach(),{result:e,modified:h}}s="remove-side-effect-free-expressions",o=e("escope"),l=e("../common"),c=e("../evaluator"),a=l.Syntax,removeSideEffectFreeExpressions.passName=s,t.exports=removeSideEffectFreeExpressions}()},{"../common":14,"../evaluator":16,escope:10}],31:[function(e,t,r){!function(){"use strict";var n,s,a,i,o,u;function removeUnreachableBranch(e,t){var r,t=t.get("destructive",{pathName:n})?e:a.deepCopy(e);return u=!1,r=[],{result:a.replace(t,{enter:function enter(e){var t;if(i.Scope.isVariableScopeRequired(e))r.push(e);else switch(t=a.Array.last(r),e.type){case s.IfStatement:return function handleIfStatement(e,t){var r,n,i=o.booleanCondition(t.test);if(t.alternate){if("boolean"==typeof i)return u=!0,r=[],i?((n=a.delegateVariableDeclarations(t.alternate,e))&&r.push(n),r.push(a.moveLocation(t.test,{type:s.ExpressionStatement,expression:t.test}),t.consequent)):((n=a.delegateVariableDeclarations(t.consequent,e))&&r.push(n),r.push(a.moveLocation(t.test,{type:s.ExpressionStatement,expression:t.test}),t.alternate)),{type:s.BlockStatement,body:r}}else if("boolean"==typeof i)return u=!0,r=[],i?r.push(a.moveLocation(t.test,{type:s.ExpressionStatement,expression:t.test}),t.consequent):((n=a.delegateVariableDeclarations(t.consequent,e))&&r.push(n),r.push(a.moveLocation(t.test,{type:s.ExpressionStatement,expression:t.test}))),{type:s.BlockStatement,body:r}}(t,e);case s.LogicalExpression:return function handleLogicalExpression(e,t){var r=o.booleanCondition(t.left);if("boolean"==typeof r)return u=!0,r?"&&"===t.operator?a.moveLocation(t,{type:s.SequenceExpression,expressions:[t.left,t.right]}):t.left:"&&"===t.operator?t.left:a.moveLocation(t,{type:s.SequenceExpression,expressions:[t.left,t.right]})}(0,e);case s.ConditionalExpression:return function handleConditionalExpression(e,t){var r=o.booleanCondition(t.test);if("boolean"==typeof r)return u=!0,r?a.moveLocation(t,{type:s.SequenceExpression,expressions:[t.test,t.consequent]}):a.moveLocation(t,{type:s.SequenceExpression,expressions:[t.test,t.alternate]})}(0,e)}},leave:function leave(e){i.Scope.isVariableScopeRequired(e)&&r.pop()}}),modified:u}}n="remove-unreachable-branch",i=e("escope"),a=e("../common"),o=e("../evaluator"),s=a.Syntax,removeUnreachableBranch.passName=n,t.exports=removeUnreachableBranch}()},{"../common":14,"../evaluator":16,escope:10}],32:[function(e,o,t){!function(){"use strict";var r,n,t,i,s,a;function Scope(e){this.set=new t,this.unused=[],this.upper=e}function removeUnusedLabel(e,t){t=t.get("destructive",{pathName:r})?e:i.deepCopy(e);return s=null,a=!1,{result:i.replace(t,{enter:function enter(e){switch(e.type){case n.Program:case n.FunctionDeclaration:case n.FunctionExpression:s=new Scope(s);break;case n.LabeledStatement:s.register(e);break;case n.BreakStatement:case n.ContinueStatement:s.resolve(e)}},leave:function leave(e){var t=s.unregister(e);return e.type!==n.Program&&e.type!==n.FunctionDeclaration&&e.type!==n.FunctionExpression||(s=s.close()),t}}),modified:a}}r="remove-unused-label",i=e("../common"),t=e("../map"),n=i.Syntax,Scope.prototype.register=function register(e){var t;i.assert(e.type===n.LabeledStatement),t=e.label.name,i.assert(!this.set.has(t),"duplicate label is found"),this.set.set(t,{used:!1,stmt:e})},Scope.prototype.unregister=function unregister(e){var t,r;return e.type!==n.LabeledStatement||(t=e.label.name,r=this.set.get(t),this.set.delete(t),r.used)?e:(a=!0,e.body)},Scope.prototype.resolve=function resolve(e){e.label&&(e=e.label.name,i.assert(this.set.has(e),"unresolved label"),this.set.get(e).used=!0)},Scope.prototype.close=function close(){return this.upper},removeUnusedLabel.passName=r,o.exports=removeUnusedLabel}()},{"../common":14,"../map":17}],33:[function(e,t,r){!function(){"use strict";var r,l,c,h;function removeWastedBlocks(e,t){t=t.get("destructive",{pathName:r})?e:c.deepCopy(e);return h=!1,{result:c.replace(t,{leave:function leave(e,t){var r,n;if(e.type===l.BlockStatement||e.type===l.Program)for(r=0,n=e.body.length;r<n;++r)if(e.body[r].type===l.BlockStatement){e.body=function flattenBlockStatement(e){for(var t,r,n,i,s,a=[],o=0,u=e.length;o<u;++o)if((n=e[o]).type===l.BlockStatement){for(s=!0,t=0,r=n.body.length;t<r;++t)i=n.body[t],c.isScopedDeclaration(i)&&(s=!1);s?(h=!0,a=a.concat(n.body)):a.push(n)}else a.push(n);return a}(e.body);break}if(t.type!==l.FunctionDeclaration&&t.type!==l.FunctionExpression&&t.type!==l.TryStatement&&t.type!==l.CatchClause){for(;e.type===l.BlockStatement&&1===e.body.length&&!c.isScopedDeclaration(e.body[0]);)h=!0,e=e.body[0];return e.type===l.BlockStatement&&0===e.body.length?(h=!0,{type:l.EmptyStatement}):e}}}),modified:h}}r="remove-wasted-blocks",c=e("../common"),l=c.Syntax,removeWastedBlocks.passName=r,t.exports=removeWastedBlocks}()},{"../common":14}],34:[function(e,t,r){!function(){"use strict";var r,o,n,u;function reordering(e){for(var t,r=[],n=[],i=[],s=0,a=e.length;s<a;++s)((t=e[s]).type===o.FunctionDeclaration?(n.length+r.length!==s&&(u=!0),n):t.type===o.DirectiveStatement?r:i).push(t);return r.concat(n,i)}function reorderingFunctionDeclarations(e,t){t=t.get("destructive",{pathName:r})?e:n.deepCopy(e);return u=!1,n.traverse(t,{leave:function leave(e){switch(e.type){case o.Program:e.body=reordering(e.body);break;case o.FunctionDeclaration:case o.FunctionExpression:e.body.body=reordering(e.body.body)}}}),{result:t,modified:u}}r="reordering-function-declarations",n=e("../common"),o=n.Syntax,reorderingFunctionDeclarations.passName=r,t.exports=reorderingFunctionDeclarations}()},{"../common":14}],35:[function(e,t,r){!function(){"use strict";var r,i,s,a;function transformBranchToExpression(e,t){var e=t.get("destructive",{pathName:r})?e:s.deepCopy(e),n=t.get("preserveCompletionValue",{pathName:r});return a=!1,{result:s.replace(e,{leave:function leave(e){var t,r;if(e.type===i.IfStatement&&(r=this.parents(),!n||!s.mayBeCompletionValue(e,r)))return e.alternate?e.consequent.type===i.ExpressionStatement&&e.alternate.type===i.ExpressionStatement?(a=!0,s.moveLocation(e,{type:i.ExpressionStatement,expression:s.moveLocation(e,{type:i.ConditionalExpression,test:e.test,consequent:e.consequent.expression,alternate:e.alternate.expression})})):e.consequent.type===i.ReturnStatement&&e.alternate.type===i.ReturnStatement?(a=!0,e.consequent.argument||e.alternate.argument?(r=e.consequent.argument||s.SpecialNode.generateUndefined(),t=e.alternate.argument||s.SpecialNode.generateUndefined(),s.moveLocation(e,{type:i.ReturnStatement,argument:s.moveLocation(e,{type:i.ConditionalExpression,test:e.test,consequent:r,alternate:t})})):s.moveLocation(e,{type:i.ReturnStatement,argument:s.moveLocation(e,{type:i.SequenceExpression,expressions:[e.test,s.SpecialNode.generateUndefined()]})})):e.consequent.type===i.ThrowStatement&&e.alternate.type===i.ThrowStatement?(a=!0,s.moveLocation(e,{type:i.ThrowStatement,argument:s.moveLocation(e,{type:i.ConditionalExpression,test:e.test,consequent:e.consequent.argument,alternate:e.alternate.argument})})):void 0:e.consequent.type===i.ExpressionStatement?(a=!0,s.moveLocation(e,{type:i.ExpressionStatement,expression:s.moveLocation(e,{type:i.LogicalExpression,operator:"&&",left:e.test,right:e.consequent.expression})})):e.consequent.type===i.EmptyStatement?(a=!0,s.moveLocation(e,{type:i.ExpressionStatement,expression:e.test})):void 0}}),modified:a}}r="transform-branch-to-expression",s=e("../common"),i=s.Syntax,transformBranchToExpression.passName=r,t.exports=transformBranchToExpression}()},{"../common":14}],36:[function(e,t,r){!function(){"use strict";var r,n,i,s;function transformDynamicToStaticPropertyAccess(e,t){return s=!1,t=t.get("destructive",{pathName:r})?e:i.deepCopy(e),i.traverse(t,{enter:function enter(e){var t;e.type===n.MemberExpression&&e.computed&&(t=e.property).type===n.Literal&&"string"==typeof t.value&&(i.isIdentifier(t.value)?(s=!0,e.computed=!1,e.property=i.moveLocation(t,{type:n.Identifier,name:t.value})):t.value===Number(t.value).toString()&&(s=!0,e.computed=!0,e.property=i.moveLocation(e.property,i.SpecialNode.generateFromValue(Number(e.property.value)))))}}),{result:t,modified:s}}r="transform-dynamic-to-static-property-access",i=e("../common"),n=i.Syntax,transformDynamicToStaticPropertyAccess.passName=r,t.exports=transformDynamicToStaticPropertyAccess}()},{"../common":14}],37:[function(e,t,r){!function(){"use strict";var r,n,i,s;function transformDynamicToStaticPropertyDefinition(e,t){t=t.get("destructive",{pathName:r})?e:i.deepCopy(e);return s=!1,i.traverse(t,{enter:function enter(e){var t;e.type===n.Property&&e.key.type===n.Literal&&"string"==typeof e.key.value&&(i.isIdentifier(e.key.value)?(s=!0,e.key=i.moveLocation(e.key,{type:n.Identifier,name:e.key.value})):e.key.value===Number(e.key.value).toString()&&(t=i.SpecialNode.generateFromValue(Number(e.key.value))).type===n.Literal&&(s=!0,e.key=i.moveLocation(e.key,t)))}}),{result:t,modified:s}}r="transform-dynamic-to-static-property-definition",i=e("../common"),n=i.Syntax,transformDynamicToStaticPropertyDefinition.passName=r,t.exports=transformDynamicToStaticPropertyDefinition}()},{"../common":14}],38:[function(e,t,r){!function(){"use strict";var r,i,n,s;function transformImmediateFunctionCall(e,t){t=t.get("destructive",{pathName:r})?e:n.deepCopy(e);return s=!1,{result:n.replace(t,{leave:function leave(e){if(function isEmptyFunctionCall(e){var t,r,n;if(e.type===i.CallExpression&&(t=e.callee).type===i.FunctionExpression&&t.body.type===i.BlockStatement){if(0!==t.body.body.length)for(r=0,n=t.body.body.length;r<n;++r)if(t.body.body[r].type!==i.FunctionDeclaration)return;return 1}}(e))return s=!0,function callToSequence(e){var t=n.Array.from(e.arguments);return 0===t.length?n.SpecialNode.generateUndefined(e):(t.push(n.SpecialNode.generateUndefined()),n.moveLocation(e,{type:i.SequenceExpression,expressions:t}))}(e)}}),modified:s}}r="transform-immediate-function-call",n=e("../common"),i=n.Syntax,transformImmediateFunctionCall.passName=r,t.exports=transformImmediateFunctionCall}()},{"../common":14}],39:[function(e,t,r){!function(){"use strict";var r,n,i,s;function transformLogicalAssociation(e,t){t=t.get("destructive",{pathName:r})?e:i.deepCopy(e);return s=!1,i.traverse(t,{enter:function enter(e){e.type===n.LogicalExpression&&e.right.type===n.LogicalExpression&&e.operator===e.right.operator&&(s=!0,e.left={type:n.LogicalExpression,operator:e.operator,left:e.left,right:e.right.left},e.right=e.right.right)}}),{result:t,modified:s}}r="transform-logical-association",i=e("../common"),n=i.Syntax,transformLogicalAssociation.passName=r,t.exports=transformLogicalAssociation}()},{"../common":14}],40:[function(e,t,r){!function(){"use strict";var r,a,n,o,u;function equals(e,t){return e.type===t.type&&e.type===a.Identifier&&e.name===t.name}function transformToCompoundAssignment(e,t){var i,s,t=t.get("destructive",{pathName:r})?e:n.deepCopy(e);return u=!1,i=null,(s=o.analyze(t,{directive:!0})).attach(),n.traverse(t,{enter:function enter(e){var t,r,n;i=s.acquire(e)||i,e.type===a.AssignmentExpression&&"="===e.operator&&(t=e.left,(r=e.right).type===a.BinaryExpression&&equals(r.left,t)?(n=function compound(e){switch(e){case"*":case"/":case"%":case"+":case"-":case"<<":case">>":case">>>":case"&":case"^":case"|":return e+"="}return null}(r.operator))&&(u=!0,e.operator=n,e.right=r.right):r.type===a.AssignmentExpression&&equals(r.left,t)&&function observableCompound(e){switch(e){case"*=":case"/=":case"%=":case"+=":case"-=":case"<<=":case">>=":case">>>=":case"&=":case"^=":case"|=":return e}}(r.operator)&&i.resolve(e.left).isStatic()&&(u=!0,e.operator=r.operator,e.right=r.right))},leave:function leave(e){i=s.release(e)||i}}),s.detach(),{result:t,modified:u}}r="transform-to-compound-assignment",o=e("escope"),n=e("../common"),a=n.Syntax,transformToCompoundAssignment.passName=r,t.exports=transformToCompoundAssignment}()},{"../common":14,escope:10}],41:[function(e,t,r){!function(){"use strict";var r,o,n,u;function transformToSequenceExpression(e,t){return u=!1,t=t.get("destructive",{pathName:r})?e:n.deepCopy(e),n.traverse(t,{enter:function enter(e){switch(e.type){case o.BlockStatement:case o.Program:!function transform(e){var t,r,n,i,s,a;function constructSeq(e,t){return 1!==e.length&&(u=!0,e={type:o.SequenceExpression,expressions:e},t.type===o.ExpressionStatement?t.expression=e:t.argument=e),t}for(a=[],n=[],t=0,r=e.body.length;t<r;++t)s=i,(i=e.body[t]).type===o.ExpressionStatement?n.push(i.expression):i.type===o.ReturnStatement&&null!=i.argument||i.type===o.ThrowStatement?(n.push(i.argument),a.push(constructSeq(n,i)),n=[]):(i.type!==o.ForStatement||i.init&&i.init.type===o.VariableDeclaration?i.type===o.IfStatement?n.length&&(u=!0,n.push(i.test),i.test={type:o.SequenceExpression,expressions:n},n=[]):n.length&&(a.push(constructSeq(n,s)),n=[]):n.length&&(u=!0,i.init&&n.push(i.init),1===n.length?i.init=n[0]:i.init={type:o.SequenceExpression,expressions:n},n=[]),a.push(i));n.length&&a.push(constructSeq(n,i)),e.body=a}(e)}}}),{result:t,modified:u}}r="transform-to-sequence-expression",n=e("../common"),o=n.Syntax,transformToSequenceExpression.passName=r,t.exports=transformToSequenceExpression}()},{"../common":14}],42:[function(e,t,r){!function(){"use strict";var r,o,u,n,l;function isUndefinedStringLiteral(e){return e.type===o.Literal&&"undefined"===e.value}function transformTypeofUndefined(e,t){var s,a,t=t.get("destructive",{pathName:r})?e:u.deepCopy(e);return l=!1,a=null,(s=n.analyze(t,{directive:!0})).attach(),u.traverse(t,{enter:function enter(e){var t,r,n,i;if(a=s.acquire(e)||a,e.type===o.BinaryExpression&&("==="===e.operator||"!=="===e.operator||"=="===e.operator||"!="===e.operator)){if(isUndefinedStringLiteral(e.left))r="left",t="right";else{if(!isUndefinedStringLiteral(e.right))return;r="right",t="left"}e[t].type===o.UnaryExpression&&"typeof"===e[t].operator&&((n=e[t].argument).type!==o.Identifier||(i=a.resolve(n))&&i.isStatic()&&i.resolved)&&(l=!0,e[r]=u.SpecialNode.generateUndefined(),e[t]=n,e.operator="!"===e.operator.charAt(0)?"!==":"===")}},leave:function leave(e){a=s.release(e)||a}}),s.detach(),{result:t,modified:l}}r="transform-typeof-undefined",n=e("escope"),u=e("../common"),o=u.Syntax,transformTypeofUndefined.passName=r,t.exports=transformTypeofUndefined}()},{"../common":14,escope:10}],43:[function(e,t,r){!function(){"use strict";var r,i,s,a,o;function isFoldableConditional(e){return e.type===i.ConditionalExpression&&(a.constant.isConstant(e.consequent)||a.constant.isConstant(e.alternate))}function treeBasedConstantFolding(e,t){t=t.get("destructive",{pathName:r})?e:s.deepCopy(e);return o=!1,{result:s.replace(t,{leave:function leave(e){var t,r;switch(e.type){case i.BinaryExpression:case i.LogicalExpression:case i.UnaryExpression:return function isModifiedConstant(e){return!s.SpecialNode.isUndefined(e)&&!s.SpecialNode.isNegative(e)&&!s.SpecialNode.isNaN(e)&&a.constant.isConstant(e,!1)}(e)?(o=!0,s.moveLocation(e,s.SpecialNode.generateFromValue(a.constant.evaluate(e)))):function foldConditional(e){var t,r,n;switch(e.type){case i.BinaryExpression:if("in"===e.operator||"instanceof"===e.operator)return e;a.constant.isConstant(e.left)&&isFoldableConditional(e.right)?(o=!0,r=(t=e).operator,n=a.constant.evaluate(t.left),e=e.right,a.constant.isConstant(e.consequent)?e.consequent=s.SpecialNode.generateFromValue(a.constant.doBinary(r,n,a.constant.evaluate(e.consequent))):(t.right=e.consequent,e.consequent=t),a.constant.isConstant(e.alternate)?e.alternate=s.SpecialNode.generateFromValue(a.constant.doBinary(r,n,a.constant.evaluate(e.alternate))):(t.right=e.alternate,e.alternate=t)):a.constant.isConstant(e.right)&&isFoldableConditional(e.left)&&(o=!0,r=(t=e).operator,n=a.constant.evaluate(t.right),e=e.left,a.constant.isConstant(e.consequent)?e.consequent=s.SpecialNode.generateFromValue(a.constant.doBinary(r,a.constant.evaluate(e.consequent),n)):(t.left=e.consequent,e.consequent=t),a.constant.isConstant(e.alternate)?e.alternate=s.SpecialNode.generateFromValue(a.constant.doBinary(r,a.constant.evaluate(e.alternate),n)):(t.left=e.alternate,e.alternate=t));break;case i.LogicalExpression:break;case i.UnaryExpression:isFoldableConditional(e.argument)&&(o=!0,r=(n=e).operator,e=n.argument,a.constant.isConstant(e.consequent)?e.consequent=s.SpecialNode.generateFromValue(a.constant.doUnary(r,a.constant.evaluate(e.consequent))):(n.argument=e.consequent,e.consequent=n),a.constant.isConstant(e.alternate)?e.alternate=s.SpecialNode.generateFromValue(a.constant.doUnary(r,a.constant.evaluate(e.alternate))):(n.argument=e.alternate,e.alternate=n))}return e}(e);case i.ConditionalExpression:if(a.constant.isConstant(e.consequent)&&a.constant.isConstant(e.alternate)&&(t=a.constant.evaluate(e.consequent),r=a.constant.evaluate(e.alternate),s.sameValue(t,r)))return o=!0,s.moveLocation(e,{type:i.SequenceExpression,expressions:[e.test,s.SpecialNode.generateFromValue(t)]})}}}),modified:o}}r="tree-based-constant-folding",s=e("../common"),a=e("../evaluator"),i=s.Syntax,treeBasedConstantFolding.passName=r,t.exports=treeBasedConstantFolding}()},{"../common":14,"../evaluator":16}],44:[function(e,t,r){!function(){"use strict";var r,i,s,a;function main(e,t){var e=t.get("destructive",{pathName:r})?e:s.deepCopy(e),n=t.get("preserveCompletionValue",{pathName:r});return a=!1,{result:s.replace(e,{enter:function enter(e,t){var r;if(function isIIFE(e){return e.type===i.CallExpression&&e.callee.type===i.FunctionExpression}(e)){if((t=t).type===i.ExpressionStatement){if((r=this.parents()).pop(),n&&s.mayBeCompletionValue(t,r))return}else{if(!(t.type===i.SequenceExpression&&2<=t.expressions.length&&t.expressions[0]===e))return;if((r=this.parents()).pop(),r.pop().type!==i.ExpressionStatement)return}return a=!0,{type:i.UnaryExpression,operator:"!",argument:e}}},leave:function leave(e){e.type!==i.FunctionExpression&&e.type!==i.FunctionDeclaration||0}}),modified:a}}r="omit-parens-in-void-context-iife",s=e("../common"),i=s.Syntax,main.passName=r,t.exports=main}()},{"../common":14}],45:[function(e,s,t){!function(){"use strict";var r,t,n,i;function isBooleanLiteral(e){return e.type===t.Literal&&"boolean"==typeof e.value}function rewrite(e){if(isBooleanLiteral(e))return i=!0,n.moveLocation(e,{type:t.UnaryExpression,operator:"!",argument:n.moveLocation(e,{type:t.Literal,value:+!e.value})});if(e.type===t.BinaryExpression&&"=="===e.operator||"!="===e.operator){if(isBooleanLiteral(e.left))return i=!0,e.left=n.moveLocation(e.left,{type:t.Literal,value:+e.left.value}),e;if(isBooleanLiteral(e.right))i=!0,e.right=n.moveLocation(e.right,{type:t.Literal,value:+e.right.value})}return e}function rewriteBoolean(e,t){return i=!1,t=t.get("destructive",{pathName:r})?e:n.deepCopy(e),{result:n.replace(t,{enter:rewrite}),modified:i}}r="rewrite-boolean",n=e("../common"),t=n.Syntax,rewriteBoolean.passName=r,s.exports=rewriteBoolean}()},{"../common":14}],46:[function(e,t,r){!function(){"use strict";var r,i,n,s;function rewriteConditionalExpression(e,t){return s=!1,t=t.get("destructive",{pathName:r})?e:n.deepCopy(e),n.traverse(t,{enter:function enter(e){e.type===i.ConditionalExpression&&!function rewrite(e){var t=e.test,r=e.consequent,n=e.alternate;t.type===i.UnaryExpression&&"!"===t.operator&&(s=!0,e.consequent=n,e.alternate=r,e.test=t.argument)}(e)}}),{result:t,modified:s}}r="rewrite-conditional-expression",n=e("../common"),i=n.Syntax,rewriteConditionalExpression.passName=r,t.exports=rewriteConditionalExpression}()},{"../common":14}],47:[function(e,t,r){!function(){"use strict";var n,i,s;function transformInfinity(e,t){var t=t.get("destructive",{pathName:n})?e:s.deepCopy(e),r=!1;return{result:s.replace(t,{enter:function enter(e){if(e.type===i.Literal&&"number"==typeof e.value&&e.value===1/0)return r=!0,s.moveLocation(e,{type:i.BinaryExpression,operator:"/",left:{type:i.Literal,value:1},right:{type:i.Literal,value:0}})}}),modified:r}}n="transform-infinity",s=e("../common"),i=s.Syntax,transformInfinity.passName=n,t.exports=transformInfinity}()},{"../common":14}],48:[function(e,t,r){!function(){"use strict";var n,i,s;function transformStaticToDynamicPropertyAccess(e,t){var t=t.get("destructive",{pathName:n})?e:s.deepCopy(e),r=!1;return s.traverse(t,{enter:function enter(e){var t;if(e.type===i.MemberExpression&&!e.computed&&e.property.type===i.Identifier)switch((t=e.property).name){case"undefined":r=!0,e.computed=!0,e.property=s.moveLocation(t,{type:i.UnaryExpression,operator:"void",argument:{type:i.Literal,value:0}});break;case"true":case"false":r=!0,e.computed=!0,e.property=s.moveLocation(t,{type:i.Literal,value:"true"===t.name});break;case"Infinity":r=!0,e.computed=!0,e.property=s.moveLocation(t,{type:i.BinaryExpression,operator:"/",left:{type:i.Literal,value:1},right:{type:i.Literal,value:0}})}}}),{result:t,modified:r}}n="transform-static-to-dynamic-property-access",s=e("../common"),i=s.Syntax,transformStaticToDynamicPropertyAccess.passName=n,t.exports=transformStaticToDynamicPropertyAccess}()},{"../common":14}],49:[function(e,t,r){!function(){"use strict";var a=e("./common");r.get=function get(e,t){for(var r=e,n=0,i=t.length;n<i;++n)r=r[t[n]];return r},r.set=function set(e,t,r){var n,i,s;for(a.assert(0<t.length),s=e,n=0,i=t.length-1;n<i;++n)s=s[t[n]];s[t[n]]=r}}()},{"./common":14}],50:[function(e,t,r){!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t(void 0!==r?r:e.estraverse={})}(this,function(e){"use strict";var m,g,u,y,v,_;function deepCopy(e){var t,r,n={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],n[t]="object"==typeof r&&null!==r?deepCopy(r):r);return n}function Reference(e,t){this.parent=e,this.key=t}function Element(e,t,r,n){this.node=e,this.path=t,this.wrap=r,this.ref=n}function Controller(){}function traverse(e,t){return(new Controller).traverse(e,t)}function extendCommentRange(t,e){var r=function upperBound(e,t){for(var r,n,i=e.length,s=0;i;)t(e[n=s+(r=i>>>1)])?i=r:(s=n+1,i-=1+r);return s}(e,function search(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],r!==e.length&&(t.extendedRange[1]=e[r].range[0]),0<=--r&&(t.extendedRange[0]=e[r].range[1]),t}m={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},g=(g=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},y={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={Break:v={},Skip:_={}},Reference.prototype.replace=function replace(e){this.parent[this.key]=e},Controller.prototype.path=function path(){var e,t,r,n,i;function addToPath(e,t){if(g(t))for(r=0,n=t.length;r<n;++r)e.push(t[r]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)addToPath(i,this.__leavelist[e].path);return addToPath(i,this.__current.path),i},Controller.prototype.parents=function parents(){for(var e=[],t=1,r=this.__leavelist.length;t<r;++t)e.push(this.__leavelist[t].node);return e},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(e,t){var r=void 0,n=this.__current;return this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},Controller.prototype.notify=function notify(e){this.__state=e},Controller.prototype.skip=function(){this.notify(_)},Controller.prototype.break=function(){this.notify(v)},Controller.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null},Controller.prototype.traverse=function traverse(e,t){var r,n,i,s,a,o,u,l,c,h,p,d;for(this.__initialize(e,t),d={},r=this.__worklist,n=this.__leavelist,r.push(new Element(e,null,null,null)),n.push(new Element(null,null,null,null));r.length;)if((i=r.pop())===d){if(i=n.pop(),o=this.__execute(t.leave,i),this.__state===v||o===v)return}else if(i.node){if(o=this.__execute(t.enter,i),this.__state===v||o===v)return;if(r.push(d),n.push(i),this.__state!==_&&o!==_)for(s=i.node,a=i.wrap||s.type,l=(h=y[a]).length;0<=--l;)if(p=s[u=h[l]])if(g(p))for(c=p.length;0<=--c;)p[c]&&(i=a!==m.ObjectExpression&&a!==m.ObjectPattern||"properties"!==h[l]?new Element(p[c],[u,c],null,null):new Element(p[c],[u,c],"Property",null),r.push(i));else r.push(new Element(p,u,null,null))}},Controller.prototype.replace=function replace(e,t){var r,n,i,s,a,o,u,l,c,h,p,d,f;for(this.__initialize(e,t),p={},r=this.__worklist,n=this.__leavelist,o=new Element(e,null,null,new Reference(d={root:e},"root")),r.push(o),n.push(o);r.length;)if((o=r.pop())===p){if(o=n.pop(),void 0!==(a=this.__execute(t.leave,o))&&a!==v&&a!==_&&o.ref.replace(a),this.__state===v||a===v)return d.root}else{if(void 0!==(a=this.__execute(t.enter,o))&&a!==v&&a!==_&&(o.ref.replace(a),o.node=a),this.__state===v||a===v)return d.root;if((i=o.node)&&(r.push(p),n.push(o),this.__state!==_)&&a!==_)for(s=o.wrap||i.type,u=(c=y[s]).length;0<=--u;)if(h=i[f=c[u]])if(g(h))for(l=h.length;0<=--l;)h[l]&&(o=s===m.ObjectExpression&&"properties"===c[u]?new Element(h[l],[f,l],"Property",new Reference(h,l)):new Element(h[l],[f,l],null,new Reference(h,l)),r.push(o));else r.push(new Element(h,f,null,new Reference(i,f)))}return d.root},e.version="1.5.1-dev",e.Syntax=m,e.traverse=traverse,e.replace=function replace(e,t){return(new Controller).replace(e,t)},e.attachComments=function attachComments(e,t,r){var n,i,s,a,o=[];if(!e.range)throw new Error("attachComments needs range information");if(r.length){for(s=0,i=t.length;s<i;s+=1)o.push(extendCommentRange(deepCopy(t[s]),r));a=0,traverse(e,{enter:function(e){for(var t;a<o.length&&!((t=o[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}}),a=0,traverse(e,{leave:function(e){for(var t;a<o.length&&(t=o[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}})}else if(t.length){for(s=0,i=t.length;s<i;s+=1)(n=deepCopy(t[s])).extendedRange=[0,e.range[0]],o.push(n);e.leadingComments=o}return e},e.VisitorKeys=y,e.VisitorOption=u,e.Controller=Controller})},{}],51:[function(e,r,t){!function(){"use strict";var t;function isDecimalDigit(e){return 48<=e&&e<=57}t={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},r.exports={isDecimalDigit:isDecimalDigit,isHexDigit:function isHexDigit(e){return isDecimalDigit(e)||97<=e&&e<=102||65<=e&&e<=70},isOctalDigit:function isOctalDigit(e){return 48<=e&&e<=55},isWhiteSpace:function isWhiteSpace(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)},isLineTerminator:function isLineTerminator(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function isIdentifierStart(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&t.NonAsciiIdentifierStart.test(String.fromCharCode(e))},isIdentifierPart:function isIdentifierPart(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&t.NonAsciiIdentifierPart.test(String.fromCharCode(e))}}}()},{}],52:[function(e,t,r){!function(){"use strict";var i=e("./code");function isKeywordES6(e,t){if(t&&function isStrictModeReservedWordES6(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return 1;default:return}}(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}t.exports={isKeywordES5:function isKeywordES5(e,t){return!(!t&&"yield"===e)&&isKeywordES6(e,t)},isKeywordES6:isKeywordES6,isRestrictedWord:function isRestrictedWord(e){return"eval"===e||"arguments"===e},isIdentifierName:function isIdentifierName(e){var t,r,n;if(0===e.length)return!1;if(n=e.charCodeAt(0),!i.isIdentifierStart(n)||92===n)return!1;for(t=1,r=e.length;t<r;++t)if(n=e.charCodeAt(t),!i.isIdentifierPart(n)||92===n)return!1;return!0}}}()},{"./code":51}],53:[function(e,t,r){!function(){"use strict";r.code=e("./code"),r.keyword=e("./keyword")}()},{"./code":51,"./keyword":52}],54:[function(e,t,r){t.exports={name:"esmangle",description:"ECMAScript code mangler / minifier",homepage:"http://github.com/Constellation/esmangle.html",main:"lib/esmangle.js",bin:{esmangle:"./bin/esmangle.js"},version:"1.0.1",engines:{node:">=0.6.0"},directories:{lib:"./lib"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/Constellation/esmangle.git"},dependencies:{esutils:"~ 1.0.0",esshorten:"~1.1.0",estraverse:"~1.5.0",escope:"~1.0.1","source-map":"~0.1.33",escodegen:"~1.3.2",optionator:"~0.3.0",esprima:"~1.1.1"},devDependencies:{chai:"*","grunt-contrib-jshint":"~0.8.0","grunt-mocha-test":"~0.8.1","grunt-contrib-copy":"~0.5.0","grunt-contrib-clean":"~0.5.0",async:"~0.2.9",q:"~0.9.7","commonjs-everywhere":"~0.9.4","grunt-cli":"~0.1.11",grunt:"~0.4.2","grunt-update-submodules":"~0.2.1","grunt-shell":"~0.6.1",clone:"~0.1.11"},licenses:[{type:"BSD",url:"http://github.com/Constellation/esmangle/raw/master/LICENSE.BSD"}],scripts:{test:"grunt travis",lint:"grunt lint","regression-test":"grunt test:regression","unit-test":"grunt test",build:"grunt build"}}},{}],55:[function(e,r,n){!function webpackUniversalModuleDefinition(e,t){"object"==typeof n&&"object"==typeof r?r.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof n?n.esprima=t():e.esprima=t()}(this,function(){return r=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),u=r(3),l=r(8),a=r(15);function parse(e,t,r){function TG(e,t){r&&r(e,t),n&&n.visit(e,t)}var n=null,i="function"==typeof r?TG:null,s=!1,a=(t&&(s="boolean"==typeof t.comment&&t.comment,a="boolean"==typeof t.attachComment&&t.attachComment,s||a)&&((n=new o.CommentHandler).attach=a,t.comment=!0,i=TG),!1),e=(t&&"string"==typeof t.sourceType&&(a="module"===t.sourceType),new(t&&"boolean"==typeof t.jsx&&t.jsx?u.JSXParser:l.Parser)(e,t,i)),t=a?e.parseModule():e.parseScript();return s&&n&&(t.comments=n.comments),e.config.tokens&&(t.tokens=e.tokens),e.config.tolerant&&(t.errors=e.errorHandler.errors),t}t.parse=parse,t.parseModule=function parseModule(e,t,r){return(t=t||{}).sourceType="module",parse(e,t,r)},t.parseScript=function parseScript(e,t,r){return(t=t||{}).sourceType="script",parse(e,t,r)},t.tokenize=function tokenize(e,t,r){var n=new a.Tokenizer(e,t),i=[];try{for(;;){var s=n.getNextToken();if(!s)break;r&&(s=r(s)),i.push(s)}}catch(e){n.errorHandler.tolerate(e)}return n.errorHandler.tolerant&&(i.errors=n.errors()),i};r=r(2);t.Syntax=r.Syntax,t.version="4.0.1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(2);function CommentHandler(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}CommentHandler.prototype.insertInnerComments=function(e,t){if(e.type===s.Syntax.BlockStatement&&0===e.body.length){for(var r=[],n=this.leading.length-1;0<=n;--n){var i=this.leading[n];t.end.offset>=i.start&&(r.unshift(i.comment),this.leading.splice(n,1),this.trailing.splice(n,1))}r.length&&(e.innerComments=r)}},CommentHandler.prototype.findTrailingComments=function(e){var t=[];if(0<this.trailing.length){for(var r=this.trailing.length-1;0<=r;--r){var n=this.trailing[r];n.start>=e.end.offset&&t.unshift(n.comment)}this.trailing.length=0}else{var i,s=this.stack[this.stack.length-1];s&&s.node.trailingComments&&(i=s.node.trailingComments[0])&&i.range[0]>=e.end.offset&&(t=s.node.trailingComments,delete s.node.trailingComments)}return t},CommentHandler.prototype.findLeadingComments=function(e){for(var t,r=[];0<this.stack.length&&((s=this.stack[this.stack.length-1])&&s.start>=e.start.offset);)t=s.node,this.stack.pop();if(t){for(var n=(t.leadingComments?t.leadingComments.length:0)-1;0<=n;--n){var i=t.leadingComments[n];i.range[1]<=e.start.offset&&(r.unshift(i),t.leadingComments.splice(n,1))}t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments}else for(var s,n=this.leading.length-1;0<=n;--n)(s=this.leading[n]).start<=e.start.offset&&(r.unshift(s.comment),this.leading.splice(n,1));return r},CommentHandler.prototype.visitNode=function(e,t){var r,n;e.type===s.Syntax.Program&&0<e.body.length||(this.insertInnerComments(e,t),r=this.findTrailingComments(t),0<(n=this.findLeadingComments(t)).length&&(e.leadingComments=n),0<r.length&&(e.trailingComments=r),this.stack.push({node:e,start:t.start.offset}))},CommentHandler.prototype.visitComment=function(e,t){var r="L"===e.type[0]?"Line":"Block",n={type:r,value:e.value};e.range&&(n.range=e.range),e.loc&&(n.loc=e.loc),this.comments.push(n),this.attach&&(n={comment:{type:r,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset},e.loc&&(n.comment.loc=e.loc),e.type=r,this.leading.push(n),this.trailing.push(n))},CommentHandler.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},t.CommentHandler=CommentHandler},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}),function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),u=(Object.defineProperty(t,"__esModule",{value:!0}),r(4)),a=r(5),o=r(6),s=r(7),l=r(8),c=r(13),h=r(14);function getQualifiedElementName(e){switch(e.type){case o.JSXSyntax.JSXIdentifier:var t=e.name;break;case o.JSXSyntax.JSXNamespacedName:var r=e;t=getQualifiedElementName(r.namespace)+":"+getQualifiedElementName(r.name);break;case o.JSXSyntax.JSXMemberExpression:r=e;t=getQualifiedElementName(r.object)+"."+getQualifiedElementName(r.property)}return t}c.TokenName[100]="JSXIdentifier",c.TokenName[101]="JSXText";p=l.Parser,i(JSXParser,p),JSXParser.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():p.prototype.parsePrimaryExpression.call(this)},JSXParser.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},JSXParser.prototype.finishJSX=function(){this.nextToken()},JSXParser.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},JSXParser.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},JSXParser.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},JSXParser.prototype.scanXHTMLEntity=function(e){for(var t,r="&",n=!0,i=!1,s=!1,a=!1;!this.scanner.eof()&&n&&!i;){var o=this.scanner.source[this.scanner.index];if(o===e)break;if(i=";"===o,r+=o,++this.scanner.index,!i)switch(r.length){case 2:s="#"===o;break;case 3:s&&(n=(a="x"===o)||u.Character.isDecimalDigit(o.charCodeAt(0)),s=s&&!a);break;default:n=(n=n&&!(s&&!u.Character.isDecimalDigit(o.charCodeAt(0))))&&!(a&&!u.Character.isHexDigit(o.charCodeAt(0)))}}return n&&i&&2<r.length&&(t=r.substr(1,r.length-2),s&&1<t.length?r=String.fromCharCode(parseInt(t.substr(1),10)):a&&2<t.length?r=String.fromCharCode(parseInt("0"+t.substr(1),16)):s||a||!h.XHTMLEntities[t]||(r=h.XHTMLEntities[t])),r},JSXParser.prototype.lexJSX=function(){var e,t,r,n=this.scanner.source.charCodeAt(this.scanner.index);if(60===n||62===n||47===n||58===n||61===n||123===n||125===n)return{type:7,value:r=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===n||39===n){for(var i=this.scanner.index,s=this.scanner.source[this.scanner.index++],a="";!this.scanner.eof();){if((o=this.scanner.source[this.scanner.index++])===s)break;a+="&"===o?this.scanXHTMLEntity(s):o}return{type:8,value:a,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:i,end:this.scanner.index}}if(46===n)return e=this.scanner.source.charCodeAt(this.scanner.index+1),t=this.scanner.source.charCodeAt(this.scanner.index+2),i=this.scanner.index,this.scanner.index+=(r=46===e&&46===t?"...":".").length,{type:7,value:r,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:i,end:this.scanner.index};if(96===n)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(u.Character.isIdentifierStart(n)&&92!==n){i=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var o=this.scanner.source.charCodeAt(this.scanner.index);if((!u.Character.isIdentifierPart(o)||92===o)&&45!==o)break;++this.scanner.index}return{type:100,value:this.scanner.source.slice(i,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:i,end:this.scanner.index}}return this.scanner.lex()},JSXParser.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},JSXParser.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var r=this.scanner.source[this.scanner.index];if("{"===r||"<"===r)break;++this.scanner.index,t+=r,u.Character.isLineTerminator(r.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===r&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;e={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return 0<t.length&&this.config.tokens&&this.tokens.push(this.convertToken(e)),e},JSXParser.prototype.peekJSXToken=function(){var e=this.scanner.saveState(),t=(this.scanner.scanComments(),this.lexJSX());return this.scanner.restoreState(e),t},JSXParser.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},JSXParser.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},JSXParser.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new a.JSXIdentifier(t.value))},JSXParser.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":"))var r=t,n=(this.expectJSX(":"),this.parseJSXIdentifier()),t=this.finalize(e,new a.JSXNamespacedName(r,n));else if(this.matchJSX("."))for(;this.matchJSX(".");){var i=t,s=(this.expectJSX("."),this.parseJSXIdentifier());t=this.finalize(e,new a.JSXMemberExpression(i,s))}return t},JSXParser.prototype.parseJSXAttributeName=function(){var e,t,r=this.createJSXNode(),n=this.parseJSXIdentifier();return this.matchJSX(":")?(e=n,this.expectJSX(":"),t=this.parseJSXIdentifier(),this.finalize(r,new a.JSXNamespacedName(e,t))):n},JSXParser.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken(),r=(8!==t.type&&this.throwUnexpectedToken(t),this.getTokenRaw(t));return this.finalize(e,new s.Literal(t.value,r))},JSXParser.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode(),t=(this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression"),this.parseAssignmentExpression());return this.reenterJSX(),this.finalize(e,new a.JSXExpressionContainer(t))},JSXParser.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},JSXParser.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),r=null;return this.matchJSX("=")&&(this.expectJSX("="),r=this.parseJSXAttributeValue()),this.finalize(e,new a.JSXAttribute(t,r))},JSXParser.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode(),t=(this.expectJSX("{"),this.expectJSX("..."),this.finishJSX(),this.parseAssignmentExpression());return this.reenterJSX(),this.finalize(e,new a.JSXSpreadAttribute(t))},JSXParser.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},JSXParser.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode(),t=(this.expectJSX("<"),this.parseJSXElementName()),r=this.parseJSXAttributes(),n=this.matchJSX("/");return n&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new a.JSXOpeningElement(t,n,r))},JSXParser.prototype.parseJSXBoundaryElement=function(){var e,t,r,n=this.createJSXNode();return this.expectJSX("<"),this.matchJSX("/")?(this.expectJSX("/"),e=this.parseJSXElementName(),this.expectJSX(">"),this.finalize(n,new a.JSXClosingElement(e))):(e=this.parseJSXElementName(),t=this.parseJSXAttributes(),(r=this.matchJSX("/"))&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(n,new a.JSXOpeningElement(e,r,t)))},JSXParser.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new a.JSXEmptyExpression)},JSXParser.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new a.JSXExpressionContainer(e))},JSXParser.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t,r=this.createJSXChildNode(),n=this.nextJSXText();if(n.start<n.end&&(t=this.getTokenRaw(n),r=this.finalize(r,new a.JSXText(n.value,t)),e.push(r)),"{"!==this.scanner.source[this.scanner.index])break;n=this.parseJSXExpressionContainer();e.push(n)}return e},JSXParser.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var r,n=this.createJSXChildNode(),i=this.parseJSXBoundaryElement();if(i.type===o.JSXSyntax.JSXOpeningElement&&((r=i).selfClosing?(s=this.finalize(n,new a.JSXElement(r,[],null)),e.children.push(s)):(t.push(e),e={node:n,opening:r,closing:null,children:[]})),i.type===o.JSXSyntax.JSXClosingElement){e.closing=i;n=getQualifiedElementName(e.opening.name);if(n!==getQualifiedElementName(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",n),!(0<t.length))break;var s=this.finalize(e.node,new a.JSXElement(e.opening,e.children,e.closing));(e=t[t.length-1]).children.push(s),t.pop()}}return e},JSXParser.prototype.parseJSXElement=function(){var e,t=this.createJSXNode(),r=this.parseJSXOpeningElement(),n=[],i=null;return r.selfClosing||(n=(e=this.parseComplexJSXElement({node:t,opening:r,closing:i,children:n})).children,i=e.closing),this.finalize(t,new a.JSXElement(r,n,i))},JSXParser.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},JSXParser.prototype.isStartOfExpression=function(){return p.prototype.isStartOfExpression.call(this)||this.match("<")};var p,r=JSXParser;function JSXParser(e,t,r){return p.call(this,e,t,r)||this}t.JSXParser=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&r.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&r.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return 48<=e&&e<=57},isHexDigit:function(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102},isOctalDigit:function(e){return 48<=e&&e<=55}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),r=(t.JSXClosingElement=function JSXClosingElement(e){this.type=n.JSXSyntax.JSXClosingElement,this.name=e},function JSXElement(e,t,r){this.type=n.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=r}),r=(t.JSXElement=r,function JSXEmptyExpression(){this.type=n.JSXSyntax.JSXEmptyExpression}),r=(t.JSXEmptyExpression=r,function JSXExpressionContainer(e){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=e}),r=(t.JSXExpressionContainer=r,function JSXIdentifier(e){this.type=n.JSXSyntax.JSXIdentifier,this.name=e}),r=(t.JSXIdentifier=r,function JSXMemberExpression(e,t){this.type=n.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t}),r=(t.JSXMemberExpression=r,function JSXAttribute(e,t){this.type=n.JSXSyntax.JSXAttribute,this.name=e,this.value=t}),r=(t.JSXAttribute=r,function JSXNamespacedName(e,t){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t}),r=(t.JSXNamespacedName=r,function JSXOpeningElement(e,t,r){this.type=n.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=r}),r=(t.JSXOpeningElement=r,function JSXSpreadAttribute(e){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=e}),r=(t.JSXSpreadAttribute=r,function JSXText(e,t){this.type=n.JSXSyntax.JSXText,this.value=e,this.raw=t});t.JSXText=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),r=(t.ArrayExpression=function ArrayExpression(e){this.type=a.Syntax.ArrayExpression,this.elements=e},function ArrayPattern(e){this.type=a.Syntax.ArrayPattern,this.elements=e}),r=(t.ArrayPattern=r,function ArrowFunctionExpression(e,t,r){this.type=a.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!1}),r=(t.ArrowFunctionExpression=r,function AssignmentExpression(e,t,r){this.type=a.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=r}),r=(t.AssignmentExpression=r,function AssignmentPattern(e,t){this.type=a.Syntax.AssignmentPattern,this.left=e,this.right=t}),r=(t.AssignmentPattern=r,function AsyncArrowFunctionExpression(e,t,r){this.type=a.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!0}),r=(t.AsyncArrowFunctionExpression=r,function AsyncFunctionDeclaration(e,t,r){this.type=a.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0}),r=(t.AsyncFunctionDeclaration=r,function AsyncFunctionExpression(e,t,r){this.type=a.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0}),r=(t.AsyncFunctionExpression=r,function AwaitExpression(e){this.type=a.Syntax.AwaitExpression,this.argument=e}),r=(t.AwaitExpression=r,function BinaryExpression(e,t,r){this.type="||"===e||"&&"===e?a.Syntax.LogicalExpression:a.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=r}),r=(t.BinaryExpression=r,function BlockStatement(e){this.type=a.Syntax.BlockStatement,this.body=e}),r=(t.BlockStatement=r,function BreakStatement(e){this.type=a.Syntax.BreakStatement,this.label=e}),r=(t.BreakStatement=r,function CallExpression(e,t){this.type=a.Syntax.CallExpression,this.callee=e,this.arguments=t}),r=(t.CallExpression=r,function CatchClause(e,t){this.type=a.Syntax.CatchClause,this.param=e,this.body=t}),r=(t.CatchClause=r,function ClassBody(e){this.type=a.Syntax.ClassBody,this.body=e}),r=(t.ClassBody=r,function ClassDeclaration(e,t,r){this.type=a.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=r}),r=(t.ClassDeclaration=r,function ClassExpression(e,t,r){this.type=a.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=r}),r=(t.ClassExpression=r,function ComputedMemberExpression(e,t){this.type=a.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t}),r=(t.ComputedMemberExpression=r,function ConditionalExpression(e,t,r){this.type=a.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r}),r=(t.ConditionalExpression=r,function ContinueStatement(e){this.type=a.Syntax.ContinueStatement,this.label=e}),r=(t.ContinueStatement=r,function DebuggerStatement(){this.type=a.Syntax.DebuggerStatement}),r=(t.DebuggerStatement=r,function Directive(e,t){this.type=a.Syntax.ExpressionStatement,this.expression=e,this.directive=t}),r=(t.Directive=r,function DoWhileStatement(e,t){this.type=a.Syntax.DoWhileStatement,this.body=e,this.test=t}),r=(t.DoWhileStatement=r,function EmptyStatement(){this.type=a.Syntax.EmptyStatement}),r=(t.EmptyStatement=r,function ExportAllDeclaration(e){this.type=a.Syntax.ExportAllDeclaration,this.source=e}),r=(t.ExportAllDeclaration=r,function ExportDefaultDeclaration(e){this.type=a.Syntax.ExportDefaultDeclaration,this.declaration=e}),r=(t.ExportDefaultDeclaration=r,function ExportNamedDeclaration(e,t,r){this.type=a.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=r}),r=(t.ExportNamedDeclaration=r,function ExportSpecifier(e,t){this.type=a.Syntax.ExportSpecifier,this.exported=t,this.local=e}),r=(t.ExportSpecifier=r,function ExpressionStatement(e){this.type=a.Syntax.ExpressionStatement,this.expression=e}),r=(t.ExpressionStatement=r,function ForInStatement(e,t,r){this.type=a.Syntax.ForInStatement,this.left=e,this.right=t,this.body=r,this.each=!1}),r=(t.ForInStatement=r,function ForOfStatement(e,t,r){this.type=a.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=r}),r=(t.ForOfStatement=r,function ForStatement(e,t,r,n){this.type=a.Syntax.ForStatement,this.init=e,this.test=t,this.update=r,this.body=n}),r=(t.ForStatement=r,function FunctionDeclaration(e,t,r,n){this.type=a.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=n,this.expression=!1,this.async=!1}),r=(t.FunctionDeclaration=r,function FunctionExpression(e,t,r,n){this.type=a.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=n,this.expression=!1,this.async=!1}),r=(t.FunctionExpression=r,function Identifier(e){this.type=a.Syntax.Identifier,this.name=e}),r=(t.Identifier=r,function IfStatement(e,t,r){this.type=a.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=r}),r=(t.IfStatement=r,function ImportDeclaration(e,t){this.type=a.Syntax.ImportDeclaration,this.specifiers=e,this.source=t}),r=(t.ImportDeclaration=r,function ImportDefaultSpecifier(e){this.type=a.Syntax.ImportDefaultSpecifier,this.local=e}),r=(t.ImportDefaultSpecifier=r,function ImportNamespaceSpecifier(e){this.type=a.Syntax.ImportNamespaceSpecifier,this.local=e}),r=(t.ImportNamespaceSpecifier=r,function ImportSpecifier(e,t){this.type=a.Syntax.ImportSpecifier,this.local=e,this.imported=t}),r=(t.ImportSpecifier=r,function LabeledStatement(e,t){this.type=a.Syntax.LabeledStatement,this.label=e,this.body=t}),r=(t.LabeledStatement=r,function Literal(e,t){this.type=a.Syntax.Literal,this.value=e,this.raw=t}),r=(t.Literal=r,function MetaProperty(e,t){this.type=a.Syntax.MetaProperty,this.meta=e,this.property=t}),r=(t.MetaProperty=r,function MethodDefinition(e,t,r,n,i){this.type=a.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=r,this.kind=n,this.static=i}),r=(t.MethodDefinition=r,function Module(e){this.type=a.Syntax.Program,this.body=e,this.sourceType="module"}),r=(t.Module=r,function NewExpression(e,t){this.type=a.Syntax.NewExpression,this.callee=e,this.arguments=t}),r=(t.NewExpression=r,function ObjectExpression(e){this.type=a.Syntax.ObjectExpression,this.properties=e}),r=(t.ObjectExpression=r,function ObjectPattern(e){this.type=a.Syntax.ObjectPattern,this.properties=e}),r=(t.ObjectPattern=r,function Property(e,t,r,n,i,s){this.type=a.Syntax.Property,this.key=t,this.computed=r,this.value=n,this.kind=e,this.method=i,this.shorthand=s}),r=(t.Property=r,function RegexLiteral(e,t,r,n){this.type=a.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:r,flags:n}}),r=(t.RegexLiteral=r,function RestElement(e){this.type=a.Syntax.RestElement,this.argument=e}),r=(t.RestElement=r,function ReturnStatement(e){this.type=a.Syntax.ReturnStatement,this.argument=e}),r=(t.ReturnStatement=r,function Script(e){this.type=a.Syntax.Program,this.body=e,this.sourceType="script"}),r=(t.Script=r,function SequenceExpression(e){this.type=a.Syntax.SequenceExpression,this.expressions=e}),r=(t.SequenceExpression=r,function SpreadElement(e){this.type=a.Syntax.SpreadElement,this.argument=e}),r=(t.SpreadElement=r,function StaticMemberExpression(e,t){this.type=a.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t}),r=(t.StaticMemberExpression=r,function Super(){this.type=a.Syntax.Super}),r=(t.Super=r,function SwitchCase(e,t){this.type=a.Syntax.SwitchCase,this.test=e,this.consequent=t}),r=(t.SwitchCase=r,function SwitchStatement(e,t){this.type=a.Syntax.SwitchStatement,this.discriminant=e,this.cases=t}),r=(t.SwitchStatement=r,function TaggedTemplateExpression(e,t){this.type=a.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t}),r=(t.TaggedTemplateExpression=r,function TemplateElement(e,t){this.type=a.Syntax.TemplateElement,this.value=e,this.tail=t}),r=(t.TemplateElement=r,function TemplateLiteral(e,t){this.type=a.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t}),r=(t.TemplateLiteral=r,function ThisExpression(){this.type=a.Syntax.ThisExpression}),r=(t.ThisExpression=r,function ThrowStatement(e){this.type=a.Syntax.ThrowStatement,this.argument=e}),r=(t.ThrowStatement=r,function TryStatement(e,t,r){this.type=a.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=r}),r=(t.TryStatement=r,function UnaryExpression(e,t){this.type=a.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0}),r=(t.UnaryExpression=r,function UpdateExpression(e,t,r){this.type=a.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=r}),r=(t.UpdateExpression=r,function VariableDeclaration(e,t){this.type=a.Syntax.VariableDeclaration,this.declarations=e,this.kind=t}),r=(t.VariableDeclaration=r,function VariableDeclarator(e,t){this.type=a.Syntax.VariableDeclarator,this.id=e,this.init=t}),r=(t.VariableDeclarator=r,function WhileStatement(e,t){this.type=a.Syntax.WhileStatement,this.test=e,this.body=t}),r=(t.WhileStatement=r,function WithStatement(e,t){this.type=a.Syntax.WithStatement,this.object=e,this.body=t}),r=(t.WithStatement=r,function YieldExpression(e,t){this.type=a.Syntax.YieldExpression,this.argument=e,this.delegate=t});t.YieldExpression=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(9),n=r(10),d=r(11),m=r(7),i=r(12),p=r(2),s=r(13),f="ArrowParameterPlaceHolder";function Parser(e,t,r){this.config={range:"boolean"==typeof(t=void 0===t?{}:t).range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=r,this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new i.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}Parser.prototype.throwError=function(e){for(var t=1;t<arguments.length;t++)t-1,0;var r=Array.prototype.slice.call(arguments,1),e=e.replace(/%(\d)/g,function(e,t){return a.assert(t<r.length,"Message reference must be in range"),r[t]}),n=this.lastMarker.index,i=this.lastMarker.line,s=this.lastMarker.column+1;throw this.errorHandler.createError(n,i,s,e)},Parser.prototype.tolerateError=function(e){for(var t=1;t<arguments.length;t++)t-1,0;var r=Array.prototype.slice.call(arguments,1),e=e.replace(/%(\d)/g,function(e,t){return a.assert(t<r.length,"Message reference must be in range"),r[t]}),n=this.lastMarker.index,i=this.scanner.lineNumber,s=this.lastMarker.column+1;this.errorHandler.tolerateError(n,i,s,e)},Parser.prototype.unexpectedTokenError=function(e,t){var r,n,i=t||d.Messages.UnexpectedToken,t=e?(t||(i=2===e.type?d.Messages.UnexpectedEOS:3===e.type?d.Messages.UnexpectedIdentifier:6===e.type?d.Messages.UnexpectedNumber:8===e.type?d.Messages.UnexpectedString:10===e.type?d.Messages.UnexpectedTemplate:d.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?i=d.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(i=d.Messages.StrictReservedWord))),e.value):"ILLEGAL",i=i.replace("%0",t);return e=e&&"number"==typeof e.lineNumber?(r=e.start,n=e.lineNumber,t=this.lastMarker.index-this.lastMarker.column,e.start-t+1):(r=this.lastMarker.index,n=this.lastMarker.line,this.lastMarker.column+1),this.errorHandler.createError(r,n,e,i)},Parser.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},Parser.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},Parser.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(0<e.length&&this.delegate)for(var t=0;t<e.length;++t){var r=e[t],n=void 0,n={type:r.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(r.slice[0],r.slice[1])},r=(this.config.range&&(n.range=r.range),this.config.loc&&(n.loc=r.loc),{start:{line:r.loc.start.line,column:r.loc.start.column,offset:r.range[0]},end:{line:r.loc.end.line,column:r.loc.end.column,offset:r.range[1]}});this.delegate(n,r)}}else this.scanner.scanComments()},Parser.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},Parser.prototype.convertToken=function(e){var t,r={type:s.TokenName[e.type],value:this.getTokenRaw(e)};return this.config.range&&(r.range=[e.start,e.end]),this.config.loc&&(r.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type&&(t=e.pattern,e=e.flags,r.regex={pattern:t,flags:e}),r},Parser.prototype.nextToken=function(){var e=this.lookahead,t=(this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.scanner.lex());return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},Parser.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},Parser.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},Parser.prototype.startNode=function(e,t){void 0===t&&(t=0);var r=e.start-e.lineStart,n=e.lineNumber;return r<0&&(r+=t,n--),{index:e.start,line:n,column:r}},Parser.prototype.finalize=function(e,t){return this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source)&&(t.loc.source=this.config.source),this.delegate&&(e={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}},this.delegate(t,e)),t},Parser.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},Parser.prototype.expectCommaSeparator=function(){var e;this.config.tolerant?7===(e=this.lookahead).type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,d.Messages.UnexpectedToken):this.expect(",")},Parser.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},Parser.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},Parser.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},Parser.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},Parser.prototype.matchAssign=function(){var e;return 7===this.lookahead.type&&("="===(e=this.lookahead.value)||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)},Parser.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError,e=(this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null,e.call(this));return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=r,this.context.firstCoverInitializedNameError=n,e},Parser.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError,e=(this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null,e.call(this));return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&r,this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError,e},Parser.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},Parser.prototype.parsePrimaryExpression=function(){var e,t,r,n=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(n,new m.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,d.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new m.Literal(t.value,r));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new m.Literal("true"===t.value,r));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new m.Literal(null,r));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),r=this.getTokenRaw(t),e=this.finalize(n,new m.RegexLiteral(t.regex,r,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:e=!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?this.finalize(n,new m.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),this.finalize(n,new m.ThisExpression)):this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},Parser.prototype.parseSpreadElement=function(){var e=this.createNode(),t=(this.expect("..."),this.inheritCoverGrammar(this.parseAssignmentExpression));return this.finalize(e,new m.SpreadElement(t))},Parser.prototype.parseArrayInitializer=function(){var e,t=this.createNode(),r=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),r.push(null)):this.match("...")?(e=this.parseSpreadElement(),this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),r.push(e)):(r.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));return this.expect("]"),this.finalize(t,new m.ArrayExpression(r))},Parser.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,r=this.context.allowStrictDirective,n=(this.context.allowStrictDirective=e.simple,this.isolateCoverGrammar(this.parseFunctionSourceElements));return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=r,n},Parser.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield,r=(this.context.allowYield=!0,this.parseFormalParameters()),n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new m.FunctionExpression(null,r.params,n,!1))},Parser.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,r=this.context.await,n=(this.context.allowYield=!1,this.context.await=!0,this.parseFormalParameters()),i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.context.await=r,this.finalize(e,new m.AsyncFunctionExpression(null,n.params,i))},Parser.prototype.parseObjectPropertyKey=function(){var e=this.createNode(),t=this.nextToken();switch(t.type){case 8:case 6:this.context.strict&&t.octal&&this.tolerateUnexpectedToken(t,d.Messages.StrictOctalLiteral);var r=this.getTokenRaw(t),n=this.finalize(e,new m.Literal(t.value,r));break;case 3:case 1:case 5:case 4:n=this.finalize(e,new m.Identifier(t.value));break;case 7:"["===t.value?(n=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):n=this.throwUnexpectedToken(t);break;default:n=this.throwUnexpectedToken(t)}return n},Parser.prototype.isPropertyKey=function(e,t){return e.type===p.Syntax.Identifier&&e.name===t||e.type===p.Syntax.Literal&&e.value===t},Parser.prototype.parseObjectProperty=function(e){var t,r,n=this.createNode(),i=this.lookahead,s=null,a=null,o=!1,u=!1,l=!1,c=!1,h=(3===i.type?(r=i.value,this.nextToken(),o=this.match("["),s=(c=!(this.hasLineTerminator||"async"!==r||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(n,new m.Identifier(r))):this.match("*")?this.nextToken():(o=this.match("["),s=this.parseObjectPropertyKey()),this.qualifiedPropertyName(this.lookahead));return 3===i.type&&!c&&"get"===i.value&&h?(t="get",o=this.match("["),s=this.parseObjectPropertyKey(),this.context.allowYield=!1,a=this.parseGetterMethod()):3===i.type&&!c&&"set"===i.value&&h?(t="set",o=this.match("["),s=this.parseObjectPropertyKey(),a=this.parseSetterMethod()):7===i.type&&"*"===i.value&&h?(t="init",o=this.match("["),s=this.parseObjectPropertyKey(),a=this.parseGeneratorMethod(),u=!0):(s||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!c?(!o&&this.isPropertyKey(s,"__proto__")&&(e.value&&this.tolerateError(d.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),a=this.inheritCoverGrammar(this.parseAssignmentExpression)):this.match("(")?(a=c?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0):3===i.type?(r=this.finalize(n,new m.Identifier(i.value)),a=this.match("=")?(this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),l=!0,h=this.isolateCoverGrammar(this.parseAssignmentExpression),this.finalize(n,new m.AssignmentPattern(r,h))):(l=!0,r)):this.throwUnexpectedToken(this.nextToken())),this.finalize(n,new m.Property(t,s,o,a,u,l))},Parser.prototype.parseObjectInitializer=function(){for(var e=this.createNode(),t=(this.expect("{"),[]),r={value:!1};!this.match("}");)t.push(this.parseObjectProperty(r)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new m.ObjectExpression(t))},Parser.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),r=t.value,n=t.cooked;return this.finalize(e,new m.TemplateElement({raw:r,cooked:n},t.tail))},Parser.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),r=t.value,n=t.cooked;return this.finalize(e,new m.TemplateElement({raw:r,cooked:n},t.tail))},Parser.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],r=[],n=this.parseTemplateHead();for(r.push(n);!n.tail;)t.push(this.parseExpression()),n=this.parseTemplateElement(),r.push(n);return this.finalize(e,new m.TemplateLiteral(r,t))},Parser.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case p.Syntax.Identifier:case p.Syntax.MemberExpression:case p.Syntax.RestElement:case p.Syntax.AssignmentPattern:break;case p.Syntax.SpreadElement:e.type=p.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case p.Syntax.ArrayExpression:e.type=p.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case p.Syntax.ObjectExpression:e.type=p.Syntax.ObjectPattern;for(t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case p.Syntax.AssignmentExpression:e.type=p.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},Parser.prototype.parseGroupExpression=function(){if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),s={type:f,params:[],async:!1};else{var e=this.lookahead,t=[];if(this.match("..."))s=this.parseRestElement(t),this.expect(")"),this.match("=>")||this.expect("=>"),s={type:f,params:[s],async:!1};else{var r=!1;if(this.context.isBindingElement=!0,s=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var n=[];for(this.context.isAssignmentTarget=!1,n.push(s);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var i=0;i<n.length;i++)this.reinterpretExpressionAsPattern(n[i]);s={type:f,params:n,async:!(r=!0)}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),n.push(this.parseRestElement(t)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(i=0;i<n.length;i++)this.reinterpretExpressionAsPattern(n[i]);s={type:f,params:n,async:!(r=!0)}}else n.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(r)break}r||(s=this.finalize(this.startNode(e),new m.SequenceExpression(n)))}if(!r){if(this.expect(")"),this.match("=>")&&(s.type===p.Syntax.Identifier&&"yield"===s.name&&(s={type:f,params:[s],async:!(r=!0)}),!r)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),s.type===p.Syntax.SequenceExpression)for(i=0;i<s.expressions.length;i++)this.reinterpretExpressionAsPattern(s.expressions[i]);else this.reinterpretExpressionAsPattern(s);var e=s.type===p.Syntax.SequenceExpression?s.expressions:[s],s={type:f,params:e,async:!1}}this.context.isBindingElement=!1}}}return s},Parser.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},Parser.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},Parser.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new m.Identifier(t.value))},Parser.prototype.parseNewExpression=function(){var e,t,r=this.createNode(),n=this.parseIdentifierName();return a.assert("new"===n.name,"New expression must start with `new`"),this.match(".")?(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value?(e=this.parseIdentifierName(),e=new m.MetaProperty(n,e)):this.throwUnexpectedToken(this.lookahead)):(n=this.isolateCoverGrammar(this.parseLeftHandSideExpression),t=this.match("(")?this.parseArguments():[],e=new m.NewExpression(n,t),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),this.finalize(r,e)},Parser.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},Parser.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},Parser.prototype.parseLeftHandSideExpressionAllowCall=function(){var e=this.lookahead,t=this.matchContextualKeyword("async"),r=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(i=this.createNode(),this.nextToken(),i=this.finalize(i,new m.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):i=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var n=this.parseIdentifierName(),i=this.finalize(this.startNode(e),new m.StaticMemberExpression(i,n))}else if(this.match("(")){var s=t&&e.lineNumber===this.lookahead.lineNumber,a=(this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1,s?this.parseAsyncArguments():this.parseArguments());if(i=this.finalize(this.startNode(e),new m.CallExpression(i,a)),s&&this.match("=>")){for(var o=0;o<a.length;++o)this.reinterpretExpressionAsPattern(a[o]);i={type:f,params:a,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),i=this.finalize(this.startNode(e),new m.ComputedMemberExpression(i,n))}else{if(10!==this.lookahead.type||!this.lookahead.head)break;s=this.parseTemplateLiteral();i=this.finalize(this.startNode(e),new m.TaggedTemplateExpression(i,s))}return this.context.allowIn=r,i},Parser.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new m.Super)},Parser.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var r=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new m.ComputedMemberExpression(t,r))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");r=this.parseIdentifierName(),t=this.finalize(e,new m.StaticMemberExpression(t,r))}else{if(10!==this.lookahead.type||!this.lookahead.head)break;var n=this.parseTemplateLiteral();t=this.finalize(e,new m.TaggedTemplateExpression(t,n))}return t},Parser.prototype.parseUpdateExpression=function(){var e,t,r,n=this.lookahead;return this.match("++")||this.match("--")?(r=this.startNode(n),t=this.nextToken(),e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(d.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment),e=this.finalize(r,new m.UpdateExpression(t.value,e,r=!0)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1):(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||(this.match("++")||this.match("--"))&&(this.context.strict&&e.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(d.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken().value,r=!1,e=this.finalize(this.startNode(n),new m.UpdateExpression(t,e,r)))),e},Parser.prototype.parseAwaitExpression=function(){var e=this.createNode(),t=(this.nextToken(),this.parseUnaryExpression());return this.finalize(e,new m.AwaitExpression(t))},Parser.prototype.parseUnaryExpression=function(){var e,t,r;return this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")?(e=this.startNode(this.lookahead),t=this.nextToken(),r=this.inheritCoverGrammar(this.parseUnaryExpression),r=this.finalize(e,new m.UnaryExpression(t.value,r)),this.context.strict&&"delete"===r.operator&&r.argument.type===p.Syntax.Identifier&&this.tolerateError(d.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1):r=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression(),r},Parser.prototype.parseExponentiationExpression=function(){var e,t,r=this.lookahead,n=this.inheritCoverGrammar(this.parseUnaryExpression);return n.type!==p.Syntax.UnaryExpression&&this.match("**")&&(this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,e=n,t=this.isolateCoverGrammar(this.parseExponentiationExpression),n=this.finalize(this.startNode(r),new m.BinaryExpression("**",e,t))),n},Parser.prototype.binaryPrecedence=function(e){var t=e.value,e=7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0;return e},Parser.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),r=this.lookahead,n=this.binaryPrecedence(r);if(0<n){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var i=[e,this.lookahead],s=t,a=this.isolateCoverGrammar(this.parseExponentiationExpression),o=[s,r.value,a],u=[n];;){if((n=this.binaryPrecedence(this.lookahead))<=0)break;for(;2<o.length&&n<=u[u.length-1];){var a=o.pop(),l=o.pop(),c=(u.pop(),s=o.pop(),i.pop(),this.startNode(i[i.length-1]));o.push(this.finalize(c,new m.BinaryExpression(l,s,a)))}o.push(this.nextToken().value),u.push(n),i.push(this.lookahead),o.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}for(var h=o.length-1,p=(t=o[h],i.pop());1<h;){var d=i.pop(),f=p&&p.lineStart,c=this.startNode(d,f),l=o[h-1],t=this.finalize(c,new m.BinaryExpression(l,o[h-2],t));h-=2,p=d}}return t},Parser.prototype.parseConditionalExpression=function(){var e,t,r=this.lookahead,n=this.inheritCoverGrammar(this.parseBinaryExpression);return this.match("?")&&(this.nextToken(),t=this.context.allowIn,this.context.allowIn=!0,e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=t,this.expect(":"),t=this.isolateCoverGrammar(this.parseAssignmentExpression),n=this.finalize(this.startNode(r),new m.ConditionalExpression(n,e,t)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),n},Parser.prototype.checkPatternParam=function(e,t){switch(t.type){case p.Syntax.Identifier:this.validateParam(e,t,t.name);break;case p.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case p.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case p.Syntax.ArrayPattern:for(var r=0;r<t.elements.length;r++)null!==t.elements[r]&&this.checkPatternParam(e,t.elements[r]);break;case p.Syntax.ObjectPattern:for(r=0;r<t.properties.length;r++)this.checkPatternParam(e,t.properties[r].value)}e.simple=e.simple&&t instanceof m.Identifier},Parser.prototype.reinterpretAsCoverFormalsList=function(e){var t=[e],r=!1;switch(e.type){case p.Syntax.Identifier:break;case f:t=e.params,r=e.async;break;default:return null}for(var n,i={simple:!0,paramSet:{}},s=0;s<t.length;++s)(a=t[s]).type===p.Syntax.AssignmentPattern?a.right.type===p.Syntax.YieldExpression&&(a.right.argument&&this.throwUnexpectedToken(this.lookahead),a.right.type=p.Syntax.Identifier,a.right.name="yield",delete a.right.argument,delete a.right.delegate):r&&a.type===p.Syntax.Identifier&&"await"===a.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(i,a),t[s]=a;if(this.context.strict||!this.context.allowYield)for(var a,s=0;s<t.length;++s)(a=t[s]).type===p.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead);return i.message===d.Messages.StrictParamDupe&&(n=this.context.strict?i.stricted:i.firstRestricted,this.throwUnexpectedToken(n,i.message)),{simple:i.simple,params:t,stricted:i.stricted,firstRestricted:i.firstRestricted,message:i.message}},Parser.prototype.parseAssignmentExpression=function(){var e,t,r,n,i,s,a,o,u,l,c,h;return!this.context.allowYield&&this.matchKeyword("yield")?h=this.parseYieldExpression():(t=e=this.lookahead,h=this.parseConditionalExpression(),3!==t.type||t.lineNumber!==this.lookahead.lineNumber||"async"!==t.value||3!==this.lookahead.type&&!this.matchKeyword("yield")||(u=this.parsePrimaryExpression(),this.reinterpretExpressionAsPattern(u),h={type:f,params:[u],async:!0}),h.type===f||this.match("=>")?(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,u=h.async,(c=this.reinterpretAsCoverFormalsList(h))&&(this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null,r=this.context.strict,n=this.context.allowStrictDirective,this.context.allowStrictDirective=c.simple,i=this.context.allowYield,s=this.context.await,this.context.allowYield=!0,this.context.await=u,l=this.startNode(e),a=void this.expect("=>"),this.match("{")?(o=this.context.allowIn,this.context.allowIn=!0,a=this.parseFunctionSourceElements(),this.context.allowIn=o):a=this.isolateCoverGrammar(this.parseAssignmentExpression),o=a.type!==p.Syntax.BlockStatement,this.context.strict&&c.firstRestricted&&this.throwUnexpectedToken(c.firstRestricted,c.message),this.context.strict&&c.stricted&&this.tolerateUnexpectedToken(c.stricted,c.message),h=u?this.finalize(l,new m.AsyncArrowFunctionExpression(c.params,a,o)):this.finalize(l,new m.ArrowFunctionExpression(c.params,a,o)),this.context.strict=r,this.context.allowStrictDirective=n,this.context.allowYield=i,this.context.await=s)):this.matchAssign()&&(this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment),this.context.strict&&h.type===p.Syntax.Identifier&&(u=h,this.scanner.isRestrictedWord(u.name)&&this.tolerateUnexpectedToken(t,d.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(u.name))&&this.tolerateUnexpectedToken(t,d.Messages.StrictReservedWord),this.match("=")?this.reinterpretExpressionAsPattern(h):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),l=(t=this.nextToken()).value,c=this.isolateCoverGrammar(this.parseAssignmentExpression),h=this.finalize(this.startNode(e),new m.AssignmentExpression(l,h,c)),this.context.firstCoverInitializedNameError=null)),h},Parser.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var r=[];for(r.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),r.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new m.SequenceExpression(r))}return t},Parser.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,d.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,d.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},Parser.prototype.parseBlock=function(){for(var e=this.createNode(),t=(this.expect("{"),[]);!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new m.BlockStatement(t))},Parser.prototype.parseLexicalBinding=function(e,t){var r=this.createNode(),n=this.parsePattern([],e),i=(this.context.strict&&n.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(d.Messages.StrictVarName),null);return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),i=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(d.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&n.type!==p.Syntax.Identifier||this.match("="))&&(this.expect("="),i=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(r,new m.VariableDeclarator(n,i))},Parser.prototype.parseBindingList=function(e,t){for(var r=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),r.push(this.parseLexicalBinding(e,t));return r},Parser.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState(),t=(this.scanner.scanComments(),this.scanner.lex());return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},Parser.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),r=this.nextToken().value,e=(a.assert("let"===r||"const"===r,"Lexical declaration must be either let or const"),this.parseBindingList(r,e));return this.consumeSemicolon(),this.finalize(t,new m.VariableDeclaration(e,r))},Parser.prototype.parseBindingRestElement=function(e,t){var r=this.createNode(),e=(this.expect("..."),this.parsePattern(e,t));return this.finalize(r,new m.RestElement(e))},Parser.prototype.parseArrayPattern=function(e,t){for(var r=this.createNode(),n=(this.expect("["),[]);!this.match("]");)if(this.match(","))this.nextToken(),n.push(null);else{if(this.match("...")){n.push(this.parseBindingRestElement(e,t));break}n.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(r,new m.ArrayPattern(n))},Parser.prototype.parsePropertyPattern=function(e,t){var r,n,i,s,a=this.createNode(),o=!1,u=!1;return s=3===this.lookahead.type?(r=this.lookahead,n=this.parseVariableIdentifier(),i=this.finalize(a,new m.Identifier(r.value)),this.match("=")?(e.push(r),u=!0,this.nextToken(),s=this.parseAssignmentExpression(),this.finalize(this.startNode(r),new m.AssignmentPattern(i,s))):this.match(":")?(this.expect(":"),this.parsePatternWithDefault(e,t)):(e.push(r),u=!0,i)):(o=this.match("["),n=this.parseObjectPropertyKey(),this.expect(":"),this.parsePatternWithDefault(e,t)),this.finalize(a,new m.Property("init",n,o,s,!1,u))},Parser.prototype.parseObjectPattern=function(e,t){var r=this.createNode(),n=[];for(this.expect("{");!this.match("}");)n.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(r,new m.ObjectPattern(n))},Parser.prototype.parsePattern=function(e,t){e=this.match("[")?this.parseArrayPattern(e,t):this.match("{")?this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,d.Messages.LetInLexicalBinding),e.push(this.lookahead),this.parseVariableIdentifier(t));return e},Parser.prototype.parsePatternWithDefault=function(e,t){var r,n=this.lookahead,e=this.parsePattern(e,t);return this.match("=")&&(this.nextToken(),t=this.context.allowYield,this.context.allowYield=!0,r=this.isolateCoverGrammar(this.parseAssignmentExpression),this.context.allowYield=t,e=this.finalize(this.startNode(n),new m.AssignmentPattern(e,r))),e},Parser.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),r=this.nextToken();return 4===r.type&&"yield"===r.value?this.context.strict?this.tolerateUnexpectedToken(r,d.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(r):3!==r.type?this.context.strict&&4===r.type&&this.scanner.isStrictModeReservedWord(r.value)?this.tolerateUnexpectedToken(r,d.Messages.StrictReservedWord):!this.context.strict&&"let"===r.value&&"var"===e||this.throwUnexpectedToken(r):(this.context.isModule||this.context.await)&&3===r.type&&"await"===r.value&&this.tolerateUnexpectedToken(r),this.finalize(t,new m.Identifier(r.value))},Parser.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),r=this.parsePattern([],"var"),n=(this.context.strict&&r.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(d.Messages.StrictVarName),null);return this.match("=")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type===p.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new m.VariableDeclarator(r,n))},Parser.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},r=[];for(r.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),r.push(this.parseVariableDeclaration(t));return r},Parser.prototype.parseVariableStatement=function(){var e=this.createNode(),t=(this.expectKeyword("var"),this.parseVariableDeclarationList({inFor:!1}));return this.consumeSemicolon(),this.finalize(e,new m.VariableDeclaration(t,"var"))},Parser.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new m.EmptyStatement)},Parser.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new m.ExpressionStatement(t))},Parser.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(d.Messages.StrictFunction),this.parseStatement()},Parser.prototype.parseIfStatement=function(){var e,t=this.createNode(),r=null,n=(this.expectKeyword("if"),this.expect("("),this.parseExpression());return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),r=this.parseIfClause())),this.finalize(t,new m.IfStatement(n,e,r))},Parser.prototype.parseDoWhileStatement=function(){var e=this.createNode(),t=(this.expectKeyword("do"),this.context.inIteration),r=(this.context.inIteration=!0,this.parseStatement()),t=(this.context.inIteration=t,this.expectKeyword("while"),this.expect("("),this.parseExpression());return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new m.DoWhileStatement(r,t))},Parser.prototype.parseWhileStatement=function(){var e,t,r=this.createNode(),n=(this.expectKeyword("while"),this.expect("("),this.parseExpression());return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),t=this.context.inIteration,this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=t),this.finalize(r,new m.WhileStatement(n,e))},Parser.prototype.parseForStatement=function(){var e,t,r=null,n=null,i=null,s=!0,a=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){r=this.createNode(),this.nextToken();var o,u=this.context.allowIn,l=(this.context.allowIn=!1,this.parseVariableDeclarationList({inFor:!0}));this.context.allowIn=u,1===l.length&&this.matchKeyword("in")?((o=l[0]).init&&(o.id.type===p.Syntax.ArrayPattern||o.id.type===p.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(d.Messages.ForInOfLoopInitializer,"for-in"),r=this.finalize(r,new m.VariableDeclaration(l,"var")),this.nextToken(),o=r,e=this.parseExpression(),r=null):1===l.length&&null===l[0].init&&this.matchContextualKeyword("of")?(r=this.finalize(r,new m.VariableDeclaration(l,"var")),this.nextToken(),o=r,e=this.parseAssignmentExpression(),r=null,s=!1):(r=this.finalize(r,new m.VariableDeclaration(l,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){var r=this.createNode(),c=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(u=this.context.allowIn,this.context.allowIn=!1,l=this.parseBindingList(c,{inFor:!0}),this.context.allowIn=u,1===l.length&&null===l[0].init&&this.matchKeyword("in")?(r=this.finalize(r,new m.VariableDeclaration(l,c)),this.nextToken(),o=r,e=this.parseExpression(),r=null):1===l.length&&null===l[0].init&&this.matchContextualKeyword("of")?(r=this.finalize(r,new m.VariableDeclaration(l,c)),this.nextToken(),o=r,e=this.parseAssignmentExpression(),r=null,s=!1):(this.consumeSemicolon(),r=this.finalize(r,new m.VariableDeclaration(l,c)))):(r=this.finalize(r,new m.Identifier(c)),this.nextToken(),o=r,e=this.parseExpression(),r=null)}else{l=this.lookahead,u=this.context.allowIn;if(this.context.allowIn=!1,r=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=u,this.matchKeyword("in"))this.context.isAssignmentTarget&&r.type!==p.Syntax.AssignmentExpression||this.tolerateError(d.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(r),o=r,e=this.parseExpression(),r=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&r.type!==p.Syntax.AssignmentExpression||this.tolerateError(d.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(r),o=r,e=this.parseAssignmentExpression(),r=null,s=!1;else{if(this.match(",")){for(var h=[r];this.match(",");)this.nextToken(),h.push(this.isolateCoverGrammar(this.parseAssignmentExpression));r=this.finalize(this.startNode(l),new m.SequenceExpression(h))}this.expect(";")}}return void 0===o&&(this.match(";")||(n=this.parseExpression()),this.expect(";"),this.match(")")||(i=this.parseExpression())),!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),t=this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),c=this.context.inIteration,this.context.inIteration=!0,t=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=c),void 0===o?this.finalize(a,new m.ForStatement(r,n,i,t)):s?this.finalize(a,new m.ForInStatement(o,e,t)):this.finalize(a,new m.ForOfStatement(o,e,t))},Parser.prototype.parseContinueStatement=function(){var e,t,r=this.createNode(),n=(this.expectKeyword("continue"),null);return 3!==this.lookahead.type||this.hasLineTerminator||(t="$"+(n=e=this.parseVariableIdentifier()).name,Object.prototype.hasOwnProperty.call(this.context.labelSet,t))||this.throwError(d.Messages.UnknownLabel,e.name),this.consumeSemicolon(),null!==n||this.context.inIteration||this.throwError(d.Messages.IllegalContinue),this.finalize(r,new m.ContinueStatement(n))},Parser.prototype.parseBreakStatement=function(){var e,t,r=this.createNode(),n=(this.expectKeyword("break"),null);return 3!==this.lookahead.type||this.hasLineTerminator||(t="$"+(e=this.parseVariableIdentifier()).name,Object.prototype.hasOwnProperty.call(this.context.labelSet,t)||this.throwError(d.Messages.UnknownLabel,e.name),n=e),this.consumeSemicolon(),null!==n||this.context.inIteration||this.context.inSwitch||this.throwError(d.Messages.IllegalBreak),this.finalize(r,new m.BreakStatement(n))},Parser.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(d.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&2!==this.lookahead.type||8===this.lookahead.type||10===this.lookahead.type?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(e,new m.ReturnStatement(t))},Parser.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(d.Messages.StrictModeWith);var e=this.createNode(),t=(this.expectKeyword("with"),this.expect("("),this.parseExpression()),r=!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),this.parseStatement());return this.finalize(e,new m.WithStatement(t,r))},Parser.prototype.parseSwitchCase=function(){var e=this.createNode(),t=this.matchKeyword("default")?(this.nextToken(),null):(this.expectKeyword("case"),this.parseExpression());this.expect(":");for(var r=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)r.push(this.parseStatementListItem());return this.finalize(e,new m.SwitchCase(t,r))},Parser.prototype.parseSwitchStatement=function(){var e=this.createNode(),t=(this.expectKeyword("switch"),this.expect("("),this.parseExpression()),r=(this.expect(")"),this.context.inSwitch),n=[],i=!(this.context.inSwitch=!0);for(this.expect("{");;){if(this.match("}"))break;var s=this.parseSwitchCase();null===s.test&&(i&&this.throwError(d.Messages.MultipleDefaultsInSwitch),i=!0),n.push(s)}return this.expect("}"),this.context.inSwitch=r,this.finalize(e,new m.SwitchStatement(t,n))},Parser.prototype.parseLabelledStatement=function(){var e,t,r,n,i=this.createNode(),s=this.parseExpression(),a=s.type===p.Syntax.Identifier&&this.match(":")?(this.nextToken(),t="$"+(e=s).name,Object.prototype.hasOwnProperty.call(this.context.labelSet,t)&&this.throwError(d.Messages.Redeclaration,"Label",e.name),n=void(this.context.labelSet[t]=!0),n=this.matchKeyword("class")?(this.tolerateUnexpectedToken(this.lookahead),this.parseClassDeclaration()):this.matchKeyword("function")?(a=this.lookahead,r=this.parseFunctionDeclaration(),this.context.strict?this.tolerateUnexpectedToken(a,d.Messages.StrictFunction):r.generator&&this.tolerateUnexpectedToken(a,d.Messages.GeneratorInLegacyContext),r):this.parseStatement(),delete this.context.labelSet[t],new m.LabeledStatement(e,n)):(this.consumeSemicolon(),new m.ExpressionStatement(s));return this.finalize(i,a)},Parser.prototype.parseThrowStatement=function(){var e=this.createNode(),t=(this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(d.Messages.NewlineAfterThrow),this.parseExpression());return this.consumeSemicolon(),this.finalize(e,new m.ThrowStatement(t))},Parser.prototype.parseCatchClause=function(){for(var e=this.createNode(),t=(this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead),[]),r=this.parsePattern(t),n={},i=0;i<t.length;i++){var s="$"+t[i].value;Object.prototype.hasOwnProperty.call(n,s)&&this.tolerateError(d.Messages.DuplicateBinding,t[i].value),n[s]=!0}this.context.strict&&r.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(d.Messages.StrictCatchVariable),this.expect(")");var a=this.parseBlock();return this.finalize(e,new m.CatchClause(r,a))},Parser.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},Parser.prototype.parseTryStatement=function(){var e=this.createNode(),t=(this.expectKeyword("try"),this.parseBlock()),r=this.matchKeyword("catch")?this.parseCatchClause():null,n=this.matchKeyword("finally")?this.parseFinallyClause():null;return r||n||this.throwError(d.Messages.NoCatchOrFinally),this.finalize(e,new m.TryStatement(t,r,n))},Parser.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new m.DebuggerStatement)},Parser.prototype.parseStatement=function(){switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:t=this.parseExpressionStatement();break;case 7:var e=this.lookahead.value,t="{"===e?this.parseBlock():"("!==e&&";"===e?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:t=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":t=this.parseBreakStatement();break;case"continue":t=this.parseContinueStatement();break;case"debugger":t=this.parseDebuggerStatement();break;case"do":t=this.parseDoWhileStatement();break;case"for":t=this.parseForStatement();break;case"function":t=this.parseFunctionDeclaration();break;case"if":t=this.parseIfStatement();break;case"return":t=this.parseReturnStatement();break;case"switch":t=this.parseSwitchStatement();break;case"throw":t=this.parseThrowStatement();break;case"try":t=this.parseTryStatement();break;case"var":t=this.parseVariableStatement();break;case"while":t=this.parseWhileStatement();break;case"with":t=this.parseWithStatement();break;default:t=this.parseExpressionStatement()}break;default:t=this.throwUnexpectedToken(this.lookahead)}return t},Parser.prototype.parseFunctionSourceElements=function(){var e=this.createNode(),t=(this.expect("{"),this.parseDirectivePrologues()),r=this.context.labelSet,n=this.context.inIteration,i=this.context.inSwitch,s=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=r,this.context.inIteration=n,this.context.inSwitch=i,this.context.inFunctionBody=s,this.finalize(e,new m.BlockStatement(t))},Parser.prototype.validateParam=function(e,t,r){var n="$"+r;this.context.strict?(this.scanner.isRestrictedWord(r)&&(e.stricted=t,e.message=d.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=d.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(r)?(e.firstRestricted=t,e.message=d.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(r)?(e.firstRestricted=t,e.message=d.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=d.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,n,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[n]=!0},Parser.prototype.parseRestElement=function(e){var t=this.createNode(),e=(this.expect("..."),this.parsePattern(e));return this.match("=")&&this.throwError(d.Messages.DefaultRestParameter),this.match(")")||this.throwError(d.Messages.ParameterAfterRestParameter),this.finalize(t,new m.RestElement(e))},Parser.prototype.parseFormalParameter=function(e){for(var t=[],r=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),n=0;n<t.length;n++)this.validateParam(e,t[n],t[n].value);e.simple=e.simple&&r instanceof m.Identifier,e.params.push(r)},Parser.prototype.parseFormalParameters=function(e){var t={simple:!0,params:[],firstRestricted:e};if(this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},Parser.prototype.matchAsyncFunction=function(){var e,t,r=this.matchContextualKeyword("async");return r&&(e=this.scanner.saveState(),this.scanner.scanComments(),t=this.scanner.lex(),this.scanner.restoreState(e),r=e.lineNumber===t.lineNumber&&4===t.type&&"function"===t.value),r},Parser.prototype.parseFunctionDeclaration=function(e){var t,r=this.createNode(),n=this.matchContextualKeyword("async"),i=(n&&this.nextToken(),this.expectKeyword("function"),!n&&this.match("*")),s=(i&&this.nextToken(),null),a=null,e=(e&&this.match("(")||(e=this.lookahead,s=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(e.value)&&this.tolerateUnexpectedToken(e,d.Messages.StrictFunctionName):this.scanner.isRestrictedWord(e.value)?(a=e,t=d.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(e.value)&&(a=e,t=d.Messages.StrictReservedWord)),this.context.await),o=this.context.allowYield,u=(this.context.await=n,this.context.allowYield=!i,this.parseFormalParameters(a)),l=u.params,c=u.stricted,a=u.firstRestricted,h=(u.message&&(t=u.message),this.context.strict),p=this.context.allowStrictDirective,u=(this.context.allowStrictDirective=u.simple,this.parseFunctionSourceElements());return this.context.strict&&a&&this.throwUnexpectedToken(a,t),this.context.strict&&c&&this.tolerateUnexpectedToken(c,t),this.context.strict=h,this.context.allowStrictDirective=p,this.context.await=e,this.context.allowYield=o,n?this.finalize(r,new m.AsyncFunctionDeclaration(s,l,u)):this.finalize(r,new m.FunctionDeclaration(s,l,u,i))},Parser.prototype.parseFunctionExpression=function(){var e,t=this.createNode(),r=this.matchContextualKeyword("async"),n=(r&&this.nextToken(),this.expectKeyword("function"),!r&&this.match("*")),i=(n&&this.nextToken(),null),s=this.context.await,a=this.context.allowYield,o=(this.context.await=r,this.context.allowYield=!n,this.match("(")||(o=this.lookahead,i=this.context.strict||n||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(o.value)&&this.tolerateUnexpectedToken(o,d.Messages.StrictFunctionName):this.scanner.isRestrictedWord(o.value)?(c=o,e=d.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(o.value)&&(c=o,e=d.Messages.StrictReservedWord)),this.parseFormalParameters(c)),u=o.params,l=o.stricted,c=o.firstRestricted,h=(o.message&&(e=o.message),this.context.strict),p=this.context.allowStrictDirective,o=(this.context.allowStrictDirective=o.simple,this.parseFunctionSourceElements());return this.context.strict&&c&&this.throwUnexpectedToken(c,e),this.context.strict&&l&&this.tolerateUnexpectedToken(l,e),this.context.strict=h,this.context.allowStrictDirective=p,this.context.await=s,this.context.allowYield=a,r?this.finalize(t,new m.AsyncFunctionExpression(i,u,o)):this.finalize(t,new m.FunctionExpression(i,u,o,n))},Parser.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),r=this.parseExpression(),e=r.type===p.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,e?new m.Directive(r,e):new m.ExpressionStatement(r))},Parser.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var r=this.lookahead;if(8!==r.type)break;var n=this.parseDirective(),n=(t.push(n),n.directive);if("string"!=typeof n)break;"use strict"===n?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,d.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(r,d.Messages.IllegalLanguageModeDirective)):!e&&r.octal&&(e=r)}return t},Parser.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},Parser.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield,r=(this.context.allowYield=!0,this.parseFormalParameters()),n=(0<r.params.length&&this.tolerateError(d.Messages.BadGetterArity),this.parsePropertyMethod(r));return this.context.allowYield=t,this.finalize(e,new m.FunctionExpression(null,r.params,n,!1))},Parser.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield,r=(this.context.allowYield=!0,this.parseFormalParameters()),n=(1!==r.params.length?this.tolerateError(d.Messages.BadSetterArity):r.params[0]instanceof m.RestElement&&this.tolerateError(d.Messages.BadSetterRestParameter),this.parsePropertyMethod(r));return this.context.allowYield=t,this.finalize(e,new m.FunctionExpression(null,r.params,n,!1))},Parser.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield,r=(this.context.allowYield=!0,this.parseFormalParameters()),n=(this.context.allowYield=!1,this.parsePropertyMethod(r));return this.context.allowYield=t,this.finalize(e,new m.FunctionExpression(null,r.params,n,!0))},Parser.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},Parser.prototype.parseYieldExpression=function(){var e,t=this.createNode(),r=(this.expectKeyword("yield"),null),n=!1;return this.hasLineTerminator||(e=this.context.allowYield,this.context.allowYield=!1,(n=this.match("*"))?(this.nextToken(),r=this.parseAssignmentExpression()):this.isStartOfExpression()&&(r=this.parseAssignmentExpression()),this.context.allowYield=e),this.finalize(t,new m.YieldExpression(r,n))},Parser.prototype.parseClassElement=function(e){var t=this.lookahead,r=this.createNode(),n="",i=null,s=null,a=!1,o=!1,u=!1,l=!1,c=(this.match("*")?this.nextToken():(a=this.match("["),"static"===(i=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,u=!0,a=this.match("["),this.match("*")?this.nextToken():i=this.parseObjectPropertyKey()),3!==t.type||this.hasLineTerminator||"async"!==t.value||":"!==(c=this.lookahead.value)&&"("!==c&&"*"!==c&&(l=!0,t=this.lookahead,i=this.parseObjectPropertyKey(),3===t.type)&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,d.Messages.ConstructorIsAsync)),this.qualifiedPropertyName(this.lookahead));return 3===t.type?"get"===t.value&&c?(n="get",a=this.match("["),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,s=this.parseGetterMethod()):"set"===t.value&&c&&(n="set",a=this.match("["),i=this.parseObjectPropertyKey(),s=this.parseSetterMethod()):7===t.type&&"*"===t.value&&c&&(n="init",a=this.match("["),i=this.parseObjectPropertyKey(),s=this.parseGeneratorMethod(),o=!0),!n&&i&&this.match("(")&&(n="init",s=l?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),o=!0),n||this.throwUnexpectedToken(this.lookahead),"init"===n&&(n="method"),a||(u&&this.isPropertyKey(i,"prototype")&&this.throwUnexpectedToken(t,d.Messages.StaticPrototype),!u&&this.isPropertyKey(i,"constructor")&&(("method"!==n||!o||s&&s.generator)&&this.throwUnexpectedToken(t,d.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,d.Messages.DuplicateConstructor):e.value=!0,n="constructor")),this.finalize(r,new m.MethodDefinition(i,a,s,n,u))},Parser.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},Parser.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new m.ClassBody(t))},Parser.prototype.parseClassDeclaration=function(e){var t=this.createNode(),r=this.context.strict,e=(this.context.strict=!0,this.expectKeyword("class"),e&&3!==this.lookahead.type?null:this.parseVariableIdentifier()),n=null,i=(this.matchKeyword("extends")&&(this.nextToken(),n=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall)),this.parseClassBody());return this.context.strict=r,this.finalize(t,new m.ClassDeclaration(e,n,i))},Parser.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict,r=(this.context.strict=!0,this.expectKeyword("class"),3===this.lookahead.type?this.parseVariableIdentifier():null),n=null,i=(this.matchKeyword("extends")&&(this.nextToken(),n=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall)),this.parseClassBody());return this.context.strict=t,this.finalize(e,new m.ClassExpression(r,n,i))},Parser.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new m.Module(t))},Parser.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new m.Script(t))},Parser.prototype.parseModuleSpecifier=function(){var e=this.createNode(),t=(8!==this.lookahead.type&&this.throwError(d.Messages.InvalidModuleSpecifier),this.nextToken()),r=this.getTokenRaw(t);return this.finalize(e,new m.Literal(t.value,r))},Parser.prototype.parseImportSpecifier=function(){var e,t,r=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(r,new m.ImportSpecifier(t,e))},Parser.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},Parser.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new m.ImportDefaultSpecifier(t))},Parser.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode(),t=(this.expect("*"),this.matchContextualKeyword("as")||this.throwError(d.Messages.NoAsAfterImportNamespace),this.nextToken(),this.parseIdentifierName());return this.finalize(e,new m.ImportNamespaceSpecifier(t))},Parser.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(d.Messages.IllegalImportDeclaration);var e=this.createNode(),t=(this.expectKeyword("import"),[]),r=(8===this.lookahead.type||(this.match("{")?t=t.concat(this.parseNamedImports()):this.match("*")?t.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(t.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?t.push(this.parseImportNamespaceSpecifier()):this.match("{")?t=t.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),this.matchContextualKeyword("from")||(r=this.lookahead.value?d.Messages.UnexpectedToken:d.Messages.MissingFromClause,this.throwError(r,this.lookahead.value)),this.nextToken()),this.parseModuleSpecifier());return this.consumeSemicolon(),this.finalize(e,new m.ImportDeclaration(t,r))},Parser.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),r=t;return this.matchContextualKeyword("as")&&(this.nextToken(),r=this.parseIdentifierName()),this.finalize(e,new m.ExportSpecifier(t,r))},Parser.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(d.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))this.nextToken(),e=(this.matchKeyword("function")?n=this.parseFunctionDeclaration(!0):this.matchKeyword("class")?n=this.parseClassDeclaration(!0):this.matchContextualKeyword("async")?n=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression():(this.matchContextualKeyword("from")&&this.throwError(d.Messages.UnexpectedToken,this.lookahead.value),n=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon()),this.finalize(t,new m.ExportDefaultDeclaration(n)));else if(this.match("*")){this.nextToken(),this.matchContextualKeyword("from")||(i=this.lookahead.value?d.Messages.UnexpectedToken:d.Messages.MissingFromClause,this.throwError(i,this.lookahead.value)),this.nextToken();var r=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new m.ExportAllDeclaration(r))}else if(4===this.lookahead.type){var n=void 0;switch(this.lookahead.value){case"let":case"const":n=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":n=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new m.ExportNamedDeclaration(n,[],null))}else if(this.matchAsyncFunction()){n=this.parseFunctionDeclaration();e=this.finalize(t,new m.ExportNamedDeclaration(n,[],null))}else{var i,s=[],r=null,a=!1;for(this.expect("{");!this.match("}");)a=a||this.matchKeyword("default"),s.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),r=this.parseModuleSpecifier(),this.consumeSemicolon()):a?(i=this.lookahead.value?d.Messages.UnexpectedToken:d.Messages.MissingFromClause,this.throwError(i,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new m.ExportNamedDeclaration(null,s,r))}return e},t.Parser=Parser},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function assert(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";function ErrorHandler(){this.errors=[],this.tolerant=!1}Object.defineProperty(t,"__esModule",{value:!0}),ErrorHandler.prototype.recordError=function(e){this.errors.push(e)},ErrorHandler.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},ErrorHandler.prototype.constructError=function(t,r){t=new Error(t);try{throw t}catch(e){Object.create&&Object.defineProperty&&(t=Object.create(e),Object.defineProperty(t,"column",{value:r}))}return t},ErrorHandler.prototype.createError=function(e,t,r,n){r=this.constructError("Line "+t+": "+n,r);return r.index=e,r.lineNumber=t,r.description=n,r},ErrorHandler.prototype.throwError=function(e,t,r,n){throw this.createError(e,t,r,n)},ErrorHandler.prototype.tolerateError=function(e,t,r,n){e=this.createError(e,t,r,n);if(!this.tolerant)throw e;this.recordError(e)},t.ErrorHandler=ErrorHandler},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(9),l=r(4),c=r(11);function hexValue(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function octalValue(e){return"01234567".indexOf(e)}function Scanner(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=0<e.length?1:0,this.lineStart=0,this.curlyStack=[]}Scanner.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},Scanner.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},Scanner.prototype.eof=function(){return this.index>=this.length},Scanner.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=c.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},Scanner.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=c.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},Scanner.prototype.skipSingleLineComment=function(e){var t,r,n=[];for(this.trackComment&&(n=[],t=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i,s=this.source.charCodeAt(this.index);if(++this.index,l.Character.isLineTerminator(s))return this.trackComment&&(i={multiLine:!(r.end={line:this.lineNumber,column:this.index-this.lineStart-1}),slice:[t+e,this.index-1],range:[t,this.index-1],loc:r},n.push(i)),13===s&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,n}return this.trackComment&&(i={multiLine:!(r.end={line:this.lineNumber,column:this.index-this.lineStart}),slice:[t+e,this.index],range:[t,this.index],loc:r},n.push(i)),n},Scanner.prototype.skipMultiLineComment=function(){var e,t,r=[];for(this.trackComment&&(r=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var n,i=this.source.charCodeAt(this.index);if(l.Character.isLineTerminator(i))13===i&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===i&&47===this.source.charCodeAt(this.index+1))return this.index+=2,this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},n={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t},r.push(n)),r;++this.index}}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},n={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},r.push(n)),this.tolerateUnexpectedToken(),r},Scanner.prototype.scanComments=function(){this.trackComment&&(e=[]);for(var e,t=0===this.index;!this.eof();){var r=this.source.charCodeAt(this.index);if(l.Character.isWhiteSpace(r))++this.index;else if(l.Character.isLineTerminator(r))++this.index,13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===r)if(47===(r=this.source.charCodeAt(this.index+1))){this.index+=2;var n=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(n)),t=!0}else{if(42!==r)break;this.index+=2;n=this.skipMultiLineComment();this.trackComment&&(e=e.concat(n))}else{if(t&&45===r){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3;n=this.skipSingleLineComment(3)}else{if(60!==r||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4;n=this.skipSingleLineComment(4)}this.trackComment&&(e=e.concat(n))}}return e},Scanner.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},Scanner.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},Scanner.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},Scanner.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},Scanner.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);return t=55296<=t&&t<=56319&&56320<=(e=this.source.charCodeAt(e+1))&&e<=57343?1024*(t-55296)+e-56320+65536:t},Scanner.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,r=0,n=0;n<t;++n){if(this.eof()||!l.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;r=16*r+hexValue(this.source[this.index++])}return String.fromCharCode(r)},Scanner.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],l.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+hexValue(e);return(1114111<t||"}"!==e)&&this.throwUnexpectedToken(),l.Character.fromCodePoint(t)},Scanner.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(55296<=t&&t<57343)return this.index=e,this.getComplexIdentifier();if(!l.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},Scanner.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),r=l.Character.fromCodePoint(t);for(this.index+=r.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&l.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),r=e);!this.eof()&&(t=this.codePointAt(this.index),l.Character.isIdentifierPart(t));)r+=e=l.Character.fromCodePoint(t),this.index+=e.length,92===t&&(r=r.substr(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&l.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),r+=e);return r},Scanner.prototype.octalToDecimal=function(e){var t="0"!==e,r=octalValue(e);return{code:r=!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,r=8*r+octalValue(this.source[this.index++]),0<="0123".indexOf(e))&&!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index))?8*r+octalValue(this.source[this.index++]):r,octal:t}},Scanner.prototype.scanIdentifier=function(){var e,t=this.index,r=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier(),n=1===r.length?3:this.isKeyword(r)?4:"null"===r?5:"true"===r||"false"===r?1:3;return 3!==n&&t+r.length!==this.index&&(e=this.index,this.index=t,this.tolerateUnexpectedToken(c.Messages.InvalidEscapedReservedWord),this.index=e),{type:n,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},Scanner.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],0<="<>=!+-*%&|^/".indexOf(t)&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&l.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),l.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanBinaryLiteral=function(e){for(var t,r="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)r+=this.source[this.index++];return 0===r.length&&this.throwUnexpectedToken(),!this.eof()&&(t=this.source.charCodeAt(this.index),l.Character.isIdentifierStart(t)||l.Character.isDecimalDigit(t))&&this.throwUnexpectedToken(),{type:6,value:parseInt(r,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanOctalLiteral=function(e,t){var r="",n=!1;for(l.Character.isOctalDigit(e.charCodeAt(0))?(n=!0,r="0"+this.source[this.index++]):++this.index;!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];return n||0!==r.length||this.throwUnexpectedToken(),(l.Character.isIdentifierStart(this.source.charCodeAt(this.index))||l.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(r,8),octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},Scanner.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!l.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},Scanner.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e],r=(o.assert(l.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point"),"");if("."!==t){if(r=this.source[this.index++],t=this.source[this.index],"0"===r){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&l.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(r+=this.source[this.index++];l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(r+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(r+=this.source[this.index++]),l.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];else this.throwUnexpectedToken();return l.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanStringLiteral=function(){for(var e=this.index,t=this.source[e],r=(o.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index,!1),n="";!this.eof();){var i,s=this.source[this.index++];if(s===t){t="";break}if("\\"===s)if((s=this.source[this.index++])&&l.Character.isLineTerminator(s.charCodeAt(0)))++this.lineNumber,"\r"===s&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(s){case"u":"{"===this.source[this.index]?(++this.index,n+=this.scanUnicodeCodePointEscape()):(null===(a=this.scanHexEscape(s))&&this.throwUnexpectedToken(),n+=a);break;case"x":var a=this.scanHexEscape(s);null===a&&this.throwUnexpectedToken(c.Messages.InvalidHexEscapeSequence),n+=a;break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;case"8":case"9":n+=s,this.tolerateUnexpectedToken();break;default:s&&l.Character.isOctalDigit(s.charCodeAt(0))?(r=(i=this.octalToDecimal(s)).octal||r,n+=String.fromCharCode(i.code)):n+=s}else{if(l.Character.isLineTerminator(s.charCodeAt(0)))break;n+=s}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:n,octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanTemplate=function(){var e="",t=!1,r=this.index,n="`"===this.source[r],i=!1,s=2;for(++this.index;!this.eof();){var a,o=this.source[this.index++];if("`"===o){s=1,t=i=!0;break}if("$"===o){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=o}else if("\\"===o)if(o=this.source[this.index++],l.Character.isLineTerminator(o.charCodeAt(0)))++this.lineNumber,"\r"===o&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(o){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":"{"===this.source[this.index]?(++this.index,e+=this.scanUnicodeCodePointEscape()):(a=this.index,null!==(u=this.scanHexEscape(o))?e+=u:(this.index=a,e+=o));break;case"x":var u=this.scanHexEscape(o);null===u&&this.throwUnexpectedToken(c.Messages.InvalidHexEscapeSequence),e+=u;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===o?(l.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(c.Messages.TemplateOctalLiteral),e+="\0"):l.Character.isOctalDigit(o.charCodeAt(0))?this.throwUnexpectedToken(c.Messages.TemplateOctalLiteral):e+=o}else l.Character.isLineTerminator(o.charCodeAt(0))?(++this.lineNumber,"\r"===o&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=o}return t||this.throwUnexpectedToken(),n||this.curlyStack.pop(),{type:10,value:this.source.slice(r+1,this.index-s),cooked:e,head:n,tail:i,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}},Scanner.prototype.testRegExp=function(e,t){var r=e,n=this;0<=t.indexOf("u")&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,r){t=parseInt(t||r,16);return 1114111<t&&n.throwUnexpectedToken(c.Messages.InvalidRegExp),t<=65535?String.fromCharCode(t):"￿"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"￿"));try{RegExp(r)}catch(e){this.throwUnexpectedToken(c.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},Scanner.prototype.scanRegExpBody=function(){for(var e=this.source[this.index],t=(o.assert("/"===e,"Regular expression literal must start with a slash"),this.source[this.index++]),r=!1,n=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],l.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(c.Messages.UnterminatedRegExp),t+=e;else if(l.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(c.Messages.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){n=!0;break}"["===e&&(r=!0)}return n||this.throwUnexpectedToken(c.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},Scanner.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!l.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t,0;else{if("u"===(t=this.source[this.index])){++this.index;var r=this.index,t=this.scanHexEscape("u");if(null!==t)for(e+=t,0;r<this.index;++r)this.source[r];else this.index=r,e+="u",0}else 0;this.tolerateUnexpectedToken()}}return e},Scanner.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),r=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:r,regex:this.testRegExp(t,r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.lex=function(){var e;return this.eof()?{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index}:(e=this.source.charCodeAt(this.index),l.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?l.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():l.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=e&&e<57343&&l.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator())},t.Scanner=Scanner},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(12),o=r(13),s=(Reader.prototype.beforeFunctionExpression=function(e){return 0<=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)},Reader.prototype.isRegexStart=function(){var e,t=this.values[this.values.length-1],r=null!==t;switch(t){case"this":case"]":r=!1;break;case")":var n=this.values[this.paren-1],r="if"===n||"while"===n||"for"===n||"with"===n;break;case"}":r=!1,"function"===this.values[this.curly-3]?r=!!(e=this.values[this.curly-4])&&!this.beforeFunctionExpression(e):"function"===this.values[this.curly-4]&&(r=!(e=this.values[this.curly-5])||!this.beforeFunctionExpression(e))}return r},Reader.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},Reader);function Reader(){this.values=[],this.curly=this.paren=-1}function Tokenizer(e,t){this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new i.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new s}Tokenizer.prototype.errors=function(){return this.errorHandler.errors},Tokenizer.prototype.getNextToken=function(){if(0===this.buffer.length){var e,t,r,n=this.scanner.scanComments();if(this.scanner.trackComment)for(var i=0;i<n.length;++i){var s=n[i],a=this.scanner.source.slice(s.slice[0],s.slice[1]),a={type:s.multiLine?"BlockComment":"LineComment",value:a};this.trackRange&&(a.range=s.range),this.trackLoc&&(a.loc=s.loc),this.buffer.push(a)}this.scanner.eof()||(t=void 0,this.trackLoc&&(t={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}}),r="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex(),this.reader.push(r),e={type:o.TokenName[r.type],value:this.scanner.source.slice(r.start,r.end)},this.trackRange&&(e.range=[r.start,r.end]),this.trackLoc&&(t.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},e.loc=t),9===r.type&&(t=r.pattern,r=r.flags,e.regex={pattern:t,flags:r}),this.buffer.push(e))}return this.buffer.shift()},t.Tokenizer=Tokenizer}],n={},__webpack_require__.m=r,__webpack_require__.c=n,__webpack_require__.p="",__webpack_require__(0);function __webpack_require__(e){var t;return(n[e]||(t=n[e]={exports:{},id:e,loaded:!1},r[e].call(t.exports,t,t.exports,__webpack_require__),t.loaded=!0,t)).exports}var r,n})},{}],56:[function(t,e,l){!function(){"use strict";var s,a,n,o,e,r,u,i;function NameGenerator(e,t){this._scope=e,this._functionName="",!t.distinguishFunctionExpressionScope&&this._scope.upper&&this._scope.upper.functionExpressionScope&&(this._functionName=this._scope.upper.block.id.name)}function Label(e,t){this.node=e,this.upper=t,this.users=[],this.names=new i,this.name=null}function LabelScope(e){this.map=new i,this.upper=e,this.label=null,this.labels=[]}s=t("escope"),a=t("estraverse"),n=t("esutils"),o=t("./utility"),i=t("./map"),e=t("../package.json").version,u=a.Syntax,r=function assert(e,t){if(!e)throw new Error(t)},-1===e.indexOf("-dev",e.length-4)&&(r=function(){}),NameGenerator.prototype.passAsUnique=function passAsUnique(e){var t,r;if(this._functionName===e)return!1;if(n.keyword.isKeywordES5(e,!0)||n.keyword.isRestrictedWord(e))return!1;if(this._scope.taints.has(e))return!1;for(t=0,r=this._scope.through.length;t<r;++t)if(this._scope.through[t].identifier.name===e)return!1;return!0},NameGenerator.prototype.generateName=function generateName(e){for(;e=o.generateNextName(e),!this.passAsUnique(e););return e},Label.prototype.mangle=function(){for(var e,t,r="9",n=this.upper;n;n=n.upper)null!==n.name&&this.names.set(n.name,!0);for(;r=o.generateNextName(r),this.names.has(r););for(this.name=r,n=this.upper;n;n=n.upper)n.names.set(r,!0);for(this.node.label.name=r,e=0,t=this.users.length;e<t;++e)this.users[e].label.name=r},LabelScope.prototype.register=function register(e){r(e.type===u.LabeledStatement,"node should be LabeledStatement"),this.label=new Label(e,this.label),this.labels.push(this.label),e=e.label.name,r(!this.map.has(e),"duplicate label is found"),this.map.set(e,this.label)},LabelScope.prototype.unregister=function unregister(e){var t;e.type===u.LabeledStatement&&(e=e.label.name,t=this.map.get(e),this.map.delete(e),this.label=t.upper)},LabelScope.prototype.resolve=function resolve(e){var t;e.label&&(t=e.label.name,r(this.map.has(t),"unresolved label"),this.map.get(t).users.push(e))},LabelScope.prototype.close=function close(){var e,t;for(this.labels.sort(function(e,t){return t.users.length-e.users.length}),e=0,t=this.labels.length;e<t;++e)this.labels[e].mangle();return this.upper},l.mangle=function mangle(e,t){for(var r,e=null==(t=null==t?{destructive:!0}:t).destructive||t.destructive?e:o.deepCopy(e),n=0,i=(r=s.analyze(e,{directive:!0})).scopes.length;n<i;++n)!function run(e,t){var r,n,i,s,a,o,u=new NameGenerator(e,t);if(e.isStatic())for(o="9",e.variables.sort(function(e,t){return e.tainted?1:t.tainted?-1:t.identifiers.length+t.references.length-(e.identifiers.length+e.references.length)}),r=0,n=e.variables.length;r<n;++r)if(!(a=e.variables[r]).tainted&&0!==a.identifiers.length){for(o=u.generateName(o),i=0,s=a.identifiers.length;i<s;++i)a.identifiers[i].name=o;for(i=0,s=a.references.length;i<s;++i)a.references[i].identifier.name=o}}(r.scopes[n],t);return function mangleLabels(e){var t;return a.traverse(e,{enter:function(e){if(s.Scope.isVariableScopeRequired(e))t=new LabelScope(t);else switch(e.type){case u.LabeledStatement:t.register(e);break;case u.BreakStatement:case u.ContinueStatement:t.resolve(e)}},leave:function(e){t.unregister(e),s.Scope.isVariableScopeRequired(e)&&(t=t.close())}}),e}(e)},l.version=e,l.generateNextName=o.generateNextName}()},{"../package.json":61,"./map":57,"./utility":58,escope:10,estraverse:59,esutils:66}],57:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{dup:17}],58:[function(e,t,s){!function(){"use strict";var i,n,r;function zeroSequence(e){var t=r[e];return void 0===t&&(t=function stringRepeat(e,t){var r="";for(t|=0;0<t;t>>>=1,e+=e)1&t&&(r+=e);return r}("0",e),r[e]=t),t}i=(i=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},r=[],n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$".split(""),s.generateNextName=function generateNextName(e){var t,r=e.length-1;do{if(t=e.charAt(r),(t=n.indexOf(t))!==n.length-1)return e.substring(0,r)+n[t+1]+zeroSequence(e.length-(r+1))}while(0<=--r);return"a"+zeroSequence(e.length)},s.deepCopy=function deepCopy(e){return function deepCopyInternal(e,t){var r,n;for(r in e)0!==r.lastIndexOf("__",0)&&e.hasOwnProperty(r)&&("object"==typeof(n=e[r])&&null!==n&&(n=n instanceof RegExp?new RegExp(n):deepCopyInternal(n,i(n)?[]:{})),t[r]=n);return t}(e,i(e)?[]:{})}}()},{}],59:[function(t,e,r){!function clone(e){"use strict";var r,m,u,n,i,g,y,v,_;function deepCopy(e){var t,r,n={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],n[t]="object"==typeof r&&null!==r?deepCopy(r):r);return n}function F(){}function Reference(e,t){this.parent=e,this.key=t}function Element(e,t,r,n){this.node=e,this.path=t,this.wrap=r,this.ref=n}function Controller(){}function isNode(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function isProperty(e,t){return(e===r.ObjectExpression||e===r.ObjectPattern)&&"properties"===t}function traverse(e,t){return(new Controller).traverse(e,t)}function extendCommentRange(t,e){var r=function upperBound(e,t){for(var r,n,i=e.length,s=0;i;)t(e[n=s+(r=i>>>1)])?i=r:(s=n+1,i-=1+r);return s}(e,function search(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],r!==e.length&&(t.extendedRange[1]=e[r].range[0]),0<=--r&&(t.extendedRange[0]=e[r].range[1]),t}return m=(m=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.create||function(e){return F.prototype=e,new F},g=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},n={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={Break:y={},Skip:v={},Remove:_={}},Reference.prototype.replace=function replace(e){this.parent[this.key]=e},Reference.prototype.remove=function remove(){return m(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},Controller.prototype.path=function path(){var e,t,r,n,i;function addToPath(e,t){if(m(t))for(r=0,n=t.length;r<n;++r)e.push(t[r]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)addToPath(i,this.__leavelist[e].path);return addToPath(i,this.__current.path),i},Controller.prototype.type=function(){return this.current().type||this.__current.wrap},Controller.prototype.parents=function parents(){for(var e=[],t=1,r=this.__leavelist.length;t<r;++t)e.push(this.__leavelist[t].node);return e},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(e,t){var r=void 0,n=this.__current;return this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},Controller.prototype.notify=function notify(e){this.__state=e},Controller.prototype.skip=function(){this.notify(v)},Controller.prototype.break=function(){this.notify(y)},Controller.prototype.remove=function(){this.notify(_)},Controller.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=n,t.keys&&(this.__keys=function extend(e,t){for(var r,n=g(t),i=0,s=n.length;i<s;i+=1)e[r=n[i]]=t[r];return e}(i(this.__keys),t.keys))},Controller.prototype.traverse=function traverse(e,t){var r,n,i,s,a,o,u,l,c,h,p,d;for(this.__initialize(e,t),d={},r=this.__worklist,n=this.__leavelist,r.push(new Element(e,null,null,null)),n.push(new Element(null,null,null,null));r.length;)if((i=r.pop())===d){if(i=n.pop(),o=this.__execute(t.leave,i),this.__state===y||o===y)return}else if(i.node){if(o=this.__execute(t.enter,i),this.__state===y||o===y)return;if(r.push(d),n.push(i),this.__state!==v&&o!==v){if(a=(s=i.node).type||i.wrap,!(h=this.__keys[a])){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=g(s)}for(l=h.length;0<=--l;)if(p=s[u=h[l]])if(m(p)){for(c=p.length;0<=--c;)if(p[c]){if(isProperty(a,h[l]))i=new Element(p[c],[u,c],"Property",null);else{if(!isNode(p[c]))continue;i=new Element(p[c],[u,c],null,null)}r.push(i)}}else isNode(p)&&r.push(new Element(p,u,null,null))}}},Controller.prototype.replace=function replace(e,t){function removeElem(e){var t,r,n,i;if(e.ref.remove())for(r=e.ref.key,i=e.ref.parent,t=s.length;t--;)if((n=s[t]).ref&&n.ref.parent===i){if(n.ref.key<r)break;--n.ref.key}}var s,r,n,i,a,o,u,l,c,h,p,d,f;for(this.__initialize(e,t),p={},s=this.__worklist,r=this.__leavelist,o=new Element(e,null,null,new Reference(d={root:e},"root")),s.push(o),r.push(o);s.length;)if((o=s.pop())===p){if(o=r.pop(),void 0!==(a=this.__execute(t.leave,o))&&a!==y&&a!==v&&a!==_&&o.ref.replace(a),this.__state!==_&&a!==_||removeElem(o),this.__state===y||a===y)return d.root}else{if(void 0!==(a=this.__execute(t.enter,o))&&a!==y&&a!==v&&a!==_&&(o.ref.replace(a),o.node=a),this.__state!==_&&a!==_||(removeElem(o),o.node=null),this.__state===y||a===y)return d.root;if((n=o.node)&&(s.push(p),r.push(o),this.__state!==v)&&a!==v){if(i=n.type||o.wrap,!(c=this.__keys[i])){if(!this.__fallback)throw new Error("Unknown node type "+i+".");c=g(n)}for(u=c.length;0<=--u;)if(h=n[f=c[u]])if(m(h)){for(l=h.length;0<=--l;)if(h[l]){if(isProperty(i,c[u]))o=new Element(h[l],[f,l],"Property",new Reference(h,l));else{if(!isNode(h[l]))continue;o=new Element(h[l],[f,l],null,new Reference(h,l))}s.push(o)}}else isNode(h)&&s.push(new Element(h,f,null,new Reference(n,f)))}}return d.root},e.version=t("./package.json").version,e.Syntax=r,e.traverse=traverse,e.replace=function replace(e,t){return(new Controller).replace(e,t)},e.attachComments=function attachComments(e,t,r){var n,i,s,a,o=[];if(!e.range)throw new Error("attachComments needs range information");if(r.length){for(s=0,i=t.length;s<i;s+=1)o.push(extendCommentRange(deepCopy(t[s]),r));a=0,traverse(e,{enter:function(e){for(var t;a<o.length&&!((t=o[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}}),a=0,traverse(e,{leave:function(e){for(var t;a<o.length&&(t=o[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}})}else if(t.length){for(s=0,i=t.length;s<i;s+=1)(n=deepCopy(t[s])).extendedRange=[0,e.range[0]],o.push(n);e.leadingComments=o}return e},e.VisitorKeys=n,e.VisitorOption=u,e.Controller=Controller,e.cloneEnvironment=function(){return clone({})},e}(r)},{"./package.json":60}],60:[function(e,t,r){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.1.1",engines:{node:">=0.10.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"}}},{}],61:[function(e,t,r){t.exports={name:"esshorten",description:"Shorten (mangle) names in JavaScript code",main:"lib/esshorten.js",version:"1.1.1",engines:{node:">=0.6.0"},directories:{lib:"./lib"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/esshorten.git"},dependencies:{estraverse:"~4.1.1",escope:"~1.0.1",esutils:"~2.0.2"},devDependencies:{chai:"*","commonjs-everywhere":"~0.9.7","jshint-stylish":"~2.0.1","gulp-mocha":"~2.1.3","gulp-jshint":"~1.11.2",gulp:"~3.9.0","coffee-script":"~1.10.0"},licenses:[{type:"BSD",url:"http://github.com/estools/esshorten/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis",lint:"gulp lint","unit-test":"gulp test"}}},{}],62:[function(e,t,r){!function clone(e){"use strict";var r,u,n,m,g,y;function deepCopy(e){var t,r,n={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],n[t]="object"==typeof r&&null!==r?deepCopy(r):r);return n}function Reference(e,t){this.parent=e,this.key=t}function Element(e,t,r,n){this.node=e,this.path=t,this.wrap=r,this.ref=n}function Controller(){}function isNode(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function isProperty(e,t){return(e===r.ObjectExpression||e===r.ObjectPattern)&&"properties"===t}function candidateExistsInLeaveList(e,t){for(var r=e.length-1;0<=r;--r)if(e[r].node===t)return 1}function traverse(e,t){return(new Controller).traverse(e,t)}function extendCommentRange(t,e){var r=function upperBound(e,t){for(var r,n,i=e.length,s=0;i;)t(e[n=s+(r=i>>>1)])?i=r:(s=n+1,i-=1+r);return s}(e,function search(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],r!==e.length&&(t.extendedRange[1]=e[r].range[0]),0<=--r&&(t.extendedRange[0]=e[r].range[1]),t}return r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},n={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={Break:m={},Skip:g={},Remove:y={}},Reference.prototype.replace=function replace(e){this.parent[this.key]=e},Reference.prototype.remove=function remove(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},Controller.prototype.path=function path(){var e,t,r,n,i;function addToPath(e,t){if(Array.isArray(t))for(r=0,n=t.length;r<n;++r)e.push(t[r]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)addToPath(i,this.__leavelist[e].path);return addToPath(i,this.__current.path),i},Controller.prototype.type=function(){return this.current().type||this.__current.wrap},Controller.prototype.parents=function parents(){for(var e=[],t=1,r=this.__leavelist.length;t<r;++t)e.push(this.__leavelist[t].node);return e},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(e,t){var r=void 0,n=this.__current;return this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},Controller.prototype.notify=function notify(e){this.__state=e},Controller.prototype.skip=function(){this.notify(g)},Controller.prototype.break=function(){this.notify(m)},Controller.prototype.remove=function(){this.notify(y)},Controller.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===t.fallback?this.__fallback=Object.keys:"function"==typeof t.fallback&&(this.__fallback=t.fallback),this.__keys=n,t.keys&&(this.__keys=Object.assign(Object.create(this.__keys),t.keys))},Controller.prototype.traverse=function traverse(e,t){var r,n,i,s,a,o,u,l,c,h,p,d;for(this.__initialize(e,t),d={},r=this.__worklist,n=this.__leavelist,r.push(new Element(e,null,null,null)),n.push(new Element(null,null,null,null));r.length;)if((i=r.pop())===d){if(i=n.pop(),o=this.__execute(t.leave,i),this.__state===m||o===m)return}else if(i.node){if(o=this.__execute(t.enter,i),this.__state===m||o===m)return;if(r.push(d),n.push(i),this.__state!==g&&o!==g){if(a=(s=i.node).type||i.wrap,!(h=this.__keys[a])){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=this.__fallback(s)}for(l=h.length;0<=--l;)if(p=s[u=h[l]])if(Array.isArray(p)){for(c=p.length;0<=--c;)if(p[c]&&!candidateExistsInLeaveList(n,p[c])){if(isProperty(a,h[l]))i=new Element(p[c],[u,c],"Property",null);else{if(!isNode(p[c]))continue;i=new Element(p[c],[u,c],null,null)}r.push(i)}}else!isNode(p)||candidateExistsInLeaveList(n,p)||r.push(new Element(p,u,null,null))}}},Controller.prototype.replace=function replace(e,t){var s,r,n,i,a,o,u,l,c,h,p,d,f;function removeElem(e){var t,r,n,i;if(e.ref.remove())for(r=e.ref.key,i=e.ref.parent,t=s.length;t--;)if((n=s[t]).ref&&n.ref.parent===i){if(n.ref.key<r)break;--n.ref.key}}for(this.__initialize(e,t),p={},s=this.__worklist,r=this.__leavelist,o=new Element(e,null,null,new Reference(d={root:e},"root")),s.push(o),r.push(o);s.length;)if((o=s.pop())===p){if(o=r.pop(),void 0!==(a=this.__execute(t.leave,o))&&a!==m&&a!==g&&a!==y&&o.ref.replace(a),this.__state!==y&&a!==y||removeElem(o),this.__state===m||a===m)return d.root}else{if(void 0!==(a=this.__execute(t.enter,o))&&a!==m&&a!==g&&a!==y&&(o.ref.replace(a),o.node=a),this.__state!==y&&a!==y||(removeElem(o),o.node=null),this.__state===m||a===m)return d.root;if((n=o.node)&&(s.push(p),r.push(o),this.__state!==g)&&a!==g){if(i=n.type||o.wrap,!(c=this.__keys[i])){if(!this.__fallback)throw new Error("Unknown node type "+i+".");c=this.__fallback(n)}for(u=c.length;0<=--u;)if(h=n[f=c[u]])if(Array.isArray(h)){for(l=h.length;0<=--l;)if(h[l]){if(isProperty(i,c[u]))o=new Element(h[l],[f,l],"Property",new Reference(h,l));else{if(!isNode(h[l]))continue;o=new Element(h[l],[f,l],null,new Reference(h,l))}s.push(o)}}else isNode(h)&&s.push(new Element(h,f,null,new Reference(n,f)))}}return d.root},e.Syntax=r,e.traverse=traverse,e.replace=function replace(e,t){return(new Controller).replace(e,t)},e.attachComments=function attachComments(e,t,r){var n,i,s,a,o=[];if(!e.range)throw new Error("attachComments needs range information");if(r.length){for(s=0,i=t.length;s<i;s+=1)o.push(extendCommentRange(deepCopy(t[s]),r));a=0,traverse(e,{enter:function(e){for(var t;a<o.length&&!((t=o[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}}),a=0,traverse(e,{leave:function(e){for(var t;a<o.length&&(t=o[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}})}else if(t.length){for(s=0,i=t.length;s<i;s+=1)(n=deepCopy(t[s])).extendedRange=[0,e.range[0]],o.push(n);e.leadingComments=o}return e},e.VisitorKeys=n,e.VisitorOption=u,e.Controller=Controller,e.cloneEnvironment=function(){return clone({})},e}(r)},{}],63:[function(e,t,r){!function(){"use strict";function isStatement(e){if(null!=e)switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function trailingStatement(e){switch(e.type){case"IfStatement":return null!=e.alternate?e.alternate:e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}t.exports={isExpression:function isExpression(e){if(null!=e)switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1},isStatement:isStatement,isIterationStatement:function isIterationStatement(e){if(null!=e)switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1},isSourceElement:function isSourceElement(e){return isStatement(e)||null!=e&&"FunctionDeclaration"===e.type},isProblematicIfStatement:function isProblematicIfStatement(e){var t;if("IfStatement"===e.type&&null!=e.alternate){t=e.consequent;do{if("IfStatement"===t.type&&null==t.alternate)return!0}while(t=trailingStatement(t))}return!1},trailingStatement:trailingStatement}}()},{}],64:[function(e,a,t){!function(){"use strict";var t,r,n,i,s,e;function fromCodePoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(Math.floor((e-65536)/1024)+55296)+String.fromCharCode((e-65536)%1024+56320)}for(r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},n=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],i=new Array(128),e=0;e<128;++e)i[e]=97<=e&&e<=122||65<=e&&e<=90||36===e||95===e;for(s=new Array(128),e=0;e<128;++e)s[e]=97<=e&&e<=122||65<=e&&e<=90||48<=e&&e<=57||36===e||95===e;a.exports={isDecimalDigit:function isDecimalDigit(e){return 48<=e&&e<=57},isHexDigit:function isHexDigit(e){return 48<=e&&e<=57||97<=e&&e<=102||65<=e&&e<=70},isOctalDigit:function isOctalDigit(e){return 48<=e&&e<=55},isWhiteSpace:function isWhiteSpace(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=n.indexOf(e)},isLineTerminator:function isLineTerminator(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStartES5:function isIdentifierStartES5(e){return e<128?i[e]:r.NonAsciiIdentifierStart.test(fromCodePoint(e))},isIdentifierPartES5:function isIdentifierPartES5(e){return e<128?s[e]:r.NonAsciiIdentifierPart.test(fromCodePoint(e))},isIdentifierStartES6:function isIdentifierStartES6(e){return e<128?i[e]:t.NonAsciiIdentifierStart.test(fromCodePoint(e))},isIdentifierPartES6:function isIdentifierPartES6(e){return e<128?s[e]:t.NonAsciiIdentifierPart.test(fromCodePoint(e))}}}()},{}],65:[function(e,t,r){!function(){"use strict";var a=e("./code");function isKeywordES5(e,t){return!(!t&&"yield"===e)&&isKeywordES6(e,t)}function isKeywordES6(e,t){if(t&&function isStrictModeReservedWordES6(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return 1;default:return}}(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function isReservedWordES5(e,t){return"null"===e||"true"===e||"false"===e||isKeywordES5(e,t)}function isReservedWordES6(e,t){return"null"===e||"true"===e||"false"===e||isKeywordES6(e,t)}function isIdentifierNameES5(e){var t,r,n;if(0===e.length)return!1;if(n=e.charCodeAt(0),!a.isIdentifierStartES5(n))return!1;for(t=1,r=e.length;t<r;++t)if(n=e.charCodeAt(t),!a.isIdentifierPartES5(n))return!1;return!0}function isIdentifierNameES6(e){var t,r,n,i,s;if(0===e.length)return!1;for(s=a.isIdentifierStartES6,t=0,r=e.length;t<r;++t){if(55296<=(n=e.charCodeAt(t))&&n<=56319){if(r<=++t)return!1;if(!(56320<=(i=e.charCodeAt(t))&&i<=57343))return!1;n=function decodeUtf16(e,t){return 1024*(e-55296)+(t-56320)+65536}(n,i)}if(!s(n))return!1;s=a.isIdentifierPartES6}return!0}t.exports={isKeywordES5:isKeywordES5,isKeywordES6:isKeywordES6,isReservedWordES5:isReservedWordES5,isReservedWordES6:isReservedWordES6,isRestrictedWord:function isRestrictedWord(e){return"eval"===e||"arguments"===e},isIdentifierNameES5:isIdentifierNameES5,isIdentifierNameES6:isIdentifierNameES6,isIdentifierES5:function isIdentifierES5(e,t){return isIdentifierNameES5(e)&&!isReservedWordES5(e,t)},isIdentifierES6:function isIdentifierES6(e,t){return isIdentifierNameES6(e)&&!isReservedWordES6(e,t)}}}()},{"./code":64}],66:[function(e,t,r){!function(){"use strict";r.ast=e("./ast"),r.code=e("./code"),r.keyword=e("./keyword")}()},{"./ast":63,"./code":64,"./keyword":65}],67:[function(e,t,r){var s=e("./util"),a=Object.prototype.hasOwnProperty,o="undefined"!=typeof Map;function ArraySet(){this._array=[],this._set=o?new Map:Object.create(null)}ArraySet.fromArray=function ArraySet_fromArray(e,t){for(var r=new ArraySet,n=0,i=e.length;n<i;n++)r.add(e[n],t);return r},ArraySet.prototype.size=function ArraySet_size(){return o?this._set.size:Object.getOwnPropertyNames(this._set).length},ArraySet.prototype.add=function ArraySet_add(e,t){var r=o?e:s.toSetString(e),n=o?this.has(e):a.call(this._set,r),i=this._array.length;n&&!t||this._array.push(e),n||(o?this._set.set(e,i):this._set[r]=i)},ArraySet.prototype.has=function ArraySet_has(e){return o?this._set.has(e):(e=s.toSetString(e),a.call(this._set,e))},ArraySet.prototype.indexOf=function ArraySet_indexOf(e){if(o){var t=this._set.get(e);if(0<=t)return t}else{t=s.toSetString(e);if(a.call(this._set,t))return this._set[t]}throw new Error('"'+e+'" is not in the set.')},ArraySet.prototype.at=function ArraySet_at(e){if(0<=e&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()},r.ArraySet=ArraySet},{"./util":76}],68:[function(e,t,r){var u=e("./base64");r.encode=function base64VLQ_encode(e){for(var t,r="",n=function toVLQSigned(e){return e<0?1+(-e<<1):e<<1}(e);t=31&n,0<(n>>>=5)&&(t|=32),r+=u.encode(t),0<n;);return r},r.decode=function base64VLQ_decode(e,t,r){var n,i,s=e.length,a=0,o=0;do{if(s<=t)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(i=u.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1))}while(n=!!(32&i),a+=(i&=31)<<o,o+=5,n);r.value=function fromVLQSigned(e){var t=e>>1;return 1==(1&e)?-t:t}(a),r.rest=t}},{"./base64":69}],69:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");r.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},r.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],70:[function(e,t,u){u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.search=function search(e,t,r,n){if(0===t.length)return-1;var i=function recursiveSearch(e,t,r,n,i,s){var a=Math.floor((t-e)/2)+e,o=i(r,n[a],!0);return 0===o?a:0<o?1<t-a?recursiveSearch(a,t,r,n,i,s):s==u.LEAST_UPPER_BOUND?t<n.length?t:-1:a:1<a-e?recursiveSearch(e,a,r,n,i,s):s==u.LEAST_UPPER_BOUND?a:e<0?-1:e}(-1,t.length,e,t,r,n||u.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;0<=i-1&&0===r(t[i],t[i-1],!0);)--i;return i}},{}],71:[function(e,t,r){var a=e("./util");function MappingList(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(e,t){this._array.forEach(e,t)},MappingList.prototype.add=function MappingList_add(e){!function generatedPositionAfter(e,t){var r=e.generatedLine,n=t.generatedLine,i=e.generatedColumn,s=t.generatedColumn;return r<n||n==r&&i<=s||a.compareByGeneratedPositionsInflated(e,t)<=0}(this._last,e)?this._sorted=!1:this._last=e,this._array.push(e)},MappingList.prototype.toArray=function MappingList_toArray(){return this._sorted||(this._array.sort(a.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},r.MappingList=MappingList},{"./util":76}],72:[function(e,t,r){function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function doQuickSort(e,t,r,n){if(r<n){for(var i=r-1,s=(swap(e,function randomIntInRange(e,t){return Math.round(e+Math.random()*(t-e))}(r,n),n),e[n]),a=r;a<n;a++)t(e[a],s)<=0&&swap(e,i+=1,a);swap(e,i+1,a);var o=i+1;doQuickSort(e,t,r,o-1),doQuickSort(e,t,o+1,n)}}r.quickSort=function(e,t){doQuickSort(e,t,0,e.length-1)}},{}],73:[function(e,t,r){var v=e("./util"),u=e("./binary-search"),p=e("./array-set").ArraySet,_=e("./base64-vlq"),C=e("./quick-sort").quickSort;function SourceMapConsumer(e,t){var r=e;return new(null!=(r="string"==typeof e?v.parseSourceMapInput(e):r).sections?IndexedSourceMapConsumer:BasicSourceMapConsumer)(r,t)}function BasicSourceMapConsumer(e,t){var r=e,e=("string"==typeof e&&(r=v.parseSourceMapInput(e)),v.getArg(r,"version")),n=v.getArg(r,"sources"),i=v.getArg(r,"names",[]),s=v.getArg(r,"sourceRoot",null),a=v.getArg(r,"sourcesContent",null),o=v.getArg(r,"mappings"),r=v.getArg(r,"file",null);if(e!=this._version)throw new Error("Unsupported version: "+e);s=s&&v.normalize(s),n=n.map(String).map(v.normalize).map(function(e){return s&&v.isAbsolute(s)&&v.isAbsolute(e)?v.relative(s,e):e}),this._names=p.fromArray(i.map(String),!0),this._sources=p.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(e){return v.computeSourceURL(s,e,t)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=o,this._sourceMapURL=t,this.file=r}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(e,i){var t=e,e=("string"==typeof e&&(t=v.parseSourceMapInput(e)),v.getArg(t,"version")),t=v.getArg(t,"sections");if(e!=this._version)throw new Error("Unsupported version: "+e);this._sources=new p,this._names=new p;var s={line:-1,column:0};this._sections=t.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=v.getArg(e,"offset"),r=v.getArg(t,"line"),n=v.getArg(t,"column");if(r<s.line||r===s.line&&n<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:r+1,generatedColumn:n+1},consumer:new SourceMapConsumer(v.getArg(e,"map"),i)}})}SourceMapConsumer.fromSourceMap=function(e,t){return BasicSourceMapConsumer.fromSourceMap(e,t)},SourceMapConsumer.prototype._version=3,SourceMapConsumer.prototype.__generatedMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),SourceMapConsumer.prototype.__originalMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),SourceMapConsumer.prototype._charIsMappingSeparator=function SourceMapConsumer_charIsMappingSeparator(e,t){e=e.charAt(t);return";"===e||","===e},SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(e,t){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(e,t,r){var n,t=t||null;switch(r||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:n=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:n=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;n.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:v.computeSourceURL(i,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,t)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(e){var t=v.getArg(e,"line"),r={source:v.getArg(e,"source"),originalLine:t,originalColumn:v.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var n=[],i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(0<=i){var s=this._originalMappings[i];if(void 0===e.column)for(var a=s.originalLine;s&&s.originalLine===a;)n.push({line:v.getArg(s,"generatedLine",null),column:v.getArg(s,"generatedColumn",null),lastColumn:v.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i];else for(var o=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==o;)n.push({line:v.getArg(s,"generatedLine",null),column:v.getArg(s,"generatedColumn",null),lastColumn:v.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i]}return n},r.SourceMapConsumer=SourceMapConsumer,(BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).consumer=SourceMapConsumer,BasicSourceMapConsumer.prototype._findSourceIndex=function(e){var t,r=e;if(null!=this.sourceRoot&&(r=v.relative(this.sourceRoot,r)),this._sources.has(r))return this._sources.indexOf(r);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},BasicSourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(e,t){for(var r=Object.create(BasicSourceMapConsumer.prototype),n=r._names=p.fromArray(e._names.toArray(),!0),i=r._sources=p.fromArray(e._sources.toArray(),!0),s=(r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=t,r._absoluteSources=r._sources.toArray().map(function(e){return v.computeSourceURL(r.sourceRoot,e,t)}),e._mappings.toArray().slice()),a=r.__generatedMappings=[],o=r.__originalMappings=[],u=0,l=s.length;u<l;u++){var c=s[u],h=new Mapping;h.generatedLine=c.generatedLine,h.generatedColumn=c.generatedColumn,c.source&&(h.source=i.indexOf(c.source),h.originalLine=c.originalLine,h.originalColumn=c.originalColumn,c.name&&(h.name=n.indexOf(c.name)),o.push(h)),a.push(h)}return C(r.__originalMappings,v.compareByOriginalPositions),r},BasicSourceMapConsumer.prototype._version=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),BasicSourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(e,t){for(var r,n,i,s,a=1,o=0,u=0,l=0,c=0,h=0,p=e.length,d=0,f={},m={},g=[],y=[];d<p;)if(";"===e.charAt(d))a++,d++,o=0;else if(","===e.charAt(d))d++;else{for((r=new Mapping).generatedLine=a,s=d;s<p&&!this._charIsMappingSeparator(e,s);s++);if(i=f[n=e.slice(d,s)])d+=n.length;else{for(i=[];d<s;)_.decode(e,d,m),d=m.rest,i.push(m.value);if(2===i.length)throw new Error("Found a source, but no line and column");if(3===i.length)throw new Error("Found a source and line, but no column");f[n]=i}r.generatedColumn=o+i[0],o=r.generatedColumn,1<i.length&&(r.source=c+i[1],c+=i[1],r.originalLine=u+i[2],u=r.originalLine,r.originalLine+=1,r.originalColumn=l+i[3],l=r.originalColumn,4<i.length)&&(r.name=h+i[4],h+=i[4]),y.push(r),"number"==typeof r.originalLine&&g.push(r)}C(y,v.compareByGeneratedPositionsDeflated),this.__generatedMappings=y,C(g,v.compareByOriginalPositions),this.__originalMappings=g},BasicSourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(e,t,r,n,i,s){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return u.search(e,t,i,s)},BasicSourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},BasicSourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},e=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",v.compareByGeneratedPositionsDeflated,v.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=e){var r,e=this._generatedMappings[e];if(e.generatedLine===t.generatedLine)return null!==(t=v.getArg(e,"source",null))&&(t=this._sources.at(t),t=v.computeSourceURL(this.sourceRoot,t,this._sourceMapURL)),null!==(r=v.getArg(e,"name",null))&&(r=this._names.at(r)),{source:t,line:v.getArg(e,"originalLine",null),column:v.getArg(e,"originalColumn",null),name:r}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function BasicSourceMapConsumer_hasContentsOfAllSources(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},BasicSourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(e,t){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(0<=r)return this.sourcesContent[r];var n,r=e;if(null!=this.sourceRoot&&(r=v.relative(this.sourceRoot,r)),null!=this.sourceRoot&&(n=v.urlParse(this.sourceRoot))){e=r.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!n.path||"/"==n.path)&&this._sources.has("/"+r))return this.sourcesContent[this._sources.indexOf("/"+r)]}if(t)return null;throw new Error('"'+r+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(e){var t=v.getArg(e,"source"),t=this._findSourceIndex(t);if(!(t<0)){t={source:t,originalLine:v.getArg(e,"line"),originalColumn:v.getArg(e,"column")},e=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,v.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=e){e=this._originalMappings[e];if(e.source===t.source)return{line:v.getArg(e,"generatedLine",null),column:v.getArg(e,"generatedColumn",null),lastColumn:v.getArg(e,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}},r.BasicSourceMapConsumer=BasicSourceMapConsumer,(IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype._version=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function IndexedSourceMapConsumer_originalPositionFor(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},r=u.search(t,this._sections,function(e,t){var r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn}),r=this._sections[r];return r?r.consumer.originalPositionFor({line:t.generatedLine-(r.generatedOffset.generatedLine-1),column:t.generatedColumn-(r.generatedOffset.generatedLine===t.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function IndexedSourceMapConsumer_hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},IndexedSourceMapConsumer.prototype.sourceContentFor=function IndexedSourceMapConsumer_sourceContentFor(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function IndexedSourceMapConsumer_generatedPositionFor(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(-1!==r.consumer._findSourceIndex(v.getArg(e,"source"))){var n=r.consumer.generatedPositionFor(e);if(n)return{line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._parseMappings=function IndexedSourceMapConsumer_parseMappings(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var n=this._sections[r],i=n.consumer._generatedMappings,s=0;s<i.length;s++){var a=i[s],o=n.consumer._sources.at(a.source),o=v.computeSourceURL(n.consumer.sourceRoot,o,this._sourceMapURL),u=(this._sources.add(o),o=this._sources.indexOf(o),null),o=(a.name&&(u=n.consumer._names.at(a.name),this._names.add(u),u=this._names.indexOf(u)),{source:o,generatedLine:a.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(n.generatedOffset.generatedLine===a.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:u});this.__generatedMappings.push(o),"number"==typeof o.originalLine&&this.__originalMappings.push(o)}C(this.__generatedMappings,v.compareByGeneratedPositionsDeflated),C(this.__originalMappings,v.compareByOriginalPositions)},r.IndexedSourceMapConsumer=IndexedSourceMapConsumer},{"./array-set":67,"./base64-vlq":68,"./binary-search":70,"./quick-sort":72,"./util":76}],74:[function(e,t,r){var d=e("./base64-vlq"),f=e("./util"),u=e("./array-set").ArraySet,n=e("./mapping-list").MappingList;function SourceMapGenerator(e){this._file=f.getArg(e=e||{},"file",null),this._sourceRoot=f.getArg(e,"sourceRoot",null),this._skipValidation=f.getArg(e,"skipValidation",!1),this._sources=new u,this._names=new u,this._mappings=new n,this._sourcesContents=null}SourceMapGenerator.prototype._version=3,SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(r){var n=r.sourceRoot,i=new SourceMapGenerator({file:r.file,sourceRoot:n});return r.eachMapping(function(e){var t={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(t.source=e.source,null!=n&&(t.source=f.relative(n,t.source)),t.original={line:e.originalLine,column:e.originalColumn},null!=e.name)&&(t.name=e.name),i.addMapping(t)}),r.sources.forEach(function(e){var t=e,t=(null!==n&&(t=f.relative(n,e)),i._sources.has(t)||i._sources.add(t),r.sourceContentFor(e));null!=t&&i.setSourceContent(e,t)}),i},SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(e){var t=f.getArg(e,"generated"),r=f.getArg(e,"original",null),n=f.getArg(e,"source",null),e=f.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,e),null!=n&&(n=String(n),this._sources.has(n)||this._sources.add(n)),null!=e&&(e=String(e),this._names.has(e)||this._names.add(e)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:e})},SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(e,t){null!=this._sourceRoot&&(e=f.relative(this._sourceRoot,e)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[f.toSetString(e)]=t):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(e)],0===Object.keys(this._sourcesContents).length)&&(this._sourcesContents=null)},SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(r,e,n){var i=e;if(null==e){if(null==r.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=r.file}var s=this._sourceRoot,a=(null!=s&&(i=f.relative(s,i)),new u),o=new u;this._mappings.unsortedForEach(function(e){e.source===i&&null!=e.originalLine&&null!=(t=r.originalPositionFor({line:e.originalLine,column:e.originalColumn})).source&&(e.source=t.source,null!=n&&(e.source=f.join(n,e.source)),null!=s&&(e.source=f.relative(s,e.source)),e.originalLine=t.line,e.originalColumn=t.column,null!=t.name)&&(e.name=t.name);var t=e.source,t=(null==t||a.has(t)||a.add(t),e.name);null==t||o.has(t)||o.add(t)},this),this._sources=a,this._names=o,r.sources.forEach(function(e){var t=r.sourceContentFor(e);null!=t&&(null!=n&&(e=f.join(n,e)),null!=s&&(e=f.relative(s,e)),this.setSourceContent(e,t))},this)},SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&0<e.line&&0<=e.column&&0<t.line&&0<=t.column&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){for(var e,t,r,n=0,i=1,s=0,a=0,o=0,u=0,l="",c=this._mappings.toArray(),h=0,p=c.length;h<p;h++){if(e="",(t=c[h]).generatedLine!==i)for(n=0;t.generatedLine!==i;)e+=";",i++;else if(0<h){if(!f.compareByGeneratedPositionsInflated(t,c[h-1]))continue;e+=","}e+=d.encode(t.generatedColumn-n),n=t.generatedColumn,null!=t.source&&(r=this._sources.indexOf(t.source),e+=d.encode(r-u),u=r,e+=d.encode(t.originalLine-1-a),a=t.originalLine-1,e+=d.encode(t.originalColumn-s),s=t.originalColumn,null!=t.name)&&(r=this._names.indexOf(t.name),e+=d.encode(r-o),o=r),l+=e}return l},SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=f.relative(t,e));e=f.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,e)?this._sourcesContents[e]:null},this)},SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this.toJSON())},r.SourceMapGenerator=SourceMapGenerator},{"./array-set":67,"./base64-vlq":68,"./mapping-list":71,"./util":76}],75:[function(e,t,r){var n=e("./source-map-generator").SourceMapGenerator,c=e("./util"),h=/(\r?\n)/,s="$$$isSourceNode$$$";function SourceNode(e,t,r,n,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==i?null:i,this[s]=!0,null!=n&&this.add(n)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(e,r,n){function I6a(){return getNextLine()+(getNextLine()||"");function getNextLine(){return a<s.length?s[a++]:void 0}}var i=new SourceNode,s=e.split(h),a=0,o=1,u=0,l=null;return r.eachMapping(function(e){if(null!==l){var t;if(!(o<e.generatedLine))return t=(r=s[a]||"").substr(0,e.generatedColumn-u),s[a]=r.substr(e.generatedColumn-u),u=e.generatedColumn,addMappingWithCode(l,t),void(l=e);addMappingWithCode(l,I6a()),o++,u=0}for(;o<e.generatedLine;)i.add(I6a()),o++;var r;u<e.generatedColumn&&(r=s[a]||"",i.add(r.substr(0,e.generatedColumn)),s[a]=r.substr(e.generatedColumn),u=e.generatedColumn),l=e},this),a<s.length&&(l&&addMappingWithCode(l,I6a()),i.add(s.splice(a).join(""))),r.sources.forEach(function(e){var t=r.sourceContentFor(e);null!=t&&(null!=n&&(e=c.join(n,e)),i.setSourceContent(e,t))}),i;function addMappingWithCode(e,t){var r;null===e||void 0===e.source?i.add(t):(r=n?c.join(n,e.source):e.source,i.add(new SourceNode(e.originalLine,e.originalColumn,r,t,e.name)))}},SourceNode.prototype.add=function SourceNode_add(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},SourceNode.prototype.prepend=function SourceNode_prepend(e){if(Array.isArray(e))for(var t=e.length-1;0<=t;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},SourceNode.prototype.walk=function SourceNode_walk(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function SourceNode_join(e){var t,r,n=this.children.length;if(0<n){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},SourceNode.prototype.replaceRight=function SourceNode_replaceRight(e,t){var r=this.children[this.children.length-1];return r[s]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(e,t){this.sourceContents[c.toSetString(e)]=t},SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);for(var n=Object.keys(this.sourceContents),t=0,r=n.length;t<r;t++)e(c.fromSetString(n[t]),this.sourceContents[n[t]])},SourceNode.prototype.toString=function SourceNode_toString(){var t="";return this.walk(function(e){t+=e}),t},SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(e){var i={code:"",line:1,column:0},s=new n(e),a=!1,o=null,u=null,l=null,c=null;return this.walk(function(e,t){i.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(o===t.source&&u===t.line&&l===t.column&&c===t.name||s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:i.line,column:i.column},name:t.name}),o=t.source,u=t.line,l=t.column,c=t.name,a=!0):a&&(s.addMapping({generated:{line:i.line,column:i.column}}),o=null,a=!1);for(var r=0,n=e.length;r<n;r++)10===e.charCodeAt(r)?(i.line++,i.column=0,r+1===n?(o=null,a=!1):a&&s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:i.line,column:i.column},name:t.name})):i.column++}),this.walkSourceContents(function(e,t){s.setSourceContent(e,t)}),{code:i.code,map:s}},r.SourceNode=SourceNode},{"./source-map-generator":74,"./util":76}],76:[function(e,t,o){o.getArg=function getArg(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,i=/^data:.+\,.+$/;function urlParse(e){e=e.match(r);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function urlGenerate(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function normalize(e){var t=e,r=urlParse(e);if(r){if(!r.path)return e;t=r.path}for(var n,e=o.isAbsolute(t),i=t.split(/\/+/),s=0,a=i.length-1;0<=a;a--)"."===(n=i[a])?i.splice(a,1):".."===n?s++:0<s&&(""===n?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return""===(t=i.join("/"))&&(t=e?"/":"."),r?(r.path=t,urlGenerate(r)):t}function join(e,t){""===e&&(e=".");var r=urlParse(t=""===t?".":t),n=urlParse(e);return n&&(e=n.path||"/"),r&&!r.scheme?(n&&(r.scheme=n.scheme),urlGenerate(r)):r||t.match(i)?t:!n||n.host||n.path?(r="/"===t.charAt(0)?t:normalize(e.replace(/\/+$/,"")+"/"+t),n?(n.path=r,urlGenerate(n)):r):(n.host=t,urlGenerate(n))}o.urlParse=urlParse,o.urlGenerate=urlGenerate,o.normalize=normalize,o.join=join,o.isAbsolute=function(e){return"/"===e.charAt(0)||r.test(e)},o.relative=function relative(e,t){e=(e=""===e?".":e).replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};var n=!("__proto__"in Object.create(null));function identity(e){return e}function isProtoString(e){if(e){var t=e.length;if(!(t<9)&&95===e.charCodeAt(t-1)&&95===e.charCodeAt(t-2)&&111===e.charCodeAt(t-3)&&116===e.charCodeAt(t-4)&&111===e.charCodeAt(t-5)&&114===e.charCodeAt(t-6)&&112===e.charCodeAt(t-7)&&95===e.charCodeAt(t-8)&&95===e.charCodeAt(t-9)){for(var r=t-10;0<=r;r--)if(36!==e.charCodeAt(r))return;return 1}}}function strcmp(e,t){return e===t?0:null===e||null!==t&&t<e?1:-1}o.toSetString=n?identity:function toSetString(e){return isProtoString(e)?"$"+e:e},o.fromSetString=n?identity:function fromSetString(e){return isProtoString(e)?e.slice(1):e},o.compareByOriginalPositions=function compareByOriginalPositions(e,t,r){var n=strcmp(e.source,t.source);return 0!==n||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)||r||0!=(n=e.generatedColumn-t.generatedColumn)||0!=(n=e.generatedLine-t.generatedLine)?n:strcmp(e.name,t.name)},o.compareByGeneratedPositionsDeflated=function compareByGeneratedPositionsDeflated(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!=n||0!=(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=strcmp(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:strcmp(e.name,t.name)},o.compareByGeneratedPositionsInflated=function compareByGeneratedPositionsInflated(e,t){var r=e.generatedLine-t.generatedLine;return 0!=r||0!=(r=e.generatedColumn-t.generatedColumn)||0!==(r=strcmp(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:strcmp(e.name,t.name)},o.parseSourceMapInput=function parseSourceMapInput(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},o.computeSourceURL=function computeSourceURL(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){e=urlParse(r);if(!e)throw new Error("sourceMapURL could not be parsed");e.path&&0<=(r=e.path.lastIndexOf("/"))&&(e.path=e.path.substring(0,r+1)),t=join(urlGenerate(e),t)}return normalize(t)}},{}],77:[function(e,t,r){r.SourceMapGenerator=e("./lib/source-map-generator").SourceMapGenerator,r.SourceMapConsumer=e("./lib/source-map-consumer").SourceMapConsumer,r.SourceNode=e("./lib/source-node").SourceNode},{"./lib/source-map-consumer":73,"./lib/source-map-generator":74,"./lib/source-node":75}],78:[function(e,t,r){const n=e("../JSC/jsc.js")["JSC"];t.exports.build=async function build(t,e){const r=new n(e=>t.readFile(e));return r.include("/std.js"),t.ls("/.R/")?.forEach?.(e=>{e.isFile()&&r.include("/.R/"+e.name)}),r.process(),function buildHTML(e,[t,r]){return`<!doctype html>
<html>
<head>
<style>
html, body, canvas {
width: 100%;
height: 100%;
position: absolute;
overflow: hidden;
margin: 0;
border: 0;
padding: 0;
left: 0;
right: 0;
top: 0;
bottom: 0;
}
canvas {
margin: auto;
image-rendering: pixelated;
}
</style>
<script src="assets.js"></script>
<script src="browser.js?nc=6"></script>
<script>
${e}
</script>
</head>
<body>
<canvas id=canvas width=${t} height=${r}></canvas>
</body>
</html>`}(r.write("js"),e)}},{"../JSC/jsc.js":6}],79:[function(e,t,r){const n=e("./dom.js")["dom"];t.exports.Console=class Console{maxLines=1e3;#prevLine={text:null,count:0,el:null};onAppend;#tweens=0;#interval;constructor(i){this.el=n("div",{className:"console"}),"string"==typeof i&&(i=((e,t)=>t[e]).bind(this,i)),window.addEventListener("message",e=>{var r=i(e.data);if(Array.isArray(r)){let t=this.el.scrollTop;for(var n of r)this.append(n);setTimeout(e=>this.el.scrollTop=t,0),this.tween(),this.onAppend&&this.onAppend()}else if("object"==typeof r&&r)for(var t in r)this[t](r[t])})}clear(){for(;this.el.children.length;)this.el.children[0].remove()}tween(){this.#tweens=30,this.#interval||(this.#interval=setInterval(e=>{this.el.scrollTop=(13*this.el.scrollTop+this.el.scrollHeight)/14,this.#tweens--,this.#tweens<=0&&(clearInterval(this.#interval),this.#interval=0)},1e3/this.#tweens))}append(e){e=(e=Array.isArray(e)?e.join(" "):e)+"";if(e===this.#prevLine.text)this.#prevLine.count++,this.#prevLine.el.classList.add("repeat"),this.#prevLine.el.setAttribute("repeat",this.#prevLine.count);else{for(;this.el.children.length>=this.maxLines;)this.el.children[0].remove();this.#prevLine.text=e,this.#prevLine.count=1,this.#prevLine.el=n(this.el,"pre",{className:"line",textContent:e,attr:{time:(new Date).toLocaleString()}})}}}},{"./dom.js":100}],80:[function(e,t,r){const n=e("./esptool.js");e=e("./Flasher.js").Flasher;class ESPBoyFlasher extends e{stub;async disconnect(){this.stub&&(await this.stub.disconnect(),await this.stub.port.close(),this.stub=void 0)}async connect(){var e;this.stub||(await(e=await n.connect({log:this.log,debug:this.log,error:this.log})).initialize(),this.log("Connected to "+e.chipName),this.stub=await e.runStub(),this.stub.addEventListener("disconnect",()=>{this.stub=!1}))}async upload(e){this.stub||(await this.showConnectPopup(),await this.connect()),this.stub&&(await this.stub.flashData(e,(e,t)=>{postMessage({build:["Uploading: "+Math.floor(e/t*100)+"%"]},"*")},0),await this.disconnect())}}t.exports.upload=async function(e){await(new ESPBoyFlasher).upload(e)}},{"./Flasher.js":82,"./esptool.js":101}],81:[function(e,t,r){const i=e("jszip"),s=e("file-saver")["saveAs"];function getMimeType(e){return{".123":"application/vnd.lotus-1-2-3",".3dml":"text/vnd.in3d.3dml",".3g2":"video/3gpp2",".3gp":"video/3gpp",".a":"application/octet-stream",".aab":"application/x-authorware-bin",".aac":"audio/x-aac",".aam":"application/x-authorware-map",".aas":"application/x-authorware-seg",".abw":"application/x-abiword",".acc":"application/vnd.americandynamics.acc",".ace":"application/x-ace-compressed",".acu":"application/vnd.acucobol",".acutc":"application/vnd.acucorp",".adp":"audio/adpcm",".aep":"application/vnd.audiograph",".afm":"application/x-font-type1",".afp":"application/vnd.ibm.modcap",".ai":"application/postscript",".aif":"audio/x-aiff",".aifc":"audio/x-aiff",".aiff":"audio/x-aiff",".air":"application/vnd.adobe.air-application-installer-package+zip",".ami":"application/vnd.amiga.ami",".apk":"application/vnd.android.package-archive",".application":"application/x-ms-application",".apr":"application/vnd.lotus-approach",".asc":"application/pgp-signature",".asf":"video/x-ms-asf",".asm":"text/x-asm",".aso":"application/vnd.accpac.simply.aso",".asx":"video/x-ms-asf",".atc":"application/vnd.acucorp",".atom":"application/atom+xml",".atomcat":"application/atomcat+xml",".atomsvc":"application/atomsvc+xml",".atx":"application/vnd.antix.game-component",".au":"audio/basic",".avi":"video/x-msvideo",".aw":"application/applixware",".azf":"application/vnd.airzip.filesecure.azf",".azs":"application/vnd.airzip.filesecure.azs",".azw":"application/vnd.amazon.ebook",".bat":"application/x-msdownload",".bcpio":"application/x-bcpio",".bdf":"application/x-font-bdf",".bdm":"application/vnd.syncml.dm+wbxml",".bh2":"application/vnd.fujitsu.oasysprs",".bin":"application/octet-stream",".bmi":"application/vnd.bmi",".bmp":"image/bmp",".book":"application/vnd.framemaker",".box":"application/vnd.previewsystems.box",".boz":"application/x-bzip2",".bpk":"application/octet-stream",".btif":"image/prs.btif",".bz":"application/x-bzip",".bz2":"application/x-bzip2",".c":"text/x-c",".c4d":"application/vnd.clonk.c4group",".c4f":"application/vnd.clonk.c4group",".c4g":"application/vnd.clonk.c4group",".c4p":"application/vnd.clonk.c4group",".c4u":"application/vnd.clonk.c4group",".cab":"application/vnd.ms-cab-compressed",".car":"application/vnd.curl.car",".cat":"application/vnd.ms-pki.seccat",".cc":"text/x-c",".cct":"application/x-director",".ccxml":"application/ccxml+xml",".cdbcmsg":"application/vnd.contact.cmsg",".cdf":"application/x-netcdf",".cdkey":"application/vnd.mediastation.cdkey",".cdx":"chemical/x-cdx",".cdxml":"application/vnd.chemdraw+xml",".cdy":"application/vnd.cinderella",".cer":"application/pkix-cert",".cgm":"image/cgm",".chat":"application/x-chat",".chm":"application/vnd.ms-htmlhelp",".chrt":"application/vnd.kde.kchart",".cif":"chemical/x-cif",".cii":"application/vnd.anser-web-certificate-issue-initiation",".cil":"application/vnd.ms-artgalry",".cla":"application/vnd.claymore",".class":"application/java-vm",".clkk":"application/vnd.crick.clicker.keyboard",".clkp":"application/vnd.crick.clicker.palette",".clkt":"application/vnd.crick.clicker.template",".clkw":"application/vnd.crick.clicker.wordbank",".clkx":"application/vnd.crick.clicker",".clp":"application/x-msclip",".cmc":"application/vnd.cosmocaller",".cmdf":"chemical/x-cmdf",".cml":"chemical/x-cml",".cmp":"application/vnd.yellowriver-custom-menu",".cmx":"image/x-cmx",".cod":"application/vnd.rim.cod",".com":"application/x-msdownload",".conf":"text/plain",".cpio":"application/x-cpio",".cpp":"text/x-c",".cpt":"application/mac-compactpro",".crd":"application/x-mscardfile",".crl":"application/pkix-crl",".crt":"application/x-x509-ca-cert",".csh":"application/x-csh",".csml":"chemical/x-csml",".csp":"application/vnd.commonspace",".css":"text/css",".cst":"application/x-director",".csv":"text/csv",".cu":"application/cu-seeme",".curl":"text/vnd.curl",".cww":"application/prs.cww",".cxt":"application/x-director",".cxx":"text/x-c",".daf":"application/vnd.mobius.daf",".dataless":"application/vnd.fdsn.seed",".davmount":"application/davmount+xml",".dcr":"application/x-director",".dcurl":"text/vnd.curl.dcurl",".dd2":"application/vnd.oma.dd2+xml",".ddd":"application/vnd.fujixerox.ddd",".deb":"application/x-debian-package",".def":"text/plain",".deploy":"application/octet-stream",".der":"application/x-x509-ca-cert",".dfac":"application/vnd.dreamfactory",".dic":"text/x-c",".diff":"text/plain",".dir":"application/x-director",".dis":"application/vnd.mobius.dis",".dist":"application/octet-stream",".distz":"application/octet-stream",".djv":"image/vnd.djvu",".djvu":"image/vnd.djvu",".dll":"application/x-msdownload",".dmg":"application/octet-stream",".dms":"application/octet-stream",".dna":"application/vnd.dna",".doc":"application/msword",".docm":"application/vnd.ms-word.document.macroenabled.12",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".dot":"application/msword",".dotm":"application/vnd.ms-word.template.macroenabled.12",".dotx":"application/vnd.openxmlformats-officedocument.wordprocessingml.template",".dp":"application/vnd.osgi.dp",".dpg":"application/vnd.dpgraph",".dsc":"text/prs.lines.tag",".dtb":"application/x-dtbook+xml",".dtd":"application/xml-dtd",".dts":"audio/vnd.dts",".dtshd":"audio/vnd.dts.hd",".dump":"application/octet-stream",".dvi":"application/x-dvi",".dwf":"model/vnd.dwf",".dwg":"image/vnd.dwg",".dxf":"image/vnd.dxf",".dxp":"application/vnd.spotfire.dxp",".dxr":"application/x-director",".ecelp4800":"audio/vnd.nuera.ecelp4800",".ecelp7470":"audio/vnd.nuera.ecelp7470",".ecelp9600":"audio/vnd.nuera.ecelp9600",".ecma":"application/ecmascript",".edm":"application/vnd.novadigm.edm",".edx":"application/vnd.novadigm.edx",".efif":"application/vnd.picsel",".ei6":"application/vnd.pg.osasli",".elc":"application/octet-stream",".eml":"message/rfc822",".emma":"application/emma+xml",".eol":"audio/vnd.digital-winds",".eot":"application/vnd.ms-fontobject",".eps":"application/postscript",".epub":"application/epub+zip",".es3":"application/vnd.eszigno3+xml",".esf":"application/vnd.epson.esf",".et3":"application/vnd.eszigno3+xml",".etx":"text/x-setext",".exe":"application/x-msdownload",".ext":"application/vnd.novadigm.ext",".ez":"application/andrew-inset",".ez2":"application/vnd.ezpix-album",".ez3":"application/vnd.ezpix-package",".f":"text/x-fortran",".f4v":"video/x-f4v",".f77":"text/x-fortran",".f90":"text/x-fortran",".fbs":"image/vnd.fastbidsheet",".fdf":"application/vnd.fdf",".fe_launch":"application/vnd.denovo.fcselayout-link",".fg5":"application/vnd.fujitsu.oasysgp",".fgd":"application/x-director",".fh":"image/x-freehand",".fh4":"image/x-freehand",".fh5":"image/x-freehand",".fh7":"image/x-freehand",".fhc":"image/x-freehand",".fig":"application/x-xfig",".fli":"video/x-fli",".flo":"application/vnd.micrografx.flo",".flv":"video/x-flv",".flw":"application/vnd.kde.kivio",".flx":"text/vnd.fmi.flexstor",".fly":"text/vnd.fly",".fm":"application/vnd.framemaker",".fnc":"application/vnd.frogans.fnc",".for":"text/x-fortran",".fpx":"image/vnd.fpx",".frame":"application/vnd.framemaker",".fsc":"application/vnd.fsc.weblaunch",".fst":"image/vnd.fst",".ftc":"application/vnd.fluxtime.clip",".fti":"application/vnd.anser-web-funds-transfer-initiation",".fvt":"video/vnd.fvt",".fzs":"application/vnd.fuzzysheet",".g3":"image/g3fax",".gac":"application/vnd.groove-account",".gdl":"model/vnd.gdl",".geo":"application/vnd.dynageo",".gex":"application/vnd.geometry-explorer",".ggb":"application/vnd.geogebra.file",".ggt":"application/vnd.geogebra.tool",".ghf":"application/vnd.groove-help",".gif":"image/gif",".gim":"application/vnd.groove-identity-message",".gmx":"application/vnd.gmx",".gnumeric":"application/x-gnumeric",".gph":"application/vnd.flographit",".gqf":"application/vnd.grafeq",".gqs":"application/vnd.grafeq",".gram":"application/srgs",".gre":"application/vnd.geometry-explorer",".grv":"application/vnd.groove-injector",".grxml":"application/srgs+xml",".gsf":"application/x-font-ghostscript",".gtar":"application/x-gtar",".gtm":"application/vnd.groove-tool-message",".gtw":"model/vnd.gtw",".gv":"text/vnd.graphviz",".gz":"application/x-gzip",".h":"text/x-c",".h261":"video/h261",".h263":"video/h263",".h264":"video/h264",".hbci":"application/vnd.hbci",".hdf":"application/x-hdf",".hh":"text/x-c",".hlp":"application/winhlp",".hpgl":"application/vnd.hp-hpgl",".hpid":"application/vnd.hp-hpid",".hps":"application/vnd.hp-hps",".hqx":"application/mac-binhex40",".htke":"application/vnd.kenameaapp",".htm":"text/html",".html":"text/html",".hvd":"application/vnd.yamaha.hv-dic",".hvp":"application/vnd.yamaha.hv-voice",".hvs":"application/vnd.yamaha.hv-script",".icc":"application/vnd.iccprofile",".ice":"x-conference/x-cooltalk",".icm":"application/vnd.iccprofile",".ico":"image/x-icon",".ics":"text/calendar",".ief":"image/ief",".ifb":"text/calendar",".ifm":"application/vnd.shana.informed.formdata",".iges":"model/iges",".igl":"application/vnd.igloader",".igs":"model/iges",".igx":"application/vnd.micrografx.igx",".iif":"application/vnd.shana.informed.interchange",".imp":"application/vnd.accpac.simply.imp",".ims":"application/vnd.ms-ims",".in":"text/plain",".ipk":"application/vnd.shana.informed.package",".irm":"application/vnd.ibm.rights-management",".irp":"application/vnd.irepository.package+xml",".iso":"application/octet-stream",".itp":"application/vnd.shana.informed.formtemplate",".ivp":"application/vnd.immervision-ivp",".ivu":"application/vnd.immervision-ivu",".jad":"text/vnd.sun.j2me.app-descriptor",".jam":"application/vnd.jam",".jar":"application/java-archive",".java":"text/x-java-source",".jisp":"application/vnd.jisp",".jlt":"application/vnd.hp-jlyt",".jnlp":"application/x-java-jnlp-file",".joda":"application/vnd.joost.joda-archive",".jpe":"image/jpeg",".jpeg":"image/jpeg",".jpg":"image/jpeg",".jpgm":"video/jpm",".jpgv":"video/jpeg",".jpm":"video/jpm",".js":"application/javascript",".json":"application/json",".kar":"audio/midi",".karbon":"application/vnd.kde.karbon",".kfo":"application/vnd.kde.kformula",".kia":"application/vnd.kidspiration",".kil":"application/x-killustrator",".kml":"application/vnd.google-earth.kml+xml",".kmz":"application/vnd.google-earth.kmz",".kne":"application/vnd.kinar",".knp":"application/vnd.kinar",".kon":"application/vnd.kde.kontour",".kpr":"application/vnd.kde.kpresenter",".kpt":"application/vnd.kde.kpresenter",".ksh":"text/plain",".ksp":"application/vnd.kde.kspread",".ktr":"application/vnd.kahootz",".ktz":"application/vnd.kahootz",".kwd":"application/vnd.kde.kword",".kwt":"application/vnd.kde.kword",".latex":"application/x-latex",".lbd":"application/vnd.llamagraphics.life-balance.desktop",".lbe":"application/vnd.llamagraphics.life-balance.exchange+xml",".les":"application/vnd.hhe.lesson-player",".lha":"application/octet-stream",".link66":"application/vnd.route66.link66+xml",".list":"text/plain",".list3820":"application/vnd.ibm.modcap",".listafp":"application/vnd.ibm.modcap",".log":"text/plain",".lostxml":"application/lost+xml",".lrf":"application/octet-stream",".lrm":"application/vnd.ms-lrm",".ltf":"application/vnd.frogans.ltf",".lvp":"audio/vnd.lucent.voice",".lwp":"application/vnd.lotus-wordpro",".lzh":"application/octet-stream",".m13":"application/x-msmediaview",".m14":"application/x-msmediaview",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".m3u":"audio/x-mpegurl",".m4u":"video/vnd.mpegurl",".m4v":"video/x-m4v",".ma":"application/mathematica",".mag":"application/vnd.ecowin.chart",".maker":"application/vnd.framemaker",".man":"text/troff",".mathml":"application/mathml+xml",".mb":"application/mathematica",".mbk":"application/vnd.mobius.mbk",".mbox":"application/mbox",".mc1":"application/vnd.medcalcdata",".mcd":"application/vnd.mcd",".mcurl":"text/vnd.curl.mcurl",".mdb":"application/x-msaccess",".mdi":"image/vnd.ms-modi",".me":"text/troff",".mesh":"model/mesh",".mfm":"application/vnd.mfmp",".mgz":"application/vnd.proteus.magazine",".mht":"message/rfc822",".mhtml":"message/rfc822",".mid":"audio/midi",".midi":"audio/midi",".mif":"application/vnd.mif",".mime":"message/rfc822",".mj2":"video/mj2",".mjp2":"video/mj2",".mlp":"application/vnd.dolby.mlp",".mmd":"application/vnd.chipnuts.karaoke-mmd",".mmf":"application/vnd.smaf",".mmr":"image/vnd.fujixerox.edmics-mmr",".mny":"application/x-msmoney",".mobi":"application/x-mobipocket-ebook",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4s":"application/mp4",".mp4v":"video/mp4",".mpa":"video/mpeg",".mpc":"application/vnd.mophun.certificate",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".mpkg":"application/vnd.apple.installer+xml",".mpm":"application/vnd.blueice.multipass",".mpn":"application/vnd.mophun.application",".mpp":"application/vnd.ms-project",".mpt":"application/vnd.ms-project",".mpy":"application/vnd.ibm.minipay",".mqy":"application/vnd.mobius.mqy",".mrc":"application/marc",".ms":"text/troff",".mscml":"application/mediaservercontrol+xml",".mseed":"application/vnd.fdsn.mseed",".mseq":"application/vnd.mseq",".msf":"application/vnd.epson.msf",".msh":"model/mesh",".msi":"application/x-msdownload",".msl":"application/vnd.mobius.msl",".msty":"application/vnd.muvee.style",".mts":"model/vnd.mts",".mus":"application/vnd.musician",".musicxml":"application/vnd.recordare.musicxml+xml",".mvb":"application/x-msmediaview",".mwf":"application/vnd.mfer",".mxf":"application/mxf",".mxl":"application/vnd.recordare.musicxml",".mxml":"application/xv+xml",".mxs":"application/vnd.triscape.mxs",".mxu":"video/vnd.mpegurl",".n-gage":"application/vnd.nokia.n-gage.symbian.install",".nb":"application/mathematica",".nc":"application/x-netcdf",".ncx":"application/x-dtbncx+xml",".ngdat":"application/vnd.nokia.n-gage.data",".nlu":"application/vnd.neurolanguage.nlu",".nml":"application/vnd.enliven",".nnd":"application/vnd.noblenet-directory",".nns":"application/vnd.noblenet-sealer",".nnw":"application/vnd.noblenet-web",".npx":"image/vnd.net-fpx",".nsf":"application/vnd.lotus-notes",".nws":"message/rfc822",".o":"application/octet-stream",".oa2":"application/vnd.fujitsu.oasys2",".oa3":"application/vnd.fujitsu.oasys3",".oas":"application/vnd.fujitsu.oasys",".obd":"application/x-msbinder",".obj":"application/octet-stream",".oda":"application/oda",".odb":"application/vnd.oasis.opendocument.database",".odc":"application/vnd.oasis.opendocument.chart",".odf":"application/vnd.oasis.opendocument.formula",".odft":"application/vnd.oasis.opendocument.formula-template",".odg":"application/vnd.oasis.opendocument.graphics",".odi":"application/vnd.oasis.opendocument.image",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"audio/ogg",".ogv":"video/ogg",".ogx":"application/ogg",".onepkg":"application/onenote",".onetmp":"application/onenote",".onetoc":"application/onenote",".onetoc2":"application/onenote",".opf":"application/oebps-package+xml",".oprc":"application/vnd.palm",".org":"application/vnd.lotus-organizer",".osf":"application/vnd.yamaha.openscoreformat",".osfpvg":"application/vnd.yamaha.openscoreformat.osfpvg+xml",".otc":"application/vnd.oasis.opendocument.chart-template",".otf":"application/x-font-otf",".otg":"application/vnd.oasis.opendocument.graphics-template",".oth":"application/vnd.oasis.opendocument.text-web",".oti":"application/vnd.oasis.opendocument.image-template",".otm":"application/vnd.oasis.opendocument.text-master",".otp":"application/vnd.oasis.opendocument.presentation-template",".ots":"application/vnd.oasis.opendocument.spreadsheet-template",".ott":"application/vnd.oasis.opendocument.text-template",".oxt":"application/vnd.openofficeorg.extension",".p":"text/x-pascal",".p10":"application/pkcs10",".p12":"application/x-pkcs12",".p7b":"application/x-pkcs7-certificates",".p7c":"application/pkcs7-mime",".p7m":"application/pkcs7-mime",".p7r":"application/x-pkcs7-certreqresp",".p7s":"application/pkcs7-signature",".pas":"text/x-pascal",".pbd":"application/vnd.powerbuilder6",".pbm":"image/x-portable-bitmap",".pcf":"application/x-font-pcf",".pcl":"application/vnd.hp-pcl",".pclxl":"application/vnd.hp-pclxl",".pct":"image/x-pict",".pcurl":"application/vnd.curl.pcurl",".pcx":"image/x-pcx",".pdb":"application/vnd.palm",".pdf":"application/pdf",".pfa":"application/x-font-type1",".pfb":"application/x-font-type1",".pfm":"application/x-font-type1",".pfr":"application/font-tdpfr",".pfx":"application/x-pkcs12",".pgm":"image/x-portable-graymap",".pgn":"application/x-chess-pgn",".pgp":"application/pgp-encrypted",".pic":"image/x-pict",".pkg":"application/octet-stream",".pki":"application/pkixcmp",".pkipath":"application/pkix-pkipath",".pl":"text/plain",".plb":"application/vnd.3gpp.pic-bw-large",".plc":"application/vnd.mobius.plc",".plf":"application/vnd.pocketlearn",".pls":"application/pls+xml",".pml":"application/vnd.ctc-posml",".png":"image/png",".pnm":"image/x-portable-anymap",".portpkg":"application/vnd.macports.portpkg",".pot":"application/vnd.ms-powerpoint",".potm":"application/vnd.ms-powerpoint.template.macroenabled.12",".potx":"application/vnd.openxmlformats-officedocument.presentationml.template",".ppa":"application/vnd.ms-powerpoint",".ppam":"application/vnd.ms-powerpoint.addin.macroenabled.12",".ppd":"application/vnd.cups-ppd",".ppm":"image/x-portable-pixmap",".pps":"application/vnd.ms-powerpoint",".ppsm":"application/vnd.ms-powerpoint.slideshow.macroenabled.12",".ppsx":"application/vnd.openxmlformats-officedocument.presentationml.slideshow",".ppt":"application/vnd.ms-powerpoint",".pptm":"application/vnd.ms-powerpoint.presentation.macroenabled.12",".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation",".pqa":"application/vnd.palm",".prc":"application/x-mobipocket-ebook",".pre":"application/vnd.lotus-freelance",".prf":"application/pics-rules",".ps":"application/postscript",".psb":"application/vnd.3gpp.pic-bw-small",".psd":"image/vnd.adobe.photoshop",".psf":"application/x-font-linux-psf",".ptid":"application/vnd.pvi.ptid1",".pub":"application/x-mspublisher",".pvb":"application/vnd.3gpp.pic-bw-var",".pwn":"application/vnd.3m.post-it-notes",".pwz":"application/vnd.ms-powerpoint",".py":"text/x-python",".pya":"audio/vnd.ms-playready.media.pya",".pyc":"application/x-python-code",".pyo":"application/x-python-code",".pyv":"video/vnd.ms-playready.media.pyv",".qam":"application/vnd.epson.quickanime",".qbo":"application/vnd.intu.qbo",".qfx":"application/vnd.intu.qfx",".qps":"application/vnd.publishare-delta-tree",".qt":"video/quicktime",".qwd":"application/vnd.quark.quarkxpress",".qwt":"application/vnd.quark.quarkxpress",".qxb":"application/vnd.quark.quarkxpress",".qxd":"application/vnd.quark.quarkxpress",".qxl":"application/vnd.quark.quarkxpress",".qxt":"application/vnd.quark.quarkxpress",".ra":"audio/x-pn-realaudio",".ram":"audio/x-pn-realaudio",".rar":"application/x-rar-compressed",".ras":"image/x-cmu-raster",".rcprofile":"application/vnd.ipunplugged.rcprofile",".rdf":"application/rdf+xml",".rdz":"application/vnd.data-vision.rdz",".rep":"application/vnd.businessobjects",".res":"application/x-dtbresource+xml",".rgb":"image/x-rgb",".rif":"application/reginfo+xml",".rl":"application/resource-lists+xml",".rlc":"image/vnd.fujixerox.edmics-rlc",".rld":"application/resource-lists-diff+xml",".rm":"application/vnd.rn-realmedia",".rmi":"audio/midi",".rmp":"audio/x-pn-realaudio-plugin",".rms":"application/vnd.jcp.javame.midlet-rms",".rnc":"application/relax-ng-compact-syntax",".roff":"text/troff",".rpm":"application/x-rpm",".rpss":"application/vnd.nokia.radio-presets",".rpst":"application/vnd.nokia.radio-preset",".rq":"application/sparql-query",".rs":"application/rls-services+xml",".rsd":"application/rsd+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".rtx":"text/richtext",".s":"text/x-asm",".saf":"application/vnd.yamaha.smaf-audio",".sbml":"application/sbml+xml",".sc":"application/vnd.ibm.secure-container",".scd":"application/x-msschedule",".scm":"application/vnd.lotus-screencam",".scq":"application/scvp-cv-request",".scs":"application/scvp-cv-response",".scurl":"text/vnd.curl.scurl",".sda":"application/vnd.stardivision.draw",".sdc":"application/vnd.stardivision.calc",".sdd":"application/vnd.stardivision.impress",".sdkd":"application/vnd.solent.sdkm+xml",".sdkm":"application/vnd.solent.sdkm+xml",".sdp":"application/sdp",".sdw":"application/vnd.stardivision.writer",".see":"application/vnd.seemail",".seed":"application/vnd.fdsn.seed",".sema":"application/vnd.sema",".semd":"application/vnd.semd",".semf":"application/vnd.semf",".ser":"application/java-serialized-object",".setpay":"application/set-payment-initiation",".setreg":"application/set-registration-initiation",".sfd-hdstx":"application/vnd.hydrostatix.sof-data",".sfs":"application/vnd.spotfire.sfs",".sgl":"application/vnd.stardivision.writer-global",".sgm":"text/sgml",".sgml":"text/sgml",".sh":"application/x-sh",".shar":"application/x-shar",".shf":"application/shf+xml",".si":"text/vnd.wap.si",".sic":"application/vnd.wap.sic",".sig":"application/pgp-signature",".silo":"model/mesh",".sis":"application/vnd.symbian.install",".sisx":"application/vnd.symbian.install",".sit":"application/x-stuffit",".sitx":"application/x-stuffitx",".skd":"application/vnd.koan",".skm":"application/vnd.koan",".skp":"application/vnd.koan",".skt":"application/vnd.koan",".sl":"text/vnd.wap.sl",".slc":"application/vnd.wap.slc",".sldm":"application/vnd.ms-powerpoint.slide.macroenabled.12",".sldx":"application/vnd.openxmlformats-officedocument.presentationml.slide",".slt":"application/vnd.epson.salt",".smf":"application/vnd.stardivision.math",".smi":"application/smil+xml",".smil":"application/smil+xml",".snd":"audio/basic",".snf":"application/x-font-snf",".so":"application/octet-stream",".spc":"application/x-pkcs7-certificates",".spf":"application/vnd.yamaha.smaf-phrase",".spl":"application/x-futuresplash",".spot":"text/vnd.in3d.spot",".spp":"application/scvp-vp-response",".spq":"application/scvp-vp-request",".spx":"audio/ogg",".src":"application/x-wais-source",".srx":"application/sparql-results+xml",".sse":"application/vnd.kodak-descriptor",".ssf":"application/vnd.epson.ssf",".ssml":"application/ssml+xml",".stc":"application/vnd.sun.xml.calc.template",".std":"application/vnd.sun.xml.draw.template",".stf":"application/vnd.wt.stf",".sti":"application/vnd.sun.xml.impress.template",".stk":"application/hyperstudio",".stl":"application/vnd.ms-pki.stl",".str":"application/vnd.pg.format",".stw":"application/vnd.sun.xml.writer.template",".sus":"application/vnd.sus-calendar",".susp":"application/vnd.sus-calendar",".sv4cpio":"application/x-sv4cpio",".sv4crc":"application/x-sv4crc",".svd":"application/vnd.svd",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swa":"application/x-director",".swf":"application/x-shockwave-flash",".swi":"application/vnd.arastra.swi",".sxc":"application/vnd.sun.xml.calc",".sxd":"application/vnd.sun.xml.draw",".sxg":"application/vnd.sun.xml.writer.global",".sxi":"application/vnd.sun.xml.impress",".sxm":"application/vnd.sun.xml.math",".sxw":"application/vnd.sun.xml.writer",".t":"text/troff",".tao":"application/vnd.tao.intent-module-archive",".tar":"application/x-tar",".tcap":"application/vnd.3gpp2.tcap",".tcl":"application/x-tcl",".teacher":"application/vnd.smart.teacher",".tex":"application/x-tex",".texi":"application/x-texinfo",".texinfo":"application/x-texinfo",".text":"text/plain",".tfm":"application/x-tex-tfm",".tgz":"application/x-gzip",".tif":"image/tiff",".tiff":"image/tiff",".tmo":"application/vnd.tmobile-livetv",".torrent":"application/x-bittorrent",".tpl":"application/vnd.groove-tool-template",".tpt":"application/vnd.trid.tpt",".tr":"text/troff",".tra":"application/vnd.trueapp",".trm":"application/x-msterminal",".tsv":"text/tab-separated-values",".ttc":"application/x-font-ttf",".ttf":"application/x-font-ttf",".twd":"application/vnd.simtech-mindmapper",".twds":"application/vnd.simtech-mindmapper",".txd":"application/vnd.genomatix.tuxedo",".txf":"application/vnd.mobius.txf",".txt":"text/plain",".u32":"application/x-authorware-bin",".udeb":"application/x-debian-package",".ufd":"application/vnd.ufdl",".ufdl":"application/vnd.ufdl",".umj":"application/vnd.umajin",".unityweb":"application/vnd.unity",".uoml":"application/vnd.uoml+xml",".uri":"text/uri-list",".uris":"text/uri-list",".urls":"text/uri-list",".ustar":"application/x-ustar",".utz":"application/vnd.uiq.theme",".uu":"text/x-uuencode",".vcd":"application/x-cdlink",".vcf":"text/x-vcard",".vcg":"application/vnd.groove-vcard",".vcs":"text/x-vcalendar",".vcx":"application/vnd.vcx",".vis":"application/vnd.visionary",".viv":"video/vnd.vivo",".vor":"application/vnd.stardivision.writer",".vox":"application/x-authorware-bin",".vrml":"model/vrml",".vsd":"application/vnd.visio",".vsf":"application/vnd.vsf",".vss":"application/vnd.visio",".vst":"application/vnd.visio",".vsw":"application/vnd.visio",".vtu":"model/vnd.vtu",".vxml":"application/voicexml+xml",".w3d":"application/x-director",".wad":"application/x-doom",".wav":"audio/x-wav",".wax":"audio/x-ms-wax",".wbmp":"image/vnd.wap.wbmp",".wbs":"application/vnd.criticaltools.wbs+xml",".wbxml":"application/vnd.wap.wbxml",".wcm":"application/vnd.ms-works",".wdb":"application/vnd.ms-works",".wiz":"application/msword",".wks":"application/vnd.ms-works",".wm":"video/x-ms-wm",".wma":"audio/x-ms-wma",".wmd":"application/x-ms-wmd",".wmf":"application/x-msmetafile",".wml":"text/vnd.wap.wml",".wmlc":"application/vnd.wap.wmlc",".wmls":"text/vnd.wap.wmlscript",".wmlsc":"application/vnd.wap.wmlscriptc",".wmv":"video/x-ms-wmv",".wmx":"video/x-ms-wmx",".wmz":"application/x-ms-wmz",".wpd":"application/vnd.wordperfect",".wpl":"application/vnd.ms-wpl",".wps":"application/vnd.ms-works",".wqd":"application/vnd.wqd",".wri":"application/x-mswrite",".wrl":"model/vrml",".wsdl":"application/wsdl+xml",".wspolicy":"application/wspolicy+xml",".wtb":"application/vnd.webturbo",".wvx":"video/x-ms-wvx",".x32":"application/x-authorware-bin",".x3d":"application/vnd.hzn-3d-crossword",".xap":"application/x-silverlight-app",".xar":"application/vnd.xara",".xbap":"application/x-ms-xbap",".xbd":"application/vnd.fujixerox.docuworks.binder",".xbm":"image/x-xbitmap",".xdm":"application/vnd.syncml.dm+xml",".xdp":"application/vnd.adobe.xdp+xml",".xdw":"application/vnd.fujixerox.docuworks",".xenc":"application/xenc+xml",".xer":"application/patch-ops-error+xml",".xfdf":"application/vnd.adobe.xfdf",".xfdl":"application/vnd.xfdl",".xht":"application/xhtml+xml",".xhtml":"application/xhtml+xml",".xhvml":"application/xv+xml",".xif":"image/vnd.xiff",".xla":"application/vnd.ms-excel",".xlam":"application/vnd.ms-excel.addin.macroenabled.12",".xlb":"application/vnd.ms-excel",".xlc":"application/vnd.ms-excel",".xlm":"application/vnd.ms-excel",".xls":"application/vnd.ms-excel",".xlsb":"application/vnd.ms-excel.sheet.binary.macroenabled.12",".xlsm":"application/vnd.ms-excel.sheet.macroenabled.12",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xlt":"application/vnd.ms-excel",".xltm":"application/vnd.ms-excel.template.macroenabled.12",".xltx":"application/vnd.openxmlformats-officedocument.spreadsheetml.template",".xlw":"application/vnd.ms-excel",".xml":"application/xml",".xo":"application/vnd.olpc-sugar",".xop":"application/xop+xml",".xpdl":"application/xml",".xpi":"application/x-xpinstall",".xpm":"image/x-xpixmap",".xpr":"application/vnd.is-xpr",".xps":"application/vnd.ms-xpsdocument",".xpw":"application/vnd.intercon.formnet",".xpx":"application/vnd.intercon.formnet",".xsl":"application/xml",".xslt":"application/xslt+xml",".xsm":"application/vnd.syncml+xml",".xspf":"application/xspf+xml",".xul":"application/vnd.mozilla.xul+xml",".xvm":"application/xv+xml",".xvml":"application/xv+xml",".xwd":"image/x-xwindowdump",".xyz":"chemical/x-xyz",".zaz":"application/vnd.zzazz.deck+xml",".zip":"application/zip",".zir":"application/vnd.zul",".zirz":"application/vnd.zul",".zmm":"application/vnd.handheld-entertainment+xml"}[e.toLowerCase().trim()]}t.exports.FS2Zip=async function(e){const n=new i;e.recurse((t,r)=>{r=r.join("/");if(t.isDirectory())r&&n.folder(r);else if(t.isFile()){let e=t.node.data;t={};/^data:[^;]+;base64,/.test(e)&&(e=e.substr(e.indexOf(",")+1),t.base64=!0),n.file(r,e,t)}});e=await n.generateAsync({type:"blob"});s(e,"micojs-project.zip")},t.exports.Zip2FS=async function(e,o){const u=await i.loadAsync(e.result),l=[];u.forEach(async function recurse(e,t){if(t.dir)return void u.folder(t.name).forEach(recurse);let r;l.push(new Promise(e=>{r=e}));let n;const i=(t.name.match(/\.[^./\\]+$/)||[""])[0];const s=getMimeType(i);if(-1!=s.indexOf("text")||"application/javascript"==s||"application/json"==s||".meta"==i)n=await u.file(t.name).async("string");else{n=await u.file(t.name).async("base64");const a=atob(n);let r=!0;for(let t=0,e=a.length;t<e;++t){let e=a.charCodeAt(t);if(0==e||128<=e){r=!1;break}}n=r?a:"data:"+s+";base64,"+n}o.writeFile(t.name,n);r()}),await Promise.all(l)}},{"file-saver":111,jszip:117}],82:[function(e,t,r){const i=e("./dom.js")["dom"];t.exports.Flasher=class Flasher{constructor(){}log(...e){postMessage({log:[e]},"*")}async showConnectPopup(){return new Promise((t,r)=>{const n=i(document.body,{style:{position:"absolute",width:"100%",height:"100%",margin:0,padding:0}},[["div",{style:{position:"absolute",width:"210px",height:"100px",margin:"auto",padding:"18px",boxSizing:"border-box",left:0,right:0,top:0,bottom:0,background:"#333",borderRadius:"10px",border:"1px solid #555"}},[["h1",{textContent:"Ready!",style:{textAlign:"center",fontFamily:'Menlo, Monaco, "Courier New", monospace',color:"white"}}],["div",[["button",{textContent:"Cancel",onclick:e=>{n.remove(),r()}}],["button",{textContent:"Flash",onclick:e=>{n.remove(),t()}}]]]]]])})}}},{"./dom.js":100}],83:[function(e,t,r){"use strict";const{dom:a,index:n}=e("./dom.js"),s=e("./Model.js")["Model"],i=e("./TreeListNode.js")["TreeListNode"],o=e("./TabContainer.js")["TabContainer"],u=e("./Preview.js")["Preview"],l=e("./ProjectControls.js")["ProjectControls"],c=e("./Console.js")["Console"],h=e("./pngfs.js")["PNGFS"],p=e("./stdlib.js")["stdlib"],d=e("./example.js")["loadExample"];var f=e("./ESPBoy.js"),m=e("./SAMD.js");const g=e("./Browser.js"),y=e("./PreBuild.js")["PreBuild"],v=e("./ImageEditor.js")["ImageEditor"],{FS2Zip:_,Zip2FS:C}=e("./FS2Zip.js"),w={espboy:f,metro:{upload:m.upload.bind(null,16384)}};t.exports.IDE=class IDE{el;parent;model;#view=null;#tabContainer=null;#consoleContainer=null;#fs=null;#projectModel=null;#editors={};#treeNodes={};#preview=null;#booted=!1;constructor(e,t,r){this.el=e,this.parent=t,(this.model=r).watch("state",e=>this.changeState(e)),r.watch("windowSize",e=>this.resize()),r.watch("runSize",e=>this.run(e))}resize(){if(!this.el.classList.contains("hidden"))for(var e in this.boot(),this.#editors)this.#editors[e]?.editor?.layout?.()}async changeState(e){this.el.classList.toggle("hidden",e!=this.constructor.name),await this.closeProject(),e==this.constructor.name&&(this.resize(),this.openProject()),this.run(null)}async closeProject(){[...Object.values(this.#editors)].forEach(({editor:e})=>e.commit()),this.model&&(this.model.set("previewProject",""),this.model.set("previewHTML","")),this.#projectModel&&this.#projectModel.flush(),this.#fs=null,this.#projectModel=null,[...Object.values(this.#editors)].forEach(({shortPath:e})=>this.#tabContainer.close(e))}async openProject(){var e="project-"+this.model.get("projectId");let t=this.model.get(e,null),r=(t||(await(t=new s).useStorage(e),this.model.set(e,t)),new h(t.get("fs",null)));r.rm(".R"),t.onBeforeSave=e=>{t.set("fs",r.toJSON())},this.#projectModel=t,window.projectFS=r,this.#fs=r,this.#fs.onDirty=e=>t.dirty(),0==this.#fs.ls().length&&d(this.#fs),this.emitStd(this.model.get("platform")),this.refreshTree();var e=t.get("activeFile","/source/main.js"),n=t.get("openFileList",[]),i=[...n];n.length=0,i.forEach(e=>this.openFile(e)),this.openFile(e)}boot(){this.#booted||(this.#booted=!0,this.setupMonaco(),this.#view=n(this.el,{},this),this.model.watch("platform",e=>this.emitStd(e)),this.model.watch("projectName",e=>{e!=this.model.get("previewProject","")&&this.model.set("previewHTML","")}))}setupPreview(e){return this.#preview=new u(e,this,this.model),!1}setupConsoleContainer(e){const t=new o(e);this.#consoleContainer=t;e=new c("log"),e.onAppend=e=>t.activate("debug"),t.add("debug",e.el),t.activate("debug"),e=new c("build");return e.onAppend=e=>t.activate("compilation"),e.maxLines=1,t.add("compilation",e.el),!1}setupTabContainer(e){return this.#tabContainer=new o(e),this.#tabContainer.onClose=this.onCloseEditor.bind(this),this.#tabContainer.onActivate=this.onActivateFile.bind(this),!1}setupProjectControls(e){return new l(e,this.model),!1}setupMonaco(){monaco.languages.typescript.javascriptDefaults.setEagerModelSync(!0),monaco.languages.typescript.javascriptDefaults.setCompilerOptions({target:monaco.languages.typescript.ScriptTarget.ES6,allowNonTsExtensions:!0,noLib:!0,allowJs:!0});var e="ts:filename/stdlib.d.ts";monaco.languages.typescript.javascriptDefaults.addExtraLib(p,e),monaco.editor.createModel(p,"typescript",monaco.Uri.parse(e))}refreshTree(){var e,t=document.querySelector("#treelist");for(this.#treeNodes={};t.childNodes.length;)t.removeChild(t.childNodes[0]);for(e of this.#fs.ls("/"))t.appendChild(new i(e,"/",this.openFile.bind(this),this.#treeNodes).dom)}cancelEvent(e){e.stopPropagation(),e.preventDefault()}dropFile(e){e.stopPropagation(),e.preventDefault();var t=e.target.closest(".treenode.Directory");if(t){let n=null;for(var r in this.#treeNodes)if(this.#treeNodes[r].dom==t){n=r;break}if(n){var i=e.dataTransfer?.files;if(i?.length){let r=i.length;for(let e=0;e<i.length;++e){var s=i[e],a=new FileReader;/\.zip$/i.test(s.name)?(a.onload=loadProject.bind(this,a),a.readAsArrayBuffer(s)):(a.onload=loadFile.bind(this,a,s),/\.js$/i.test(s.name)?a.readAsText(s):a.readAsDataURL(s))}async function loadProject(e){for(var t in await C(e,this.#fs),this.#editors)this.#editors[t].editor?.reload?.();this.refreshTree()}function loadFile(e,t){this.#fs.writeFile(n+"/"+t.name,e.result),--r||this.refreshTree()}}}}}editorFactories={js(e,r,n){const i=monaco.editor.create(e,{value:n,language:"javascript",theme:"vs-dark"});let s=this.#fs;return i.commit=e=>{var t=i.getValue();t!=n&&(n=t,s.writeFile(r,n))},i.reload=e=>{i.setValue(s.readFile(r))},i.onDidChangeModelContent(i.commit),i.addAction({id:"save-action",label:"Save File",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyS],precondition:null,keybindingContext:null,run(e){}}),i.addAction({id:"execute",label:"Execute",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.Enter],precondition:null,keybindingContext:null,run:()=>{this.#preview.toggleRun()}}),i},meta:"js",json:"js",raw(e,t,r){},png(e,t,r){return new v(e,t,r,this.#fs)},jpg:"png"};openFile(t){var r=t.split("/").pop();if(this.#tabContainer.activate(r))this.#projectModel.set("activeFile",t);else{var n=this.#fs.readFile(t);if(!1!==n){var i=a("div",{style:{width:"100%",height:"100%",position:"absolute"}}),s={node:i,shortPath:r,path:t,editor:null};this.#editors[t]=s,this.#projectModel.get("openFileList",[]).push(t),this.#projectModel.dirty("openFileList"),this.#tabContainer.add(r,i),this.#tabContainer.activate(r);let e=(r.match(/\.([^./]+)$/i)?.[1]+"").toLowerCase();for(;"string"==typeof e;)e=this.editorFactories[e];e=e||this.editorFactories.raw,s.editor=e.call(this,i,t,n)}}}getEditor(e){for(var t in this.#editors){t=this.#editors[t];if(t.node==e)return t}return null}getActiveTreeNode(){for(var e in this.#treeNodes)if(this.#treeNodes[e].isActive())return this.#treeNodes[e]}onActivateFile(e){if(this.#projectModel){var t,r=this.getEditor(e)?.path;for(t in this.#editors[r]?.editor?.layout?.(),this.#projectModel.set("activeFile",r),this.#treeNodes)this.#treeNodes[t].setActive(t==r)}}onCloseEditor(e){for(var t in this.#editors){var{node:r,editor:n}=this.#editors[t];if(r==e){n&&n.dispose&&n.dispose(),delete this.#editors[t],this.#projectModel&&((r=this.#projectModel.get("openFileList",[])).splice(r.indexOf("path"),1),this.#projectModel.dirty("openFileList"));break}}return!0}emitStd(e){this.#fs&&e&&(this.#fs?.writeFile("/std.js",e=`// Autogenerated file - DO NOT EDIT!
"set platform ${e}";
"addSysCall setScreenMode setFPS setPen setFont setLED setTexture";
"addSysCall setMirrored setFlipped setTransparent";
"addSysCall getWidth getHeight readByte";
"addSysCall clear image text rect";
"push globals UP DOWN LEFT RIGHT A B C D FRAMETIME";
"registerBuiltinResource fontMini fontTIC806x6 fontZXSpec fontAdventurer fontDonut fontDragon fontC64 fntC64UIGfx fontMonkey fontKarateka fontKoubit fontRunes fontTight fontTiny";
{
  "ifeq platform blit";
  "push strings hires lores hires_palette";
}
"include /source/main.js"
`),this.#editors["/std.js"]?.editor.setValue(e))}exportProject(){_(this.#fs)}deleteFile(){var e=this.getActiveTreeNode();if(confirm(`Are you sure you want to delete ${e.path}?`)&&this.#fs.rm(e.path)){for(var t in this.#editors)(t==e.path||t.startsWith(e.path+"/"))&&(t=this.#editors[t])&&this.#tabContainer.close(t.shortPath);this.refreshTree()}}createFile(){var e,t,r,n=this.#fs,i=prompt("File Name:");i&&(t=(e=this.getActiveTreeNode()).path.split("/"),e.isDirectory()||t.pop(),t.push(i),e=t.join("/"),n.lookup(e)?alert(`File ${i} already exists.`):([t,r]=e.split("/").pop().split("."),t&&r?(r="js"!==r.toLowerCase()?"":`// ${i}

class ${t} {
    constructor() {
    }

    update(time) {
    }

    render() {
    }
}

`,n.writeFile(e,r)?(this.refreshTree(),this.openFile(e)):alert(`Could not write file ${i}.`)):alert("Invalid file name: "+i)))}createDir(){var e,t,r=this.#fs,n=prompt("Directory Name:");n&&(t=(e=this.getActiveTreeNode()).path.split("/"),e.isDirectory()||t.pop(),t.push(n),t=t.join("/"),r.mkdir(t)||alert(`Could not create directory ${n}.`),this.refreshTree(),e.isFile())&&this.openFile(e.path)}async run(e){if(this.#fs)if(e)try{this.#projectModel.flush();var t=await y(this.#fs),r=await g.build(t,e);postMessage({log:{clear:!0}},"*"),this.model.set("previewProject",this.model.get("projectName")),this.model.set("previewHTML",r)}catch(e){console.log(e),e&&"object"==typeof e?(t=e.description||e.error||e.message||e+"",postMessage({build:[t]},"*")):"string"==typeof e&&postMessage({build:[e]},"*")}else this.model.set("previewProject",""),this.model.set("previewHTML","")}async export(){this.#preview.setExportVisibility(!1);try{postMessage({build:["Building"]},"*");var t=await y(this.#fs),r=(await g.build(t,[0,0]),this.parent.remote);let e=this.#projectModel.get("RPIN");e||(e=await r.requestKey(),this.#projectModel.set("RPIN",e));var n,i,s,a,o=await r.requestBuild(e,{fs:t.toJSON()});if(!o||"object"!=typeof o)throw console.log(o),"Unexpected error";if(o.error)throw o;o.url&&(n=o.url,(i=w[this.model.get("platform")])&&navigator.serial?"application/octet-stream"==(s=await fetch(n)).headers.get("content-type")?i.upload(await s.arrayBuffer()):(a=await s.text(),console.error(a)):location.href=n),postMessage({build:["Build complete"]},"*")}catch(e){console.log(e),e&&"object"==typeof e?(e.description&&postMessage({build:[e.description]},"*"),e.error&&postMessage({build:[e.error]},"*")):"string"==typeof e&&postMessage({build:[e]},"*")}finally{this.#preview.setExportVisibility(!0)}}}},{"./Browser.js":78,"./Console.js":79,"./ESPBoy.js":80,"./FS2Zip.js":81,"./ImageEditor.js":84,"./Model.js":85,"./PreBuild.js":86,"./Preview.js":87,"./ProjectControls.js":88,"./SAMD.js":90,"./TabContainer.js":95,"./TreeListNode.js":96,"./dom.js":100,"./example.js":102,"./pngfs.js":121,"./stdlib.js":123}],84:[function(e,t,r){const{dom:f,index:i}=e("./dom.js"),{convertToU8:o,palette:u}=e("./PreBuild.js");t.exports.ImageEditor=class ImageEditor{#fs;#dom;path;metadata;img;canvas;ctx;imgData;forceRedraw;selectedTID;tilesetPath;tilesetMeta;tilesetImg;constructor(e,t,r,n){this.path=t;try{this.metadata=JSON.parse(n.readFile(t+".meta"))}catch(e){}this.metadata&&"object"==typeof this.metadata||(this.metadata={mode:"image"}),this.metadata.image&&"object"==typeof this.metadata.image||(this.metadata.image={}),this.metadata.tilemap&&"object"==typeof this.metadata.tilemap||(this.metadata.tilemap={tileset:""}),this.metadata.tileset&&"object"==typeof this.metadata.tileset||(this.metadata.tileset={tilewidth:8,tileheight:8}),this.#fs=n,this.#dom=i(f("div",e,{className:"imageEditor"},[["div",{id:"imgcontainer"},[["canvas",{id:"canvas",src:r,onload:this.onload.bind(this)}],["img",{id:"img",src:r,onload:this.onload.bind(this)}]]],["div",{id:"sidebar"},[["select",{id:"mode",onchange:this.changeMeta.bind(this)},[["option",{value:"image",textContent:"image"}],["option",{value:"tilemap",textContent:"tilemap"}],["option",{value:"tileset",textContent:"tileset"}]]],[{id:"imageSidebar"},[[{className:"row"},[["span",{textContent:"Width:"}],["span",{id:"imgwidth"}]]],[{className:"row"},[["span",{textContent:"Height:"}],["span",{id:"imgheight"}]]]]],[{id:"tilemapSidebar"},[[{className:"row"},[["span",{textContent:"Tile Set:"}],["select",{id:"tileset",onchange:this.changeMeta.bind(this)},this.getTilesets().map(e=>["option",{value:e,textContent:e.replace(/.*\/|\..*/g,"")}])],["button",{id:"refresh",onclick:this.refreshTileSets.bind(this),textContent:"⟳"}]]]]],[{id:"tilesetSidebar"},[[{className:"row"},[["span",{textContent:"Tile Width:"}],["input",{id:"tilewidth",type:"number",min:"8",max:"256",onchange:this.changeMeta.bind(this),value:0|this.metadata.tileset.tilewidth||8}]]],[{className:"row"},[["span",{textContent:"Tile Height:"}],["input",{id:"tileheight",type:"number",min:"8",max:"256",onchange:this.changeMeta.bind(this),value:0|this.metadata.tileset.tileheight||8}]]]]]]]]),{},this),this.#dom.tileset.value=this.metadata.tilemap.tileset,this.#dom.mode.value=this.metadata.mode}commit(){}reload(){this.#dom.img.src=this.#fs.readFile(this.path)}refreshTileSets(){for(var e,t=this.#dom.tileset,r=t.value;t.children.length;)t.children[0].remove();for(e of this.getTilesets())f(t,"option",{value:e,textContent:e.replace(/.*\/|\..*/g,"")});t.value=r,this.tilesetData=null,this.layout()}onload(){this.layout()}initCanvas(e,t,r){var n;return!(!e||!t||((n=this.#dom.canvas).width==e&&n.height==t||(n.width=e,n.height=t,this.imgData=null),this.ctx||(this.ctx=n.getContext("2d")),this.imgData)||(r&&this.ctx.drawImage(r,0,0),this.imgData=this.ctx.getImageData(0,0,e,t),0))}layout(){var e=this.metadata.mode,t=this.#dom.imageEditor[0];t.classList.toggle("image","image"==e),t.classList.toggle("tilemap","tilemap"==e),t.classList.toggle("tileset","tileset"==e),"image"==e&&this.layoutImage(),"tilemap"==e&&this.layoutTilemap(),"tileset"==e&&this.layoutTileset()}autozoom(){var e=this.#dom.img,t=this.#dom.canvas,r=e.parentElement,n=.85*Math.min(r.clientWidth/e.naturalWidth,r.clientHeight/e.naturalHeight),i=e.naturalWidth*n|0,n=e.naturalHeight*n|0;t.style.width=e.style.width=i+"px",t.style.height=e.style.height=n+"px",t.style.left=e.style.left=(r.clientWidth/2-i/2|0)+"px",t.style.top=e.style.top=(r.clientHeight/2-n/2|0)+"px"}layoutImage(){this.autozoom();var n=this.#dom.img;if(this.#dom.imgwidth.textContent=n.naturalWidth,this.#dom.imgheight.textContent=n.naturalHeight,this.initCanvas(n.naturalWidth,n.naturalHeight,n)){var i=o(this.imgData),s=this.imgData.data;let r=0;for(let t=0;t<n.naturalHeight;++t)for(let e=0;e<n.naturalWidth;++e){var a=u[i[t+1][e]];s[r++]=a[0],s[r++]=a[1],s[r++]=a[2],s[r++]=255}this.ctx.putImageData(this.imgData,0,0)}}getTilesets(){var e=this.#fs;let t=[],n=[];return function recurse(e,t){n.push(e.name);if(!1!==t(e)&&e.isDirectory())for(var r of Object.values(e.node.children))recurse(r,t);n.pop()}(e.root,e=>{if(!e.isFile())return"."!=e.name[0];if("meta"==e.extension)try{"tileset"==JSON.parse(e.node.data).mode&&t.push(n.join("/"))}catch(e){}return!1}),t}tilesetDimensions(){var e=0|this.tilesetData.tileset.tilewidth||8,t=0|this.tilesetData.tileset.tileheight||8;return{tilewidth:e,tileheight:t,tilesPerRow:this.tilesetImg.naturalWidth/e|0||1,tilesPerCol:this.tilesetImg.naturalWidth/t|0||1}}async layoutTilemap(){this.autozoom();let e=this.forceRedraw;if(this.forceRedraw=!1,this.tilesetPath!=this.metadata.tilemap.tileset&&(this.tilesetData=null,this.tilesetImg=null),this.tilesetData||(this.tilesetData=JSON.parse(this.#fs.readFile(this.metadata.tilemap.tileset)),this.tilesetPath=this.metadata.tilemap.tileset,e=!0),!this.tilesetImg){e=!0;var t=this.metadata.tilemap.tileset.replace(/\.meta$/gi,"");let r=this.#fs.readFile(t);await new Promise((e,t)=>{this.tilesetImg=f("img",{src:r,onload:e,onerror:t})})}if(e){var{tilewidth:i,tileheight:s,tilesPerRow:a,tilesPerCol:o}=this.tilesetDimensions(),t=this.#dom.img;this.initCanvas(t.naturalWidth,t.naturalHeight,t);const d=this.#dom.canvas;d.width=t.naturalWidth*i,d.height=t.naturalHeight*s;let e=0;var u={};for(let n=0;n<this.imgData.height;++n)for(let r=0;r<this.imgData.width;++r){let t=0;t=this.imgData.data[e++],t=(t=((t<<=8)|this.imgData.data[e++])<<8)|this.imgData.data[e++];var l=this.imgData.data[e++];if(!(l<128)){t=t.toString(16);let e=this.metadata.tilemap["#"+t];e&&"object"==typeof e||(this.metadata.tilemap["#"+t]=e={});var c,l=(u[t]=e).id;void 0!==l&&(c=(l|=0)%a,o<=(l=l/a|0)?e.id=0:this.ctx.drawImage(this.tilesetImg,c*i,l*s,i,s,r*i,n*i,i,s))}}var r,n=this.#dom.tilemapSidebar.querySelectorAll(".assign");for(let e=0;e<n.length;++e)n[e].remove();for(r in u){var h=f(this.#dom.tilemapSidebar,{className:"row assign"},[[{style:{backgroundColor:"#"+"0".repeat(6-r.length)+r,width:"32px",flexGrow:0}}],["canvas",{width:i,height:s,flexGrow:0,onclick:this.changeTileId.bind(this,r,u[r])}],["input",{type:"number",value:0|u[r].info,style:{flexGrow:1},onchange:this.changeTileInfo.bind(this,r,u[r])}]]),p=u[r].id;const d=h.querySelector("canvas");d.getContext("2d").drawImage(this.tilesetImg,p%a*i,(p/a|0)*s,i,s,0,0,i,s)}}}changeTileId(e,n){if(this.tilesetImg){const{tilewidth:o,tileheight:u,tilesPerRow:l,tilesPerCol:c}=this.tilesetDimensions(),h=[];var t=this.#dom.imageEditor[0],r=this.tilesetImg.naturalWidth/this.tilesetImg.naturalHeight,i=.9*t.clientHeight|0,r=i*r|0;const p=f(t,{className:"overlay",onclick:e=>{e.target==p&&p.remove()}},[[{className:"popup",style:{height:i+"px",width:r+"px"}}]]);var s=p.querySelector(".popup");for(let t=0;t<c;++t)for(let e=0;e<l;++e){var a=f("canvas",{width:o,height:u,className:"tile",onclick:setTID.bind(this,e,t)},s);a.getContext("2d").drawImage(this.tilesetImg,e*o,t*u,o,u,0,0,o,u),h.push(a)}function setTID(e,t){const r=t*l+e;h.forEach((e,t)=>{e.classList.toggle("selected",t==r)}),r!=n.id&&(n.id=r,this.forceRedraw=!0,this.changeMeta())}setTID.call(this,n.id%l,n.id/l|0)}}changeTileInfo(e,t,r){t.info=0|r.target.value,this.dirty()}layoutTileset(){this.autozoom();var e=this.#dom,t=e.img.naturalWidth,e=e.img.naturalHeight,r=this.metadata.tileset.tilewidth||8,n=this.metadata.tileset.tileheight||8;if(this.initCanvas(t/r,e/n)){let r=0;var i=this.imgData.data;for(let t=0;t<this.imgData.height;++t)for(let e=0;e<this.imgData.width;++e){var s=e+t&1?170:119;i[r++]=s,i[r++]=s,i[r++]=s,i[r++]=255}this.ctx.putImageData(this.imgData,0,0)}}changeMeta(){var e=this.#dom,t=e.img.naturalWidth,r=e.img.naturalHeight;let n=0|e.tilewidth.value||8,i=0|e.tileheight.value||8;var s=Math.round(t/n)||1,a=Math.round(r/i)||1;t/s|0!=n&&(e.tilewidth.value=n=t/s|0),r/a|0!=i&&(e.tileheight.value=i=r/a|0),this.metadata={mode:e.mode.value,image:{},tilemap:Object.assign(this.metadata.tilemap,{tileset:e.tileset.value}),tileset:Object.assign(this.metadata.tileset,{tilewidth:n,tileheight:i})},this.dirty(),this.layout()}dirty(){this.#fs.writeFile(this.path+".meta",JSON.stringify(this.metadata,0,4))}}},{"./PreBuild.js":86,"./dom.js":100}],85:[function(e,t,r){const n=e("localforage");n.config({name:"model"});t.exports.Model=class Model{#storageId;#data;#timeout;#dirtyCount=0;onBeforeSave;onAfterSave;constructor(){this.#data={}}dirty(e){let t=this.#data[e];if(t&&t.listeners.forEach(e=>e(t.value)),this.#storageId){if(0<this.#timeout){if(this.#dirtyCount++,100<this.#dirtyCount)return;clearTimeout(this.#timeout),this.#timeout=0}else if(-1==this.#timeout)return;this.#timeout=setTimeout(this.flush.bind(this),1e3)}}flush(){clearTimeout(this.#timeout),this.#timeout=-1,console.log("Saving",this.#storageId),this.onBeforeSave?.(),clearTimeout(this.#timeout),this.#timeout=0,this.#dirtyCount=0,n.setItem(this.#storageId,this.toJSON()),this.onAfterSave?.()}toJSON(){var e,t={};for(e in this.#data){var r=this.#data[e].value;r&&"object"==typeof r&&r.constructor!=Object&&r.constructor!=Array||(t[e]=r)}return t}async useStorage(e){this.#storageId=null;var t=await n.getItem(e);if(t)for(var r in t)this.set(r,t[r]);this.#storageId=e}async destroy(e){(e||this.#storageId)&&await n.removeItem(e||this.#storageId)}init(t){var r=[];for(const n in t){const i=t[n];let e=this.#data[n];e&&"value"in e||(e?(e.value=i,r.push(...e.listeners.map(e=>e.bind(null,i)))):e=this.#data[n]={value:i,listeners:[]})}r.forEach(e=>e())}set(e,t){let r=this.#data[e];r?(r.value!=t||t&&"object"==typeof t)&&(r.value=t,this.dirty(e)):r=this.#data[e]={value:t,listeners:[]}}get(e,t){var r=this.#data[e];return r?r.value:(void 0!==t&&this.set(e,t),t)}watch(t,r){if("object"==typeof t){var e,n=[];for(e in t){var i=t[e];if(!Array.isArray(i)&&-1==n.indexOf(i))for(let e=0;e<i.attributes.length;++e){var s,a=i.attributes[e],o=a.name.split("-");2==o.length&&(s={text:"textContent",html:"innerHTML"}[o[1]]||o[1],"read"!=o[0]&&"readwrite"!=o[0]||this.watch(a.value,read.bind(this,i,s)),"write"!=o[0]&&"readwrite"!=o[0]||i.addEventListener("change",write.bind(this,i,s,a.value)),"for"==o[0]&&"each"==o[1])&&this.watch(a.value,foreach.bind(this,i,i.innerHTML))}}function foreach(e,t,r){if(Array.isArray(r)){var n=[];for(const i of r)n.push(t.replace(/\$\{([^}]+)\}/g,(e,t)=>i[t]));e.innerHTML=n.join("")}}function read(e,t,r){e[t]=r,console.log("updating ",e,"prop",t,"with val",r)}function write(e,t,r){this.set(r,e[t])}}else{let e=this.#data[t];e?e.listeners.push(r):e=this.#data[t]={listeners:[r]},r(e.value)}}}},{localforage:118}],86:[function(e,t,r){const i=e("./pngfs.js")["PNGFS"],l=e("./dom.js")["dom"],E=[[255,0,255],[0,0,0],[12,12,12],[25,25,25],[18,0,51],[38,38,38],[53,76,0],[0,53,76],[76,0,53],[53,53,53],[39,26,80],[80,39,26],[26,80,39],[0,107,80],[26,0,107],[107,0,26],[80,107,0],[66,66,66],[81,88,44],[44,81,88],[88,44,81],[110,22,51],[110,98,22],[22,110,28],[22,86,110],[63,22,110],[24,0,132],[132,0,41],[108,132,0],[0,132,90],[79,79,79],[62,59,98],[98,62,59],[59,98,62],[39,118,86],[39,55,118],[118,39,118],[118,55,39],[86,118,39],[124,138,19],[21,138,19],[19,138,118],[19,55,138],[84,19,138],[138,19,90],[138,51,19],[158,0,57],[0,158,100],[91,91,91],[113,114,68],[68,113,114],[114,68,113],[137,45,88],[137,113,45],[52,137,45],[45,125,137],[76,45,137],[29,22,160],[146,22,160],[160,22,55],[160,107,22],[94,160,22],[22,160,68],[22,133,160],[0,183,104],[0,107,183],[52,0,183],[183,0,159],[183,0,0],[183,156,0],[52,183,0],[107,107,107],[85,87,128],[128,85,87],[87,128,85],[64,149,104],[64,92,149],[138,64,149],[149,69,64],[127,149,64],[171,169,42],[64,171,42],[42,171,132],[42,100,171],[96,42,171],[171,42,137],[171,57,42],[192,21,107],[192,49,21],[192,164,21],[107,192,21],[21,192,49],[21,192,164],[21,107,192],[49,21,192],[164,21,192],[3,0,214],[210,214,0],[119,119,119],[143,138,95],[95,143,138],[138,95,143],[167,71,129],[167,129,71],[91,167,71],[71,167,167],[91,71,167],[47,59,191],[158,47,191],[191,47,103],[191,117,47],[143,191,47],[47,191,76],[47,184,191],[23,215,107],[23,196,215],[23,68,215],[107,23,215],[215,23,196],[215,23,68],[215,107,23],[196,215,23],[68,215,23],[239,227,0],[0,239,35],[0,155,239],[131,0,239],[239,0,59],[132,132,132],[108,117,157],[157,108,117],[117,157,108],[83,181,114],[83,130,181],[153,83,181],[181,83,91],[170,181,83],[206,181,59],[103,206,59],[59,206,139],[59,144,206],[98,59,206],[206,59,186],[206,59,61],[230,34,161],[230,37,34],[230,168,34],[161,230,34],[34,230,37],[34,230,168],[34,161,230],[37,34,230],[168,34,230],[10,42,255],[255,10,238],[255,75,10],[140,255,10],[10,255,173],[145,145,145],[167,155,123],[123,167,155],[155,123,167],[189,101,167],[189,140,101],[132,189,101],[101,189,176],[105,101,189],[79,110,211],[162,79,211],[211,79,147],[211,123,79],[184,211,79],[79,211,86],[79,211,200],[57,233,107],[57,233,224],[57,124,233],[107,57,233],[224,57,233],[233,57,124],[233,107,57],[233,224,57],[124,233,57],[255,211,35],[35,79,255],[160,160,160],[137,152,184],[184,137,152],[152,184,137],[113,207,130],[113,171,207],[168,113,207],[207,113,133],[207,206,113],[231,188,89],[153,231,89],[89,231,148],[89,193,231],[108,89,231],[229,89,231],[231,89,111],[255,66,214],[255,78,66],[255,242,66],[107,255,66],[66,255,188],[66,160,255],[135,66,255],[173,173,173],[193,177,153],[153,193,177],[177,153,193],[214,132,204],[214,158,132],[172,214,132],[132,214,191],[132,139,214],[112,157,234],[171,112,234],[234,112,191],[234,136,112],[228,234,112],[122,234,112],[112,234,206],[91,255,116],[255,91,230],[186,186,186],[163,184,208],[208,163,184],[184,208,163],[140,231,145],[140,208,231],[181,140,231],[231,140,172],[231,217,140],[255,195,117],[117,255,126],[117,176,255],[255,117,245],[198,198,198],[226,196,170],[170,226,196],[196,170,226],[251,142,255],[255,195,142],[146,255,142],[142,202,255],[214,214,214],[173,223,255],[255,173,223],[223,255,173],[226,226,226],[255,216,198],[239,239,239],[255,255,255]];function convertToU8(t,e){var n=0|(e=e||{bpp:8,header:1,isTransparent:1}).transparent,r=[],i=0|e.bpp||Math.log(E.length)/Math.log(2)|0;0|e.header&&(t.width<256&&t.height<256?r.push([t.width,t.height,i,0]):r.push([0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,i,0]));let s=0,a=t.data;var o=8/i,u=[],l=0|e.paloffset,c=Math.min(E.length,l+(1<<i));let h=255,p=0,d=e.isTransparent;if(void 0===d)for(s=3;!d&&s<a.length;s+=4)d=a[s]<128;else d|=0;e.isTransparent=d;let f=void(s=0),m=0;for(let e=0;e<t.height;++e){u=[];for(let e=0;e<t.width;++e){let t=0,r=Number.POSITIVE_INFINITY;var g=0|a[s++],y=0|a[s++],v=0|a[s++],_=0|a[s++];if(16==i){var C=g>>3<<11|y>>2<<5|v>>3;u.push(255&C,C>>8)}else if(1==i)t=d?128<_:128<(g+y+v)/3,u[e>>3|0]=(u[e>>3]||0)+(t<<7-(7&e));else{var w,b,C=(g<<16)+(y<<8)+v;if(128<_||!d)if(C===f)t=m;else{for(let e=l;e<c;++e)d&&e==n||(b=(g-(w=0|(b=E[e])[0]))*(g-w)+(y-(w=0|b[1]))*(y-w)+(v-(w=0|b[2]))*(v-w))<r&&(t=e,r=b);f=C,m=t}else t=n;t<h&&(h=t),t>p&&(p=t);_=(o-1-e%o)*i;u[e/o|0]=(u[e/o|0]||0)+(t-l<<_)}}r.push(u)}p,h;return r}t.exports.PreBuild=async function prebuild(r){let n=[],u;return r.recurse(e=>{var t;return e.isFile()?("jpg"!=(t=e.extension)&&"png"!=t||function init(){u||(u=new i(r.toJSON())).mkdir("/.R");return n}().push(async function convertImage(o,e){return new Promise((s,t)=>{const a=new Image;a.onload=e=>{var t,r=l("canvas",{width:a.width,height:a.height}).getContext("2d"),r=(r.drawImage(a,0,0),r.getImageData(0,0,a.width,a.height));let n="";for(t of convertToU8(r,{bpp:8,header:1,isTransparent:1}))for(var i of t)n+=i.toString(16).padStart(2,"0");r=`/.R/${o.split(".")[0]}.raw`;u.writeFile(r,n),s()},a.onerror=e=>{t("Could not load image "+o)},a.src=e})}.call(this,e.name,e.node.data)),!1):"."!=e.name[0]}),n.length?(await Promise.all(n),u):r},t.exports.palette=E,t.exports.convertToU8=convertToU8},{"./dom.js":100,"./pngfs.js":121}],87:[function(e,t,r){"use strict";const n=e("./dom.js")["index"];t.exports.Preview=class Preview{constructor(e,t,r){this.view=n(e,{},this),this.model=r,this.parent=t,r.watch(this.view),r.watch("platform",e=>this.resize()),r.watch("previewHTML",e=>this.showHTML(e)),this.resize()}getPlatformSize(){return{pokitto:[220,176],blit:[320,240],espboy:[128,128],meta:[160,128],metro:[320,240]}[this.model.get("platform")]}setExportVisibility(e){this.view.export.classList.toggle("hidden",!e)}resize(){var e,t,r=this.view.screencontainer,n=this.getPlatformSize(),i=this.view.zoom.value;n?([n,e]=n,(t=this.view.screencontainer.querySelector("iframe"))&&(t.style.width=n*i+"px",t.style.height=e*i+"px"),r.style.display="block",r.style.height=e*i+"px",r.style["min-width"]=n*i+"px",r.parentElement.style["min-width"]=n*i+"px"):r.display="none"}showHTML(e){this.view.screen.remove(),this.view.screencontainer.innerHTML=this.view.screen.outerHTML;var t=this.view.screencontainer.querySelector("iframe");t.src="about:blank",e&&(t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close(),t.focus()),this.resize(),this.view.run.textContent=e?"Stop":"Run"}toggleRun(){this.model.set("runSize",this.model.get("previewHTML")?null:this.getPlatformSize())}export(){this.parent.export()}}},{"./dom.js":100}],88:[function(e,t,r){const n=e("./dom.js")["index"];t.exports.ProjectControls=class ProjectControls{constructor(e,t){this.el=e,this.view=n(e,{},this),(this.model=t).watch(this.view)}goToTOP(){this.model.set("state","TOP")}}},{"./dom.js":100}],89:[function(e,t,r){"use strict";var n=e("firebase/app"),i=e("firebase/database");t.exports.Remote=class Remote{#db;#listen;constructor(){}async requestKey(){return(0,i.push)((0,i.child)((0,i.ref)(this.#db),"project")).key}async saveProject(e,t){await(0,i.set)((0,i.ref)(this.#db,"project/"+e),t)}async loadProject(e){e=await(0,i.get)((0,i.ref)(this.#db,"project/"+e));return e.exists()?e.val():void 0}async requestBuild(n,e){return await(0,i.update)((0,i.ref)(this.#db),{["/project/"+n]:e,["/request/"+n]:"build",["/build/"+n]:null}),new Promise((t,e)=>{const r=(0,i.ref)(this.#db,"/build/"+n);(0,i.onValue)(r,e=>{e.exists()&&((0,i.off)(r),t(e.val()))})})}boot(){var e=(0,n.initializeApp)({apiKey:"AIzaSyDsjCMDUl0e50zO_L_g7gWJyfLENuMv2a8",authDomain:"microjs-7d00a.firebaseapp.com",projectId:"microjs-7d00a",storageBucket:"microjs-7d00a.appspot.com",messagingSenderId:"850079858570",appId:"1:850079858570:web:f71216680a1a6c624c1273",databaseURL:"https://microjs-7d00a-default-rtdb.europe-west1.firebasedatabase.app"});this.#db=(0,i.getDatabase)(e)}}},{"firebase/app":112,"firebase/database":113}],90:[function(e,t,r){var n=e("./Flasher.js");const i=e("./samba.js")["SamBA"],s=e("./device.js")["Device"];var{}=e("./SAMDFlash.js");const d=e("./Uint8Buffer.js")["Uint8Buffer"];class FlashOffsetError extends Error{constructor(e){super(e)}}class FileSizeError extends Error{constructor(e){super(e)}}class Flasher{constructor(e,t,r){this._flash=t,this._samba=e,this._observer=r}_samba;_flash;_observer;async erase(e){this._observer.onStatus("Erase flash\n"),await this._flash.eraseAll(e),this._flash.eraseAuto=!1}async write(t,r){var n,i=this._flash.pageSize,s=0,e=t.byteLength;let a=t.byteLength;var o=0;if(r%i!=0||r>=this._flash.totalSize)throw new FlashOffsetError;if((n=Math.trunc((e+i-1)/i))>this._flash.numPages)throw new FileSizeError;if(this._observer.onStatus("Write "+e+" bytes to flash ("+n+" pages)\n"),this._samba.canWriteBuffer)for(var u=0,l=this._samba.writeBufferSize,c=new d(l);0<a;){let e=a<l?a:l;c.reset(),c.copy(new Uint8Array(t.slice(o,o+e))),this._observer.onProgress(u/i,n),a-=e,o+=e,e<l&&(c.fill(0,l-e),e=Math.trunc((e+i-1)/i)*i),await this._flash.loadBuffer(c.view(),0,e),await this._flash.writeBuffer(r+u,e),u+=e}else for(var h=new d(i),p=r/i;0<a;){let e=a<i?a:i;if(h.reset(),h.copy(new Uint8Array(t.slice(o,o+e))),this._observer.onProgress(s,n),a-=e,o+=e,e<i&&(h.fill(0,i-e),e=Math.trunc((e+i-1)/i)*i),await this._flash.loadBuffer(h.view(),0,e),await this._flash.writePage(p+s),++s==n||e!=i)break}this._observer.onProgress(n,n)}async verify(e,t){}}class SAMDFlasher extends n.Flasher{port;samba;device;async connect(){if(this.port)try{this.disconnect()}catch(e){}var e=await navigator.serial.requestPort({}),t=e.getInfo();this.log("VID: 0x"+t.usbVendorId.toString(16)," PID:0x"+t.usbProductId.toString(16)),this.port=e}disconnect(){this.port&&(this.port.close(),this.port=null)}async upload(e,t){this.port||(await this.showConnectPopup(),await this.connect()),this.samba=new i(this.port,{logger:{log:this.log,debug:this.log,error:this.log},debug:!0,trace:!0});var r=this.samba,r=(await r.connect(!1,1e3),new s(r));await r.create(),this.device=r,await this.flashImage(e,t),await this.device.reset()}async flashImage(e,t){if(!this.device)throw"No device";if(!this.samba)throw"No samba";if(!this.device.flash)throw"No device.flash";var r=new Flasher(this.samba,this.device.flash,this);await r.erase(t),await r.write(e,t)}onStatus(e){this.log(e)}onProgress(e,t){this.log("Progress: ",e,t)}}t.exports.upload=async function(t,r){window.retry=async()=>{var e=new SAMDFlasher;await e.connect(),await e.upload(r,t)},await window.retry()}},{"./Flasher.js":82,"./SAMDFlash.js":93,"./Uint8Buffer.js":97,"./device.js":99,"./samba.js":122}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.D2xNvmFlash=void 0;const{Flash:n,FlashCmdError:i,FlashPageError:s,FlashEraseError:a}=e("./SAMDFlash.js");var{}=e("./samba.js");const o=8404992;class D2xNvmFlash extends n{_eraseAuto;constructor(e,t,r,n,i,s){super(e,t,0,r,n,1,16,i,s),this._eraseAuto=!0}get NVM_UR_SIZE(){return 4*this._size}async erase(e,t){var r=4*this._size;if(e%r)throw new a;if(e+t>this.totalSize)throw new a;for(var n=(e+t+r-1)/r,i=e/r;i<n;i++){await this.waitReady();var s=await this.readReg(24),s=(await this.writeReg(24,65515|s),i*r/2);await this.writeReg(28,s),await this.command(2)}}async eraseAll(e){this._samba.canChipErase?await this._samba.chipErase(e):await this.erase(e,this.totalSize-e)}get eraseAuto(){return this._eraseAuto}set eraseAuto(e){this._eraseAuto=e}async getLockRegions(){var e=0;let t=6+o;for(var r=new Array(this._lockRegions),n=0;n<this._lockRegions;n++)n%8==0&&(e=await this._samba.readByte(t++)),r[n]=0==(e&1<<n%8);return r}async getSecurity(){return 0!=(256&await this.readReg(24))}async getBod(){return 0!=(6&await this._samba.readByte(1+o))}canBod(){return!0}async getBor(){return 0!=(7&await this._samba.readByte(1+o))}canBor(){return!0}getBootFlash(){return!0}canBootFlash(){return!1}async readUserRow(e){if(e.length!=this.NVM_UR_SIZE)throw new Error("Invalid row buffer size");await this._samba.read(o,e,this.NVM_UR_SIZE)}async writeOptions(){var e=new Uint8Array(this.NVM_UR_SIZE);if(this.canBor()&&this._bor.isDirty()&&this._bor.get()!=await this.getBor()&&(await this.readUserRow(e),this._bor.get()?e[1]|=7:e[1]&=-8),this.canBod()&&this._bod.isDirty()&&this._bod.get()!=await this.getBod()&&(await this.readUserRow(e),this._bod.get()?e[1]|=6:e[1]&=-7),this._regions.isDirty()){for(var t=await this.getLockRegions(),r=this._regions.get(),n=!0,i=0;i<r.length&&n;i++)n&=r[i]==t[i];if(!n){await this.readUserRow(e);for(var s=0;s<this._regions.get().length;s++)this._regions.get()[s]?e[6+s/8]&=~(1<<s%8):e[6+s/8]|=1<<s%8}}if(e){await this.writeReg(4,await this.readReg(4)|1<<18|128),await this.writeReg(28,o/2),await this.command(5);for(var a=0;a<this.NVM_UR_SIZE;a+=this._size)await this.loadBuffer(e,a,this._size),await this.command(68),await this.prepareApplet(),await this._wordCopy.setDstAddr(o+a),await this._wordCopy.setSrcAddr(this._onBufferA?this._pageBufferA:this._pageBufferB),this._onBufferA=!this._onBufferA,await this.waitReady(),await this._wordCopy.runv(),await this.writeReg(28,(o+a)/2),await this.command(6)}this._security.isDirty()&&1==this._security.get()&&this._security.get()!=await this.getSecurity()&&await this.command(69)}async writePage(e){if(e>=this._pages)throw new s;await this.writeReg(4,await this.readReg(4)|1<<18|128),this.eraseAuto&&e%4==0&&await this.erase(e*this._size,4*this._size),await this.command(68);e=this._addr+e*this._size;await this.prepareApplet(),await this._wordCopy.setDstAddr(e),await this._wordCopy.setSrcAddr(this._onBufferA?this._pageBufferA:this._pageBufferB),this._onBufferA=!this._onBufferA,await this.waitReady(),await this._wordCopy.runv(),await this.writeReg(28,e/2),await this.command(4)}async waitReady(){for(;0==(1&await this.readReg(20)););}async readPage(e,t){if(e>=this._pages)throw new s;await this._samba.read(this._addr+e*this._size,t,this._size)}async readReg(e){return this._samba.readWord(1090535424+e)}async writeReg(e,t){await this._samba.writeWord(1090535424+e,t)}async command(e){if(await this.waitReady(),await this.writeReg(0,42240|e),await this.waitReady(),2&await this.readReg(20))throw await this.writeReg(20,2),new i}async writeBuffer(e,t){this.eraseAuto&&await this.erase(e,t),await super.writeBuffer(e,t)}}r.D2xNvmFlash=D2xNvmFlash},{"./SAMDFlash.js":93,"./samba.js":122}],92:[function(e,t,r){var n=e("./SAMDFlash.js")["Flash"],{}=e("./samba.js");const i=1090535424;const o=8404992;class FlashEraseError extends Error{constructor(e){super(e)}}t.exports.FlashEraseError=FlashEraseError;class FlashCmdError extends Error{constructor(e){super(e)}}t.exports.FlashCmdError=FlashCmdError;class FlashPageError extends Error{constructor(e){super(e)}}t.exports.FlashPageError=FlashPageError;class D5xNvmFlash extends n{_eraseAuto;constructor(e,t,r,n,i,s){super(e,t,0,r,n,1,32,i,s),this._eraseAuto=!0}get NVM_UP_SIZE(){return this._size}async erase(e,t){var r=16*this._size;if(e%r)throw new FlashEraseError;if(e+t>this.totalSize)throw new FlashEraseError;for(var n=(e+t+r-1)/r,i=e/r;i<n;i++)await this.writeRegU32(20,i*r),await this.command(1)}async waitReady(){for(;0==(1&await this.readRegU16(18)););}async eraseAll(e){this._samba.canChipErase?await this._samba.chipErase(e):await this.erase(e,this.totalSize-e)}get eraseAuto(){return this._eraseAuto}set eraseAuto(e){this._eraseAuto=e}async getLockRegions(){var e=0;let t=8+o;for(var r=new Array(this._lockRegions),n=0;n<this._lockRegions;n++)n%8==0&&(e=await this._samba.readByte(t++)),r[n]=0==(e&1<<n%8);return r}async getSecurity(){return!1}async getBod(){return 0==(1&await this._samba.readByte(o))}canBod(){return!0}async getBor(){return 0!=(2&await this._samba.readByte(1+o))}canBor(){return!0}getBootFlash(){return!0}canBootFlash(){return!1}async readUserPage(e){if(e.length!=this.NVM_UP_SIZE)throw new Error("Invalid row buffer size");await this._samba.read(o,e,this.NVM_UP_SIZE)}async writeOptions(){var e=new Uint8Array(this.NVM_UP_SIZE);if(this.canBor()&&this._bor.isDirty()&&this._bor.get()!=await this.getBor()&&(await this.readUserPage(e),this._bor.get()?e[1]|=2:e[1]&=-3),this.canBod()&&this._bod.isDirty()&&this._bod.get()!=await this.getBod()&&(await this.readUserPage(e),this._bod.get()?e[0]&=-2:e[0]|=1),this._regions.isDirty()){for(var t=await this.getLockRegions(),r=this._regions.get(),n=!0,i=0;i<r.length&&n;i++)n&=r[i]==t[i];if(!n){await this.readUserPage(e);for(var s=0;s<this._regions.get().length;s++)this._regions.get()[s]?e[8+s/8]&=~(1<<s%8):e[8+s/8]|=1<<s%8}}if(e){await this.writeRegU16(0,65487&(49152|await this.readRegU16(0))),await this.writeRegU32(20,o),await this.command(0);for(var a=0;a<this.NVM_UP_SIZE;a+=this._size)await this.loadBuffer(e,a,16),await this.command(21),await this.prepareApplet(),await this._wordCopy.setDstAddr(o+a),await this._wordCopy.setSrcAddr(this._onBufferA?this._pageBufferA:this._pageBufferB),await this._wordCopy.setWords(4),this._onBufferA=!this._onBufferA,await this.waitReady(),await this._wordCopy.runv(),await this.writeRegU32(20,o+a),await this.command(4)}this._security.isDirty()&&1==this._security.get()&&this._security.get()!=await this.getSecurity()&&await this.command(22)}async writePage(e){if(e>=this._pages)throw new FlashPageError;await this.writeRegU16(0,65487&(49152|await this.readRegU16(0))),this.eraseAuto&&e%16==0&&await this.erase(e*this._size,16*this._size),await this.command(21);e=this._addr+e*this._size;await this.prepareApplet(),await this._wordCopy.setDstAddr(e),await this._wordCopy.setSrcAddr(this._onBufferA?this._pageBufferA:this._pageBufferB),await this._wordCopy.setWords(this._size/4),this._onBufferA=!this._onBufferA,await this.waitReady(),await this._wordCopy.runv(),await this.writeRegU32(20,e/2),await this.command(3)}async readPage(e,t){if(e>=this._pages)throw new FlashPageError;await this._samba.read(this._addr+e*this._size,t,this._size)}async readRegU16(e){return await this._samba.readByte(i+e)|await this._samba.readByte(i+e+1)<<8}async writeRegU16(e,t){await this._samba.writeByte(i+e,255&t),await this._samba.writeByte(i+e,t>>8&255)}async readRegU32(e){return this._samba.readWord(i+e)}async writeRegU32(e,t){await this._samba.writeWord(i+e,t)}async command(e){if(await this.waitReady(),await this.writeRegU32(4,42240|e),await this.waitReady(),206&await this.readRegU16(16))throw await this.writeRegU16(16,206),new FlashCmdError}async writeBuffer(e,t){this.eraseAuto&&e/this._size%16==0&&await this.erase(e,t),await super.writeBuffer(e,t)}}t.exports.D5xNvmFlash=D5xNvmFlash},{"./SAMDFlash.js":93,"./samba.js":122}],93:[function(e,t,r){const l=e("./wordcopyapplet.js")["WordCopyApplet"];var{}=e("./samba.js");class FlashConfigError extends Error{constructor(e){super(e)}}t.exports.FlashConfigError=FlashConfigError;class FlashRegionError extends Error{constructor(e){super(e)}}t.exports.FlashRegionError=FlashRegionError;class FlashEraseError extends Error{constructor(e){super(e)}}t.exports.FlashEraseError=FlashEraseError;class FlashCmdError extends Error{constructor(e){super(e)}}t.exports.FlashCmdError=FlashCmdError;class FlashPageError extends Error{constructor(e){super(e)}}t.exports.FlashPageError=FlashPageError;class FlashOption{constructor(e){this._dirty=!1,this._value=e}set(e){this._value=e,this._dirty=!0}get(){return this._value}isDirty(){return this._dirty}_value;_dirty}t.exports.Flash=class Flash{constructor(e,t,r,n,i,s,a,o,u){if(this._samba=e,this._name=t,this._addr=r,this._pages=n,this._size=i,this._planes=s,this._lockRegions=a,this._user=o,this._stack=u,this._bootFlash=new FlashOption(!0),this._bod=new FlashOption(!0),this._bor=new FlashOption(!0),this._security=new FlashOption(!0),this._regions=new FlashOption(new Array(0)),this._wordCopy=new l(e,o),0!=(i&i-1))throw new FlashConfigError;if(0!=(n&n-1))throw new FlashConfigError;if(0!=(a&a-1))throw new FlashConfigError;this._onBufferA=!0,this._pageBufferA=4*Math.trunc((this._user+this._wordCopy.size+3)/4),this._pageBufferB=this._pageBufferA+i}_samba;_name;_addr;_pages;_size;_planes;_lockRegions;_user;_stack;_prepared=!1;get address(){return this._addr}get pageSize(){return this._size}get numPages(){return this._pages}get numPlanes(){return this._planes}get totalSize(){return this._size*this._pages}get lockRegions(){return this._lockRegions}setLockRegions(e){if(e.length>this._lockRegions)throw new FlashRegionError;this._regions.set(e)}setSecurity(){this._security.set(!0)}setBod(e){this.canBod()&&this._bod.set(e)}setBor(e){this.canBor()&&this._bor.set(e)}setBootFlash(e){this.canBootFlash()&&this._bootFlash.set(e)}async writeBuffer(e,t){await this._samba.writeBuffer(this._onBufferA?this._pageBufferA:this._pageBufferB,e+this._addr,t)}async loadBuffer(e,t=0,r=e.length){0<t&&(e=e.subarray(t)),await this._samba.write(this._onBufferA?this._pageBufferA:this._pageBufferB,e,r)}async prepareApplet(){this._prepared||(await this._wordCopy.setWords(this._size/4),await this._wordCopy.setStack(this._stack),this._prepared=!0)}_wordCopy;_bootFlash;_regions;_bod;_bor;_security;_onBufferA=!0;_pageBufferA=0;_pageBufferB=0}},{"./samba.js":122,"./wordcopyapplet.js":124}],94:[function(e,t,r){const n=e("./dom.js")["index"],l=e("./Model.js")["Model"];t.exports.TOP=class TOP{#el;#view;#parent;#model;constructor(e,t,r){this.#el=e,this.#view=n(e,{},this),this.#parent=t,(this.#model=r).watch(this.#view),r.watch("state",e=>this.changeState(e))}changeState(e){this.#el.classList.toggle("hidden",e!=this.constructor.name)}clickProject(e){e.target!=e.currentTarget&&this[e.target.getAttribute("bind-click")]?.(e)}checkName(){return this.#view.newprojectname.value.trim().replace(/[^a-zA-Z 0-9]+/,"").substr(0,18)}async newProject(){var t=this.#view.newprojectname.value.trim(),r=this.checkName(),n=this.#view.newprojectname;if(0==r.length)n.focus(),n.placeholder="Enter Your Project's name here.";else{var i,s=this.#model.get("projectList",[]);let e=0;for(i of s)if(e<=(0|i.id)&&(e=1+(0|i.id)),i.name.toLowerCase()==r.toLowerCase())return n.focus(),n.placeholder="Name already taken by another project.",void(n.value="");var a,o,u=await this.#parent.remote.loadProject(t),u=(u&&(a="project-"+e,(o=new l).useStorage(a),o.set("fs",u.fs),o.set("RPIN",t),this.#model.set(a,o)),{id:e,name:r});s.push(u),this.#model.set("projectId",u.id),this.#model.set("projectName",u.name),this.#model.set("state","IDE"),this.#model.set("projectList",s)}}findProject(e){e:for(const t of this.#model.get("projectList",[])){for(const r in e)if(e[r]!=t[r])continue e;return t}}openProject(e){e=this.findProject({id:e.target.getAttribute("project-id")});this.#model.set("projectId",e.id),this.#model.set("projectName",e.name),this.#model.set("state","IDE")}deleteProject(){var e=this.findProject({id:event.target.getAttribute("project-id")}),t=this.#model.get("projectList",[]),r=t.indexOf(e),t=(t.splice(r,1),this.#model.dirty("projectList"),e.id),r="project-"+t;let n=this.#model.get(r,null);(n=n||new l).destroy(r),this.#model.set(r,null)}}},{"./Model.js":85,"./dom.js":100}],95:[function(e,t,r){const n=e("./dom.js")["dom"];t.exports.TabContainer=class TabContainer{constructor(e){this.onClose=null,this.onActivate=null,this.tabs={},this.node=e,this.tabset=n(e,{className:"tabset"}),this.container=n(e,{className:"tabcontainer"})}close(n){const i=this.tabs[n];if(i&&(!this.onClose||!1!==this.onClose(i.contents))){let e=null,t=null,r=null;for(var s in this.tabs){const i=this.tabs[s]["tab"];if(-1==i.className.indexOf("inactive"))e=s;else if(e){if(!r){r=s;break}}else t=s}e==n&&(t?this.activate(t):r&&this.activate(r)),i.tab.remove(),i.contents.remove(),delete this.tabs[n]}}active(){for(var e in this.tabs){var{tab:t,contents:r}=this.tabs[e];if(-1==t.className.indexOf("inactive"))return{name:e,contents:r}}}add(t,e){var r=[];this.onClose&&r.push(n("span",{className:"tabclose",textContent:"x",onclick:this.close.bind(this,t)})),this.tabs[t]={tab:n(this.tabset,{textContent:t,className:"tab inactive",onclick:e=>{this.activate(t)}},r),contents:e}}activate(e){var t,r=this.tabs[e];if(!r)return!1;for(;this.container.lastChild;)this.container.removeChild(this.container.lastChild);for(t in this.container.appendChild(r.contents),this.tabs)this.tabs[t].tab.className="tab "+(t==e?"active":"inactive");return this.onActivate&&this.onActivate(r.contents),!0}}},{"./dom.js":100}],96:[function(e,t,r){const a=e("./dom.js")["dom"];t.exports.TreeListNode=class TreeListNode{constructor(t,r,n,i){this.path=r+t.name,this.entry=t,i[this.path]=this;var e=r.split("/").length-2,e="&nbsp;".repeat(2*e),s=Object.values(t.node.children||{}).sort((e,t)=>e.node.children&&!t.node.children||e.name>t.name);this.dom=a("div",{className:"treenode "+this.entry.node.constructor.name,onclick:e=>{e.stopPropagation(),e.preventDefault(),n(r+t.name)}},[["div",{innerHTML:e+t.name,className:"filelabel"}],...s.map(e=>new TreeListNode(e,this.path+"/",n,i).dom)])}setActive(e){this.dom.classList.toggle("active",!!e)}isActive(){return this.dom.classList.contains("active")}isFile(){return this.entry.isFile()}isDirectory(){return this.entry.isDirectory()}}},{"./dom.js":100}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Uint8Buffer=void 0,r.toByteArray=function toByteArray(t){var r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){var n=t.charCodeAt(e);r[e]=255&n}return r},r.toHex=function toHex(e,t=2){return"0x"+(e>>>0).toString(16).toUpperCase().padStart(t,"0")},t.exports.sleep=async function sleep(t){return new Promise(e=>setTimeout(e,t))};r.Uint8Buffer=class Uint8Buffer{readOffset=0;writeOffset=0;size;_buffer;_view;constructor(e=64){this.size=e,this._buffer=new ArrayBuffer(this.size),this._view=new Uint8Array(this._buffer)}get length(){return this.writeOffset-this.readOffset}shift(){if(!(this.length<=0))return this._view[this.readOffset++]}grow(e){var t=new ArrayBuffer(e);const r=new Uint8Array(t);this._view.forEach((e,t)=>r[t]=e),this.size=e,this._buffer=t,this._view=r}fill(e,t=1){this.ensure(t),this._view.fill(e,this.writeOffset,this.writeOffset+t),this.writeOffset+=t}ensure(e){this.size-this.writeOffset<e&&(e=this.size+Math.max(e,this.size),this.grow(e))}pushBytes(t,r,n){for(let e=0;e<r;e++)n?this.push(t>>8*e&255):this.push(t>>8*(r-e)&255)}reset(){this.writeOffset=0,this.readOffset=0}push(...e){this.ensure(e.length),this._view.set(e,this.writeOffset),this.writeOffset+=e.length}copy(e){this.ensure(e.length),this._view.set(e,this.writeOffset),this.writeOffset+=e.length}view(){return new Uint8Array(this._buffer,this.readOffset,this.writeOffset)}}},{}],98:[function(e,t,r){"use strict";e("./samba.js");t.exports.Applet=class Applet{constructor(e,t,r,n,i,s,a){this._samba=e,this._addr=t,this._size=n,this._start=i,this._stack=s,this._reset=a,this._code=r,this._installed=!1}get size(){return this._size}get addr(){return this._addr}_samba;_addr;_size;_start;_stack;_reset;_code;_installed;async checkInstall(){this._installed||(await this._samba.write(this._addr,this._code,this._size),this._installed=!0)}async setStack(e){await this.checkInstall(),await this._samba.writeWord(this._stack,e)}async run(){await this.checkInstall(),await this._samba.go(this._start+1)}async runv(){await this.checkInstall(),await this._samba.writeWord(this._reset,this._start+1),await this._samba.go(this._stack)}}},{"./samba.js":122}],99:[function(e,t,r){var{}=e("./samba.js");const s=e("./SAMD2x.js")["D2xNvmFlash"],a=e("./SAMD5x.js")["D5xNvmFlash"];var{}=e("./SAMDFlash.js");const o={FAMILY_NONE:0,FAMILY_SAM7S:1,FAMILY_SAM7SE:2,FAMILY_SAM7X:3,FAMILY_SAM7XC:4,FAMILY_SAM7L:5,FAMILY_SAM3N:6,FAMILY_SAM3S:7,FAMILY_SAM3U:8,FAMILY_SAM3X:9,FAMILY_SAM3A:10,FAMILY_SAM4S:11,FAMILY_SAM4E:12,FAMILY_SAM9XE:13,FAMILY_SAMD21:14,FAMILY_SAMR21:15,FAMILY_SAML21:16,FAMILY_SAMD51:17,FAMILY_SAME51:18,FAMILY_SAME53:19,FAMILY_SAME54:20,FAMILY_SAME70:21,FAMILY_SAMS70:22,FAMILY_SAMV70:23,FAMILY_SAMV71:24};class DeviceUnsupportedError extends Error{constructor(e){super(e)}}t.exports.DeviceUnsupportedError=DeviceUnsupportedError;t.exports.Device=class Device{_samba;_flash;_family;_uniqueId;constructor(e){this._samba=e,this._flash=void 0,this._uniqueId=void 0,this._family=o.FAMILY_NONE}async create(){var e,t=0,r=0,n=0,i=null;switch(3925868544==(4278190080&await this._samba.readWord(0))?t=await this._samba.readWord(4294963776):50688==(e=65520&await this._samba.readWord(3758157056))?n=await this._samba.readWord(1090527256):49728==e?8388608==(4293918720&await this._samba.readWord(4))?(t=(e=await this.readChipId()).chipId,r=e.extChipId):n=await this._samba.readWord(1090527256):(t=(e=await this.readChipId()).chipId,r=e.extChipId),2147483616&t){case 657066560:case 657066304:case 657064768:this._family=o.FAMILY_SAM7SE,i=null;break;case 655034944:this._family=o.FAMILY_SAM7S,i=null;break;case 655165760:case 655034688:this._family=o.FAMILY_SAM7S,i=null;break;case 655099712:case 654968640:case 654902592:case 654836544:case 654639680:this._family=o.FAMILY_SAM7S,i=null;break;case 656149056:case 656083264:case 656017216:this._family=o.FAMILY_SAM7XC,i=null;break;case 660343360:case 660277568:case 660211520:this._family=o.FAMILY_SAM7X,i=null;break;case 696717024:case 697765600:case 698814176:this._family=o.FAMILY_SAM4S,i=null;break;case 696716336:case 697764912:case 698813488:this._family=o.FAMILY_SAM4S,i=null;break;case 679939296:case 680987872:case 682036448:this._family=o.FAMILY_SAM4S,i=null;break;case 680266976:case 681315552:case 682364128:this._family=o.FAMILY_SAM4S,i=null;break;case 680266464:case 681315040:case 682363616:this._family=o.FAMILY_SAM4S,i=null;break;case 680200672:case 681249248:case 682297824:this._family=o.FAMILY_SAM4S,i=null;break;case 680200160:case 681248736:case 682297312:this._family=o.FAMILY_SAM4S,i=null;break;case 691276128:case 692324704:case 693373280:this._family=o.FAMILY_SAM3N,i=null;break;case 691603296:case 692651872:case 693700448:this._family=o.FAMILY_SAM3N,i=null;break;case 691537248:case 692585824:case 693634400:this._family=o.FAMILY_SAM3N,i=null;break;case 691536736:case 692585312:case 693633888:this._family=o.FAMILY_SAM3N,i=null;break;case 698026592:case 699075168:this._family=o.FAMILY_SAM3S,i=null;break;case 681249376:case 682297952:this._family=o.FAMILY_SAM3S,i=null;break;case 679479648:case 680528224:case 681576800:this._family=o.FAMILY_SAM3S,i=null;break;case 680134496:case 681183072:case 682231648:this._family=o.FAMILY_SAM3S,i=null;break;case 680068448:case 681117024:case 682165600:this._family=o.FAMILY_SAM3S,i=null;break;case 671091040:case 672139616:this._family=o.FAMILY_SAM3U,i=null;break;case 671745888:case 672794464:this._family=o.FAMILY_SAM3U,i=null;break;case 671679840:case 672728416:this._family=o.FAMILY_SAM3U,i=null;break;case 678300256:case 677251680:case 676203104:this._family=o.FAMILY_SAM3X,i=null;break;case 677054816:case 676006240:this._family=o.FAMILY_SAM3X,i=null;break;case 675154528:case 674957664:this._family=o.FAMILY_SAM3A,i=null;break;case 657655616:case 657655104:this._family=o.FAMILY_SAM7L,i=null;break;case 848995232:case 848991136:case 848917408:this._family=o.FAMILY_SAM9XE,i=null;break;case 600575200:switch(r){case 1180160:case 1180161:this._family=o.FAMILY_SAM4E,i=null;break;case 1180168:case 1180169:this._family=o.FAMILY_SAM4E,i=null}break;case 554502656:case 553782272:case 553782784:this._family=o.FAMILY_SAME70,i=null;break;case 555551232:case 554830848:case 554831360:this._family=o.FAMILY_SAMS70,i=null;break;case 557648384:case 556928e3:this._family=o.FAMILY_SAMV70,i=null;break;case 556599808:case 555879424:case 555879936:this._family=o.FAMILY_SAMV71,i=null;break;case 0:switch(4294902015&n){case 268500995:case 268501e3:case 268501005:case 268501025:case 268501028:case 268501031:case 268501078:case 268501091:this._family=o.FAMILY_SAMD21,i=new s(this._samba,"ATSAMD21x15",512,64,536872960,536875008);break;case 268500994:case 268500999:case 268501004:case 268501024:case 268501027:case 268501030:case 268501077:case 268501090:this._family=o.FAMILY_SAMD21,i=new s(this._samba,"ATSAMD21x16",1024,64,536875008,536879104);break;case 268500993:case 268500998:case 268501003:case 268501008:this._family=o.FAMILY_SAMD21,i=new s(this._samba,"ATSAMD21x17",2048,64,536879104,536887296);break;case 268500992:case 268500997:this._uniqueId=await this.readChipUniqueId();case 268501002:case 268501007:this._family=o.FAMILY_SAMD21,i=new s(this._samba,"ATSAMD21x18",4096,64,536887296,536903680);break;case 268501022:case 268501019:this._family=o.FAMILY_SAMR21,i=new s(this._samba,"ATSAMR21x16",1024,64,536875008,536879104);break;case 268501021:this._uniqueId=await this.readChipUniqueId();case 268501018:this._family=o.FAMILY_SAMR21,i=new s(this._samba,"ATSAMR21x17",2048,64,536879104,536887296);break;case 268501020:case 268501017:this._family=o.FAMILY_SAMR21,this._uniqueId=await this.readChipUniqueId(),i=new s(this._samba,"ATSAMR21x18",4096,64,536887296,536903680);break;case 268501016:this._family=o.FAMILY_SAMR21,i=new s(this._samba,"ATSAMR21x19",4096,64,536887296,536903680);break;case 276889613:case 276889628:this._family=o.FAMILY_SAMD21,i=new s(this._samba,"ATSAML21x15",512,64,536872960,536875008);break;case 276889602:case 276889607:case 276889612:case 276889617:case 276889622:case 276889627:this._family=o.FAMILY_SAML21,i=new s(this._samba,"ATSAML21x16",1024,64,536875008,536879104);break;case 276889601:case 276889606:case 276889611:case 276889616:case 276889621:case 276889626:this._family=o.FAMILY_SAML21,i=new s(this._samba,"ATSAML21x17",2048,64,536879104,536887296);break;case 276889600:case 276889605:case 276889610:case 276889615:case 276889620:case 276889625:this._family=o.FAMILY_SAML21,i=new s(this._samba,"ATSAML21x18",4096,64,536887296,536903680);break;case 1611005958:case 1611005960:this._family=o.FAMILY_SAMD51,i=new a(this._samba,"ATSAMD51x18",512,512,536887296,536903680);break;case 1611005953:case 1611005955:case 1611005957:case 1611005959:this._family=o.FAMILY_SAMD51,i=new a(this._samba,"ATSAMD51x19",1024,512,536887296,536903680);break;case 1611005952:case 1611005954:case 1611005956:this._family=o.FAMILY_SAMD51,i=new a(this._samba,"ATSAMD51x20",2048,512,536887296,536903680);break;case 1635844099:this._family=o.FAMILY_SAME51,i=new a(this._samba,"ATSAME51x18",512,512,536887296,536903680);break;case 1635844098:case 1635844097:this._family=o.FAMILY_SAME51,i=new a(this._samba,"ATSAME51x19",1024,512,536887296,536903680);break;case 1635844100:case 1635844096:this._family=o.FAMILY_SAME51,i=new a(this._samba,"ATSAME51x20",2048,512,536887296,536903680);break;case 1635975174:this._family=o.FAMILY_SAME53,i=new a(this._samba,"ATSAME53x18",512,512,536887296,536903680);break;case 1635975173:case 1635975171:this._family=o.FAMILY_SAME53,i=new a(this._samba,"ATSAME53x19",1024,512,536887296,536903680);break;case 1635975172:case 1635975170:this._family=o.FAMILY_SAME53,i=new a(this._samba,"ATSAME53x20",2048,512,536887296,536903680);break;case 1636040705:case 1636040707:this._family=o.FAMILY_SAME54,i=new a(this._samba,"ATSAME54x19",1024,512,536887296,536903680);break;case 1636040704:case 1636040706:this._family=o.FAMILY_SAME54,i=new a(this._samba,"ATSAME54x20",2048,512,536887296,536903680);break;default:throw new DeviceUnsupportedError}break;default:throw new DeviceUnsupportedError}if(null==i)throw new DeviceUnsupportedError;this._flash=i}async reset(){try{switch(this._family){case o.FAMILY_SAMD21:case o.FAMILY_SAMR21:case o.FAMILY_SAML21:case o.FAMILY_SAMD51:case o.FAMILY_SAME51:case o.FAMILY_SAME53:case o.FAMILY_SAME54:case o.FAMILY_SAME70:case o.FAMILY_SAMS70:case o.FAMILY_SAMV70:case o.FAMILY_SAMV71:await this._samba.writeWord(3758157068,100270084);break;case o.FAMILY_SAM3X:case o.FAMILY_SAM3S:case o.FAMILY_SAM3A:await this._samba.writeWord(1074665984,2768240653);break;case o.FAMILY_SAM3U:await this._samba.writeWord(1074663936,2768240653);break;case o.FAMILY_SAM3N:case o.FAMILY_SAM4S:await this._samba.writeWord(1074664448,2768240653);break;case o.FAMILY_SAM4E:await this._samba.writeWord(1074665472,2768240653);break;case o.FAMILY_SAM7S:case o.FAMILY_SAM7SE:case o.FAMILY_SAM7X:case o.FAMILY_SAM7XC:case o.FAMILY_SAM7L:case o.FAMILY_SAM9XE:await this._samba.writeWord(4294966528,2768240653)}}catch(e){}}get family(){return this._family}get flash(){return this._flash}get chipUniqueId(){return this._uniqueId}async readChipUniqueId(){var e="";return(e+=(await this._samba.readWord(8429580)>>>0).toString(16).toUpperCase().padStart(8,"0"))+(await this._samba.readWord(8429632)>>>0).toString(16).toUpperCase().padStart(8,"0")+(await this._samba.readWord(8429636)>>>0).toString(16).toUpperCase().padStart(8,"0")+(await this._samba.readWord(8429640)>>>0).toString(16).toUpperCase().padStart(8,"0")}async readChipId(){let e=await this._samba.readWord(1074661184),t=0;return 0!=e?await this._samba.readWord(1074661188):0!=(e=await this._samba.readWord(1074661696))&&(t=await this._samba.readWord(1074661700)),{chipId:e,extChipId:t}}}},{"./SAMD2x.js":91,"./SAMD5x.js":92,"./SAMDFlash.js":93,"./samba.js":122}],100:[function(e,t,r){t.exports.dom=function dom(...e){let t="div",r=null,n=null,i=null;for(var s of e)void 0!==s&&("string"==typeof s?t=s:s&&s instanceof Element?r=s:s&&Array.isArray(s)?i=s:s&&"object"==typeof s&&(n=s));let a=document.createElement(t);if(r&&r.appendChild(a),n){if(n.style&&(Object.assign(a.style,n.style),delete(n=Object.assign({},n)).style),n.attr){for(var o in n.attr)a.setAttribute(o,n.attr[o]);delete n.attr}Object.assign(a,n)}return i&&i.forEach(e=>{e&&(Array.isArray(e)?dom(a,...e):e instanceof Element&&a.appendChild(e))}),a},t.exports.index=function index(r,n={},i=null){r.className&&(Array.isArray(n[r.className])?n[r.className].push(r):n[r.className]=[r]),r.id&&(n[r.id]=r);let t=!0;if(i){var s=i.constructor.name.toLowerCase();for(let e=0;e<r.attributes.length;++e){var a,o=r.attributes[e].name,u=r.attributes[e].value;2!=(o=o.split("-")).length||"index"!=o[0]&&"bind"!=o[0]||"index"==o[0]&&o[1]!=s||("function"!=typeof(a=i[u])?console.warn(`No method ${u} in ${i.constructor.name}.`,r):"index"==o[0]?t=!1!==a.call(i,r):"bind"==o[0]&&r.addEventListener(o[1],i[u].bind(i)))}}if(t)for(let e=0,t=r.children.length;e<t;++e)index(r.children[e],n,i);return n}},{}],101:[function(s,j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=e.ESPLoader=e.CHIP_FAMILY_ESP8266=e.CHIP_FAMILY_ESP32S3=e.CHIP_FAMILY_ESP32S2=e.CHIP_FAMILY_ESP32H2=e.CHIP_FAMILY_ESP32C6=e.CHIP_FAMILY_ESP32C3=e.CHIP_FAMILY_ESP32=void 0;const U=t=>{var r=[];for(let e=0;e<t.length;e++){var n=t.charCodeAt(e);n<=255&&r.push(n)}return r},a=e=>"["+e.map(e=>v(e)).join(", ")+"]",v=(e,t=2)=>{e=e.toString(16).toUpperCase();return e.startsWith("-")?"-0x"+e.substring(1).padStart(t,"0"):"0x"+e.padStart(t,"0")},z=t=>new Promise(e=>setTimeout(e,t)),W={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB",25:"32MB",26:"64MB"},q=U(" UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU"),l=12882,c=12883,h=12995,V={4293968129:{name:"ESP8266",family:33382},15736195:{name:"ESP32",family:50},1990:{name:"ESP32-S2",family:l},9:{name:"ESP32-S3",family:c},3942662454:{name:"ESP32-S3(beta2)",family:c},1763790959:{name:"ESP32-C3",family:h},456216687:{name:"ESP32-C3",family:h},3391540258:{name:"ESP32-H2",family:12914},228687983:{name:"ESP32-C6(beta)",family:12998}},G=(e,t)=>{e=Math.floor(e*(t/486));return e<3e3?3e3:e},H=e=>{switch(e){case 50:return{regBase:1072963584,baseFuse:1073061888,macFuse:1073061888,usrOffs:28,usr1Offs:32,usr2Offs:36,mosiDlenOffs:40,misoDlenOffs:44,w0Offs:128,uartDateReg:1610612856,flashOffs:4096};case l:return{regBase:1061167104,baseFuse:1061265408,macFuse:1061265476,usrOffs:24,usr1Offs:28,usr2Offs:32,mosiDlenOffs:36,misoDlenOffs:40,w0Offs:88,uartDateReg:1610612856,flashOffs:4096};case c:return{regBase:1610620928,usrOffs:24,baseFuse:1610641408,macFuse:1610641476,usr1Offs:28,usr2Offs:32,mosiDlenOffs:36,misoDlenOffs:40,w0Offs:88,uartDateReg:1610612864,flashOffs:0};case 33382:return{regBase:1610613248,usrOffs:28,baseFuse:1072693328,macFuse:1072693328,usr1Offs:32,usr2Offs:36,mosiDlenOffs:-1,misoDlenOffs:-1,w0Offs:64,uartDateReg:1610612856,flashOffs:0};case h:return{regBase:1610620928,baseFuse:1610647552,macFuse:1610647620,usrOffs:24,usr1Offs:28,usr2Offs:32,mosiDlenOffs:36,misoDlenOffs:40,w0Offs:88,uartDateReg:1610612860,flashOffs:0};default:return{regBase:-1,baseFuse:-1,macFuse:-1,usrOffs:-1,usr1Offs:-1,usr2Offs:-1,mosiDlenOffs:-1,misoDlenOffs:-1,w0Offs:-1,uartDateReg:-1,flashOffs:-1}}};e.CHIP_FAMILY_ESP32H2=12914,e.CHIP_FAMILY_ESP32C6=12998,e.CHIP_FAMILY_ESP32C3=h,e.CHIP_FAMILY_ESP32S3=c,e.CHIP_FAMILY_ESP32S2=l,e.CHIP_FAMILY_ESP32=50,e.CHIP_FAMILY_ESP8266=33382;class w extends Error{constructor(e){super(e),this.name="SlipReadError"}}const J=async e=>{let t;return 50==e?t=await import("./esp32-273074c1.js"):e==l?t=await import("./esp32s2-f8cf1215.js"):e==c?t=await import("./esp32s3-b0a5f517.js"):33382==e?t=await import("./esp8266-b7fae3a7.js"):e==h&&(t=await import("./esp32c3-8f007052.js")),{...t,text:U(atob(t.text)),data:U(atob(t.data))}};function p(e){let t=e.length;for(;0<=--t;)e[t]=0}const X=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Y=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),K=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576),f=(p(d),new Array(60)),o=(p(f),new Array(512)),u=(p(o),new Array(256)),Q=(p(u),new Array(29)),Z=(p(Q),new Array(30));function A(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let ee,te,re;function B(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}p(Z);const ne=e=>e<256?o[e]:o[256+(e>>>7)],i=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},m=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,i(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},g=(e,t,r)=>{m(e,r[2*t],r[2*t+1])},ie=(e,t)=>{let r=0;for(;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1},se=(e,t,r)=>{var n=new Array(16);let i,s,a=0;for(i=1;i<=15;i++)a=a+r[i-1]<<1,n[i]=a;for(s=0;s<=t;s++){var o=e[2*s+1];0!==o&&(e[2*s]=ie(n[o]++,o))}},ae=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},oe=e=>{8<e.bi_valid?i(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},le=(e,t,r,n)=>{var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]},ce=(e,t,r)=>{var n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&le(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!le(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},he=(e,t,r)=>{let n,i,s,a,o=0;if(0!==e.sym_next)for(;n=255&e.pending_buf[e.sym_buf+o++],n+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],0==n?g(e,i,t):(s=u[i],g(e,s+256+1,t),0!==(a=X[s])&&(i-=Q[s],m(e,i,a)),n--,s=ne(n),g(e,s,r),0!==(a=Y[s])&&(n-=Z[s],m(e,n,a))),o<e.sym_next;);g(e,256,t)},pe=(o,u)=>{var e=u.dyn_tree,t=u.stat_desc.static_tree,r=u.stat_desc.has_stree,n=u.stat_desc.elems;let i,s,a,l=-1;for(o.heap_len=0,o.heap_max=573,i=0;i<n;i++)0!==e[2*i]?(o.heap[++o.heap_len]=l=i,o.depth[i]=0):e[2*i+1]=0;for(;o.heap_len<2;)e[2*(a=o.heap[++o.heap_len]=l<2?++l:0)]=1,o.depth[a]=0,o.opt_len--,r&&(o.static_len-=t[2*a+1]);for(u.max_code=l,i=o.heap_len>>1;1<=i;i--)ce(o,e,i);for(a=n;i=o.heap[1],o.heap[1]=o.heap[o.heap_len--],ce(o,e,1),s=o.heap[1],o.heap[--o.heap_max]=i,o.heap[--o.heap_max]=s,e[2*a]=e[2*i]+e[2*s],o.depth[a]=(o.depth[i]>=o.depth[s]?o.depth[i]:o.depth[s])+1,e[2*i+1]=e[2*s+1]=a,o.heap[1]=a++,ce(o,e,1),2<=o.heap_len;);o.heap[--o.heap_max]=o.heap[1];{var c=o,h=u.dyn_tree,p=u.max_code,d=u.stat_desc.static_tree,f=u.stat_desc.has_stree,m=u.stat_desc.extra_bits,g=u.stat_desc.extra_base,y=u.stat_desc.max_length;let e,t,r,n,i,s,a=0;for(n=0;n<=15;n++)c.bl_count[n]=0;for(h[2*c.heap[c.heap_max]+1]=0,e=c.heap_max+1;e<573;e++)t=c.heap[e],(n=h[2*h[2*t+1]+1]+1)>y&&(n=y,a++),h[2*t+1]=n,t>p||(c.bl_count[n]++,i=0,t>=g&&(i=m[t-g]),s=h[2*t],c.opt_len+=s*(n+i),f&&(c.static_len+=s*(d[2*t+1]+i)));if(0!==a){do{for(n=y-1;0===c.bl_count[n];)n--}while(c.bl_count[n]--,c.bl_count[n+1]+=2,c.bl_count[y]--,0<(a-=2));for(n=y;0!==n;n--)for(t=c.bl_count[n];0!==t;)p<(r=c.heap[--e])||(h[2*r+1]!==n&&(c.opt_len+=(n-h[2*r+1])*h[2*r],h[2*r+1]=n),t--)}}se(e,l,o.bl_count)},de=(e,t,r)=>{let n,i,s=-1,a=t[1],o=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++o<u&&i===a||(o<l?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=i,l=0===a?(u=138,3):i===a?(u=6,3):(u=7,4))},fe=(e,t,r)=>{let n,i,s=-1,a=t[1],o=0,u=7,l=4;for(0===a&&(u=138,l=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++o<u&&i===a)){if(o<l)for(;g(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==s&&(g(e,i,e.bl_tree),o--),g(e,16,e.bl_tree),m(e,o-3,2)):o<=10?(g(e,17,e.bl_tree),m(e,o-3,3)):(g(e,18,e.bl_tree),m(e,o-11,7));o=0,s=i,l=0===a?(u=138,3):i===a?(u=6,3):(u=7,4)}};let me=!1;const ye=(e,t,r,n)=>{m(e,0+(n?1:0),3),oe(e),i(e,r),i(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var ve={_tr_init:e=>{if(!me){{let e,t,r,n,i;var s=new Array(16);for(r=0,n=0;n<28;n++)for(Q[n]=r,e=0;e<1<<X[n];e++)u[r++]=n;for(u[r-1]=n,i=0,n=0;n<16;n++)for(Z[n]=i,e=0;e<1<<Y[n];e++)o[i++]=n;for(i>>=7;n<30;n++)for(Z[n]=i<<7,e=0;e<1<<Y[n]-7;e++)o[256+i++]=n;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)d[2*e+1]=8,e++,s[8]++;for(;e<=255;)d[2*e+1]=9,e++,s[9]++;for(;e<=279;)d[2*e+1]=7,e++,s[7]++;for(;e<=287;)d[2*e+1]=8,e++,s[8]++;for(se(d,287,s),e=0;e<30;e++)f[2*e+1]=5,f[2*e]=ie(e,5);ee=new A(d,X,257,286,15),te=new A(f,Y,0,30,15),re=new A(new Array(0),K,0,19,7)}me=!0}e.l_desc=new B(e.dyn_ltree,ee),e.d_desc=new B(e.dyn_dtree,te),e.bl_desc=new B(e.bl_tree,re),e.bi_buf=0,e.bi_valid=0,ae(e)},_tr_stored_block:ye,_tr_flush_block:(t,r,n,e)=>{let i,s,a=0;if(0<t.level?(2===t.strm.data_type&&(t.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(t)),pe(t,t.l_desc),pe(t,t.d_desc),a=(e=>{let t;for(de(e,e.dyn_ltree,e.l_desc.max_code),de(e,e.dyn_dtree,e.d_desc.max_code),pe(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*$[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==r)ye(t,r,n,e);else if(4===t.strategy||s===i)m(t,2+(e?1:0),3),he(t,d,f);else{m(t,4+(e?1:0),3);{var o=t,u=(r=t.l_desc.max_code+1,n=t.d_desc.max_code+1,a+1);let e;for(m(o,r-257,5),m(o,n-1,5),m(o,u-4,4),e=0;e<u;e++)m(o,o.bl_tree[2*$[e]+1],3);fe(o,o.dyn_ltree,r-1),fe(o,o.dyn_dtree,n-1)}he(t,t.dyn_ltree,t.dyn_dtree)}ae(t),e&&oe(t)},_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(u[r]+256+1)]++,e.dyn_dtree[2*ne(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{m(e,2,3),g(e,256,d),16===(e=e).bi_valid?(i(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},_e=(e,t,r,n)=>{let i=65535&e|0,s=e>>>16&65535|0,a=0;for(;0!==r;){for(r-=a=2e3<r?2e3:r;i=i+t[n++]|0,s=s+i|0,--a;);i%=65521,s%=65521}return i|s<<16|0};const Ce=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var y=(t,r,e,n)=>{var i=Ce,s=n+e;t^=-1;for(let e=n;e<s;e++)t=t>>>8^i[255&(t^r[e])];return-1^t},we={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},t={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:be,_tr_stored_block:Ee,_tr_flush_block:xe,_tr_tally:_,_tr_align:De}=ve,{Z_NO_FLUSH:C,Z_PARTIAL_FLUSH:Se,Z_FULL_FLUSH:Ae,Z_FINISH:b,Z_BLOCK:Fe,Z_OK:E,Z_STREAM_END:ke,Z_STREAM_ERROR:x,Z_DATA_ERROR:Be,Z_BUF_ERROR:Ie,Z_DEFAULT_COMPRESSION:Te,Z_FILTERED:Pe,Z_HUFFMAN_ONLY:Ne,Z_RLE:Re,Z_FIXED:Le,Z_UNKNOWN:Me,Z_DEFLATED:Oe}=t,D=(e,t)=>(e.msg=we[t],t),je=e=>2*e-(4<e?9:0),S=e=>{let t=e.length;for(;0<=--t;)e[t]=0},Ue=e=>{let t,r,n,i=e.w_size;for(t=e.hash_size,n=t;r=e.head[--n],e.head[n]=r>=i?r-i:0,--t;);for(t=i,n=t;r=e.prev[--n],e.prev[n]=r>=i?r-i:0,--t;);};let F=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const k=e=>{var t=e.state;let r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending)&&(t.pending_out=0)},I=(e,t)=>{xe(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,k(e.strm)},T=(e,t)=>{e.pending_buf[e.pending++]=t},P=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},ze=(e,t,r,n)=>{let i=e.avail_in;return 0===(i=i>n?n:i)?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=_e(e.adler,t,i,r):2===e.state.wrap&&(e.adler=y(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},We=(e,t)=>{let r,n,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match;var u=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,c=e.w_mask,h=e.prev,p=e.strstart+258;let d=l[s+a-1],f=l[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(r=t)+a]===f&&l[r+a-1]===d&&l[r]===l[s]&&l[++r]===l[s+1]){for(s+=2,r++;l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<p;);if(n=258-(p-s),s=p-258,n>a){if(e.match_start=t,(a=n)>=o)break;d=l[s+a-1],f=l[s+a]}}}while((t=h[t&c])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead},N=e=>{var t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Ue(e),n+=t),0===e.strm.avail_in)break;if(r=ze(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,3<=e.lookahead+e.insert)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=F(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=F(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},qe=(e,t)=>{let r,n,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,o=e.strm.avail_in;for(;r=65535,i=e.bi_valid+42>>3,!(e.strm.avail_out<i||(i=e.strm.avail_out-i,n=e.strstart-e.block_start,(r=(r=r>n+e.strm.avail_in?n+e.strm.avail_in:r)>i?i:r)<s&&(0===r&&t!==b||t===C||r!==n+e.strm.avail_in))||(a=t===b&&r===n+e.strm.avail_in?1:0,Ee(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,k(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(ze(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r),0!==a)););return(o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart)&&(e.insert=e.strstart),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==C&&t!==b&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart)&&(e.insert=e.strstart),(i=i>e.strm.avail_in?e.strm.avail_in:i)&&(ze(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=65535<e.pending_buf_size-i?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,((n=e.strstart-e.block_start)>=s||(n||t===b)&&t!==C&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,a=t===b&&0===e.strm.avail_in&&r===n?1:0,Ee(e,e.block_start,r,a),e.block_start+=r,k(e.strm)),a?3:1)},Ve=(e,t)=>{let r,n;for(;;){if(e.lookahead<262){if(N(e),e.lookahead<262&&t===C)return 1;if(0===e.lookahead)break}if(r=0,3<=e.lookahead&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=We(e,r)),3<=e.match_length)if(n=_(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=F(e,e.ins_h,e.window[e.strstart+1]);else n=_(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===b?(I(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(I(e,!1),0===e.strm.avail_out)?1:2},n=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<262){if(N(e),e.lookahead<262&&t===C)return 1;if(0===e.lookahead)break}if(r=0,3<=e.lookahead&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=We(e,r),e.match_length<=5)&&(e.strategy===Pe||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2),3<=e.prev_length&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,n=_(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(I(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=_(e,0,e.window[e.strstart-1]))&&I(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=_(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===b?(I(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(I(e,!1),0===e.strm.avail_out)?1:2};function Pt(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const R=[new Pt(0,0,0,0,qe),new Pt(4,4,8,4,Ve),new Pt(4,5,16,8,Ve),new Pt(4,6,32,32,Ve),new Pt(4,4,16,16,n),new Pt(8,16,32,32,n),new Pt(8,16,128,128,n),new Pt(8,32,128,256,n),new Pt(32,128,258,1024,n),new Pt(32,258,258,4096,n)];function $t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Oe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),S(this.dyn_ltree),S(this.dyn_dtree),S(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),S(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),S(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const L=e=>{var t;return!e||!(t=e.state)||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},Ge=e=>{if(L(e))return D(e,x);e.total_in=e.total_out=0,e.data_type=Me;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,be(t),E},He=e=>{var t=Ge(e);return t===E&&((e=e.state).window_size=2*e.w_size,S(e.head),e.max_lazy_match=R[e.level].max_lazy,e.good_match=R[e.level].good_length,e.nice_match=R[e.level].nice_length,e.max_chain_length=R[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t},Je=(e,t,r,n,i,s)=>{if(!e)return x;let a=1;if(t===Te&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||9<i||r!==Oe||n<8||15<n||t<0||9<t||s<0||s>Le||8===n&&1!==a)return D(e,x);8===n&&(n=9);var o=new $t;return(e.state=o).strm=e,o.status=42,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=s,o.method=r,He(e)};var Xe=Je,Ye=(He,Ge,(e,t)=>L(e)||2!==e.state.wrap?x:(e.state.gzhead=t,E)),Ke=(r,e)=>{if(L(r)||e>Fe||e<0)return r?D(r,x):x;var n=r.state;if(!r.output||0!==r.avail_in&&!r.input||666===n.status&&e!==b)return D(r,0===r.avail_out?Ie:x);var i=n.last_flush;if(n.last_flush=e,0!==n.pending){if(k(r),0===r.avail_out)return n.last_flush=-1,E}else if(0===r.avail_in&&je(e)<=je(i)&&e!==b)return D(r,Ie);if(666===n.status&&0!==r.avail_in)return D(r,Ie);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let e=Oe+(n.w_bits-8<<4)<<8,t;if(t=n.strategy>=Ne||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=t<<6,0!==n.strstart&&(e|=32),e+=31-e%31,P(n,e),0!==n.strstart&&(P(n,r.adler>>>16),P(n,65535&r.adler)),r.adler=1,n.status=113,k(r),0!==n.pending)return n.last_flush=-1,E}if(57===n.status)if(r.adler=0,T(n,31),T(n,139),T(n,8),n.gzhead)T(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),T(n,255&n.gzhead.time),T(n,n.gzhead.time>>8&255),T(n,n.gzhead.time>>16&255),T(n,n.gzhead.time>>24&255),T(n,9===n.level?2:n.strategy>=Ne||n.level<2?4:0),T(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(T(n,255&n.gzhead.extra.length),T(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(r.adler=y(r.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(T(n,0),T(n,0),T(n,0),T(n,0),T(n,0),T(n,9===n.level?2:n.strategy>=Ne||n.level<2?4:0),T(n,3),n.status=113,k(r),0!==n.pending)return n.last_flush=-1,E;if(69===n.status){if(n.gzhead.extra){let e=n.pending,t=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+t>n.pending_buf_size;){var s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(r.adler=y(r.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=s,k(r),0!==n.pending)return n.last_flush=-1,E;e=0,t-=s}i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+t),n.pending),n.pending+=t,n.gzhead.hcrc&&n.pending>e&&(r.adler=y(r.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,t=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>t&&(r.adler=y(r.adler,n.pending_buf,n.pending-t,t)),k(r),0!==n.pending)return n.last_flush=-1,E;t=0}}while(e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,T(n,e),0!=e);n.gzhead.hcrc&&n.pending>t&&(r.adler=y(r.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,t=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>t&&(r.adler=y(r.adler,n.pending_buf,n.pending-t,t)),k(r),0!==n.pending)return n.last_flush=-1,E;t=0}}while(e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,T(n,e),0!=e);n.gzhead.hcrc&&n.pending>t&&(r.adler=y(r.adler,n.pending_buf,n.pending-t,t))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(k(r),0!==n.pending))return n.last_flush=-1,E;T(n,255&r.adler),T(n,r.adler>>8&255),r.adler=0}if(n.status=113,k(r),0!==n.pending)return n.last_flush=-1,E}if(0!==r.avail_in||0!==n.lookahead||e!==C&&666!==n.status){i=0===n.level?qe(n,e):n.strategy===Ne?((e,t)=>{for(var r;;){if(0===e.lookahead&&(N(e),0===e.lookahead)){if(t===C)return 1;break}if(e.match_length=0,r=_(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===b?(I(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(I(e,!1),0===e.strm.avail_out)?1:2})(n,e):n.strategy===Re?((e,t)=>{let r,n,i,s;for(var a=e.window;;){if(e.lookahead<=258){if(N(e),e.lookahead<=258&&t===C)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(i=e.strstart-1,(n=a[i])===a[++i])&&n===a[++i]&&n===a[++i]){for(s=e.strstart+258;n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s;);e.match_length=258-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(r=_(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=_(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===b?(I(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(I(e,!1),0===e.strm.avail_out)?1:2})(n,e):R[n.level].func(n,e);if(3!==i&&4!==i||(n.status=666),1===i||3===i)return 0===r.avail_out&&(n.last_flush=-1),E;if(2===i&&(e===Se?De(n):e!==Fe&&(Ee(n,0,0,!1),e===Ae)&&(S(n.head),0===n.lookahead)&&(n.strstart=0,n.block_start=0,n.insert=0),k(r),0===r.avail_out))return n.last_flush=-1,E}return e!==b||!(n.wrap<=0)&&(2===n.wrap?(T(n,255&r.adler),T(n,r.adler>>8&255),T(n,r.adler>>16&255),T(n,r.adler>>24&255),T(n,255&r.total_in),T(n,r.total_in>>8&255),T(n,r.total_in>>16&255),T(n,r.total_in>>24&255)):(P(n,r.adler>>>16),P(n,65535&r.adler)),k(r),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending)?E:ke},$e=e=>{var t;return L(e)?x:(t=e.state.status,e.state=null,113===t?D(e,Be):E)},Qe=(e,t)=>{let r=t.length;if(L(e))return x;var n=e.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return x;1===i&&(e.adler=_e(e.adler,t,r,0)),n.wrap=0,r>=n.w_size&&(0===i&&(S(n.head),n.strstart=0,n.block_start=0,n.insert=0),(s=new Uint8Array(n.w_size)).set(t.subarray(r-n.w_size,r),0),t=s,r=n.w_size);var s=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,N(n);3<=n.lookahead;){let e=n.strstart,t=n.lookahead-2;for(;n.ins_h=F(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++,--t;);n.strstart=e,n.lookahead=2,N(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=a,e.input=o,e.avail_in=s,n.wrap=i,E};const et=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function Sxa(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)et(r,t)&&(e[t]=r[t])}}return e}var tt=n=>{let r=0;for(let e=0,t=n.length;e<t;e++)r+=n[e].length;var i=new Uint8Array(r);for(let e=0,t=0,r=n.length;e<r;e++){var s=n[e];i.set(s,t),t+=s.length}return i};let rt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(U){rt=!1}const nt=new Uint8Array(256);for(let e=0;e<256;e++)nt[e]=252<=e?6:248<=e?5:240<=e?4:224<=e?3:192<=e?2:1;nt[254]=nt[254]=1;function Zxa(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var it=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t};const st=Object.prototype.toString,{Z_NO_FLUSH:at,Z_SYNC_FLUSH:ot,Z_FULL_FLUSH:ut,Z_FINISH:lt,Z_OK:ct,Z_STREAM_END:ht,Z_DEFAULT_COMPRESSION:pt,Z_DEFAULT_STRATEGY:dt,Z_DEFLATED:ft}=t;function ue(e){this.options=Sxa({level:pt,method:ft,chunkSize:16384,windowBits:15,memLevel:8,strategy:dt},e||{});e=this.options;if(e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zxa,this.strm.avail_out=0,(t=Xe(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy))!==ct)throw new Error(we[t]);if(e.header&&Ye(this.strm,e.header),e.dictionary){var t,e="string"==typeof e.dictionary?it(e.dictionary):"[object ArrayBuffer]"===st.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if((t=Qe(this.strm,e))!==ct)throw new Error(we[t]);this._dict_set=!0}}function ge(e,t){t=new ue(t);if(t.push(e,!0),t.err)throw t.msg||we[t.err];return t.result}ue.prototype.push=function(e,t){var r,n,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?lt:at,"string"==typeof e?i.input=it(e):"[object ArrayBuffer]"===st.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(n===ot||n===ut)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(Ke(i,n)===ht)return 0<i.next_out&&this.onData(i.output.subarray(0,i.next_out)),r=$e(this.strm),this.onEnd(r),this.ended=!0,r===ct;if(0!==i.avail_out){if(0<n&&0<i.next_out)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},ue.prototype.onData=function(e){this.chunks.push(e)},ue.prototype.onEnd=function(e){e===ct&&(this.result=tt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};ve={Deflate:ue,deflate:ge,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ge(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ge(e,t)},constants:t};new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const{Z_OK:mt,Z_STREAM_ERROR:gt}=t;function Ze(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const yt=e=>{var t;return!e||!(t=e.state)||t.strm!==e||t.mode<16180||16211<t.mode?1:0},vt=e=>{var t;return yt(e)?gt:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mt)},_t=e=>{var t;return yt(e)?gt:((t=e.state).wsize=0,t.whave=0,t.wnext=0,vt(e))},Ct=(e,t)=>{let r;var n;return yt(e)||(n=e.state,t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?gt:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,_t(e))},wt=(e,t)=>{var r;return e?(r=new Ze,(e.state=r).strm=e,r.window=null,r.mode=16180,(r=Ct(e,t))!==mt&&(e.state=null),r):gt};_t,Ct,vt,wt;Object.prototype.toString;var t=ve["deflate"],bt=t;const M={b:{u:DataView.prototype.getInt8,p:DataView.prototype.setInt8,bytes:1},B:{u:DataView.prototype.getUint8,p:DataView.prototype.setUint8,bytes:1},h:{u:DataView.prototype.getInt16,p:DataView.prototype.setInt16,bytes:2},H:{u:DataView.prototype.getUint16,p:DataView.prototype.setUint16,bytes:2},i:{u:DataView.prototype.getInt32,p:DataView.prototype.setInt32,bytes:4},I:{u:DataView.prototype.getUint32,p:DataView.prototype.setUint32,bytes:4},q:{u:DataView.prototype.getInt64,p:DataView.prototype.setInt64,bytes:8},Q:{u:DataView.prototype.getUint64,p:DataView.prototype.setUint64,bytes:8}},O=(t,...n)=>{let i=0;if(t.replace(/[<>]/,"").length!=n.length)throw"Pack format to Argument count mismatch";let s=[],a=!0;for(let e=0;e<t.length;e++)"<"==t[e]?a=!0:">"==t[e]?a=!1:(function r(e,t){if(!(e in M))throw"Unhandled character '"+e+"' in pack format";var n=M[e].bytes,i=new DataView(new ArrayBuffer(n));M[e].p.bind(i)(0,t,a);for(let e=0;e<n;e++)s.push(i.getUint8(e))}(t[e],n[i]),i++);return s},Et=(e,i)=>{let s=0,a=[],o=!0;for(var t of e)"<"==t?o=!0:">"==t?o=!1:function r(e){if(!(e in M))throw"Unhandled character '"+e+"' in unpack format";var t=M[e].bytes,n=new DataView(new ArrayBuffer(t));for(let e=0;e<t;e++)n.setUint8(e,255&i[s+e]);e=M[e].u.bind(n);a.push(e(0,o)),s+=t}(t);return a};class ca extends EventTarget{constructor(e,t,r){super(),this.port=e,this.logger=t,this._parent=r,this.chipName=null,this._efuses=new Array(4).fill(0),this._flashsize=4194304,this.debug=!1,this.IS_STUB=!1,this.connected=!0,this.flashSize=null}get _inputBuffer(){return this._parent?this._parent._inputBuffer:this.__inputBuffer}async initialize(){await this.hardReset(!0),this._parent||(this.__inputBuffer=[],this.readLoop()),await this.sync();var e=await this.readRegister(1073745920),t=V[e>>>0];if(void 0===t)throw new Error(`Unknown Chip: Hex: ${v(e>>>0,8).toLowerCase()} Number: `+e);this.chipName=t.name,this.chipFamily=t.family;var r=H(this.getChipFamily()).macFuse;for(let e=0;e<4;e++)this._efuses[e]=await this.readRegister(r+4*e);this.logger.log("Chip type "+this.chipName)}async readLoop(){this.debug&&this.logger.debug("Starting read loop"),this._reader=this.port.readable.getReader();try{for(;;){var{value:e,done:t}=await this._reader.read();if(t){this._reader.releaseLock();break}e&&0!==e.length&&this._inputBuffer.push(...Array.from(e))}}catch(e){console.error("Read loop got disconnected")}this.connected=!1,this.dispatchEvent(new Event("disconnect")),this.logger.debug("Finished read loop")}async hardReset(e=!1){this.logger.log("Try hard reset."),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!0}),await this.port.setSignals({dataTerminalReady:e,requestToSend:!1}),await new Promise(e=>setTimeout(e,1e3))}macAddr(){let e,t=new Array(6).fill(0),r=this._efuses[0],n=this._efuses[1],i=this._efuses[2],s=this._efuses[3];if(33382==this.chipFamily){if(0!=s)e=[s>>16&255,s>>8&255,255&s];else if(0==(n>>16&255))e=[24,254,52];else{if(1!=(n>>16&255))throw new Error("Couldnt determine OUI");e=[172,208,116]}t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=n>>8&255,t[4]=255&n,t[5]=r>>24&255}else if(50==this.chipFamily)t[0]=i>>8&255,t[1]=255&i,t[2]=n>>24&255,t[3]=n>>16&255,t[4]=n>>8&255,t[5]=255&n;else{if(this.chipFamily!=l&&this.chipFamily!=c&&this.chipFamily!=h)throw new Error("Unknown chip family");t[0]=n>>8&255,t[1]=255&n,t[2]=r>>24&255,t[3]=r>>16&255,t[4]=r>>8&255,t[5]=255&r}return t}async readRegister(e){this.debug&&this.logger.debug("Reading from Register "+v(e,8));var e=O("<I",e),[e,,]=(await this.sendCommand(10,e),await this.getResponse(10));return e}async checkCommand(e,t,r=0,n=3e3){n=Math.min(n,12e5),await this.sendCommand(e,t,r);let[i,s]=await this.getResponse(e,n);if(null===s)throw new Error("Didn't get enough status bytes");let a=0;if(this.IS_STUB||33382==this.chipFamily?a=2:[50,l,c,h].includes(this.chipFamily)?a=4:[2,4].includes(s.length)&&(a=s.length),s.length<a)throw new Error("Didn't get enough status bytes");t=s.slice(-a,s.length);if(s=s.slice(0,-a),this.debug&&(this.logger.debug("status",t),this.logger.debug("value",i),this.logger.debug("data",s)),1==t[0])throw 5==t[1]?new Error("Invalid (unsupported) command "+v(e)):new Error("Command failure error code "+v(t[1]));return[i,s]}async sendCommand(r,n,i=0){var e=(()=>{let e=[192];for(var t of[...O("<BBHI",0,r,n.length,i),...n])219==t?e=e.concat([219,221]):192==t?e=e.concat([219,220]):e.push(t);return e.push(192),e})();this.debug&&this.logger.debug(`Writing ${e.length} byte${1==e.length?"":"s"}:`,e),await this.writeToStream(e)}async readPacket(e){let t=null,r=!1,n=[];for(;;){var i,s=Date.now();for(n=[];Date.now()-s<e;){if(0<this._inputBuffer.length){n.push(this._inputBuffer.shift());break}await z(10)}if(0==n.length)throw new w("Timed out waiting for packet "+(null===t?"header":"content"));this.debug&&this.logger.debug("Read "+n.length+" bytes: "+a(n));for(i of n)if(null===t){if(192!=i)throw this.debug&&(this.logger.debug("Read invalid data: "+a(n)),this.logger.debug("Remaining data in serial buffer: "+a(this._inputBuffer))),new w("Invalid head of packet ("+v(i)+")");t=[]}else if(r)if(r=!1,220==i)t.push(192);else{if(221!=i)throw this.debug&&(this.logger.debug("Read invalid data: "+a(n)),this.logger.debug("Remaining data in serial buffer: "+a(this._inputBuffer))),new w("Invalid SLIP escape (0xdb, "+v(i)+")");t.push(219)}else if(219==i)r=!0;else{if(192==i)return this.debug&&this.logger.debug("Received full packet: "+a(t)),t;t.push(i)}}throw new w("Invalid state")}async getResponse(t,r=3e3){for(let e=0;e<100;e++){var n=await this.readPacket(r);if(!(n.length<8)){var[i,s,,a]=Et("<BBHI",n.slice(0,8));if(1==i){i=n.slice(8);if(null==t||s==t)return[a,i];if(0!=i[0]&&5==i[1])throw this._inputBuffer.length=0,new Error("Invalid (unsupported) command "+v(t))}}}throw"Response doesn't match request"}checksum(e,t=239){for(var r of e)t^=r;return t}async setBaudrate(t){if(33382==this.chipFamily)throw new Error("Changing baud rate is not supported on the ESP8266");this.logger.log("Attempting to change baud rate to "+t+"...");try{var e=O("<II",t,this.IS_STUB?115200:0);await this.checkCommand(15,e)}catch(e){throw console.error(e),new Error(`Unable to change the baud rate to ${t}: No response from set baud rate command.`)}this._parent?await this._parent.reconfigurePort(t):await this.reconfigurePort(t)}async reconfigurePort(e){var t;try{await(null==(t=this._reader)?void 0:t.cancel()),await this.port.close(),await this.port.open({baudRate:e}),this.readLoop(),this.logger.log("Changed baud rate to "+e)}catch(t){throw console.error(t),new Error(`Unable to change the baud rate to ${e}: `+t)}}async sync(){for(let e=0;e<5;e++){if(this._inputBuffer.length=0,await this._sync())return await z(100),!0;await z(100)}throw new Error("Couldn't sync to ESP. Try resetting.")}async _sync(){await this.sendCommand(8,q);for(let e=0;e<8;e++)try{var[,t]=await this.getResponse(8,100);if(1<t.length&&0==t[0]&&0==t[1])return!0}catch(e){}return!1}getFlashWriteSize(){return this.IS_STUB?16384:1024}async flashData(e,t,r=0,n=!1){var i,s,a;8<=e.byteLength&&(i=(a=Array.from(new Uint8Array(e,0,4)))[0],s=a[2],a=a[3],this.logger.log(`Image header, Magic=${v(i)}, FlashMode=${v(s)}, FlashSizeFreq=`+v(a)));let o,u=e.byteLength,l=0,c=3e3,h=(n?(o=bt(new Uint8Array(e),{level:9}).buffer,l=o.byteLength,this.logger.log(`Writing data with filesize: ${u}. Compressed Size: `+l),c=await this.flashDeflBegin(u,l,r)):(this.logger.log("Writing data with filesize: "+u),o=e,await this.flashBegin(u,r)),[]),p=0,d=0,f=0,m=Date.now(),g=this.getFlashWriteSize(),y=n?l:u;for(;0<y-f;)this.debug&&this.logger.log(`Writing at ${v(r+p*g,8)} `),y-f>=g?h=Array.from(new Uint8Array(o,f,g)):(h=Array.from(new Uint8Array(o,f,y-f)),n||(h=h.concat(new Array(g-h.length).fill(255)))),n?await this.flashDeflBlock(h,p,c):await this.flashBlock(h,p),p+=1,d+=n?Math.round(h.length*u/l):h.length,f+=g,t(Math.min(d,u),u);this.logger.log("Took "+(Date.now()-m)+"ms to write "+y+" bytes"),this.IS_STUB&&(await this.flashBegin(0,0),n?await this.flashDeflFinish():await this.flashFinish())}async flashBlock(e,t,r=3e3){await this.checkCommand(3,O("<IIII",e.length,t,0,0).concat(e),this.checksum(e),r)}async flashDeflBlock(e,t,r=3e3){await this.checkCommand(17,O("<IIII",e.length,t,0,0).concat(e),this.checksum(e),r)}async flashBegin(e=0,t=0,r=!1){let n,i,s=this.getFlashWriteSize();!this.IS_STUB&&[50,l,c,h].includes(this.chipFamily)&&await this.checkCommand(13,new Array(8).fill(0));var a,o=Math.floor((e+s-1)/s),u=(n=33382==this.chipFamily?this.getEraseSize(t,e):e,a=this.IS_STUB?3e3:G(3e4,e),Date.now());return i=O("<IIII",n,o,s,t),50!=this.chipFamily&&this.chipFamily!=l&&this.chipFamily!=c&&this.chipFamily!=h||(i=i.concat(O("<I",r?1:0))),this.logger.log("Erase size "+n+", blocks "+o+", block size "+v(s,4)+", offset "+v(t,4)+", encrypted "+(r?"yes":"no")),await this.checkCommand(2,i,0,a),0==e||this.IS_STUB||this.logger.log("Took "+(Date.now()-u)+"ms to erase "+o+" bytes"),o}async flashDeflBegin(e=0,t=0,r=0,n){let i,s=this.getFlashWriteSize(),a=Math.floor((t+s-1)/s),o=Math.floor((e+s-1)/s),u=0,l=0;return l=this.IS_STUB?(u=e,G(3e4,u)):(u=o*s,3e3),i=O("<IIII",u,a,s,r),await this.checkCommand(16,i,0,l),l}async flashFinish(){var e=O("<I",1);await this.checkCommand(4,e)}async flashDeflFinish(){var e=O("<I",1);await this.checkCommand(18,e)}getBootloaderOffset(){return H(this.getChipFamily()).flashOffs}async flashId(){return this.runSpiFlashCommand(159,[],24)}getChipFamily(){return(this._parent||this).chipFamily}async writeRegister(e,t,r=4294967295,n=0,i=0){e=O("<IIII",e,t,r,n);0<i&&e.concat(O("<IIII",H(this.getChipFamily()).uartDateReg,0,0,i)),await this.checkCommand(9,e)}async setDataLengths(e,t,r){var n,i;-1!=e.mosiDlenOffs?(i=e.regBase+e.mosiDlenOffs,n=e.regBase+e.misoDlenOffs,0<t&&await this.writeRegister(i,t-1),0<r&&await this.writeRegister(n,r-1)):(i=e.regBase+e.usr1Offs,await this.writeRegister(i,(0==r?0:r-1)<<8|(0==t?0:t-1)<<17))}async waitDone(t,r){for(let e=0;e<10;e++)if(0==(await this.readRegister(t)&r))return;throw Error("SPI command did not complete in time")}async runSpiFlashCommand(e,r,t=0){var n=H(this.getChipFamily()),i=n.regBase,s=i,a=i+n.usrOffs,o=i+n.usr2Offs,i=i+n.w0Offs;if(32<t)throw new Error("Reading more than 32 bits back from a SPI flash operation is unsupported");if(64<r.length)throw new Error("Writing more than 64 bytes of data with one SPI command is unsupported");let u=8*r.length,l=await this.readRegister(a),c=await this.readRegister(o),h=1<<31;if(0<t&&(h|=268435456),0<u&&(h|=134217728),await this.setDataLengths(n,u,t),await this.writeRegister(a,h),await this.writeRegister(o,7<<28|e),0==u)await this.writeRegister(i,0);else{r.concat(new Array(r.length%4).fill(0));let e=Et("I".repeat(Math.floor(r.length/4)),r),t=i;this.logger.debug("Words Length: "+e.length);for(const r of e)this.logger.debug(`Writing word ${v(r)} to register offset `+v(t)),await this.writeRegister(t,r),t+=4}await this.writeRegister(s,1<<18),await this.waitDone(s,1<<18);n=await this.readRegister(i);return await this.writeRegister(a,l),await this.writeRegister(o,c),n}async detectFlashSize(){this.logger.log("Detecting Flash Size");var e=await this.flashId(),t=255&e,r=e>>16&255;this.logger.log("FlashId: "+v(e)),this.logger.log("Flash Manufacturer: "+t.toString(16)),this.logger.log("Flash Device: "+(e>>8&255).toString(16)+r.toString(16)),this.flashSize=W[r],this.logger.log("Auto-detected Flash size: "+this.flashSize)}getEraseSize(e,t){let r=Math.floor((t+4096-1)/4096),n=16-Math.floor(e/4096)%16;return r<2*(n=r<n?r:n)?Math.floor((r+1)/2*4096):4096*(r-n)}async memBegin(e,t,r,n){return this.checkCommand(5,O("<IIII",e,t,r,n))}async memBlock(e,t){return this.checkCommand(7,O("<IIII",e.length,t,0,0).concat(e),this.checksum(e))}async memFinish(e=0){var t=this.IS_STUB?3e3:500,e=O("<II",0==e?1:0,e);return this.checkCommand(6,e,0,t)}async runStub(){var r,n=await J(this.chipFamily);this.logger.log("Uploading stub...");for(r of["text","data"])if(Object.keys(n).includes(r)){var i,e=n[r+"_start"],s=n[r].length,t=Math.floor((s+2048-1)/2048);await this.memBegin(s,t,2048,e);for(i of Array(t).keys()){let e=2048*i,t=2048+e;t>s&&(t=s),await this.memBlock(n[r].slice(e,t),i)}}this.logger.log("Running stub..."),await this.memFinish(n.entry);var a=await this.readPacket(500);if("OHAI"!=(a=String.fromCharCode(...a)))throw new Error("Failed to start stub. Unexpected response: "+a);this.logger.log("Stub is now running...");a=new ua(this.port,this.logger,this);return await a.detectFlashSize(),a}async writeToStream(e){var t=this.port.writable.getWriter();await t.write(new Uint8Array(e));try{t.releaseLock()}catch(e){console.error("Ignoring release lock error",e)}}async disconnect(){this._parent?await this._parent.disconnect():(await this.port.writable.getWriter().close(),await new Promise(e=>{this._reader||e(void 0),this.addEventListener("disconnect",e,{once:!0}),this._reader.cancel()}),this.connected=!1)}}class ua extends(e.ESPLoader=ca){constructor(){super(...arguments),this.IS_STUB=!0}async memBegin(e,t,r,n){var i,s,a=await J(this.chipFamily),o=n,u=n+e;console.log(o,u),console.log(a.data_start,a.data.length,a.text_start,a.text.length);for([i,s]of[[a.data_start,a.data_start+a.data.length],[a.text_start,a.text_start+a.text.length]])if(o<s&&u>i)throw new Error("Software loader is resident at "+v(i,8)+"-"+v(s,8)+". Can't load binary at overlapping address range "+v(o,8)+"-"+v(u,8)+". Try changing the binary loading address.")}async eraseFlash(){await this.checkCommand(208,[],0,6e5)}}e.connect=async e=>{var t=await navigator.serial.requestPort();return e.log("Connecting..."),await t.open({baudRate:115200}),e.log("Connected successfully."),new ca(t,e)}},{}],102:[function(e,t,r){t.exports.loadExample=function loadExample(e){e.mkdir("/images"),e.writeFile("/images/wheel.png","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAOpJREFUOI1jZMAN/qPxGbEpwirIwMDwf5uJE4qA15l9WNVjMwBDMz5D0A3AqRmXIcgGENSMzRAmonTgASzoAp7LvsLZ26O4GRgYGBjUfHzgYre2bEFRj+KCyKxPqIad3svgeXoviliWcjhWA/7zzzNhYGBgYBA48henc12uQ1ykED6TgQGaThiRNSODD4mnUfiKEbMw1DxYmY4ZBjBQduwiTpcgA4pjAZYOsHojTX0OAwMDA8PqSScx5B6sTGdgYGBghLmA8WPSGaJthWlGdgEMoLgEZig01DE0YzOAgQE1GzPiEWNgYGBgAABEAkFa5rPi7QAAAABJRU5ErkJggg=="),e.mkdir("/sounds"),e.mkdir("/source"),e.writeFile("/source/main.js",`
const bgColor = setPen(0, 0, 0);
const txtColor = setPen(64, 128, 255);

let screenWidth, screenHeight;

class Wheel {
    init() {
        this.x = screenWidth/2;
        this.y = screenHeight/2;
        this.speedX = rand(-3, 3);
        this.speedY = rand(-3, 3);
        this.color = 0;
    }

    update() {
        if (A)
            this.color++;
        if (B)
            this.color = 0;

        this.x += this.speedX;
        this.y += this.speedY;

        let bounce = false;
        while (!this.speedX || (this.x > screenWidth && this.speedX > 0) || (this.x < 0 && this.speedX < 0)) {
            this.speedX = rand(-5, 5);
            bounce = true;
        }
        while (!this.speedY || (this.y > screenHeight && this.speedY > 0) || (this.y < 0 && this.speedY < 0)) {
            this.speedY = rand(-5, 5);
            bounce = true;
        }
        if (bounce)
            debug("Bounce");
    }

    render() {
        setMirrored(this.speedX < 0);
        setFlipped(this.speedY < 0);
        setPen(this.color);
        image(R.wheel, this.x, this.y);
    }
}

const wheel = new Wheel();

function init() {
    screenWidth = getWidth();
    screenHeight = getHeight();
    wheel.init();
}

function update(time) {
    wheel.update();
}

function render() {
    setPen(bgColor);
    clear();
    wheel.render();
    setPen(txtColor);
    text("Hello world!", 5, 5);
}
`)}},{}],103:[function(e,t,r){const n=e("./dom.js")["index"];var i=e("./Model.js")["Model"];const s=e("./Remote.js")["Remote"],a=e("./IDE.js")["IDE"],o=e("./TOP.js")["TOP"];window.main=new class Main{#view;#ide;#top;#model=new i;#remote;constructor(){addEventListener("DOMContentLoaded",this.loaded.bind(this)),addEventListener("resize",this.resize.bind(this))}get remote(){return this.#remote||(this.#remote=new s,this.#remote.boot()),this.#remote}setupIDE(e){return this.#ide=new a(e,this,this.#model),!1}setupTOP(e){return this.#top=new o(e,this,this.#model),!1}loaded(){window.monaco?this.boot():setTimeout(this.loaded.bind(this),1e3)}resize(){this.#model.set("windowSize",[window.clientWidth,window.clientHeight])}async boot(){await this.#model.useStorage("main"),this.#model.init({windowSize:[0,0],state:"TOP",platform:"espboy",projectId:null,projectName:null,projectList:[{id:1,name:"Bats"}]}),this.#view=n(document.body,{},this)}}},{"./IDE.js":83,"./Model.js":85,"./Remote.js":89,"./TOP.js":94,"./dom.js":100}],104:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"FirebaseError",{enumerable:!0,get:function(){return o.FirebaseError}}),r._DEFAULT_ENTRY_NAME=r.SDK_VERSION=void 0,r._addComponent=_addComponent,r._addOrOverwriteComponent=function _addOrOverwriteComponent(e,t){e.container.addOrOverwriteComponent(t)},r._apps=void 0,r._clearComponents=function _clearComponents(){p.clear()},r._components=void 0,r._getProvider=_getProvider,r._registerComponent=_registerComponent,r._removeServiceInstance=function _removeServiceInstance(e,t,r=l){_getProvider(e,t).clearInstance(r)},r.deleteApp=async function deleteApp(e){var t=e.name;h.has(t)&&(h.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)},r.getApp=function getApp(e=l){var t=h.get(e);if(!t&&e===l)return initializeApp();if(t)return t;throw d.create("no-app",{appName:e})},r.getApps=function getApps(){return Array.from(h.values())},r.initializeApp=initializeApp,r.onLog=function onLog(e,t){if(null!==e&&"function"!=typeof e)throw d.create("invalid-log-argument");(0,n.setUserLogHandler)(e,t)},r.registerVersion=registerVersion,r.setLogLevel=function setLogLevel(e){(0,n.setLogLevel)(e)};var a=e("@firebase/component"),n=e("@firebase/logger"),o=e("@firebase/util"),i=e("idb");class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{return function isVersionServiceProvider(e){e=e.getComponent();return"VERSION"===(null==e?void 0:e.type)}(e)?(e=e.getImmediate()).library+"/"+e.version:null}).filter(e=>e).join(" ")}}const s="@firebase/app",u=new n.Logger("@firebase/app");const l="[DEFAULT]",c=(r._DEFAULT_ENTRY_NAME=l,{"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"}),h=new Map,p=(r._apps=h,new Map);function _addComponent(t,r){try{t.container.addComponent(r)}catch(e){u.debug(`Component ${r.name} failed to register with FirebaseApp `+t.name,e)}}function _registerComponent(e){var t=e.name;if(p.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const r of h.values())_addComponent(r,e);return!0}function _getProvider(e,t){var r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}r._components=p;const d=new o.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class FirebaseAppImpl{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new a.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw d.create("app-deleted",{appName:this._name})}}function initializeApp(e,t={}){let r=e;if("object"!=typeof t){const n=t;t={name:n}}e=Object.assign({name:l,automaticDataCollectionEnabled:!1},t);const n=e.name;if("string"!=typeof n||!n)throw d.create("bad-app-name",{appName:String(n)});if(!(r=r||(0,o.getDefaultAppConfig)()))throw d.create("no-options");t=h.get(n);if(t){if((0,o.deepEqual)(r,t.options)&&(0,o.deepEqual)(e,t.config))return t;throw d.create("duplicate-app",{appName:n})}var i=new a.ComponentContainer(n);for(const s of p.values())i.addComponent(s);t=new FirebaseAppImpl(r,e,i);return h.set(n,t),t}function registerVersion(e,t,r){let n=null!=(i=c[e])?i:e;r&&(n+="-"+r);var i=n.match(/\s|\//),e=t.match(/\s|\//);i||e?(r=[`Unable to register library "${n}" with version "${t}":`],i&&r.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&e&&r.push("and"),e&&r.push(`version name "${t}" contains illegal characters (whitespace or "/")`),u.warn(r.join(" "))):_registerComponent(new a.Component(n+"-version",()=>({library:n,version:t}),"VERSION"))}r.SDK_VERSION="9.14.0";const f="firebase-heartbeat-database",m=1,g="firebase-heartbeat-store";let y=null;function getDbPromise(){return y=y||(0,i.openDB)(f,m,{upgrade:(e,t)=>{0===t&&e.createObjectStore(g)}}).catch(e=>{throw d.create("idb-open",{originalErrorMessage:e.message})})}async function writeHeartbeatsToIndexedDB(t,r){try{var e=(await getDbPromise()).transaction(g,"readwrite");return await e.objectStore(g).put(r,computeKey(t)),e.done}catch(e){e instanceof o.FirebaseError?u.warn(e.message):(t=d.create("idb-set",{originalErrorMessage:null==(r=e)?void 0:r.message}),u.warn(t.message))}}function computeKey(e){return e.name+"!"+e.options.appId}class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;e=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(e),this._heartbeatsCachePromise=this._storage.read().then(e=>this._heartbeatsCache=e)}async triggerHeartbeat(){var e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString();const t=getUTCDateString();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{e=new Date(e.date).valueOf();return Date.now()-e<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e,t,r;return null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length?"":(e=getUTCDateString(),{heartbeatsToSend:r,unsentEntries:t}=function extractHeartbeatsForHeader(e,t=1024){var r=[];let n=e.slice();for(const s of e){var i=r.find(e=>e.agent===s.agent);if(i){if(i.dates.push(s.date),countBytes(r)>t){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),countBytes(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),r=(0,o.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=e,0<t.length?(this._heartbeatsCache.heartbeats=t,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r)}}function getUTCDateString(){return(new Date).toISOString().substring(0,10)}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.isIndexedDBAvailable)()&&(0,o.validateIndexedDBOpenable)().then(()=>!0).catch(()=>!1)}async read(){return await this._canUseIndexedDBPromise&&await async function readHeartbeatsFromIndexedDB(t){try{return(await getDbPromise()).transaction(g).objectStore(g).get(computeKey(t))}catch(e){e instanceof o.FirebaseError?u.warn(e.message):(t=d.create("idb-get",{originalErrorMessage:null==(t=e)?void 0:t.message}),u.warn(t.message))}}(this.app)||{heartbeats:[]}}async overwrite(e){var t,r;if(await this._canUseIndexedDBPromise)return r=await this.read(),writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}async add(e){var t,r;if(await this._canUseIndexedDBPromise)return r=await this.read(),writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}function countBytes(e){return(0,o.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}!function registerCoreComponents(e){_registerComponent(new a.Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new a.Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(s,"0.8.4",e),registerVersion(s,"0.8.4","esm2017"),registerVersion("fire-js","")}("")},{"@firebase/component":105,"@firebase/logger":107,"@firebase/util":108,idb:114}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Provider=r.ComponentContainer=r.Component=void 0;var n=e("@firebase/util");r.Component=class Component{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const i="[DEFAULT]";class Provider{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){e=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(e)){var t=new n.Deferred;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&t.resolve(r)}catch(e){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),t=null!=(t=null==t?void 0:t.optional)&&t;if(!this.isInitialized(e)&&!this.shouldAutoInitialize()){if(t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:e})}catch(e){if(t)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function isComponentEager(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(e){}for(var[t,r]of this.instancesDeferred.entries()){t=this.normalizeInstanceIdentifier(t);try{var n=this.getOrInitializeService({instanceIdentifier:t});r.resolve(n)}catch(e){}}}}clearInstance(e=i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){var e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=i){return this.instances.has(e)}getOptions(e=i){return this.instancesOptions.get(e)||{}}initialize(e={}){var{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(this.name+`(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);var n,i,s=this.getOrInitializeService({instanceIdentifier:r,options:t});for([n,i]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(n)&&i.resolve(s);return s}onInit(e,t){t=this.normalizeInstanceIdentifier(t);const r=null!=(n=this.onInitCallbacks.get(t))?n:new Set;r.add(e),this.onInitCallbacks.set(t,r);var n=this.instances.get(t);return n&&e(n,t),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){var r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:function normalizeIdentifierForFactory(e){return e===i?void 0:e}(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=i){return!this.component||this.component.multipleInstances?e:i}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}r.Provider=Provider;r.ComponentContainer=class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with `+this.name);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){var t;return this.providers.has(e)?this.providers.get(e):(t=new Provider(e,this),this.providers.set(e,t),t)}getProviders(){return Array.from(this.providers.values())}}},{"@firebase/util":108}],106:[function(Pe,e,Ne){!function(Te){!function(){"use strict";Object.defineProperty(Ne,"__esModule",{value:!0}),Ne._TEST_ACCESS_hijackHash=Ne._TEST_ACCESS_forceRestClient=Ne._ReferenceImpl=Ne._QueryParams=Ne._QueryImpl=Ne.TransactionResult=Ne.QueryConstraint=Ne.OnDisconnect=Ne.Database=Ne.DataSnapshot=void 0,Ne._repoManagerDatabaseFromApp=repoManagerDatabaseFromApp,Ne._setSDKVersion=setSDKVersion,Ne._validateWritablePath=Ne._validatePathString=void 0,Ne.child=child,Ne.connectDatabaseEmulator=connectDatabaseEmulator,Ne.enableLogging=function enableLogging(e,t){x(e,t)},Ne.endAt=function endAt(e,t){return Ce("endAt","key",t,!0),new QueryEndAtConstraint(e,t)},Ne.endBefore=function endBefore(e,t){return Ce("endBefore","key",t,!0),new QueryEndBeforeConstraint(e,t)},Ne.equalTo=function equalTo(e,t){return Ce("equalTo","key",t,!0),new QueryEqualToValueConstraint(e,t)},Ne.forceLongPolling=function forceLongPolling(){checkTransportInit(),WebSocketConnection.forceDisallow(),BrowserPollConnection.forceAllow()},Ne.forceWebSockets=function forceWebSockets(){checkTransportInit(),BrowserPollConnection.forceDisallow()},Ne.get=function get(t){t=(0,d.getModularInstance)(t);var e=new CallbackContext(()=>{}),e=new ValueEventRegistration(e);return function repoGetValue(n,i,s){var e=function syncTreeGetServerValue(e,t){const r=t._path;let n=null,i=(e.syncPointTree_.foreachOnPath(r,(e,t)=>{e=newRelativePath(e,r);n=n||syncPointGetCompleteServerCache(t,e)}),e.syncPointTree_.get(r));i?n=n||syncPointGetCompleteServerCache(i,new Path("")):(i=new SyncPoint,e.syncPointTree_=e.syncPointTree_.set(r,i));var s=null!=n,a=s?new CacheNode(n,!0,!1):null,e=writeTreeChildWrites(e.pendingWriteTree_,t._path),t=syncPointGetView(i,t,e,s?a.getNode():ChildrenNode.EMPTY_NODE,s);return function viewGetCompleteNode(e){return viewCacheGetCompleteEventSnap(e.viewCache_)}(t)}(n.serverSyncTree_,i);return null==e?n.server_.get(i).then(e=>{var t,e=nodeFromJSON(e).withIndex(i._queryParams.getIndex());syncTreeAddEventRegistration(n.serverSyncTree_,i,s,!0);let r;return r=i._queryParams.loadsAllData()?syncTreeApplyServerOverwrite(n.serverSyncTree_,i._path,e):(t=syncTreeTagForQuery(n.serverSyncTree_,i),syncTreeApplyTaggedQueryOverwrite(n.serverSyncTree_,i._path,e,t)),eventQueueRaiseEventsForChangedPath(n.eventQueue_,i._path,r),syncTreeRemoveEventRegistration(n.serverSyncTree_,i,s,null,!0),e},e=>(repoLog(n,"get for query "+(0,d.stringify)(i)+" failed: "+e),Promise.reject(new Error(e)))):Promise.resolve(e)}(t._repo,t,e).then(e=>new DataSnapshot(e,new ReferenceImpl(t._repo,t._path),t._queryParams.getIndex()))},Ne.getDatabase=function getDatabase(e=(0,r.getApp)(),t){e=(0,r._getProvider)(e,"database").getImmediate({identifier:t}),t=(0,d.getDefaultEmulatorHostnameAndPort)("database");t&&connectDatabaseEmulator(e,...t);return e},Ne.goOffline=function goOffline(e){(e=(0,d.getModularInstance)(e))._checkNotDeleted("goOffline"),repoInterrupt(e._repo)},Ne.goOnline=function goOnline(e){(e=(0,d.getModularInstance)(e))._checkNotDeleted("goOnline"),function repoResume(e){e.persistentConnection_&&e.persistentConnection_.resume(xe)}(e._repo)},Ne.increment=function increment(e){return{".sv":{increment:e}}},Ne.limitToFirst=function limitToFirst(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new QueryLimitToFirstConstraint(e)},Ne.limitToLast=function limitToLast(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QueryLimitToLastConstraint(e)},Ne.off=function off(e,t,r){let n=null;r=r?new CallbackContext(r):null;"value"===t?n=new ValueEventRegistration(r):t&&(n=new ChildEventRegistration(t,r));repoRemoveEventCallbackForQuery(e._repo,e,n)},Ne.onChildAdded=function onChildAdded(e,t,r,n){return addEventListener(e,"child_added",t,r,n)},Ne.onChildChanged=function onChildChanged(e,t,r,n){return addEventListener(e,"child_changed",t,r,n)},Ne.onChildMoved=function onChildMoved(e,t,r,n){return addEventListener(e,"child_moved",t,r,n)},Ne.onChildRemoved=function onChildRemoved(e,t,r,n){return addEventListener(e,"child_removed",t,r,n)},Ne.onDisconnect=function onDisconnect(e){return e=(0,d.getModularInstance)(e),new OnDisconnect(e._repo,e._path)},Ne.onValue=onValue,Ne.orderByChild=function orderByChild(e){{if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.')}return we("orderByChild","path",e,!1),new QueryOrderByChildConstraint(e)},Ne.orderByKey=function orderByKey(){return new QueryOrderByKeyConstraint},Ne.orderByPriority=function orderByPriority(){return new QueryOrderByPriorityConstraint},Ne.orderByValue=function orderByValue(){return new QueryOrderByValueConstraint},Ne.push=function push(e,t){e=(0,d.getModularInstance)(e),m("push",e._path),u("push",t,e._path,!0);const r=repoServerTime(e._repo),n=te(r),i=child(e,n),s=child(e,n);let a;a=null!=t?set(s,t).then(()=>s):Promise.resolve(s);return i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i},Ne.query=function query(e,...t){let r=(0,d.getModularInstance)(e);for(const n of t)r=n._apply(r);return r},Ne.ref=ref,Ne.refFromURL=function refFromURL(e,t){(e=(0,d.getModularInstance)(e))._checkNotDeleted("refFromURL");var t=Se(t,e._repo.repoInfo_.nodeAdmin),r=(Ee("refFromURL",t),t.repoInfo);e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||c("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")");return ref(e,t.path.toString())},Ne.remove=function remove(e){return m("remove",e._path),set(e,null)},Ne.runTransaction=function runTransaction(n,e,t){if(n=(0,d.getModularInstance)(n),m("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null==(t=null==t?void 0:t.applyLocally)||t,i=new d.Deferred,s=onValue(n,()=>{});return function repoStartTransaction(t,r,n,i,s,a){repoLog(t,"transaction on "+r);n={path:r,update:n,onComplete:i,status:null,order:C(),applyLocally:a,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},i=repoGetLatestState(t,r,void 0),n.currentInputSnapshot=i,a=n.update(i.val());if(void 0===a)n.unwatcher(),n.currentOutputSnapshotRaw=null,n.currentOutputSnapshotResolved=null,n.onComplete&&n.onComplete(null,!1,n.currentInputSnapshot);else{ye("transaction failed: Data returned ",a,n.path),n.status=0;var s=treeSubTree(t.transactionQueueTree_,r),o=s.node.value||[];o.push(n),treeSetValue(s,o);let e;"object"==typeof a&&null!==a&&(0,d.contains)(a,".priority")?(e=(0,d.safeGet)(a,".priority"),(0,d.assert)(ge(e),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):(s=syncTreeCalcCompleteEventCache(t.serverSyncTree_,r)||ChildrenNode.EMPTY_NODE,e=s.getPriority().val());o=repoGenerateServerValues(t),s=nodeFromJSON(a,e),a=ce(s,i,o),i=(n.currentOutputSnapshotRaw=s,n.currentOutputSnapshotResolved=a,n.currentWriteId=t.nextWriteId_++,syncTreeApplyUserOverwrite(t.serverSyncTree_,r,a,n.currentWriteId,n.applyLocally));eventQueueRaiseEventsForChangedPath(t.eventQueue_,r,i),repoSendReadyTransactions(t,t.transactionQueueTree_)}}(n._repo,n._path,e,(e,t,r)=>{e?i.reject(e):(e=new DataSnapshot(r,new ReferenceImpl(n._repo,n._path),o),i.resolve(new TransactionResult(t,e)))},s,r),i.promise},Ne.serverTimestamp=function serverTimestamp(){return Ie},Ne.set=set,Ne.setPriority=function setPriority(e,t){e=(0,d.getModularInstance)(e),m("setPriority",e._path),_e("setPriority",t,!1);var r=new d.Deferred;return repoSetWithPriority(e._repo,pathChild(e._path,".priority"),t,null,r.wrapCallback(()=>{})),r.promise},Ne.setWithPriority=function setWithPriority(e,t,r){if(m("setWithPriority",e._path),u("setWithPriority",t,e._path,!1),_e("setWithPriority",r,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var n=new d.Deferred;return repoSetWithPriority(e._repo,e._path,t,r,n.wrapCallback(()=>{})),n.promise},Ne.startAfter=function startAfter(e,t){return Ce("startAfter","key",t,!0),new QueryStartAfterConstraint(e,t)},Ne.startAt=function startAt(e=null,t){return Ce("startAt","key",t,!0),new QueryStartAtConstraint(e,t)},Ne.update=function update(e,t){ve("update",t,e._path,!1);var r=new d.Deferred;return function repoUpdate(i,s,e,a){repoLog(i,"update",{path:s.toString(),value:e});let r=!0;const n=repoGenerateServerValues(i),o={};if(each(e,(e,t)=>{r=!1,o[e]=le(pathChild(s,e),nodeFromJSON(t),i.serverSyncTree_,n)}),r)h("update() called with empty data.  Don't do anything."),repoCallOnCompleteCallback(0,a,"ok",void 0);else{const u=i.nextWriteId_++;var t=function syncTreeApplyUserMerge(e,t,r,n){!function writeTreeAddMerge(e,t,r,n){(0,d.assert)(n>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:r,writeId:n,visible:!0}),e.visibleWrites=compoundWriteAddWrites(e.visibleWrites,t,r),e.lastWriteId=n}(e.pendingWriteTree_,t,r,n);n=ImmutableTree.fromObject(r);return syncTreeApplyOperationToSyncPoints_(e,new Merge(newOperationSourceUser(),t,n))}(i.serverSyncTree_,s,o,u);eventQueueQueueEvents(i.eventQueue_,t),i.server_.merge(s.toString(),e,(e,t)=>{var r="ok"===e,r=(r||f("update at "+s+" failed: "+e),syncTreeAckUserWrite(i.serverSyncTree_,u,!r)),n=0<r.length?repoRerunTransactions(i,s):s;eventQueueRaiseEventsForChangedPath(i.eventQueue_,n,r),repoCallOnCompleteCallback(0,a,e,t)}),each(e,e=>{e=repoAbortTransactions(i,pathChild(s,e));repoRerunTransactions(i,e)}),eventQueueRaiseEventsForChangedPath(i.eventQueue_,s,[])}}(e._repo,e._path,t,r.wrapCallback(()=>{})),r.promise};var r=Pe("@firebase/app"),t=Pe("@firebase/component"),d=Pe("@firebase/util"),n=Pe("@firebase/logger");const i="@firebase/database";let g="";function setSDKVersion(e){g=e}class DOMStorageWrapper{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,d.stringify)(t))}get(e){e=this.domStorage_.getItem(this.prefixedName_(e));return null==e?null:(0,d.jsonEval)(e)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,d.contains)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}function HQa(e){try{var t;if("undefined"!=typeof window&&void 0!==window[e])return(t=window[e]).setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new DOMStorageWrapper(t)}catch(e){}return new MemoryStorage}var l,e;function MQa(e){var e=(0,d.stringToByteArray)(e),t=new d.Sha1,e=(t.update(e),t.digest());return d.base64.encodeByteArray(e)}const y=HQa("localStorage"),v=HQa("sessionStorage"),_=new n.Logger("@firebase/database"),C=function(){let e=1;return function(){return e++}}(),w=function(...t){let r="";for(let e=0;e<t.length;e++){var n=t[e];Array.isArray(n)||n&&"object"==typeof n&&"number"==typeof n.length?r+=w.apply(null,n):r+="object"==typeof n?(0,d.stringify)(n):n,r+=" "}return r};let b=null,E=!0;function SQa(t){return function(...e){h(t,...e)}}function TQa(...e){e="FIREBASE INTERNAL ERROR: "+w(...e),_.error(e)}function aRa(e,t){return e===t?0:e<t?-1:1}function bRa(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,d.stringify)(t))}function cRa(t){if("object"!=typeof t||null===t)return(0,d.stringify)(t);var r=[];for(const e in t)r.push(e);r.sort();let n="{";for(let e=0;e<r.length;e++)0!==e&&(n+=","),n=(n=n+(0,d.stringify)(r[e])+":")+cRa(t[r[e]]);return n+="}"}function dRa(t,r){var n=t.length;if(n<=r)return[t];var i=[];for(let e=0;e<n;e+=r)e+r>n?i.push(t.substring(e,n)):i.push(t.substring(e,e+r));return i}const x=function(e,t){(0,d.assert)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(_.logLevel=n.LogLevel.VERBOSE,b=_.log.bind(_),t&&v.set("logging_enabled",!0)):"function"==typeof e?b=e:(b=null,v.remove("logging_enabled"))},h=function(...e){!0===E&&(E=!1,null===b)&&!0===v.get("logging_enabled")&&x(!0),b&&(e=w.apply(null,e),b(e))},c=function(...e){e="FIREBASE FATAL ERROR: "+w(...e);throw _.error(e),new Error(e)},f=function(...e){e="FIREBASE WARNING: "+w(...e);_.warn(e)},D=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},s="[MIN_NAME]",a="[MAX_NAME]",S=function(e,t){var r,n;return e===t?0:e===s||t===a?-1:t===s||e===a?1:(r=B(e),n=B(t),null!==r?null!==n?r-n==0?e.length-t.length:r-n:-1:null===n&&e<t?-1:1)};function each(e,t){for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])}function eRa(e){(0,d.assert)(!D(e),"Invalid JSON number");let t,r,n,i,s;0===e?(r=0,n=0,t=1/e==-1/0?1:0):(t=e<0,e=Math.abs(e),n=e>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),r=i+1023,Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(r=0,Math.round(e/Math.pow(2,-1074))));var a=[];for(s=52;s;--s)a.push(n%2?1:0),n=Math.floor(n/2);for(s=11;s;--s)a.push(r%2?1:0),r=Math.floor(r/2);a.push(t?1:0),a.reverse();var o=a.join("");let u="";for(s=0;s<64;s+=8){let e=parseInt(o.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()}function nRa(e,t){return"number"==typeof(e=setTimeout(e,t))&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e}const A=new RegExp("^-?(0*)\\d{1,10}$"),F=-2147483648,k=2147483647,B=function(e){if(A.test(e)){e=Number(e);if(e>=F&&e<=k)return e}return null},I=function(e){try{e()}catch(t){setTimeout(()=>{var e=t.stack||"";throw f("Exception was thrown by user callback.",e),t},Math.floor(0))}};class AppCheckTokenProvider{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null!=t&&t.get().then(e=>this.appCheck=e)}getToken(r){return this.appCheck?this.appCheck.getToken(r):new Promise((e,t)=>{setTimeout(()=>{this.appCheck?this.getToken(r).then(e,t):e(null)},0)})}addTokenChangeListener(t){var e;null!=(e=this.appCheckProvider)&&e.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){f(`Provided AppCheck credentials for the app named "${this.appName_}" `+"are invalid. This usually indicates your app was not initialized correctly.")}}class FirebaseAuthTokenProvider{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(e=>this.auth_=e)}getToken(r){return this.auth_?this.auth_.getToken(r).catch(e=>e&&"auth/token-not-initialized"===e.code?(h("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,t)=>{setTimeout(()=>{this.auth_?this.getToken(r).then(e,t):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',f(e)}}class EmulatorTokenProvider{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";const T=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,P="long_polling";class RepoInfo{constructor(e,t,r,n,i=!1,s="",a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=n,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=y.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost())&&y.set("host:"+this._host,this.internalHost)}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return e+this.host+"/"+t}}function repoInfoConnectionURL(e,t,r){(0,d.assert)("string"==typeof t,"typeof type must == string"),(0,d.assert)("object"==typeof r,"typeof params must == object");let n;if("websocket"===t)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==P)throw new Error("Unknown connection type: "+t);n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}!function repoInfoNeedsQueryParam(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}(e)||(r.ns=e.namespace);const i=[];return each(r,(e,t)=>{i.push(e+"="+t)}),n+i.join("&")}class StatsCollection{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,d.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,d.deepCopy)(this.counters_)}}const N={},R={};function statsManagerGetCollection(e){e=e.toString();return N[e]||(N[e]=new StatsCollection),N[e]}class PacketReceiver{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<r.length;++e)r[e]&&I(()=>{this.onMessage_(r[e])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class BrowserPollConnection{constructor(e,t,r,n,i,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=n,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SQa(e),this.stats_=statsManagerGetCollection(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),repoInfoConnectionURL(t,P,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new PacketReceiver(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4));var r=()=>{var e;this.isClosed_||(this.scriptTagHolder=new FirebaseIFrameScriptHolder((...e)=>{var[t,r,n,,,]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=r,this.password=n;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);r?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(r,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{var[t,r]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,r)},()=>{this.onClosed_()},this.urlFn),(e={start:"t"}).ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&T.test(location.hostname)&&(e.r="f"),e=this.urlFn(e),this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,()=>{}))};if((0,d.isNodeSdk)()||"complete"===document.readyState)r();else{let e=!1;const n=function(){document.body?e||(e=!0,r()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return!((0,d.isNodeSdk)()||!BrowserPollConnection.forceAllow_&&(BrowserPollConnection.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){var e=(0,d.stringify)(e),e=(this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length),(0,d.base64Encode)(e)),t=dRa(e,1840);for(let e=0;e<t.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,t.length,t[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){var r;(0,d.isNodeSdk)()||(this.myDisconnFrame=document.createElement("iframe"),(r={dframe:"t"}).id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame))}incrementIncomingBytes_(e){e=(0,d.stringify)(e).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class FirebaseIFrameScriptHolder{constructor(t,r,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,d.isNodeSdk)())this.commandCB=t,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=C(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=r,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let e="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n=document.domain,e='<script>document.domain="'+n+'";<\/script>');i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){h("frame writing exception"),e.stack&&h(e.stack),h(e)}}}static createIFrame_(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||h("No IE domain setting required")}catch(e){var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var r={},r=(r.id=this.myID,r.pw=this.myPW,r.ser=this.currentSerial,this.urlFn(r));let e="",t=0;for(;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var n=this.pendingSegs.shift();e=e+"&seg"+t+"="+n.seg+"&ts"+t+"="+n.ts+"&d"+t+"="+n.d,t++}return r+=e,this.addLongPollTag_(r,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},n=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(n),r()})}addTag(e,r){(0,d.isNodeSdk)()?this.doNodeLongPoll(e,r):setTimeout(()=>{try{if(this.sendNewPolls){const t=this.myIFrame.doc.createElement("script");t.type="text/javascript",t.async=!0,t.src=e,t.onload=t.onreadystatechange=function(){var e=t.readyState;e&&"loaded"!==e&&"complete"!==e||(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),r())},t.onerror=()=>{h("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(t)}}catch(e){}},Math.floor(1))}}let L=null;"undefined"!=typeof MozWebSocket?L=MozWebSocket:"undefined"!=typeof WebSocket&&(L=WebSocket);class WebSocketConnection{constructor(e,t,r,n,i,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=n,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SQa(this.connId),this.stats_=statsManagerGetCollection(t),this.connURL=WebSocketConnection.connectionURL_(t,s,a,n,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,n,i){var s={v:"5"};return!(0,d.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&T.test(location.hostname)&&(s.r="f"),t&&(s.s=t),r&&(s.ls=r),n&&(s.ac=n),i&&(s.p=i),repoInfoConnectionURL(e,"websocket",s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,y.set("previous_websocket_failure",!0);try{let e;var r,n,i;(0,d.isNodeSdk)()&&(r=this.nodeAdmin?"AdminNode":"Node",e={headers:{"User-Agent":`Firebase/5/${g}/${Te.platform}/`+r,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken),n=Te.env,i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy)&&(e.proxy={origin:i}),this.mySock=new L(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");e=e.message||e.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let e=!1;var t;return!(e="undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4?!0:e)&&null!==L&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return y.isInMemoryStorage||!0===y.get("previous_websocket_failure")}markConnectionHealthy(){y.remove("previous_websocket_failure")}appendFrame_(e){this.frames.push(e),this.frames.length===this.totalFrames&&(e=this.frames.join(""),e=(this.frames=null,d.jsonEval)(e),this.onMessage(e))}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,d.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){null!==this.mySock&&(e=e.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(e):null!==(e=this.extractFrameCount_(e))&&this.appendFrame_(e))}send(e){this.resetKeepAlive();var e=(0,d.stringify)(e),t=(this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length),dRa(e,16384));1<t.length&&this.sendString_(String(t.length));for(let e=0;e<t.length;e++)this.sendString_(t[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2,WebSocketConnection.healthyTimeout=3e4;class TransportManager{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){var t=WebSocketConnection&&WebSocketConnection.isAvailable();let r=t&&!WebSocketConnection.previouslyFailed();if(e.webSocketOnly&&(t||f("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[WebSocketConnection];else{var n=this.transports_=[];for(const i of TransportManager.ALL_TRANSPORTS)i&&i.isAvailable()&&n.push(i);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return 1<this.transports_.length?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;class Connection{constructor(e,t,r,n,i,s,a,o,u,l){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=n,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SQa("c:"+this.id+":"),this.transportManager_=new TransportManager(t),this.log_("Connection created"),this.start_()}start_(){var e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=nRa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&102400<this.conn_.bytesReceived?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&10240<this.conn_.bytesSent?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(e)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){"t"in e&&("a"===(e=e.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))}onSecondaryMessageReceived_(e){var t=bRa("t",e),e=bRa("d",e);if("c"===t)this.onSecondaryControl_(e);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(e)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){var t=bRa("t",e),e=bRa("d",e);"c"===t?this.onControl_(e):"d"===t&&this.onDataMessage_(e)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){var t=bRa("t",e);if("d"in e){e=e.d;if("h"===t)this.onHandshake_(e);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(e):"r"===t?this.onReset_(e):"e"===t?TQa("Server Error: "+e):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TQa("Unknown control packet command: "+t)}}onHandshake_(e){var t=e.ts,r=e.v,n=e.h;this.sessionId=e.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&f("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var e=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,t),nRa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nRa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(y.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_)&&(this.onDisconnect_(),this.onDisconnect_=null)}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ServerActions{put(e,t,r,n){}merge(e,t,r,n){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class EventEmitter{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,d.assert)(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){var r=[...this.listeners_[e]];for(let e=0;e<r.length;e++)r[e].callback.apply(r[e].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});e=this.getInitialEvent(e);e&&t.apply(r,e)}off(e,t,r){this.validateEventType_(e);var n=this.listeners_[e]||[];for(let e=0;e<n.length;e++)if(n[e].callback===t&&(!r||r===n[e].context))return void n.splice(e,1)}validateEventType_(t){(0,d.assert)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class OnlineMonitor extends EventEmitter{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,d.isMobileCordova)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(e){return(0,d.assert)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const M=32,O=768;class Path{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)0<this.pieces_[e].length&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function pathGetFront(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function pathGetLength(e){return e.pieces_.length-e.pieceNum_}function pathPopFront(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Path(e.pieces_,t)}function pathGetBack(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function pathSlice(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function pathParent(t){if(t.pieceNum_>=t.pieces_.length)return null;var r=[];for(let e=t.pieceNum_;e<t.pieces_.length-1;e++)r.push(t.pieces_[e]);return new Path(r,0)}function pathChild(t,r){var n=[];for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);if(r instanceof Path)for(let e=r.pieceNum_;e<r.pieces_.length;e++)n.push(r.pieces_[e]);else{var i=r.split("/");for(let e=0;e<i.length;e++)0<i[e].length&&n.push(i[e])}return new Path(n,0)}function pathIsEmpty(e){return e.pieceNum_>=e.pieces_.length}function newRelativePath(e,t){var r=pathGetFront(e),n=pathGetFront(t);if(null===r)return t;if(r===n)return newRelativePath(pathPopFront(e),pathPopFront(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function pathCompare(e,t){var r=pathSlice(e,0),n=pathSlice(t,0);for(let e=0;e<r.length&&e<n.length;e++){var i=S(r[e],n[e]);if(0!==i)return i}return r.length===n.length?0:r.length<n.length?-1:1}function pathEquals(r,n){if(pathGetLength(r)!==pathGetLength(n))return!1;for(let e=r.pieceNum_,t=n.pieceNum_;e<=r.pieces_.length;e++,t++)if(r.pieces_[e]!==n.pieces_[t])return!1;return!0}function pathContains(e,t){let r=e.pieceNum_,n=t.pieceNum_;if(pathGetLength(e)>pathGetLength(t))return!1;for(;r<e.pieces_.length;){if(e.pieces_[r]!==t.pieces_[n])return!1;++r,++n}return!0}class ValidationPath{constructor(e,t){this.errorPrefix_=t,this.parts_=pathSlice(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=(0,d.stringLength)(this.parts_[e]);validationPathCheckValid(this)}}function validationPathCheckValid(e){if(e.byteLength_>O)throw new Error(e.errorPrefix_+"has a key path longer than "+O+" bytes ("+e.byteLength_+").");if(e.parts_.length>M)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+M+") or object contains a cycle "+validationPathToErrorString(e))}function validationPathToErrorString(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class VisibilityMonitor extends EventEmitter{constructor(){super(["visible"]);let t,e;"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{var e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(e){return(0,d.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]}}class PersistentConnection extends ServerActions{constructor(e,t,r,n,i,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=n,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=SQa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!(0,d.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){var n=++this.requestNumber_,e={r:n,a:e,b:t};this.log_((0,d.stringify)(e)),(0,d.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),r&&(this.requestCBHash_[n]=r)}get(e){this.initConnection_();const r=new d.Deferred;e={p:e._path.toString(),q:e._queryObject},this.outstandingGets_.push({action:"g",request:e,onComplete:e=>{var t=e.d;"ok"===e.s?r.resolve(t):r.reject(t)}}),this.outstandingGetCount_++,e=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(e),r.promise}listen(e,t,r,n){this.initConnection_();var i=e._queryIdentifier,s=e._path.toString(),n=(this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,d.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,d.assert)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId."),{onComplete:n,hashFn:t,query:e,tag:r});this.listens.get(s).set(i,n),this.connected_&&this.sendListen_(n)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,e=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(e)})}sendListen_(i){const s=i.query,a=s._path.toString(),o=s._queryIdentifier;this.log_("Listen on "+a+" for "+o);var e={p:a};i.tag&&(e.q=s._queryObject,e.t=i.tag),e.h=i.hashFn(),this.sendRequest("q",e,e=>{var t=e.d,r=e.s,n=(PersistentConnection.warnOnListenWarnings_(t,s),this.listens.get(a)&&this.listens.get(a).get(o));n===i&&(this.log_("listen response",e),"ok"!==r&&this.removeListen_(a,o),i.onComplete)&&i.onComplete(r,t)})}static warnOnListenWarnings_(e,t){e&&"object"==typeof e&&(0,d.contains)(e,"w")&&(e=(0,d.safeGet)(e,"w"),Array.isArray(e))&&~e.indexOf("no_index")&&(e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',t=t._path.toString(),f("Using an unspecified index. Your data will be downloaded and "+`filtered on the client. Consider adding ${e} at `+t+" to your security rules for better performance."))}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,d.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const r=this.authToken_;var e=(0,d.isValidFormat)(r)?"auth":"gauth",t={cred:r};null===this.authOverride_?t.noauth=!0:"object"==typeof this.authOverride_&&(t.authvar=this.authOverride_),this.sendRequest(e,t,e=>{var t=e.s,e=e.d||"error";this.authToken_===r&&("ok"===t?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(t,e))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{var t=e.s,e=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,e)})}unlisten(e,t){var r=e._path.toString(),n=e._queryIdentifier,i=(this.log_("Unlisten called for "+r+" "+n),(0,d.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,n));i&&this.connected_&&this.sendUnlisten_(r,n,e._queryObject,t)}sendUnlisten_(e,t,r,n){this.log_("Unlisten on "+e+" for "+t);t={p:e};n&&(t.q=r,t.t=n),this.sendRequest("n",t)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,n){t={p:t,d:r};this.log_("onDisconnect "+e,t),this.sendRequest(e,t,e=>{n&&setTimeout(()=>{n(e.s,e.d)},Math.floor(0))})}put(e,t,r,n){this.putInternal("p",e,t,r,n)}merge(e,t,r,n){this.putInternal("m",e,t,r,n)}putInternal(e,t,r,n,i){this.initConnection_();r={p:t,d:r},void 0!==i&&(r.h=i),this.outstandingPuts_.push({action:e,request:r,onComplete:n}),this.outstandingPutCount_++,i=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(i):this.log_("Buffering put: "+t)}sendPut_(t){const r=this.outstandingPuts_[t].action;var e=this.outstandingPuts_[t].request;const n=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,e,e=>{this.log_(r+" response",e),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),n&&n(e.s,e.d)})}reportStats(e){this.connected_&&(this.log_("reportStats",e={c:e}),this.sendRequest("s",e,e=>{"ok"!==e.s&&(e=e.d,this.log_("reportStats","Error sending stats: "+e))}))}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,d.stringify)(e));var t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):TQa("Unrecognized action received from server: "+(0,d.stringify)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,d.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){var e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),e=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-e),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this);const c=this.onRealtimeDisconnect_.bind(this);var i=this.id+":"+PersistentConnection.nextConnectionId_++,s=this.lastSessionId;let t=!1,r=null;var a=function(){r?r.close():(t=!0,c())},o=(this.realtime_={close:a,sendRequest:function(e){(0,d.assert)(r,"sendRequest call when we're not connected not allowed."),r.sendRequest(e)}},this.forceTokenRefresh_);this.forceTokenRefresh_=!1;try{var[u,l]=await Promise.all([this.authTokenProvider_.getToken(o),this.appCheckTokenProvider_.getToken(o)]);t?h("getToken() completed but was canceled"):(h("getToken() completed. Creating connection."),this.authToken_=u&&u.accessToken,this.appCheckToken_=l&&l.token,r=new Connection(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,c,e=>{f(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},s))}catch(e){this.log_("Failed to get token: "+e),t||(this.repoInfo_.nodeAdmin&&f(e),a())}}}interrupt(e){h("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){h("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,d.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){e-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;r=t?t.map(e=>cRa(e)).join("$"):"default";t=this.removeListen_(e,r);t&&t.onComplete&&t.onComplete("permission_denied")}removeListen_(e,t){var r,e=new Path(e).toString();let n;return this.listens.has(e)?(r=this.listens.get(e),n=r.get(t),r.delete(t),0===r.size&&this.listens.delete(e)):n=void 0,n}onAuthRevoked_(e,t){h("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){h("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,3<=this.invalidAppCheckTokenCount_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){var e={};let t="js";e["sdk."+(t=(0,d.isNodeSdk)()?this.repoInfo_.nodeAdmin?"admin_node":"node":t)+"."+g.replace(/\./g,"-")]=1,(0,d.isMobileCordova)()?e["framework.cordova"]=1:(0,d.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){var e=OnlineMonitor.getInstance().currentlyOnline();return(0,d.isEmpty)(this.interruptReasons_)&&e}}PersistentConnection.nextPersistentConnectionId_=0,PersistentConnection.nextConnectionId_=0;class NamedNode{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new NamedNode(e,t)}}class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){e=new NamedNode(s,e),t=new NamedNode(s,t);return 0!==this.compare(e,t)}minPost(){return NamedNode.MIN}}let j;class KeyIndex extends Index{static get __EMPTY_NODE(){return j}static set __EMPTY_NODE(e){j=e}compare(e,t){return S(e.name,t.name)}isDefinedOn(e){throw(0,d.assertionError)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(a,j)}makePost(e,t){return(0,d.assert)("string"==typeof e,"KeyIndex indexValue must always be a string."),new NamedNode(e,j)}toString(){return".key"}}const p=new KeyIndex;class SortedMapIterator{constructor(e,t,r,n,i=null){this.isReverse_=n,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,n&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e=this.nodeStack_.pop(),t;if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return 0<this.nodeStack_.length}peek(){var e;return 0===this.nodeStack_.length?null:(e=this.nodeStack_[this.nodeStack_.length-1],this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value})}}class LLRBNode{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:LLRBNode.RED,this.left=null!=n?n:SortedMap.EMPTY_NODE,this.right=null!=i?i:SortedMap.EMPTY_NODE}copy(e,t,r,n,i){return new LLRBNode(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this;var i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let e=this;return(e=(e=e.left.isRed_()||e.left.left.isRed_()?e:e.moveRedLeft_()).copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}remove(e,t){let r,n;if(t(e,(r=this).key)<0)r=(r=r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()?r:r.moveRedLeft_()).copy(null,null,null,r.left.remove(e,t),null);else{if(0===t(e,(r=(r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()?r:r.moveRedRight_()).key)){if(r.right.isEmpty())return SortedMap.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e=(e=(e=e.right.isRed_()&&!e.left.isRed_()?e.rotateLeft_():e).left.isRed_()&&e.left.left.isRed_()?e.rotateRight_():e).left.isRed_()&&e.right.isRed_()?e.colorFlip_():e}moveRedLeft_(){let e=this.colorFlip_();return e=e.right.left.isRed_()?(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_():e}moveRedRight_(){let e=this.colorFlip_();return e=e.left.left.isRed_()?(e=e.rotateRight_()).colorFlip_():e}rotateLeft_(){var e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){var e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}LLRBNode.RED=!0,LLRBNode.BLACK=!1;class SortedMap{constructor(e,t=SortedMap.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new SortedMap(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(e){var t;let r=this.root_;for(;!r.isEmpty();){if(0===(t=this.comparator_(e,r.key)))return r.value;t<0?r=r.left:0<t&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,n=null;for(;!r.isEmpty();){if(0===(t=this.comparator_(e,r.key))){if(r.left.isEmpty())return n?n.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:0<t&&(r=(n=r).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new SortedMapIterator(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new SortedMapIterator(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new SortedMapIterator(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new SortedMapIterator(this.root_,null,this.comparator_,!0,e)}}function NAME_ONLY_COMPARATOR(e,t){return S(e.name,t.name)}function NAME_COMPARATOR(e,t){return S(e,t)}SortedMap.EMPTY_NODE=new class LLRBEmptyNode{copy(e,t,r,n,i){return this}insert(e,t,r){return new LLRBNode(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};let U;function tSa(e){return"number"==typeof e?"number:"+eRa(e):"string:"+e}function uSa(e){var t;e.isLeafNode()?(t=e.val(),(0,d.assert)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,d.contains)(t,".sv"),"Priority must be a string or number.")):(0,d.assert)(e===U||e.isEmpty(),"priority of unexpected type."),(0,d.assert)(e===U||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}let z;class LeafNode{constructor(e,t=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,(this.lazyHash_=null,d.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),uSa(this.priorityNode_)}static set __childrenNodeConstructor(e){z=e}static get __childrenNodeConstructor(){return z}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new LeafNode(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pathIsEmpty(e)?this:".priority"===pathGetFront(e)?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){var r=pathGetFront(e);return null===r?t:t.isEmpty()&&".priority"!==r?this:((0,d.assert)(".priority"!==r||1===pathGetLength(e),".priority must be the last token in a path"),this.updateImmediateChild(r,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tSa(this.priorityNode_.val())+":");var t=typeof this.value_;e=(e+=t+":")+("number"==t?eRa(this.value_):this.value_),this.lazyHash_=MQa(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof LeafNode.__childrenNodeConstructor?-1:((0,d.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){var t=typeof e.value_,r=typeof this.value_,n=LeafNode.VALUE_TYPE_ORDER.indexOf(t),i=LeafNode.VALUE_TYPE_ORDER.indexOf(r);return(0,d.assert)(0<=n,"Unknown leaf type: "+t),(0,d.assert)(0<=i,"Unknown leaf type: "+r),n===i?"object"==r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-n}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];let W,q;const o=new class PriorityIndex extends Index{compare(e,t){var r=e.node.getPriority(),n=t.node.getPriority(),r=r.compareTo(n);return 0===r?S(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(a,new LeafNode("[PRIORITY-POST]",q))}makePost(e,t){e=W(e);return new NamedNode(t,new LeafNode("[PRIORITY-POST]",e))}toString(){return".priority"}},V=Math.log(2);class Base12Num{constructor(e){this.count=(t=e+1,parseInt(Math.log(t)/V,10)),this.current_=this.count-1,t=this.count;var t=parseInt(Array(t+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}function ASa(o,e,u,t){o.sort(e);const l=function(e,t){var r=t-e;let n,i;return 0==r?null:1==r?(n=o[e],i=u?u(n):n,new LLRBNode(i,n.node,LLRBNode.BLACK,null,null)):(r=parseInt(r/2,10)+e,e=l(e,r),t=l(r+1,t),n=o[r],i=u?u(n):n,new LLRBNode(i,n.node,LLRBNode.BLACK,e,t))};var r=function(t){let i=null,s=null,a=o.length;function b20(e,t){var r=a-e,n=a,e=(a-=e,l(1+r,n)),n=o[r],r=u?u(n):n,r=new LLRBNode(r,n.node,t,null,e);i=(i?i.left=r:s=r,r)}for(let e=0;e<t.count;++e){var r=t.nextBitIsOne(),n=Math.pow(2,t.count-(e+1));r?b20(n,LLRBNode.BLACK):(b20(n,LLRBNode.BLACK),b20(n,LLRBNode.RED))}return s}(new Base12Num(o.length));return new SortedMap(t||e,r)}let G;const H={};class IndexMap{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,d.assert)((H,o),"ChildrenNode.ts has not been loaded"),G=G||new IndexMap({".priority":H},{".priority":o})}get(e){var t=(0,d.safeGet)(this.indexes_,e);if(t)return t instanceof SortedMap?t:null;throw new Error("No index defined for "+e)}hasIndex(e){return(0,d.contains)(this.indexSet_,e.toString())}addIndex(e,t){(0,d.assert)(e!==p,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r=[];let n=!1;var i=t.getIterator(NamedNode.Wrap);let s=i.getNext();for(;s;)n=n||e.isDefinedOn(s.node),r.push(s),s=i.getNext();let a;a=n?ASa(r,e.getCompare()):H;var t=e.toString(),o=Object.assign({},this.indexSet_),u=(o[t]=e,Object.assign({},this.indexes_));return u[t]=a,new IndexMap(u,o)}addToIndexes(a,o){var e=(0,d.map)(this.indexes_,(t,r)=>{var n=(0,d.safeGet)(this.indexSet_,r);if((0,d.assert)(n,"Missing index implementation for "+r),t===H){if(n.isDefinedOn(a.node)){var i=[],s=o.getIterator(NamedNode.Wrap);let e=s.getNext();for(;e;)e.name!==a.name&&i.push(e),e=s.getNext();return i.push(a),ASa(i,n.getCompare())}return H}{r=o.get(a.name);let e=t;return(e=r?e.remove(new NamedNode(a.name,r)):e).insert(a,a.node)}});return new IndexMap(e,this.indexSet_)}removeFromIndexes(r,n){var e=(0,d.map)(this.indexes_,e=>{var t;return e!==H&&(t=n.get(r.name))?e.remove(new NamedNode(r.name,t)):e});return new IndexMap(e,this.indexSet_)}}let J;class ChildrenNode{constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&uSa(this.priorityNode_),this.children_.isEmpty()&&(0,d.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return J=J||new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default)}isLeafNode(){return!1}getPriority(){return this.priorityNode_||J}updatePriority(e){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,e,this.indexMap_)}getImmediateChild(e){return".priority"===e?this.getPriority():null===(e=this.children_.get(e))?J:e}getChild(e){var t=pathGetFront(e);return null===t?this:this.getImmediateChild(t).getChild(pathPopFront(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(r,n){if((0,d.assert)(n,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(n);{var i=new NamedNode(r,n);let e,t;t=n.isEmpty()?(e=this.children_.remove(r),this.indexMap_.removeFromIndexes(i,this.children_)):(e=this.children_.insert(r,n),this.indexMap_.addToIndexes(i,this.children_));r=e.isEmpty()?J:this.priorityNode_;return new ChildrenNode(e,r,t)}}updateChild(e,t){var r=pathGetFront(e);return null===r?t:((0,d.assert)(".priority"!==pathGetFront(e)||1===pathGetLength(e),".priority must be the last token in a path"),e=this.getImmediateChild(r).updateChild(pathPopFront(e),t),this.updateImmediateChild(r,e))}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(r){if(this.isEmpty())return null;const n={};let i=0,s=0,a=!0;if(this.forEachChild(o,(e,t)=>{n[e]=t.val(r),i++,a&&ChildrenNode.INTEGER_REGEXP_.test(e)?s=Math.max(s,Number(e)):a=!1}),!r&&a&&s<2*i){var e=[];for(const t in n)e[t]=n[t];return e}return r&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let r="";this.getPriority().isEmpty()||(r+="priority:"+tSa(this.getPriority().val())+":"),this.forEachChild(o,(e,t)=>{t=t.hash();""!==t&&(r+=":"+e+":"+t)}),this.lazyHash_=""===r?"":MQa(r)}return this.lazyHash_}getPredecessorChildName(e,t,r){var r=this.resolveIndex_(r);return r?(r=r.getPredecessorKey(new NamedNode(e,t)))?r.name:null:this.children_.getPredecessorKey(e)}getFirstChildName(e){var e=this.resolveIndex_(e);return e?(e=e.minKey())&&e.name:this.children_.minKey()}getFirstChild(e){e=this.getFirstChildName(e);return e?new NamedNode(e,this.children_.get(e)):null}getLastChildName(e){var e=this.resolveIndex_(e);return e?(e=e.maxKey())&&e.name:this.children_.maxKey()}getLastChild(e){e=this.getLastChildName(e);return e?new NamedNode(e,this.children_.get(e)):null}forEachChild(e,t){e=this.resolveIndex_(e);return e?e.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(t,r){var e=this.resolveIndex_(r);if(e)return e.getIteratorFrom(t,e=>e);{var n=this.children_.getIteratorFrom(t.name,NamedNode.Wrap);let e=n.peek();for(;null!=e&&r.compare(e,t)<0;)n.getNext(),e=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(t,r){var e=this.resolveIndex_(r);if(e)return e.getReverseIteratorFrom(t,e=>e);{var n=this.children_.getReverseIteratorFrom(t.name,NamedNode.Wrap);let e=n.peek();for(;null!=e&&0<r.compare(e,t);)n.getNext(),e=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===X?-1:0}withIndex(e){return e===p||this.indexMap_.hasIndex(e)?this:(e=this.indexMap_.addIndex(e,this.children_),new ChildrenNode(this.children_,this.priorityNode_,e))}isIndexed(e){return e===p||this.indexMap_.hasIndex(e)}equals(r){if(r===this)return!0;if(!r.isLeafNode())if(this.getPriority().equals(r.getPriority())){if(this.children_.count()!==r.children_.count())return!1;{var n=this.getIterator(o),i=r.getIterator(o);let e=n.getNext(),t=i.getNext();for(;e&&t;){if(e.name!==t.name||!e.node.equals(t.node))return!1;e=n.getNext(),t=i.getNext()}return null===e&&null===t}}return!1}resolveIndex_(e){return e===p?null:this.indexMap_.get(e.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const X=new MaxNode,Y=(Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(s,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(a,X)}}),KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE,LeafNode.__childrenNodeConstructor=ChildrenNode,!function setMaxNode$1(e){U=e}(X),!function setMaxNode(e){q=e}(X),!0);function nodeFromJSON(n,e=null){if(null===n)return ChildrenNode.EMPTY_NODE;var t,i;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,d.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"!=typeof(n="object"==typeof n&&".value"in n&&null!==n[".value"]?n[".value"]:n)||".sv"in n)return t=n,new LeafNode(t,nodeFromJSON(e));if(n instanceof Array||!Y){let r=ChildrenNode.EMPTY_NODE;return each(n,(e,t)=>{!(0,d.contains)(n,e)||"."===e.substring(0,1)||!(t=nodeFromJSON(t)).isLeafNode()&&t.isEmpty()||(r=r.updateImmediateChild(e,t))}),r.updatePriority(nodeFromJSON(e))}{const s=[];let r=!1;return each(n,(e,t)=>{"."===e.substring(0,1)||(t=nodeFromJSON(t)).isEmpty()||(r=r||!t.getPriority().isEmpty(),s.push(new NamedNode(e,t)))}),0===s.length?ChildrenNode.EMPTY_NODE:(t=ASa(s,NAME_ONLY_COMPARATOR,e=>e.name,NAME_COMPARATOR),r?(i=ASa(s,o.getCompare()),new ChildrenNode(t,nodeFromJSON(e),new IndexMap({".priority":i},{".priority":o}))):new ChildrenNode(t,nodeFromJSON(e),IndexMap.Default))}}!function setNodeFromJSON(e){W=e}(nodeFromJSON);class PathIndex extends Index{constructor(e){super(),this.indexPath_=e,(0,d.assert)(!pathIsEmpty(e)&&".priority"!==pathGetFront(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){var r=this.extractChild(e.node),n=this.extractChild(t.node),r=r.compareTo(n);return 0===r?S(e.name,t.name):r}makePost(e,t){e=nodeFromJSON(e),e=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,e);return new NamedNode(t,e)}maxPost(){var e=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,X);return new NamedNode(a,e)}toString(){return pathSlice(this.indexPath_,0).join("/")}}function MSa(t){if(t===""+k)return Q;var e=B(t);if(null!=e)return""+(e+1);var r=new Array(t.length);for(let e=0;e<r.length;e++)r[e]=t.charAt(e);if(r.length<ee)return r.push(Q),r.join("");let n=r.length-1;for(;0<=n&&r[n]===Z;)n--;return-1===n?a:(e=r[n],e=$.charAt($.indexOf(e)+1),r[n]=e,r.slice(0,n+1).join(""))}function NSa(t){if(t===""+F)return s;var e=B(t);if(null!=e)return""+(e-1);var r=new Array(t.length);for(let e=0;e<r.length;e++)r[e]=t.charAt(e);return r[r.length-1]===Q?1===r.length?""+k:(delete r[r.length-1],r.join("")):(r[r.length-1]=$.charAt($.indexOf(r[r.length-1])-1),r.join("")+Z.repeat(ee-r.length))}const K=new class ValueIndex extends Index{compare(e,t){var r=e.node.compareTo(t.node);return 0===r?S(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(e,t){e=nodeFromJSON(e);return new NamedNode(t,e)}toString(){return".value"}},$="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Q="-",Z="z",ee=786,te=function(){let s=0;const a=[];return function(e){var t=e===s;s=e;let r;var n=new Array(8);for(r=7;0<=r;r--)n[r]=$.charAt(e%64),e=Math.floor(e/64);(0,d.assert)(0===e,"Cannot push at time == 0");let i=n.join("");if(t){for(r=11;0<=r&&63===a[r];r--)a[r]=0;a[r]++}else for(r=0;r<12;r++)a[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=$.charAt(a[r]);return(0,d.assert)(20===i.length,"nextPushId: Length should be 20."),i}}();function changeValue(e){return{type:"value",snapshotNode:e}}function changeChildAdded(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function changeChildRemoved(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function changeChildChanged(e,t,r){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:r}}class IndexedFilter{constructor(e){this.index_=e}updateChild(e,t,r,n,i,s){(0,d.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(n).equals(r.getChild(n))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?e.hasChild(t)?s.trackChildChange(changeChildRemoved(t,a)):(0,d.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(changeChildAdded(t,r)):s.trackChildChange(changeChildChanged(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(n,r,i){return null!=i&&(n.isLeafNode()||n.forEachChild(o,(e,t)=>{r.hasChild(e)||i.trackChildChange(changeChildRemoved(e,t))}),r.isLeafNode()||r.forEachChild(o,(e,t)=>{var r;n.hasChild(e)?(r=n.getImmediateChild(e)).equals(t)||i.trackChildChange(changeChildChanged(e,t,r)):i.trackChildChange(changeChildAdded(e,t))})),r.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ChildrenNode.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class RangedFilter{constructor(e){this.indexedFilter_=new IndexedFilter(e.getIndex()),this.index_=e.getIndex(),this.startPost_=RangedFilter.getStartPost_(e),this.endPost_=RangedFilter.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,n,i,s){return this.matches(new NamedNode(t,r))||(r=ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,n,i,s)}updateFullNode(e,t,r){let n=(t=t.isLeafNode()?ChildrenNode.EMPTY_NODE:t).withIndex(this.index_);n=n.updatePriority(ChildrenNode.EMPTY_NODE);const i=this;return t.forEachChild(o,(e,t)=>{i.matches(new NamedNode(e,t))||(n=n.updateImmediateChild(e,ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,n,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){var t;return e.hasStart()?(t=e.getIndexStartName(),e.getIndex().makePost(e.getIndexStartValue(),t)):e.getIndex().minPost()}static getEndPost_(e){var t;return e.hasEnd()?(t=e.getIndexEndName(),e.getIndex().makePost(e.getIndexEndValue(),t)):e.getIndex().maxPost()}}class LimitedFilter{constructor(e){this.rangedFilter_=new RangedFilter(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,n,i,s){return this.rangedFilter_.matches(new NamedNode(t,r))||(r=ChildrenNode.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,n,i,s):this.fullLimitUpdateChild_(e,t,r,i,s)}updateFullNode(e,a,t){let o;if(a.isLeafNode()||a.isEmpty())o=ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){o=ChildrenNode.EMPTY_NODE.withIndex(this.index_);let t,r=(t=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_),0);for(;t.hasNext()&&r<this.limit_;){var n=t.getNext();let e;if(!(e=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),n)<=0:this.index_.compare(n,this.rangedFilter_.getEndPost())<=0))break;o=o.updateImmediateChild(n.name,n.node),r++}}else{o=(o=a.withIndex(this.index_)).updatePriority(ChildrenNode.EMPTY_NODE);let e,t,r,n;if(this.reverse_){n=o.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),t=this.rangedFilter_.getStartPost();const l=this.index_.getCompare();r=(e,t)=>l(t,e)}else n=o.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),t=this.rangedFilter_.getEndPost(),r=this.index_.getCompare();let i=0,s=!1;for(;n.hasNext();){var u=n.getNext();(s=!s&&r(e,u)<=0?!0:s)&&i<this.limit_&&r(u,t)<=0?i++:o=o.updateImmediateChild(u.name,ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,t)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,n,i){let s;if(this.reverse_){const p=this.index_.getCompare();s=(e,t)=>p(t,e)}else s=this.index_.getCompare();var a=e,o=((0,d.assert)(a.numChildren()===this.limit_,""),new NamedNode(t,r)),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(o);if(a.hasChild(t)){var c=a.getImmediateChild(t);let e=n.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=e&&(e.name===t||a.hasChild(e.name));)e=n.getChildAfterChild(this.index_,e,this.reverse_);var h=null==e?1:s(e,o);return l&&!r.isEmpty()&&0<=h?(null!=i&&i.trackChildChange(changeChildChanged(t,r,c)),a.updateImmediateChild(t,r)):(null!=i&&i.trackChildChange(changeChildRemoved(t,c)),h=a.updateImmediateChild(t,ChildrenNode.EMPTY_NODE),null!=e&&this.rangedFilter_.matches(e)?(null!=i&&i.trackChildChange(changeChildAdded(e.name,e.node)),h.updateImmediateChild(e.name,e.node)):h)}return!r.isEmpty()&&l&&0<=s(u,o)?(null!=i&&(i.trackChildChange(changeChildRemoved(u.name,u.node)),i.trackChildChange(changeChildAdded(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(u.name,ChildrenNode.EMPTY_NODE)):e}}class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=o}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,d.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,d.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:s}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,d.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,d.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:a}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,d.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===o}copy(){var e=new QueryParams;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function queryParamsStartAt(e,t,r){e=e.copy();return e.startSet_=!0,e.indexStartValue_=t=void 0===t?null:t,null!=r?(e.startNameSet_=!0,e.indexStartName_=r):(e.startNameSet_=!1,e.indexStartName_=""),e}function queryParamsEndAt(e,t,r){e=e.copy();return e.endSet_=!0,e.indexEndValue_=t=void 0===t?null:t,void 0!==r?(e.endNameSet_=!0,e.indexEndName_=r):(e.endNameSet_=!1,e.indexEndName_=""),e}function queryParamsOrderBy(e,t){e=e.copy();return e.index_=t,e}function queryParamsToRestQueryStringParameters(t){var r={};if(!t.isDefault()){let e;e=t.index_===o?"$priority":t.index_===K?"$value":t.index_===p?"$key":((0,d.assert)(t.index_ instanceof PathIndex,"Unrecognized index type!"),t.index_.toString()),r.orderBy=(0,d.stringify)(e),t.startSet_&&(r.startAt=(0,d.stringify)(t.indexStartValue_),t.startNameSet_)&&(r.startAt+=","+(0,d.stringify)(t.indexStartName_)),t.endSet_&&(r.endAt=(0,d.stringify)(t.indexEndValue_),t.endNameSet_)&&(r.endAt+=","+(0,d.stringify)(t.indexEndName_)),t.limitSet_&&(t.isViewFromLeft()?r.limitToFirst=t.limit_:r.limitToLast=t.limit_)}return r}function queryParamsGetQueryObject(t){var r={};if(t.startSet_&&(r.sp=t.indexStartValue_,t.startNameSet_)&&(r.sn=t.indexStartName_),t.endSet_&&(r.ep=t.indexEndValue_,t.endNameSet_)&&(r.en=t.indexEndName_),t.limitSet_){r.l=t.limit_;let e=t.viewFrom_;""===e&&(e=t.isViewFromLeft()?"l":"r"),r.vf=e}return t.index_!==o&&(r.i=t.index_.toString()),r}Ne._QueryParams=QueryParams;class ReadonlyRestClient extends ServerActions{constructor(e,t,r,n){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=n,this.log_=SQa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,d.assert)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const s=e._path.toString(),a=(this.log_("Listen called for "+s+" "+e._queryIdentifier),ReadonlyRestClient.getListenId_(e,n)),o={};this.listens_[a]=o;e=queryParamsToRestQueryStringParameters(e._queryParams);this.restRequest_(s+".json",e,(t,e)=>{let r=e;if(null===(t=404===t?r=null:t)&&this.onDataUpdate_(s,r,!1,n),(0,d.safeGet)(this.listens_,a)===o){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(e,null)}})}unlisten(e,t){e=ReadonlyRestClient.getListenId_(e,t);delete this.listens_[e]}get(e){var t=queryParamsToRestQueryStringParameters(e._queryParams);const n=e._path.toString(),i=new d.Deferred;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;null===(e=404===e?r=null:e)?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(i,s={},a){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([e,t])=>{e&&e.accessToken&&(s.auth=e.accessToken),t&&t.token&&(s.ac=t.token);const r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,d.querystring)(s),n=(this.log_("Sending REST request for "+r),new XMLHttpRequest);n.onreadystatechange=()=>{if(a&&4===n.readyState){this.log_("REST Response for "+r+" received. status:",n.status,"response:",n.responseText);let e=null;if(200<=n.status&&n.status<300){try{e=(0,d.jsonEval)(n.responseText)}catch(e){f("Failed to parse JSON response for "+r+": "+n.responseText)}a(null,e)}else 401!==n.status&&404!==n.status&&f("Got unsuccessful REST response for "+r+" Status: "+n.status),a(n.status);a=null}},n.open("GET",r,!0),n.send()})}}class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(e,t,r){var n;pathIsEmpty(t)?(e.value=r,e.children.clear()):null!==e.value?e.value=e.value.updateChild(t,r):(n=pathGetFront(t),e.children.has(n)||e.children.set(n,newSparseSnapshotTree()),sparseSnapshotTreeRemember(e.children.get(n),t=pathPopFront(t),r))}function sparseSnapshotTreeForEachTree(e,r,n){null!==e.value?n(r,e.value):function sparseSnapshotTreeForEachChild(e,r){e.children.forEach((e,t)=>{r(t,e)})}(e,(e,t)=>{sparseSnapshotTreeForEachTree(t,new Path(r.toString()+"/"+e),n)})}class StatsListener{constructor(e){this.collection_=e,this.last_=null}get(){var e=this.collection_.get();const r=Object.assign({},e);return this.last_&&each(this.last_,(e,t)=>{r[e]=r[e]-t}),this.last_=e,r}}class StatsReporter{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new StatsListener(e);t=1e4+2e4*Math.random();nRa(this.reportStats_.bind(this),Math.floor(t))}reportStats_(){var e=this.statsListener_.get();const r={};let n=!1;each(e,(e,t)=>{0<t&&(0,d.contains)(this.statsToReport_,e)&&(r[e]=t,n=!0)}),n&&this.server_.reportStats(r),nRa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(e=l=l||{})[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class AckUserWrite{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=l.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(e){var t;return pathIsEmpty(this.path)?null!=this.affectedTree.value?((0,d.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this):(t=this.affectedTree.subtree(new Path(e)),new AckUserWrite(new Path(""),t,this.revert)):((0,d.assert)(pathGetFront(this.path)===e,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert))}}class ListenComplete{constructor(e,t){this.source=e,this.path=t,this.type=l.LISTEN_COMPLETE}operationForChild(e){return pathIsEmpty(this.path)?new ListenComplete(this.source,new Path("")):new ListenComplete(this.source,pathPopFront(this.path))}}class Overwrite{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=l.OVERWRITE}operationForChild(e){return pathIsEmpty(this.path)?new Overwrite(this.source,new Path(""),this.snap.getImmediateChild(e)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}class Merge{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=l.MERGE}operationForChild(e){var t;return pathIsEmpty(this.path)?(t=this.children.subtree(new Path(e))).isEmpty()?null:t.value?new Overwrite(this.source,new Path(""),t.value):new Merge(this.source,new Path(""),t):((0,d.assert)(pathGetFront(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children))}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class CacheNode{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){return pathIsEmpty(e)?this.isFullyInitialized()&&!this.filtered_:(e=pathGetFront(e),this.isCompleteForChild(e))}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class EventGenerator{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function eventGeneratorGenerateEventsForChanges(t,e,r,n){var i=[];const s=[];return e.forEach(e=>{"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&s.push(function changeChildMoved(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}(e.childName,e.snapshotNode))}),eventGeneratorGenerateEventsForType(t,i,"child_removed",e,n,r),eventGeneratorGenerateEventsForType(t,i,"child_added",e,n,r),eventGeneratorGenerateEventsForType(t,i,"child_moved",s,n,r),eventGeneratorGenerateEventsForType(t,i,"child_changed",e,n,r),eventGeneratorGenerateEventsForType(t,i,"value",e,n,r),i}function eventGeneratorGenerateEventsForType(n,i,t,e,s,a){e=e.filter(e=>e.type===t);e.sort((e,t)=>function eventGeneratorCompareChanges(e,t,r){if(null==t.childName||null==r.childName)throw(0,d.assertionError)("Should only compare child_ events.");t=new NamedNode(t.childName,t.snapshotNode),r=new NamedNode(r.childName,r.snapshotNode);return e.index_.compare(t,r)}(n,e,t)),e.forEach(t=>{const r=function eventGeneratorMaterializeSingleChange(e,t,r){return"value"===t.type||"child_removed"===t.type||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(n,t,a);s.forEach(e=>{e.respondsTo(t.type)&&i.push(e.createEvent(r,n.query_))})})}function newViewCache(e,t){return{eventCache:e,serverCache:t}}function viewCacheUpdateEventSnap(e,t,r,n){return newViewCache(new CacheNode(t,r,n),e.serverCache)}function viewCacheUpdateServerSnap(e,t,r,n){return newViewCache(e.eventCache,new CacheNode(t,r,n))}function viewCacheGetCompleteEventSnap(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let re;class ImmutableTree{constructor(e,t=re=re||new SortedMap(aRa)){this.value=e,this.children=t}static fromObject(e){let r=new ImmutableTree(null);return each(e,(e,t)=>{r=r.set(new Path(e),t)}),r}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){var r,n;return null!=this.value&&t(this.value)?{path:new Path(""),value:this.value}:!pathIsEmpty(e)&&(r=pathGetFront(e),null!==(n=this.children.get(r)))&&null!=(n=n.findRootMostMatchingPathAndValue(pathPopFront(e),t))?{path:pathChild(new Path(r),n.path),value:n.value}:null}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){var t;return pathIsEmpty(e)?this:(t=pathGetFront(e),null!==(t=this.children.get(t))?t.subtree(pathPopFront(e)):new ImmutableTree(null))}set(e,t){var r;return pathIsEmpty(e)?new ImmutableTree(t,this.children):(r=pathGetFront(e),e=(this.children.get(r)||new ImmutableTree(null)).set(pathPopFront(e),t),t=this.children.insert(r,e),new ImmutableTree(this.value,t))}remove(t){if(pathIsEmpty(t))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);var r=pathGetFront(t),n=this.children.get(r);if(n){n=n.remove(pathPopFront(t));let e;return e=n.isEmpty()?this.children.remove(r):this.children.insert(r,n),null===this.value&&e.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,e)}return this}get(e){var t;return pathIsEmpty(e)?this.value:(t=pathGetFront(e),(t=this.children.get(t))?t.get(pathPopFront(e)):null)}setTree(t,r){if(pathIsEmpty(t))return r;{var n=pathGetFront(t),t=(this.children.get(n)||new ImmutableTree(null)).setTree(pathPopFront(t),r);let e;return e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t),new ImmutableTree(this.value,e)}}fold(e){return this.fold_(new Path(""),e)}fold_(r,n){const i={};return this.children.inorderTraversal((e,t)=>{i[e]=t.fold_(pathChild(r,e),n)}),n(r,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,new Path(""),t)}findOnPath_(e,t,r){var n,i=!!this.value&&r(t,this.value);return i||(!pathIsEmpty(e)&&(i=pathGetFront(e),n=this.children.get(i))?n.findOnPath_(pathPopFront(e),pathChild(t,i),r):null)}foreachOnPath(e,t){return this.foreachOnPath_(e,new Path(""),t)}foreachOnPath_(e,t,r){var n,i;return pathIsEmpty(e)?this:(this.value&&r(t,this.value),n=pathGetFront(e),(i=this.children.get(n))?i.foreachOnPath_(pathPopFront(e),pathChild(t,n),r):new ImmutableTree(null))}foreach(e){this.foreach_(new Path(""),e)}foreach_(r,n){this.children.inorderTraversal((e,t)=>{t.foreach_(pathChild(r,e),n)}),this.value&&n(r,this.value)}foreachChild(r){this.children.inorderTraversal((e,t)=>{t.value&&r(e,t.value)})}}class CompoundWrite{constructor(e){this.writeTree_=e}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(t,r,n){if(pathIsEmpty(r))return new CompoundWrite(new ImmutableTree(n));var i=t.writeTree_.findRootMostValueAndPath(r);if(null==i)return s=new ImmutableTree(n),s=t.writeTree_.setTree(r,s),new CompoundWrite(s);{var s=i.path;let e=i.value;i=newRelativePath(s,r);return e=e.updateChild(i,n),new CompoundWrite(t.writeTree_.set(s,e))}}function compoundWriteAddWrites(e,r,t){let n=e;return each(t,(e,t)=>{n=compoundWriteAddWrite(n,pathChild(r,e),t)}),n}function compoundWriteRemoveWrite(e,t){return pathIsEmpty(t)?CompoundWrite.empty():(e=e.writeTree_.setTree(t,new ImmutableTree(null)),new CompoundWrite(e))}function compoundWriteHasCompleteWrite(e,t){return null!=compoundWriteGetCompleteNode(e,t)}function compoundWriteGetCompleteNode(e,t){var r=e.writeTree_.findRootMostValueAndPath(t);return null!=r?e.writeTree_.get(r.path).getChild(newRelativePath(r.path,t)):null}function compoundWriteGetCompleteChildren(e){const r=[];var t=e.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(o,(e,t)=>{r.push(new NamedNode(e,t))}):e.writeTree_.children.inorderTraversal((e,t)=>{null!=t.value&&r.push(new NamedNode(e,t.value))}),r}function compoundWriteChildCompoundWrite(e,t){var r;return pathIsEmpty(t)?e:null!=(r=compoundWriteGetCompleteNode(e,t))?new CompoundWrite(new ImmutableTree(r)):new CompoundWrite(e.writeTree_.subtree(t))}function compoundWriteApply(e,t){return function applySubtreeWrite(n,e,i){{if(null!=e.value)return i.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((e,t)=>{".priority"===e?((0,d.assert)(null!==t.value,"Priority writes must always be leaf nodes"),r=t.value):i=applySubtreeWrite(pathChild(n,e),t,i)}),i=i.getChild(n).isEmpty()||null===r?i:i.updateChild(pathChild(n,".priority"),r)}}}(new Path(""),e.writeTree_,t)}function writeTreeChildWrites(e,t){return newWriteTreeRef(t,e)}function writeTreeRemoveWrite(t,r){var e=t.allWrites.findIndex(e=>e.writeId===r);(0,d.assert)(0<=e,"removeWrite called with nonexistent writeId.");const n=t.allWrites[e];t.allWrites.splice(e,1);let i=n.visible,s=!1,a=t.allWrites.length-1;for(;i&&0<=a;){var o=t.allWrites[a];o.visible&&(a>=e&&function writeTreeRecordContainsPath_(e,t){{if(e.snap)return pathContains(e.path,t);for(const r in e.children)if(e.children.hasOwnProperty(r)&&pathContains(pathChild(e.path,r),t))return 1}}(o,n.path)?i=!1:pathContains(n.path,o.path)&&(s=!0)),a--}return!!i&&(s?function writeTreeResetTree_(e){e.visibleWrites=writeTreeLayerTree_(e.allWrites,writeTreeDefaultFilter_,new Path("")),0<e.allWrites.length?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(t):n.snap?t.visibleWrites=compoundWriteRemoveWrite(t.visibleWrites,n.path):each(n.children,e=>{t.visibleWrites=compoundWriteRemoveWrite(t.visibleWrites,pathChild(n.path,e))}),!0)}function writeTreeDefaultFilter_(e){return e.visible}function writeTreeLayerTree_(t,r,n){let i=CompoundWrite.empty();for(let e=0;e<t.length;++e){var s=t[e];if(r(s)){var a=s.path;let e;if(s.snap)pathContains(n,a)?(e=newRelativePath(n,a),i=compoundWriteAddWrite(i,e,s.snap)):pathContains(a,n)&&(e=newRelativePath(a,n),i=compoundWriteAddWrite(i,new Path(""),s.snap.getChild(e)));else{if(!s.children)throw(0,d.assertionError)("WriteRecord should have .snap or .children");pathContains(n,a)?(e=newRelativePath(n,a),i=compoundWriteAddWrites(i,e,s.children)):pathContains(a,n)&&(pathIsEmpty(e=newRelativePath(a,n))?i=compoundWriteAddWrites(i,new Path(""),s.children):(a=(0,d.safeGet)(s.children,pathGetFront(e)))&&(s=a.getChild(pathPopFront(e)),i=compoundWriteAddWrite(i,new Path(""),s)))}}}return i}function writeTreeCalcCompleteEventCache(e,t,r,n,i){var s;return n||i?(s=compoundWriteChildCompoundWrite(e.visibleWrites,t),!i&&s.writeTree_.isEmpty()?r:i||null!=r||compoundWriteHasCompleteWrite(s,new Path(""))?compoundWriteApply(writeTreeLayerTree_(e.allWrites,function(e){return(e.visible||i)&&(!n||!~n.indexOf(e.writeId))&&(pathContains(e.path,t)||pathContains(t,e.path))},t),r||ChildrenNode.EMPTY_NODE):null):null!=(s=compoundWriteGetCompleteNode(e.visibleWrites,t))?s:(s=compoundWriteChildCompoundWrite(e.visibleWrites,t)).writeTree_.isEmpty()?r:null!=r||compoundWriteHasCompleteWrite(s,new Path(""))?compoundWriteApply(s,r||ChildrenNode.EMPTY_NODE):null}function writeTreeRefCalcCompleteEventCache(e,t,r,n){return writeTreeCalcCompleteEventCache(e.writeTree,e.treePath,t,r,n)}function writeTreeRefCalcCompleteEventChildren(e,t){return function writeTreeCalcCompleteEventChildren(e,t,r){let n=ChildrenNode.EMPTY_NODE;var i=compoundWriteGetCompleteNode(e.visibleWrites,t);if(i)i.isLeafNode()||i.forEachChild(o,(e,t)=>{n=n.updateImmediateChild(e,t)});else if(r){const s=compoundWriteChildCompoundWrite(e.visibleWrites,t);r.forEachChild(o,(e,t)=>{t=compoundWriteApply(compoundWriteChildCompoundWrite(s,new Path(e)),t);n=n.updateImmediateChild(e,t)}),compoundWriteGetCompleteChildren(s).forEach(e=>{n=n.updateImmediateChild(e.name,e.node)})}else compoundWriteGetCompleteChildren(compoundWriteChildCompoundWrite(e.visibleWrites,t)).forEach(e=>{n=n.updateImmediateChild(e.name,e.node)});return n}(e.writeTree,e.treePath,t)}function writeTreeRefCalcEventCacheAfterServerOverwrite(e,t,r,n){return function writeTreeCalcEventCacheAfterServerOverwrite(e,t,r,n,i){return(0,d.assert)(n||i,"Either existingEventSnap or existingServerSnap must exist"),n=pathChild(t,r),compoundWriteHasCompleteWrite(e.visibleWrites,n)?null:(t=compoundWriteChildCompoundWrite(e.visibleWrites,n)).writeTree_.isEmpty()?i.getChild(r):compoundWriteApply(t,i.getChild(r))}(e.writeTree,e.treePath,t,r,n)}function writeTreeRefShadowingWrite(e,t){return function writeTreeShadowingWrite(e,t){return compoundWriteGetCompleteNode(e.visibleWrites,t)}(e.writeTree,pathChild(e.treePath,t))}function writeTreeRefCalcIndexedSlice(e,t,r,n,i,s){return function writeTreeCalcIndexedSlice(e,t,r,n,i,s,a){let o;if(e=compoundWriteChildCompoundWrite(e.visibleWrites,t),null!=(t=compoundWriteGetCompleteNode(e,new Path(""))))o=t;else{if(null==r)return[];o=compoundWriteApply(e,r)}if((o=o.withIndex(a)).isEmpty()||o.isLeafNode())return[];{var u=[],l=a.getCompare(),c=s?o.getReverseIteratorFrom(n,a):o.getIteratorFrom(n,a);let e=c.getNext();for(;e&&u.length<i;)0!==l(e,n)&&u.push(e),e=c.getNext();return u}}(e.writeTree,e.treePath,t,r,n,i,s)}function writeTreeRefCalcCompleteChild(e,t,r){return function writeTreeCalcCompleteChild(e,t,r,n){var t=pathChild(t,r),i=compoundWriteGetCompleteNode(e.visibleWrites,t);return null!=i?i:n.isCompleteForChild(r)?compoundWriteApply(compoundWriteChildCompoundWrite(e.visibleWrites,t),n.getNode().getImmediateChild(r)):null}(e.writeTree,e.treePath,t,r)}function writeTreeRefChild(e,t){return newWriteTreeRef(pathChild(e.treePath,t),e.writeTree)}function newWriteTreeRef(e,t){return{treePath:e,writeTree:t}}class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(e){var t=e.type,r=e.childName,n=((0,d.assert)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,d.assert)(".priority"!==r,"Only non-priority child changes can be tracked."),this.changeMap.get(r));if(n){var i=n.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(r,changeChildChanged(r,e.snapshotNode,n.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(r,changeChildRemoved(r,n.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(r,changeChildAdded(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,d.assertionError)("Illegal combination of changes: "+e+" occurred after "+n);this.changeMap.set(r,changeChildChanged(r,e.snapshotNode,n.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ne=new class NoCompleteChildSource_{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class WriteTreeCompleteChildSource{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){var t=this.viewCache_.eventCache;return t.isCompleteForChild(e)?t.getNode().getImmediateChild(e):(t=null!=this.optCompleteServerCache_?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache,writeTreeRefCalcCompleteChild(this.writes_,e,t))}getChildAfterChild(e,t,r){var n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),n=writeTreeRefCalcIndexedSlice(this.writes_,n,t,1,r,e);return 0===n.length?null:n[0]}}function viewProcessorApplyOperation(e,t,r,n,i){var s=new ChildChangeAccumulator;let a,o;if(r.type===l.OVERWRITE){var u=r;a=u.source.fromUser?viewProcessorApplyUserOverwrite(e,t,u.path,u.snap,n,i,s):((0,d.assert)(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!pathIsEmpty(u.path),viewProcessorApplyServerOverwrite(e,t,u.path,u.snap,n,i,o,s))}else if(r.type===l.MERGE){u=r;a=u.source.fromUser?function viewProcessorApplyUserMerge(r,n,i,e,s,a,o){let u=n;return e.foreach((e,t)=>{e=pathChild(i,e);viewProcessorCacheHasChild(n,pathGetFront(e))&&(u=viewProcessorApplyUserOverwrite(r,u,e,t,s,a,o))}),e.foreach((e,t)=>{e=pathChild(i,e);viewProcessorCacheHasChild(n,pathGetFront(e))||(u=viewProcessorApplyUserOverwrite(r,u,e,t,s,a,o))}),u}(e,t,u.path,u.children,n,i,s):((0,d.assert)(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered(),viewProcessorApplyServerMerge(e,t,u.path,u.children,n,i,o,s))}else if(r.type===l.ACK_USER_WRITE){u=r;a=u.revert?function viewProcessorRevertUserWrite(r,n,i,s,a,o){let u;{if(null!=writeTreeRefShadowingWrite(s,i))return n;{var a=new WriteTreeCompleteChildSource(s,n,a),l=n.eventCache.getNode();let t;if(pathIsEmpty(i)||".priority"===pathGetFront(i)){let e;e=e=n.serverCache.isFullyInitialized()?writeTreeRefCalcCompleteEventCache(s,viewCacheGetCompleteServerSnap(n)):(c=n.serverCache.getNode(),(0,d.assert)(c instanceof ChildrenNode,"serverChildren would be complete if leaf node"),writeTreeRefCalcCompleteEventChildren(s,c)),t=r.filter.updateFullNode(l,e,o)}else{var c=pathGetFront(i);let e=writeTreeRefCalcCompleteChild(s,c,n.serverCache);null==e&&n.serverCache.isCompleteForChild(c)&&(e=l.getImmediateChild(c)),(t=null!=e?r.filter.updateChild(l,c,e,pathPopFront(i),a,o):n.eventCache.getNode().hasChild(c)?r.filter.updateChild(l,c,ChildrenNode.EMPTY_NODE,pathPopFront(i),a,o):l).isEmpty()&&n.serverCache.isFullyInitialized()&&(u=writeTreeRefCalcCompleteEventCache(s,viewCacheGetCompleteServerSnap(n))).isLeafNode()&&(t=r.filter.updateFullNode(t,u,o))}return u=n.serverCache.isFullyInitialized()||null!=writeTreeRefShadowingWrite(s,new Path("")),viewCacheUpdateEventSnap(n,t,u,r.filter.filtersNodes())}}}(e,t,u.path,n,i,s):function viewProcessorAckUserWrite(e,t,i,r,s,a,o){if(null!=writeTreeRefShadowingWrite(s,i))return t;const u=t.serverCache.isFiltered(),l=t.serverCache;{if(null!=r.value){if(pathIsEmpty(i)&&l.isFullyInitialized()||l.isCompleteForPath(i))return viewProcessorApplyServerOverwrite(e,t,i,l.getNode().getChild(i),s,a,u,o);if(pathIsEmpty(i)){let r=new ImmutableTree(null);return l.getNode().forEachChild(p,(e,t)=>{r=r.set(new Path(e),t)}),viewProcessorApplyServerMerge(e,t,i,r,s,a,u,o)}return t}{let n=new ImmutableTree(null);return r.foreach((e,t)=>{var r=pathChild(i,e);l.isCompleteForPath(r)&&(n=n.set(e,l.getNode().getChild(r)))}),viewProcessorApplyServerMerge(e,t,i,n,s,a,u,o)}}}(e,t,u.path,u.affectedTree,n,i,s)}else{if(r.type!==l.LISTEN_COMPLETE)throw(0,d.assertionError)("Unknown operation type: "+r.type);a=function viewProcessorListenComplete(e,t,r,n,i){var s=t.serverCache,t=viewCacheUpdateServerSnap(t,s.getNode(),s.isFullyInitialized()||pathIsEmpty(r),s.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(e,t,r,n,ne,i)}(e,t,r.path,n,s)}u=s.getChanges();return function viewProcessorMaybeAddValueEvent(e,t,r){var n=t.eventCache;{var i,s;n.isFullyInitialized()&&(i=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=viewCacheGetCompleteEventSnap(e),0<r.length||!e.eventCache.isFullyInitialized()||i&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&r.push(changeValue(viewCacheGetCompleteEventSnap(t)))}}(t,a,u),{viewCache:a,changes:u}}function viewProcessorGenerateEventCacheAfterServerEvent(n,i,s,a,o,u){var l=i.eventCache;if(null!=writeTreeRefShadowingWrite(a,s))return i;{let t,r;if(pathIsEmpty(s))(0,d.assert)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t=i.serverCache.isFiltered()?(c=writeTreeRefCalcCompleteEventChildren(a,(c=viewCacheGetCompleteServerSnap(i))instanceof ChildrenNode?c:ChildrenNode.EMPTY_NODE),n.filter.updateFullNode(i.eventCache.getNode(),c,u)):(c=writeTreeRefCalcCompleteEventCache(a,viewCacheGetCompleteServerSnap(i)),n.filter.updateFullNode(i.eventCache.getNode(),c,u));else{var c=pathGetFront(s);if(".priority"===c){(0,d.assert)(1===pathGetLength(s),"Can't have a priority with additional path components");var h=l.getNode(),p=writeTreeRefCalcEventCacheAfterServerOverwrite(a,s,h,r=i.serverCache.getNode());t=null!=p?n.filter.updatePriority(h,p):l.getNode()}else{h=pathPopFront(s);let e;e=l.isCompleteForChild(c)?(r=i.serverCache.getNode(),null!=(p=writeTreeRefCalcEventCacheAfterServerOverwrite(a,s,l.getNode(),r))?l.getNode().getImmediateChild(c).updateChild(h,p):l.getNode().getImmediateChild(c)):writeTreeRefCalcCompleteChild(a,c,i.serverCache),t=null!=e?n.filter.updateChild(l.getNode(),c,e,h,o,u):l.getNode()}}return viewCacheUpdateEventSnap(i,t,l.isFullyInitialized()||pathIsEmpty(s),n.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(e,t,r,n,i,s,a,o){var u=t.serverCache;let l;a=a?e.filter:e.filter.getIndexedFilter();if(pathIsEmpty(r))l=a.updateFullNode(u.getNode(),n,null);else if(a.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(r,n);l=a.updateFullNode(u.getNode(),c,null)}else{c=pathGetFront(r);if(!u.isCompleteForPath(r)&&1<pathGetLength(r))return t;var h=pathPopFront(r),n=u.getNode().getImmediateChild(c).updateChild(h,n);l=".priority"===c?a.updatePriority(u.getNode(),n):a.updateChild(u.getNode(),c,n,h,ne,null)}c=viewCacheUpdateServerSnap(t,l,u.isFullyInitialized()||pathIsEmpty(r),a.filtersNodes());return viewProcessorGenerateEventCacheAfterServerEvent(e,c,r,i,new WriteTreeCompleteChildSource(i,c,s),o)}function viewProcessorApplyUserOverwrite(t,r,n,i,s,a,o){var u=r.eventCache;let l,e;s=new WriteTreeCompleteChildSource(s,r,a);if(pathIsEmpty(n))e=t.filter.updateFullNode(r.eventCache.getNode(),i,o),l=viewCacheUpdateEventSnap(r,e,!0,t.filter.filtersNodes());else{a=pathGetFront(n);if(".priority"===a)e=t.filter.updatePriority(r.eventCache.getNode(),i),l=viewCacheUpdateEventSnap(r,e,u.isFullyInitialized(),u.isFiltered());else{var c,n=pathPopFront(n),h=u.getNode().getImmediateChild(a);let e;e=pathIsEmpty(n)?i:null!=(c=s.getCompleteChild(a))?".priority"===pathGetBack(n)&&c.getChild(pathParent(n)).isEmpty()?c:c.updateChild(n,i):ChildrenNode.EMPTY_NODE,l=h.equals(e)?r:viewCacheUpdateEventSnap(r,t.filter.updateChild(u.getNode(),a,e,n,s,o),u.isFullyInitialized(),t.filter.filtersNodes())}}return l}function viewProcessorCacheHasChild(e,t){return e.eventCache.isCompleteForChild(t)}function viewProcessorApplyMerge(e,r,t){return t.foreach((e,t)=>{r=r.updateChild(e,t)}),r}function viewProcessorApplyServerMerge(n,i,e,t,s,a,o,u){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let l=i,r;r=pathIsEmpty(e)?t:new ImmutableTree(null).setTree(e,t);const c=i.serverCache.getNode();return r.children.inorderTraversal((e,t)=>{c.hasChild(e)&&(t=viewProcessorApplyMerge(0,i.serverCache.getNode().getImmediateChild(e),t),l=viewProcessorApplyServerOverwrite(n,l,new Path(e),t,s,a,o,u))}),r.children.inorderTraversal((e,t)=>{var r=!i.serverCache.isCompleteForChild(e)&&null===t.value;c.hasChild(e)||r||(r=viewProcessorApplyMerge(0,i.serverCache.getNode().getImmediateChild(e),t),l=viewProcessorApplyServerOverwrite(n,l,new Path(e),r,s,a,o,u))}),l}class View{constructor(e,t){this.query_=e,this.eventRegistrations_=[];var e=this.query_._queryParams,r=new IndexedFilter(e.getIndex()),e=function queryParamsGetNodeFilter(e){return e.loadsAllData()?new IndexedFilter(e.getIndex()):new(e.hasLimit()?LimitedFilter:RangedFilter)(e)}(e),n=(this.processor_=function newViewProcessor(e){return{filter:e}}(e),t.serverCache),t=t.eventCache,i=r.updateFullNode(ChildrenNode.EMPTY_NODE,n.getNode(),null),s=e.updateFullNode(ChildrenNode.EMPTY_NODE,t.getNode(),null),i=new CacheNode(i,n.isFullyInitialized(),r.filtersNodes()),n=new CacheNode(s,t.isFullyInitialized(),e.filtersNodes());this.viewCache_=newViewCache(n,i),this.eventGenerator_=new EventGenerator(this.query_)}get query(){return this.query_}}function viewIsEmpty(e){return 0===e.eventRegistrations_.length}function viewRemoveEventRegistration(r,n,t){const i=[];if(t){(0,d.assert)(null==n,"A cancel should cancel all event registrations.");const a=r.query._path;r.eventRegistrations_.forEach(e=>{e=e.createCancelEvent(t,a);e&&i.push(e)})}if(n){let t=[];for(let e=0;e<r.eventRegistrations_.length;++e){var s=r.eventRegistrations_[e];if(s.matches(n)){if(n.hasAnyCallback()){t=t.concat(r.eventRegistrations_.slice(e+1));break}}else t.push(s)}r.eventRegistrations_=t}else r.eventRegistrations_=[];return i}function viewApplyOperation(e,t,r,n){t.type===l.MERGE&&null!==t.source.queryId&&((0,d.assert)(viewCacheGetCompleteServerSnap(e.viewCache_),"We should always have a full cache before handling merges"),(0,d.assert)(viewCacheGetCompleteEventSnap(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,t=viewProcessorApplyOperation(e.processor_,i,t,r,n);return function viewProcessorAssertIndexed(e,t){(0,d.assert)(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,d.assert)(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,t.viewCache),(0,d.assert)(t.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=t.viewCache,viewGenerateEventsForChanges_(e,t.changes,t.viewCache.eventCache.getNode(),null)}function viewGenerateEventsForChanges_(e,t,r,n){n=n?[n]:e.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(e.eventGenerator_,t,r,n)}let ie;class SyncPoint{constructor(){this.views=new Map}}function syncPointApplyOperation(t,r,n,i){var e=r.source.queryId;if(null!==e)return e=t.views.get(e),(0,d.assert)(null!=e,"SyncTree gave us an op for an invalid query."),viewApplyOperation(e,r,n,i);{let e=[];for(const s of t.views.values())e=e.concat(viewApplyOperation(s,r,n,i));return e}}function syncPointGetView(e,r,n,i,s){var a=r._queryIdentifier,e=e.views.get(a);if(e)return e;{let e=writeTreeRefCalcCompleteEventCache(n,s?i:null),t=!1;t=!!e||(e=i instanceof ChildrenNode?writeTreeRefCalcCompleteEventChildren(n,i):ChildrenNode.EMPTY_NODE,!1);a=newViewCache(new CacheNode(e,t,!1),new CacheNode(i,s,!1));return new View(r,a)}}function syncPointAddEventRegistration(e,t,r,n,i,s){n=syncPointGetView(e,t,n,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,n),function viewAddEventRegistration(e,t){e.eventRegistrations_.push(t)}(n,r),function viewGetInitialEvents(e,t){var r=e.viewCache_.eventCache;const n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(o,(e,t)=>{n.push(changeChildAdded(e,t))}),r.isFullyInitialized()&&n.push(changeValue(r.getNode())),viewGenerateEventsForChanges_(e,n,r.getNode(),t)}(n,r)}function syncPointRemoveEventRegistration(e,t,r,n){var i=t._queryIdentifier,s=[];let a=[];var o=syncPointHasCompleteView(e);if("default"===i)for(var[u,l]of e.views.entries())a=a.concat(viewRemoveEventRegistration(l,r,n)),viewIsEmpty(l)&&(e.views.delete(u),l.query._queryParams.loadsAllData()||s.push(l.query));else{var c=e.views.get(i);c&&(a=a.concat(viewRemoveEventRegistration(c,r,n)),viewIsEmpty(c))&&(e.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query))}return o&&!syncPointHasCompleteView(e)&&s.push(new(function syncPointGetReferenceConstructor(){return(0,d.assert)(ie,"Reference.ts has not been loaded"),ie}())(t._repo,t._path)),{removed:s,events:a}}function syncPointGetQueryViews(e){var t=[];for(const r of e.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function syncPointGetCompleteServerCache(e,t){let r=null;for(const n of e.views.values())r=r||function viewGetCompleteServerCache(e,t){var r=viewCacheGetCompleteServerSnap(e.viewCache_);return r&&(e.query._queryParams.loadsAllData()||!pathIsEmpty(t)&&!r.getImmediateChild(pathGetFront(t)).isEmpty())?r.getChild(t):null}(n,t);return r}function syncPointViewForQuery(e,t){return t._queryParams.loadsAllData()?syncPointGetCompleteView(e):(t=t._queryIdentifier,e.views.get(t))}function syncPointViewExistsForQuery(e,t){return null!=syncPointViewForQuery(e,t)}function syncPointHasCompleteView(e){return null!=syncPointGetCompleteView(e)}function syncPointGetCompleteView(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let se;let ae=1;class SyncTree{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(e,t,r,n,i){return function writeTreeAddOverwrite(e,t,r,n,i){(0,d.assert)(n>e.lastWriteId,"Stacking an older write on top of newer ones"),e.allWrites.push({path:t,snap:r,writeId:n,visible:i=void 0===i?!0:i}),i&&(e.visibleWrites=compoundWriteAddWrite(e.visibleWrites,t,r)),e.lastWriteId=n}(e.pendingWriteTree_,t,r,n,i),i?syncTreeApplyOperationToSyncPoints_(e,new Overwrite(newOperationSourceUser(),t,r)):[]}function syncTreeAckUserWrite(e,t,r=!1){var n=function writeTreeGetWrite(t,r){for(let e=0;e<t.allWrites.length;e++){var n=t.allWrites[e];if(n.writeId===r)return n}return null}(e.pendingWriteTree_,t);if(writeTreeRemoveWrite(e.pendingWriteTree_,t)){let t=new ImmutableTree(null);return null!=n.snap?t=t.set(new Path(""),!0):each(n.children,e=>{t=t.set(new Path(e),!0)}),syncTreeApplyOperationToSyncPoints_(e,new AckUserWrite(n.path,t,r))}return[]}function syncTreeApplyServerOverwrite(e,t,r){return syncTreeApplyOperationToSyncPoints_(e,new Overwrite(newOperationSourceServer(),t,r))}function syncTreeRemoveEventRegistration(r,e,t,n,i=!1){var s=e._path,a=r.syncPointTree_.get(s);let o=[];if(a&&("default"===e._queryIdentifier||syncPointViewExistsForQuery(a,e))){t=syncPointRemoveEventRegistration(a,e,t,n),a=(!function syncPointIsEmpty(e){return 0===e.views.size}(a)||(r.syncPointTree_=r.syncPointTree_.remove(s)),t.removed);if(o=t.events,!i){t=-1!==a.findIndex(e=>e._queryParams.loadsAllData()),i=r.syncPointTree_.findOnPath(s,(e,t)=>syncPointHasCompleteView(t));if(t&&!i){s=r.syncPointTree_.subtree(s);if(!s.isEmpty()){var u=function syncTreeCollectDistinctViewsForSubTree_(e){return e.fold((e,t,n)=>{if(t&&syncPointHasCompleteView(t))return[syncPointGetCompleteView(t)];{let r=[];return t&&(r=syncPointGetQueryViews(t)),each(n,(e,t)=>{r=r.concat(t)}),r}})}(s);for(let e=0;e<u.length;++e){var l=u[e],c=l.query,l=syncTreeCreateListenerForView_(r,l);r.listenProvider_.startListening(syncTreeQueryForListening_(c),syncTreeTagForQuery(r,c),l.hashFn,l.onComplete)}}}!i&&0<a.length&&!n&&(t?r.listenProvider_.stopListening(syncTreeQueryForListening_(e),null):a.forEach(e=>{var t=r.queryToTagMap.get(syncTreeMakeQueryKey_(e));r.listenProvider_.stopListening(syncTreeQueryForListening_(e),t)}))}!function syncTreeRemoveTags_(t,r){for(let e=0;e<r.length;++e){var n,i=r[e];i._queryParams.loadsAllData()||(i=syncTreeMakeQueryKey_(i),n=t.queryToTagMap.get(i),t.queryToTagMap.delete(i),t.tagToQueryMap.delete(n))}}(r,a)}return o}function syncTreeApplyTaggedQueryOverwrite(e,t,r,n){var i,n=syncTreeQueryKeyForTag_(e,n);return null!=n?(i=(n=syncTreeParseQueryKey_(n)).path,n=n.queryId,t=newRelativePath(i,t),syncTreeApplyTaggedOperation_(e,i,new Overwrite(newOperationSourceServerTaggedQuery(n),t,r))):[]}function syncTreeAddEventRegistration(e,t,r,n=!1){const i=t._path;let s=null,a=!1,o=(e.syncPointTree_.foreachOnPath(i,(e,t)=>{e=newRelativePath(e,i);s=s||syncPointGetCompleteServerCache(t,e),a=a||syncPointHasCompleteView(t)}),e.syncPointTree_.get(i));o?(a=a||syncPointHasCompleteView(o),s=s||syncPointGetCompleteServerCache(o,new Path(""))):(o=new SyncPoint,e.syncPointTree_=e.syncPointTree_.set(i,o));let u;null!=s?u=!0:(u=!1,s=ChildrenNode.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((e,t)=>{t=syncPointGetCompleteServerCache(t,new Path(""));t&&(s=s.updateImmediateChild(e,t))}));var l,c=syncPointViewExistsForQuery(o,t),h=(c||t._queryParams.loadsAllData()||(l=syncTreeMakeQueryKey_(t),(0,d.assert)(!e.queryToTagMap.has(l),"View does not exist, but we have a tag"),h=function syncTreeGetNextQueryTag_(){return ae++}(),e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)),writeTreeChildWrites(e.pendingWriteTree_,i));let p=syncPointAddEventRegistration(o,t,r,h,s,u);return c||a||n||(l=syncPointViewForQuery(o,t),p=p.concat(function syncTreeSetupListener_(t,e,r){var n=e._path,i=syncTreeTagForQuery(t,e),r=syncTreeCreateListenerForView_(t,r),e=t.listenProvider_.startListening(syncTreeQueryForListening_(e),i,r.hashFn,r.onComplete),r=t.syncPointTree_.subtree(n);if(i)(0,d.assert)(!syncPointHasCompleteView(r.value),"If we're adding a query, it shouldn't be shadowed");else{var s=r.fold((e,t,n)=>{if(!pathIsEmpty(e)&&t&&syncPointHasCompleteView(t))return[syncPointGetCompleteView(t).query];{let r=[];return t&&(r=r.concat(syncPointGetQueryViews(t).map(e=>e.query))),each(n,(e,t)=>{r=r.concat(t)}),r}});for(let e=0;e<s.length;++e){var a=s[e];t.listenProvider_.stopListening(syncTreeQueryForListening_(a),syncTreeTagForQuery(t,a))}}return e}(e,t,l))),p}function syncTreeCalcCompleteEventCache(e,r,t){var n=e.pendingWriteTree_,e=e.syncPointTree_.findOnPath(r,(e,t)=>{t=syncPointGetCompleteServerCache(t,newRelativePath(e,r));if(t)return t});return writeTreeCalcCompleteEventCache(n,r,e,t,!0)}function syncTreeApplyOperationToSyncPoints_(e,t){return function syncTreeApplyOperationHelper_(t,r,n,i){{if(pathIsEmpty(t.path))return syncTreeApplyOperationDescendantsHelper_(t,r,n,i);{const s=r.get(new Path(""));null==n&&null!=s&&(n=syncPointGetCompleteServerCache(s,new Path("")));let e=[];const a=pathGetFront(t.path),o=t.operationForChild(a),u=r.children.get(a);if(u&&o){const l=n?n.getImmediateChild(a):null,c=writeTreeRefChild(i,a);e=e.concat(syncTreeApplyOperationHelper_(o,u,l,c))}return e=s?e.concat(syncPointApplyOperation(s,t,i,n)):e}}}(t,e.syncPointTree_,null,writeTreeChildWrites(e.pendingWriteTree_,new Path("")))}function syncTreeApplyOperationDescendantsHelper_(i,e,s,a){var t=e.get(new Path(""));null==s&&null!=t&&(s=syncPointGetCompleteServerCache(t,new Path("")));let o=[];return e.children.inorderTraversal((e,t)=>{var r=s?s.getImmediateChild(e):null,n=writeTreeRefChild(a,e),e=i.operationForChild(e);e&&(o=o.concat(syncTreeApplyOperationDescendantsHelper_(e,t,r,n)))}),o=t?o.concat(syncPointApplyOperation(t,i,a,s)):o}function syncTreeCreateListenerForView_(t,e){const r=e.query,n=syncTreeTagForQuery(t,r);return{hashFn:()=>{return(function viewGetServerCache(e){return e.viewCache_.serverCache.getNode()}(e)||ChildrenNode.EMPTY_NODE).hash()},onComplete:e=>{return"ok"===e?n?function syncTreeApplyTaggedListenComplete(e,t,r){var n;return(r=syncTreeQueryKeyForTag_(e,r))?(n=(r=syncTreeParseQueryKey_(r)).path,r=r.queryId,t=newRelativePath(n,t),syncTreeApplyTaggedOperation_(e,n,new ListenComplete(newOperationSourceServerTaggedQuery(r),t))):[]}(t,r._path,n):function syncTreeApplyListenComplete(e,t){return syncTreeApplyOperationToSyncPoints_(e,new ListenComplete(newOperationSourceServer(),t))}(t,r._path):(e=function errorForServerCode(e,t){let r="Unknown Error";return"too_big"===e?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?r="Client doesn't have permission to access the desired data.":"unavailable"===e&&(r="The service is unavailable"),(t=new Error(e+" at "+t._path.toString()+": "+r)).code=e.toUpperCase(),t}(e,r),syncTreeRemoveEventRegistration(t,r,null,e))}}}function syncTreeTagForQuery(e,t){t=syncTreeMakeQueryKey_(t);return e.queryToTagMap.get(t)}function syncTreeMakeQueryKey_(e){return e._path.toString()+"$"+e._queryIdentifier}function syncTreeQueryKeyForTag_(e,t){return e.tagToQueryMap.get(t)}function syncTreeParseQueryKey_(e){var t=e.indexOf("$");return(0,d.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Path(e.substr(0,t))}}function syncTreeApplyTaggedOperation_(e,t,r){var n=e.syncPointTree_.get(t),e=((0,d.assert)(n,"Missing sync point for query tag that we're tracking"),writeTreeChildWrites(e.pendingWriteTree_,t));return syncPointApplyOperation(n,r,e,null)}function syncTreeQueryForListening_(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(function syncTreeGetReferenceConstructor(){return(0,d.assert)(se,"Reference.ts has not been loaded"),se}())(e._repo,e._path):e}class ExistingValueProvider{constructor(e){this.node_=e}getImmediateChild(e){e=this.node_.getImmediateChild(e);return new ExistingValueProvider(e)}node(){return this.node_}}class DeferredValueProvider{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){e=pathChild(this.path_,e);return new DeferredValueProvider(this.syncTree_,e)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}function YSa(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}function ZSa(e,t,r){return e&&"object"==typeof e?((0,d.assert)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?oe(e[".sv"],t,r):"object"==typeof e[".sv"]?ue(e[".sv"],t):void(0,d.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e}const oe=function(e,t,r){if("timestamp"===e)return r.timestamp;(0,d.assert)(!1,"Unexpected server value: "+e)},ue=function(e,t,r){e.hasOwnProperty("increment")||(0,d.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var e=e.increment,t=("number"!=typeof e&&(0,d.assert)(!1,"Unexpected increment value: "+e),t.node());return(0,d.assert)(null!=t,"Expected ChildrenNode.EMPTY_NODE for nulls"),!t.isLeafNode()||"number"!=typeof(t=t.getValue())?e:t+e},le=function(e,t,r,n){return resolveDeferredValue(t,new DeferredValueProvider(r,e),n)},ce=function(e,t,r){return resolveDeferredValue(e,new ExistingValueProvider(t),r)};function resolveDeferredValue(e,n,i){var t,r,s=e.getPriority().val(),s=ZSa(s,n.getImmediateChild(".priority"),i);let a;return e.isLeafNode()?(r=e,(t=ZSa(r.getValue(),n,i))!==r.getValue()||s!==r.getPriority().val()?new LeafNode(t,nodeFromJSON(s)):e):(r=e,s!==(a=r).getPriority().val()&&(a=a.updatePriority(new LeafNode(s))),r.forEachChild(o,(e,t)=>{var r=resolveDeferredValue(t,n.getImmediateChild(e),i);r!==t&&(a=a.updateImmediateChild(e,r))}),a)}class Tree{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function treeSubTree(e,t){let r=t instanceof Path?t:new Path(t),n=e,i=pathGetFront(r);for(;null!==i;){var s=(0,d.safeGet)(n.node.children,i)||{children:{},childCount:0};n=new Tree(i,n,s),r=pathPopFront(r),i=pathGetFront(r)}return n}function treeSetValue(e,t){e.node.value=t,treeUpdateParents(e)}function treeHasChildren(e){return 0<e.node.childCount}function treeForEachChild(r,n){each(r.node.children,(e,t)=>{n(new Tree(e,r,t))})}function treeGetPath(e){return new Path(null===e.parent?e.name:treeGetPath(e.parent)+"/"+e.name)}function treeUpdateParents(e){null!==e.parent&&!function treeUpdateChild(e,t,r){var n=function treeIsEmpty(e){return void 0===e.node.value&&!treeHasChildren(e)}(r),i=(0,d.contains)(e.node.children,t);n&&i?(delete e.node.children[t],e.node.childCount--,treeUpdateParents(e)):n||i||(e.node.children[t]=r.node,e.node.childCount++,treeUpdateParents(e))}(e.parent,e.name,e)}const he=/[\[\].#$\/\u0000-\u001F\u007F]/,pe=/[\[\].#$\u0000-\u001F\u007F]/,de=10485760,fe=function(e){return"string"==typeof e&&0!==e.length&&!he.test(e)},me=function(e){return"string"==typeof e&&0!==e.length&&!pe.test(e)},ge=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!D(e)||e&&"object"==typeof e&&(0,d.contains)(e,".sv")},u=function(e,t,r,n){n&&void 0===t||ye((0,d.errorPrefix)(e,"value"),t,r)},ye=function(i,e,t){const s=t instanceof Path?new ValidationPath(t,i):t;if(void 0===e)throw new Error(i+"contains undefined "+validationPathToErrorString(s));if("function"==typeof e)throw new Error(i+"contains a function "+validationPathToErrorString(s)+" with contents = "+e.toString());if(D(e))throw new Error(i+"contains "+e.toString()+" "+validationPathToErrorString(s));if("string"==typeof e&&e.length>de/3&&(0,d.stringLength)(e)>de)throw new Error(i+"contains a string greater than "+de+" utf8 bytes "+validationPathToErrorString(s)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,n=!1;if(each(e,(e,t)=>{if(".value"===e)r=!0;else if(".priority"!==e&&".sv"!==e&&(n=!0,!fe(e)))throw new Error(i+" contains an invalid key ("+e+") "+validationPathToErrorString(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function validationPathPush(e,t){0<e.parts_.length&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,d.stringLength)(t),validationPathCheckValid(e)}(s,e),ye(i,t,s),function validationPathPop(e){var t=e.parts_.pop();e.byteLength_-=(0,d.stringLength)(t),0<e.parts_.length&&--e.byteLength_}(s)}),r&&n)throw new Error(i+' contains ".value" child '+validationPathToErrorString(s)+" in addition to actual children.")}},ve=function(e,t,r,n){if(!n||void 0!==t){const o=(0,d.errorPrefix)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const u=[];each(t,(e,t)=>{e=new Path(e);if(ye(o,t,pathChild(r,e)),".priority"===pathGetBack(e)&&!ge(t))throw new Error(o+"contains an invalid value for '"+e.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(e)});{var i=o;var s=u;let e,t;for(e=0;e<s.length;e++){var a=pathSlice(t=s[e]);for(let e=0;e<a.length;e++)if((".priority"!==a[e]||e!==a.length-1)&&!fe(a[e]))throw new Error(i+"contains an invalid key ("+a[e]+") in path "+t.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}s.sort(pathCompare);let r=null;for(e=0;e<s.length;e++){if(t=s[e],null!==r&&pathContains(r,t))throw new Error(i+"contains a path "+r.toString()+" that is ancestor of another path "+t.toString());r=t}}}},_e=function(e,t,r){if(!r||void 0!==t){if(D(t))throw new Error((0,d.errorPrefix)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ge(t))throw new Error((0,d.errorPrefix)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ce=function(e,t,r,n){if(!(n&&void 0===r||fe(r)))throw new Error((0,d.errorPrefix)(e,t)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},we=function(e,t,r,n){if(!(n&&void 0===r||me(r)))throw new Error((0,d.errorPrefix)(e,t)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},be=(Ne._validatePathString=we,function(e,t,r,n){r=r&&r.replace(/^\/*\.info(\/|$)/,"/"),we(e,t,r,n)}),m=function(e,t){if(".info"===pathGetFront(t))throw new Error(e+" failed = Can't modify data under /.info/")},Ee=(Ne._validateWritablePath=m,function(e,t){var r=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!fe(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==r.length&&(t=(t=r)&&t.replace(/^\/*\.info(\/|$)/,"/"),!me(t)))throw new Error((0,d.errorPrefix)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')});class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(t,r){let n=null;for(let e=0;e<r.length;e++){var i=r[e],s=i.getPath();null===n||pathEquals(s,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:s}:n).events.push(i)}n&&t.eventLists_.push(n)}function eventQueueRaiseEventsAtPath(e,t,r){eventQueueQueueEvents(e,r),eventQueueRaiseQueuedEventsMatchingPredicate(e,e=>pathEquals(e,t))}function eventQueueRaiseEventsForChangedPath(e,t,r){eventQueueQueueEvents(e,r),eventQueueRaiseQueuedEventsMatchingPredicate(e,e=>pathContains(e,t)||pathContains(t,e))}function eventQueueRaiseQueuedEventsMatchingPredicate(t,r){t.recursionDepth_++;let n=!0;for(let e=0;e<t.eventLists_.length;e++){var i=t.eventLists_[e];i&&(r(i.path)?(function eventListRaise(t){for(let e=0;e<t.events.length;e++){var r,n=t.events[e];null!==n&&(t.events[e]=null,r=n.getEventRunner(),b&&h("event: "+n.toString()),I(r))}}(t.eventLists_[e]),t.eventLists_[e]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}const xe="repo_interrupt",De=25;class Repo{constructor(e,t,r,n){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(a,e,t){if(a.stats_=statsManagerGetCollection(a.repoInfo_),a.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))a.server_=new ReadonlyRestClient(a.repoInfo_,(e,t,r,n)=>{repoOnDataUpdate(a,e,t,r,n)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(a,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,d.stringify)(t)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}a.persistentConnection_=new PersistentConnection(a.repoInfo_,e,(e,t,r,n)=>{repoOnDataUpdate(a,e,t,r,n)},e=>{repoOnConnectStatus(a,e)},e=>{!function repoOnServerInfoUpdate(r,e){each(e,(e,t)=>{repoUpdateInfo(r,e,t)})}(a,e)},a.authTokenProvider_,a.appCheckProvider_,t),a.server_=a.persistentConnection_}a.authTokenProvider_.addTokenChangeListener(e=>{a.server_.refreshAuthToken(e)}),a.appCheckProvider_.addTokenChangeListener(e=>{a.server_.refreshAppCheckToken(e.token)}),a.statsReporter_=function statsManagerGetOrCreateReporter(e,t){return e=e.toString(),R[e]||(R[e]=t()),R[e]}(a.repoInfo_,()=>new StatsReporter(a.stats_,a.server_)),a.infoData_=new SnapshotHolder,a.infoSyncTree_=new SyncTree({startListening:(e,t,r,n)=>{let i=[];var s=a.infoData_.getNode(e._path);return s.isEmpty()||(i=syncTreeApplyServerOverwrite(a.infoSyncTree_,e._path,s),setTimeout(()=>{n("ok")},0)),i},stopListening:()=>{}}),repoUpdateInfo(a,"connected",!1),a.serverSyncTree_=new SyncTree({startListening:(r,e,t,n)=>(a.server_.listen(r,t,e,(e,t)=>{e=n(e,t);eventQueueRaiseEventsForChangedPath(a.eventQueue_,r._path,e)}),[]),stopListening:(e,t)=>{a.server_.unlisten(e,t)}})}function repoServerTime(e){e=e.infoData_.getNode(new Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function repoGenerateServerValues(e){return YSa({timestamp:repoServerTime(e)})}function repoOnDataUpdate(e,t,r,n,i){e.dataUpdateCount++;var s=new Path(t);r=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,r):r;let a=[],o=s;0<(a=i?n?(t=(0,d.map)(r,e=>nodeFromJSON(e)),function syncTreeApplyTaggedQueryMerge(e,t,r,n){var i;return(n=syncTreeQueryKeyForTag_(e,n))?(i=(n=syncTreeParseQueryKey_(n)).path,n=n.queryId,t=newRelativePath(i,t),r=ImmutableTree.fromObject(r),syncTreeApplyTaggedOperation_(e,i,new Merge(newOperationSourceServerTaggedQuery(n),t,r))):[]}(e.serverSyncTree_,s,t,i)):(t=nodeFromJSON(r),syncTreeApplyTaggedQueryOverwrite(e.serverSyncTree_,s,t,i)):n?(t=(0,d.map)(r,e=>nodeFromJSON(e)),function syncTreeApplyServerMerge(e,t,r){return r=ImmutableTree.fromObject(r),syncTreeApplyOperationToSyncPoints_(e,new Merge(newOperationSourceServer(),t,r))}(e.serverSyncTree_,s,t)):(i=nodeFromJSON(r),syncTreeApplyServerOverwrite(e.serverSyncTree_,s,i))).length&&(o=repoRerunTransactions(e,s)),eventQueueRaiseEventsForChangedPath(e.eventQueue_,o,a)}function repoOnConnectStatus(e,t){repoUpdateInfo(e,"connected",t),!1===t&&function repoRunOnDisconnectEvents(r){repoLog(r,"onDisconnectEvents");const n=repoGenerateServerValues(r),i=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(r.onDisconnect_,new Path(""),(e,t)=>{t=le(e,t,r.serverSyncTree_,n);sparseSnapshotTreeRemember(i,e,t)});let s=[];sparseSnapshotTreeForEachTree(i,new Path(""),(e,t)=>{s=s.concat(syncTreeApplyServerOverwrite(r.serverSyncTree_,e,t));t=repoAbortTransactions(r,e);repoRerunTransactions(r,t)}),r.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(r.eventQueue_,new Path(""),s)}(e)}function repoUpdateInfo(e,t,r){t=new Path("/.info/"+t),r=nodeFromJSON(r),e.infoData_.updateSnapshot(t,r),r=syncTreeApplyServerOverwrite(e.infoSyncTree_,t,r);eventQueueRaiseEventsForChangedPath(e.eventQueue_,t,r)}function repoSetWithPriority(n,i,e,t,s){repoLog(n,"set",{path:i.toString(),value:e,priority:t});var r=repoGenerateServerValues(n),e=nodeFromJSON(e,t),t=syncTreeCalcCompleteEventCache(n.serverSyncTree_,i),t=ce(e,t,r);const a=n.nextWriteId_++;r=syncTreeApplyUserOverwrite(n.serverSyncTree_,i,t,a,!0),eventQueueQueueEvents(n.eventQueue_,r),n.server_.put(i.toString(),e.val(!0),(e,t)=>{var r="ok"===e,r=(r||f("set at "+i+" failed: "+e),syncTreeAckUserWrite(n.serverSyncTree_,a,!r));eventQueueRaiseEventsForChangedPath(n.eventQueue_,i,r),repoCallOnCompleteCallback(0,s,e,t)}),t=repoAbortTransactions(n,i);repoRerunTransactions(n,t),eventQueueRaiseEventsForChangedPath(n.eventQueue_,t,[])}function repoOnDisconnectCancel(r,n,i){r.server_.onDisconnectCancel(n.toString(),(e,t)=>{"ok"===e&&!function sparseSnapshotTreeForget(r,e){var t;return pathIsEmpty(e)?(r.value=null,r.children.clear(),!0):null!==r.value?!r.value.isLeafNode()&&(t=r.value,r.value=null,t.forEachChild(o,(e,t)=>{sparseSnapshotTreeRemember(r,new Path(e),t)}),sparseSnapshotTreeForget(r,e)):!(0<r.children.size)||(t=pathGetFront(e),e=pathPopFront(e),r.children.has(t)&&sparseSnapshotTreeForget(r.children.get(t),e)&&r.children.delete(t),0===r.children.size)}(r.onDisconnect_,n),repoCallOnCompleteCallback(0,i,e,t)})}function repoOnDisconnectSet(r,n,e,i){const s=nodeFromJSON(e);r.server_.onDisconnectPut(n.toString(),s.val(!0),(e,t)=>{"ok"===e&&sparseSnapshotTreeRemember(r.onDisconnect_,n,s),repoCallOnCompleteCallback(0,i,e,t)})}function repoRemoveEventCallbackForQuery(e,t,r){let n;n=".info"===pathGetFront(t._path)?syncTreeRemoveEventRegistration(e.infoSyncTree_,t,r):syncTreeRemoveEventRegistration(e.serverSyncTree_,t,r),eventQueueRaiseEventsAtPath(e.eventQueue_,t._path,n)}function repoInterrupt(e){e.persistentConnection_&&e.persistentConnection_.interrupt(xe)}function repoLog(e,...t){let r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),h(r,...t)}function repoCallOnCompleteCallback(e,n,i,s){n&&I(()=>{if("ok"===i)n(null);else{var t=(i||"error").toUpperCase();let e=t;s&&(e+=": "+s);var r=new Error(e);r.code=t,n(r)}})}function repoGetLatestState(e,t,r){return syncTreeCalcCompleteEventCache(e.serverSyncTree_,t,r)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(t,e=t.transactionQueueTree_){var r;e||repoPruneCompletedTransactionsBelowNode(t,e),e.node.value?(r=repoBuildTransactionQueue(t,e),(0,d.assert)(0<r.length,"Sending zero length transaction queue"),r.every(e=>0===e.status)&&function repoSendTransactionQueue(i,s,a){var e=a.map(e=>e.currentWriteId),e=repoGetLatestState(i,s,e);let t=e;e=e.hash();for(let e=0;e<a.length;e++){var r=a[e],n=((0,d.assert)(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++,newRelativePath(s,r.path));t=t.updateChild(n,r.currentOutputSnapshotRaw)}const o=t.val(!0),u=s;i.server_.put(u.toString(),o,t=>{repoLog(i,"transaction put response",{path:u.toString(),status:t});let r=[];if("ok"===t){var n=[];for(let e=0;e<a.length;e++)a[e].status=2,r=r.concat(syncTreeAckUserWrite(i.serverSyncTree_,a[e].currentWriteId)),a[e].onComplete&&n.push(()=>a[e].onComplete(null,!0,a[e].currentOutputSnapshotResolved)),a[e].unwatcher();repoPruneCompletedTransactionsBelowNode(i,treeSubTree(i.transactionQueueTree_,s)),repoSendReadyTransactions(i,i.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(i.eventQueue_,s,r);for(let e=0;e<n.length;e++)I(n[e])}else{if("datastale"===t)for(let e=0;e<a.length;e++)3===a[e].status?a[e].status=4:a[e].status=0;else{f("transaction at "+u.toString()+" failed: "+t);for(let e=0;e<a.length;e++)a[e].status=4,a[e].abortReason=t}repoRerunTransactions(i,s)}},e)}(t,treeGetPath(e),r)):treeHasChildren(e)&&treeForEachChild(e,e=>{repoSendReadyTransactions(t,e)})}function repoRerunTransactions(e,t){var t=repoGetAncestorTransactionNode(e,t),r=treeGetPath(t);return function repoRerunTransactionQueue(i,s,a){if(0!==s.length){var o=[];let n=[];var u=s.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let r=0;r<s.length;r++){var l=s[r],c=newRelativePath(a,l.path);let e=!1,t;if((0,d.assert)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)e=!0,t=l.abortReason,n=n.concat(syncTreeAckUserWrite(i.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=De)e=!0,t="maxretry",n=n.concat(syncTreeAckUserWrite(i.serverSyncTree_,l.currentWriteId,!0));else{var c=repoGetLatestState(i,l.path,u),h=(l.currentInputSnapshot=c,s[r].update(c.val()));if(void 0!==h){ye("transaction failed: Data returned ",h,l.path);let e=nodeFromJSON(h);"object"==typeof h&&null!=h&&(0,d.contains)(h,".priority")||(e=e.updatePriority(c.getPriority()));var h=l.currentWriteId,p=repoGenerateServerValues(i),c=ce(e,c,p);l.currentOutputSnapshotRaw=e,l.currentOutputSnapshotResolved=c,l.currentWriteId=i.nextWriteId_++,u.splice(u.indexOf(h),1),n=(n=n.concat(syncTreeApplyUserOverwrite(i.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally))).concat(syncTreeAckUserWrite(i.serverSyncTree_,h,!0))}else e=!0,t="nodata",n=n.concat(syncTreeAckUserWrite(i.serverSyncTree_,l.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(i.eventQueue_,a,n),n=[],e&&(s[r].status=2,function(e){setTimeout(e,Math.floor(0))}(s[r].unwatcher),s[r].onComplete)&&("nodata"===t?o.push(()=>s[r].onComplete(null,!1,s[r].currentInputSnapshot)):o.push(()=>s[r].onComplete(new Error(t),!1,null)))}repoPruneCompletedTransactionsBelowNode(i,i.transactionQueueTree_);for(let e=0;e<o.length;e++)I(o[e]);repoSendReadyTransactions(i,i.transactionQueueTree_)}}(e,repoBuildTransactionQueue(e,t),r),r}function repoGetAncestorTransactionNode(e,t){let r,n=e.transactionQueueTree_;for(r=pathGetFront(t);null!==r&&void 0===n.node.value;)n=treeSubTree(n,r),t=pathPopFront(t),r=pathGetFront(t);return n}function repoBuildTransactionQueue(e,t){var r=[];return function repoAggregateTransactionQueuesForNode(t,e,r){const n=e.node.value;if(n)for(let e=0;e<n.length;e++)r.push(n[e]);treeForEachChild(e,e=>{repoAggregateTransactionQueuesForNode(t,e,r)})}(e,t,r),r.sort((e,t)=>e.order-t.order),r}function repoPruneCompletedTransactionsBelowNode(t,e){var r=e.node.value;if(r){let t=0;for(let e=0;e<r.length;e++)2!==r[e].status&&(r[t]=r[e],t++);r.length=t,treeSetValue(e,0<r.length?r:void 0)}treeForEachChild(e,e=>{repoPruneCompletedTransactionsBelowNode(t,e)})}function repoAbortTransactions(t,e){var r=treeGetPath(repoGetAncestorTransactionNode(t,e)),e=treeSubTree(t.transactionQueueTree_,e);return function treeForEachAncestor(e,t,r){let n=r?e:e.parent;for(;null!==n;){if(t(n))return;n=n.parent}}(e,e=>{repoAbortTransactionsOnNode(t,e)}),repoAbortTransactionsOnNode(t,e),function treeForEachDescendant(e,t,r,n){r&&!n&&t(e),treeForEachChild(e,e=>{treeForEachDescendant(e,t,!0,n)}),r&&n&&t(e)}(e,e=>{repoAbortTransactionsOnNode(t,e)}),r}function repoAbortTransactionsOnNode(n,e){var i=e.node.value;if(i){var s=[];let t=[],r=-1;for(let e=0;e<i.length;e++)3!==i[e].status&&(1===i[e].status?((0,d.assert)(r===e-1,"All SENT items should be at beginning of queue."),i[r=e].status=3,i[e].abortReason="set"):((0,d.assert)(0===i[e].status,"Unexpected transaction status in abort"),i[e].unwatcher(),t=t.concat(syncTreeAckUserWrite(n.serverSyncTree_,i[e].currentWriteId,!0)),i[e].onComplete&&s.push(i[e].onComplete.bind(null,new Error("set"),!1,null))));-1===r?treeSetValue(e,void 0):i.length=r+1,eventQueueRaiseEventsForChangedPath(n.eventQueue_,treeGetPath(e),t);for(let e=0;e<s.length;e++)I(s[e])}}const Se=function(e,t){var e=Ae(e),r=e.namespace,n=("firebase.com"===e.domain&&c(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===e.domain||c("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&f("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),"ws"===e.scheme||"wss"===e.scheme);return{repoInfo:new RepoInfo(e.host,e.secure,r,n,t,"",r!==e.subdomain),path:new Path(e.pathString)}},Ae=function(n){let i="",s="",a="",o="",u="",l=!0,c="https",h=443;if("string"==typeof n){let e=n.indexOf("//"),t=(0<=e&&(c=n.substring(0,e-1),n=n.substring(e+2)),n.indexOf("/")),r=(-1===t&&(t=n.length),n.indexOf("?"));-1===r&&(r=n.length),i=n.substring(0,Math.min(t,r)),t<r&&(o=function decodePath(e){let r="";var n=e.split("/");for(let t=0;t<n.length;t++)if(0<n[t].length){let e=n[t];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(e){}r+="/"+e}return r}(n.substring(t,r)));var n=function decodeQuery(e){var t,r={};for(const n of(e="?"===e.charAt(0)?e.substring(1):e).split("&"))0!==n.length&&(2===(t=n.split("=")).length?r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]):f(`Invalid query segment '${n}' in query '${e}'`));return r}(n.substring(Math.min(n.length,r))),p=(0<=(e=i.indexOf(":"))?(l="https"===c||"wss"===c,h=parseInt(i.substring(e+1),10)):e=i.length,i.slice(0,e));"localhost"===p.toLowerCase()?s="localhost":p.split(".").length<=2?s=p:(p=i.indexOf("."),a=i.substring(0,p).toLowerCase(),s=i.substring(p+1),u=a),"ns"in n&&(u=n.ns)}return{host:i,port:h,domain:s,subdomain:a,secure:l,scheme:c,pathString:o,namespace:u}};class DataEvent{constructor(e,t,r,n){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=n}getPath(){var e=this.snapshot.ref;return("value"===this.eventType?e:e.parent)._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,d.stringify)(this.snapshot.exportVal())}}class CancelEvent{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class CallbackContext{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,d.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class OnDisconnect{constructor(e,t){this._repo=e,this._path=t}cancel(){var e=new d.Deferred;return repoOnDisconnectCancel(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){m("OnDisconnect.remove",this._path);var e=new d.Deferred;return repoOnDisconnectSet(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){m("OnDisconnect.set",this._path),u("OnDisconnect.set",e,this._path,!1);var t=new d.Deferred;return repoOnDisconnectSet(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){m("OnDisconnect.setWithPriority",this._path),u("OnDisconnect.setWithPriority",e,this._path,!1),_e("OnDisconnect.setWithPriority",t,!1);var r=new d.Deferred;return function repoOnDisconnectSetWithPriority(r,n,e,t,i){const s=nodeFromJSON(e,t);r.server_.onDisconnectPut(n.toString(),s.val(!0),(e,t)=>{"ok"===e&&sparseSnapshotTreeRemember(r.onDisconnect_,n,s),repoCallOnCompleteCallback(0,i,e,t)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){m("OnDisconnect.update",this._path),ve("OnDisconnect.update",e,this._path,!1);var t=new d.Deferred;return function repoOnDisconnectUpdate(r,n,i,s){(0,d.isEmpty)(i)?(h("onDisconnect().update() called with empty data.  Don't do anything."),repoCallOnCompleteCallback(0,s,"ok",void 0)):r.server_.onDisconnectMerge(n.toString(),i,(e,t)=>{"ok"===e&&each(i,(e,t)=>{t=nodeFromJSON(t);sparseSnapshotTreeRemember(r.onDisconnect_,pathChild(n,e),t)}),repoCallOnCompleteCallback(0,s,e,t)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}Ne.OnDisconnect=OnDisconnect;class QueryImpl{constructor(e,t,r,n){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=n}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){var e=queryParamsGetQueryObject(this._queryParams),e=cRa(e);return"{}"===e?"default":e}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(e){var t,r;return(e=(0,d.getModularInstance)(e))instanceof QueryImpl&&(t=this._repo===e._repo,r=pathEquals(this._path,e._path),e=this._queryIdentifier===e._queryIdentifier,t)&&r&&e}toJSON(){return this.toString()}toString(){return this._repo.toString()+function pathToUrlEncodedString(t){let r="";for(let e=t.pieceNum_;e<t.pieces_.length;e++)""!==t.pieces_[e]&&(r+="/"+encodeURIComponent(String(t.pieces_[e])));return r||"/"}(this._path)}}function validateNoPreviousOrderByCall(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function validateQueryEndpoints(e){let t=null,r=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(r=e.getIndexEndValue()),e.getIndex()===p){var n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==s)throw new Error(n);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==a)throw new Error(n);if("string"!=typeof r)throw new Error(i)}}else if(e.getIndex()===o){if(null!=t&&!ge(t)||null!=r&&!ge(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,d.assert)(e.getIndex()instanceof PathIndex||e.getIndex()===K,"unknown index type."),null!=t&&"object"==typeof t||null!=r&&"object"==typeof r)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function validateLimit(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ReferenceImpl extends(Ne._QueryImpl=QueryImpl){constructor(e,t){super(e,t,new QueryParams,!1)}get parent(){var e=pathParent(this._path);return null===e?null:new ReferenceImpl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}Ne._ReferenceImpl=ReferenceImpl;class DataSnapshot{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){var t=new Path(e),e=child(this.ref,e);return new DataSnapshot(this._node.getChild(t),e,o)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(r){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(e,t)=>r(new DataSnapshot(t,child(this.ref,e),o)))}hasChild(e){e=new Path(e);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ref(e,t){return(e=(0,d.getModularInstance)(e))._checkNotDeleted("ref"),void 0!==t?child(e._root,t):e._root}function child(e,t){return(null===pathGetFront((e=(0,d.getModularInstance)(e))._path)?be:we)("child","path",t,!1),new ReferenceImpl(e._repo,pathChild(e._path,t))}function set(e,t){e=(0,d.getModularInstance)(e),m("set",e._path),u("set",t,e._path,!1);var r=new d.Deferred;return repoSetWithPriority(e._repo,e._path,t,null,r.wrapCallback(()=>{})),r.promise}Ne.DataSnapshot=DataSnapshot;class ValueEventRegistration{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){var r=t._queryParams.getIndex();return new DataEvent("value",this,new DataSnapshot(e.snapshotNode,new ReferenceImpl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CancelEvent(this,e,t):null}matches(e){return e instanceof ValueEventRegistration&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ChildEventRegistration{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){e="children_added"===e?"child_added":e;return this.eventType===("children_removed"===e?"child_removed":e)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CancelEvent(this,e,t):null}createEvent(e,t){(0,d.assert)(null!=e.childName,"Child events should have a childName.");var r=child(new ReferenceImpl(t._repo,t._path),e.childName),t=t._queryParams.getIndex();return new DataEvent(e.type,this,new DataSnapshot(e.snapshotNode,r,t),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ChildEventRegistration&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function addEventListener(r,e,t,n,i){let s;if("object"==typeof n&&(s=void 0,i=n),"function"==typeof n&&(s=n),i&&i.onlyOnce){const o=t;n=(e,t)=>{repoRemoveEventCallbackForQuery(r._repo,r,a),o(e,t)};n.userCallback=t.userCallback,n.context=t.context,t=n}i=new CallbackContext(t,s||void 0);const a="value"===e?new ValueEventRegistration(i):new ChildEventRegistration(e,i);return function repoAddEventCallbackForQuery(e,t,r){let n;n=".info"===pathGetFront(t._path)?syncTreeAddEventRegistration(e.infoSyncTree_,t,r):syncTreeAddEventRegistration(e.serverSyncTree_,t,r),eventQueueRaiseEventsAtPath(e.eventQueue_,t._path,n)}(r._repo,r,a),()=>repoRemoveEventCallbackForQuery(r._repo,r,a)}function onValue(e,t,r,n){return addEventListener(e,"value",t,r,n)}class QueryConstraint{}class QueryEndAtConstraint extends(Ne.QueryConstraint=QueryConstraint){constructor(e,t){super(),this._value=e,this._key=t}_apply(e){u("endAt",this._value,e._path,!0);var t=queryParamsEndAt(e._queryParams,this._value,this._key);if(validateLimit(t),validateQueryEndpoints(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new QueryImpl(e._repo,e._path,t,e._orderByCalled)}}class QueryEndBeforeConstraint extends QueryConstraint{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){u("endBefore",this._value,e._path,!1);var t=function queryParamsEndBefore(e,t,r){let n,i;return(i=e.index_===p?queryParamsEndAt(e,t="string"==typeof t?NSa(t):t,r):queryParamsEndAt(e,t,n=null==r?s:NSa(r))).endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(validateLimit(t),validateQueryEndpoints(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new QueryImpl(e._repo,e._path,t,e._orderByCalled)}}class QueryStartAtConstraint extends QueryConstraint{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){u("startAt",this._value,e._path,!0);var t=queryParamsStartAt(e._queryParams,this._value,this._key);if(validateLimit(t),validateQueryEndpoints(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new QueryImpl(e._repo,e._path,t,e._orderByCalled)}}class QueryStartAfterConstraint extends QueryConstraint{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){u("startAfter",this._value,e._path,!1);var t=function queryParamsStartAfter(t,r,n){let i;if(t.index_===p)"string"==typeof r&&(r=MSa(r)),i=queryParamsStartAt(t,r,n);else{let e;e=null==n?a:MSa(n),i=queryParamsStartAt(t,r,e)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(validateLimit(t),validateQueryEndpoints(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new QueryImpl(e._repo,e._path,t,e._orderByCalled)}}class QueryLimitToFirstConstraint extends QueryConstraint{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new QueryImpl(e._repo,e._path,function queryParamsLimitToFirst(e,t){return(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(e._queryParams,this._limit),e._orderByCalled)}}class QueryLimitToLastConstraint extends QueryConstraint{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new QueryImpl(e._repo,e._path,function queryParamsLimitToLast(e,t){return(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(e._queryParams,this._limit),e._orderByCalled)}}class QueryOrderByChildConstraint extends QueryConstraint{constructor(e){super(),this._path=e}_apply(e){validateNoPreviousOrderByCall(e,"orderByChild");var t=new Path(this._path);if(pathIsEmpty(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");t=new PathIndex(t),t=queryParamsOrderBy(e._queryParams,t);return validateQueryEndpoints(t),new QueryImpl(e._repo,e._path,t,!0)}}class QueryOrderByKeyConstraint extends QueryConstraint{_apply(e){validateNoPreviousOrderByCall(e,"orderByKey");var t=queryParamsOrderBy(e._queryParams,p);return validateQueryEndpoints(t),new QueryImpl(e._repo,e._path,t,!0)}}class QueryOrderByPriorityConstraint extends QueryConstraint{_apply(e){validateNoPreviousOrderByCall(e,"orderByPriority");var t=queryParamsOrderBy(e._queryParams,o);return validateQueryEndpoints(t),new QueryImpl(e._repo,e._path,t,!0)}}class QueryOrderByValueConstraint extends QueryConstraint{_apply(e){validateNoPreviousOrderByCall(e,"orderByValue");var t=queryParamsOrderBy(e._queryParams,K);return validateQueryEndpoints(t),new QueryImpl(e._repo,e._path,t,!0)}}class QueryEqualToValueConstraint extends QueryConstraint{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(u("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new QueryEndAtConstraint(this._value,this._key)._apply(new QueryStartAtConstraint(this._value,this._key)._apply(e))}}!function syncPointSetReferenceConstructor(e){(0,d.assert)(!ie,"__referenceConstructor has already been defined"),ie=e}(ReferenceImpl),function syncTreeSetReferenceConstructor(e){(0,d.assert)(!se,"__referenceConstructor has already been defined"),se=e}(ReferenceImpl);const Fe="FIREBASE_DATABASE_EMULATOR_HOST",ke={};let Be=!1;function repoManagerDatabaseFromApp(e,t,r,n,i){let s=n||e.options.databaseURL,a=(void 0===s&&(e.options.projectId||c("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),h("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com"),Se(s,i)),o=a.repoInfo,u,l=void 0;(l=void 0!==Te&&Te.env?Te.env[Fe]:l)?(u=!0,s=`http://${l}?ns=`+o.namespace,a=Se(s,i),o=a.repoInfo):u=!a.repoInfo.secure;n=i&&u?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(e.name,e.options,t),Ee("Invalid Firebase Database URL",a),pathIsEmpty(a.path)||c("Database URL must point to the root of a Firebase Database (not including a child path)."),i=function repoManagerCreateRepo(e,t,r,n){let i=ke[t.name];i||(i={},ke[t.name]=i);t=i[e.toURLString()];t&&c("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return t=new Repo(e,Be,r,n),i[e.toURLString()]=t}(o,e,n,new AppCheckTokenProvider(e.name,r));return new Database(i,e)}class Database{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,new Path(""))),this._rootInternal}_delete(){return null!==this._rootInternal&&(function repoManagerDeleteRepo(e,t){var r=ke[t];r&&r[e.key]===e||c(`Database ${t}(${e.repoInfo_}) has already been deleted.`),repoInterrupt(e),delete r[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&c("Cannot call "+e+" on a deleted database.")}}function checkTransportInit(){TransportManager.IS_TRANSPORT_INITIALIZED&&f("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function connectDatabaseEmulator(e,t,r,n={}){(e=(0,d.getModularInstance)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&c("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal;let s=void 0;i.repoInfo_.nodeAdmin?(n.mockUserToken&&c('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new EmulatorTokenProvider(EmulatorTokenProvider.OWNER)):n.mockUserToken&&(n="string"==typeof n.mockUserToken?n.mockUserToken:(0,d.createMockUserToken)(n.mockUserToken,e.app.options.projectId),s=new EmulatorTokenProvider(n)),function repoManagerApplyEmulatorSettings(e,t,r,n){e.repoInfo_=new RepoInfo(t+":"+r,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),n&&(e.authTokenProvider_=n)}(i,t,r,s)}Ne.Database=Database;const Ie={".sv":"timestamp"};class TransactionResult{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ne.TransactionResult=TransactionResult,PersistentConnection,PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Connection;Ne._TEST_ACCESS_hijackHash=function(i){const s=PersistentConnection.prototype.put;return PersistentConnection.prototype.put=function(e,t,r,n){void 0!==n&&(n=i()),s.call(this,e,t,r,n)},function(){PersistentConnection.prototype.put=s}},RepoInfo;Ne._TEST_ACCESS_forceRestClient=function(e){!function repoManagerForceRestClient(e){Be=e}(e)},function registerDatabase(e){setSDKVersion(r.SDK_VERSION),(0,r._registerComponent)(new t.Component("database",(e,{instanceIdentifier:t})=>{return repoManagerDatabaseFromApp(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)},"PUBLIC").setMultipleInstances(!0)),(0,r.registerVersion)(i,"0.13.10",e),(0,r.registerVersion)(i,"0.13.10","esm2017")}()}.call(this)}.call(this,Pe("_process"))},{"@firebase/app":104,"@firebase/component":105,"@firebase/logger":107,"@firebase/util":108,_process:119}],107:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=r.LogLevel=void 0,r.setLogLevel=function setLogLevel(t){n.forEach(e=>{e.setLogLevel(t)})},r.setUserLogHandler=function setUserLogHandler(s,e){for(const t of n){let i=null;e&&e.level&&(i=o[e.level]),t.userLogHandler=null===s?null:(e,t,...r)=>{var n=r.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");t>=(null!==i&&void 0!==i?i:e.logLevel)&&s({level:a[t].toLowerCase(),message:n,args:r,type:e.name})}}};const n=[];var a,i;r.LogLevel=a,(i=a||(r.LogLevel=a={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";const o={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},s=a.INFO,u={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},l=(e,t,...r)=>{if(!(t<e.logLevel)){var n=(new Date).toISOString(),i=u[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${n}]  ${e.name}:`,...r)}};r.Logger=class Logger{constructor(e){this.name=e,this._logLevel=s,this._logHandler=l,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in a))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...e),this._logHandler(this,a.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...e),this._logHandler(this,a.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,a.INFO,...e),this._logHandler(this,a.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,a.WARN,...e),this._logHandler(this,a.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...e),this._logHandler(this,a.ERROR,...e)}}},{}],108:[function(e,t,g){!function(f,m){!function(){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.Sha1=g.RANDOM_FACTOR=g.MAX_VALUE_MILLIS=g.FirebaseError=g.ErrorFactory=g.Deferred=g.CONSTANTS=void 0,g.areCookiesEnabled=function areCookiesEnabled(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)},g.assertionError=g.assert=void 0,g.async=function async(t,r){return(...e)=>{Promise.resolve(!0).then(()=>{t(...e)}).catch(e=>{r&&r(e)})}},g.base64urlEncodeWithoutPadding=g.base64Encode=g.base64Decode=g.base64=void 0,g.calculateBackoffMillis=function calculateBackoffMillis(e,t=c,r=h){t*=Math.pow(r,e),r=Math.round(d*t*(Math.random()-.5)*2);return Math.min(p,t+r)},g.contains=function contains(e,t){return Object.prototype.hasOwnProperty.call(e,t)},g.createMockUserToken=function createMockUserToken(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var t=t||"demo-project",r=e.iat||0,n=e.sub||e.user_id;if(!n)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");t=Object.assign({iss:"https://securetoken.google.com/"+t,aud:t,iat:r,exp:r+3600,auth_time:r,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}}},e);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(t)),""].join(".")},g.createSubscribe=function createSubscribe(e,t){e=new ObserverProxy(e,t);return e.subscribe.bind(e)},g.decode=void 0,g.deepCopy=function deepCopy(e){return deepExtend(void 0,e)},g.deepEqual=function deepEqual(e,t){if(e===t)return!0;const r=Object.keys(e);const n=Object.keys(t);for(const i of r){if(!n.includes(i))return!1;const s=e[i],a=t[i];if(isObject(s)&&isObject(a)){if(!deepEqual(s,a))return!1}else if(s!==a)return!1}for(const o of n)if(!r.includes(o))return!1;return!0},g.deepExtend=deepExtend,g.errorPrefix=errorPrefix,g.extractQuerystring=function extractQuerystring(e){var t=e.indexOf("?");if(!t)return"";var r=e.indexOf("#",t);return e.substring(t,0<r?r:void 0)},g.getExperimentalSetting=g.getDefaultEmulatorHostnameAndPort=g.getDefaultEmulatorHost=g.getDefaultAppConfig=void 0,g.getGlobal=getGlobal,g.getModularInstance=function getModularInstance(e){return e&&e._delegate?e._delegate:e},g.getUA=getUA,g.isAdmin=void 0,g.isBrowser=function isBrowser(){return"object"==typeof self&&self.self===self},g.isBrowserExtension=function isBrowserExtension(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},g.isElectron=function isElectron(){return 0<=getUA().indexOf("Electron/")},g.isEmpty=function isEmpty(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},g.isIE=function isIE(){var e=getUA();return 0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/")},g.isIndexedDBAvailable=function isIndexedDBAvailable(){return"object"==typeof indexedDB},g.isMobileCordova=function isMobileCordova(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())},g.isNode=isNode,g.isNodeSdk=function isNodeSdk(){return!0===t.NODE_CLIENT||!0===t.NODE_ADMIN},g.isReactNative=function isReactNative(){return"object"==typeof navigator&&"ReactNative"===navigator.product},g.isSafari=function isSafari(){return!isNode()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},g.isUWP=function isUWP(){return 0<=getUA().indexOf("MSAppHost/")},g.issuedAtTime=g.isValidTimestamp=g.isValidFormat=void 0,g.jsonEval=jsonEval,g.map=function map(e,t,r){var n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=t.call(r,e[i],i,e));return n},g.ordinal=function ordinal(e){return Number.isFinite(e)?e+function indicator(e){var t=(e=Math.abs(e))%100;if(10<=t&&t<=20)return"th";t=e%10;return 1!=t?2!=t?3!=t?"th":"rd":"nd":"st"}(e):""+e},g.promiseWithTimeout=function promiseWithTimeout(e,t=2e3){const r=new Deferred;return setTimeout(()=>r.reject("timeout!"),t),e.then(r.resolve,r.reject),r.promise},g.querystring=function querystring(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""},g.querystringDecode=function querystringDecode(e){const r={},t=e.replace(/^\?/,"").split("&");return t.forEach(e=>{var t;e&&([e,t]=e.split("="),r[decodeURIComponent(e)]=decodeURIComponent(t))}),r},g.safeGet=function safeGet(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},g.stringToByteArray=g.stringLength=void 0,g.stringify=function stringify(e){return JSON.stringify(e)},g.validateArgCount=g.uuidv4=void 0,g.validateCallback=function validateCallback(e,t,r,n){if((!n||r)&&"function"!=typeof r)throw new Error(errorPrefix(e,t)+"must be a valid function.")},g.validateContextObject=function validateContextObject(e,t,r,n){if((!n||r)&&("object"!=typeof r||null===r))throw new Error(errorPrefix(e,t)+"must be a valid context object.")},g.validateIndexedDBOpenable=function validateIndexedDBOpenable(){return new Promise((t,r)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var e;r((null==(e=i.error)?void 0:e.message)||"")}}catch(e){r(e)}})};function _E0(e,t){if(!e)throw r(t)}function bF0(r){var n=[];let i=0;for(let t=0;t<r.length;t++){let e=r.charCodeAt(t);e<128?n[i++]=e:(e<2048?n[i++]=e>>6|192:(55296==(64512&e)&&t+1<r.length&&56320==(64512&r.charCodeAt(t+1))?(e=65536+((1023&e)<<10)+(1023&r.charCodeAt(++t)),n[i++]=e>>18|240,n[i++]=e>>12&63|128):n[i++]=e>>12|224,n[i++]=e>>6&63|128),n[i++]=63&e|128)}return n}function eF0(e){return e=bF0(e),n.encodeByteArray(e,!0)}function gF0(e){try{return n.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}const t={NODE_CLIENT:!(g.validateNamespace=function validateNamespace(e,t,r){if((!r||t)&&"string"!=typeof t)throw new Error(errorPrefix(e,"namespace")+"must be a valid firebase namespace.")}),NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=(g.CONSTANTS=t,g.assert=_E0,function(e){return new Error("Firebase Database ("+t.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)}),n=(g.assertionError=r,{byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();var i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){var a=n[r],o=r+1<n.length,u=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0;let e=(15&u)<<2|c>>6,t=63&c;l||(t=64,o)||(e=64),s.push(i[a>>2],i[(3&a)<<4|u>>4],i[e],i[t])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bF0(e),t)},decodeString(r,n){if(this.HAS_NATIVE_SUPPORT&&!n)return atob(r);{var i=this.decodeStringToByteArray(r,n);var s=[];let e=0,t=0;for(;e<i.length;){var a,o,u,l=i[e++];l<128?s[t++]=String.fromCharCode(l):191<l&&l<224?(a=i[e++],s[t++]=String.fromCharCode((31&l)<<6|63&a)):239<l&&l<365?(a=((7&l)<<18|(63&i[e++])<<12|(63&i[e++])<<6|63&i[e++])-65536,s[t++]=String.fromCharCode(55296+(a>>10)),s[t++]=String.fromCharCode(56320+(1023&a))):(o=i[e++],u=i[e++],s[t++]=String.fromCharCode((15&l)<<12|(63&o)<<6|63&u))}return s.join("");return}},decodeStringToByteArray(t,e){this.init_();var r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let e=0;e<t.length;){var i=r[t.charAt(e++)],s=e<t.length?r[t.charAt(e)]:0,a=++e<t.length?r[t.charAt(e)]:64,o=++e<t.length?r[t.charAt(e)]:64;if(++e,null==i||null==s||null==a||null==o)throw Error();n.push(i<<2|s>>4),64!==a&&(n.push(s<<4&240|a>>2),64!==o)&&n.push(a<<6&192|o)}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}}),i=(g.base64=n,g.base64Encode=eF0,function(e){return eF0(e).replace(/\./g,"")});g.base64urlEncodeWithoutPadding=i;function deepExtend(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const r in t)t.hasOwnProperty(r)&&function isValidKey(e){return"__proto__"!==e}(r)&&(e[r]=deepExtend(e[r],t[r]));return e}function getUA(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function isNode(){try{return"[object process]"===Object.prototype.toString.call(m.process)}catch(e){return!1}}function getGlobal(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==m)return m;throw new Error("Unable to locate global object.")}g.base64Decode=gF0;const e=()=>getGlobal().__FIREBASE_DEFAULTS__,s=()=>{var e;return void 0!==f&&void 0!==f.env&&(e=f.env.__FIREBASE_DEFAULTS__)?JSON.parse(e):void 0},a=()=>{if("undefined"!=typeof document){let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&gF0(e[1]);return t&&JSON.parse(t)}},o=()=>{try{return e()||s()||a()}catch(e){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: "+e)}},u=e=>{var t;return null==(t=null==(t=o())?void 0:t.emulatorHosts)?void 0:t[e]};g.getDefaultEmulatorHost=u;g.getDefaultEmulatorHostnameAndPort=e=>{e=u(e);if(e){var t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);var r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]}},g.getDefaultAppConfig=()=>{var e;return null==(e=o())?void 0:e.config};g.getExperimentalSetting=e=>{var t;return null==(t=o())?void 0:t["_"+e]};class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(r){return(e,t)=>{e?this.reject(e):this.resolve(t),"function"==typeof r&&(this.promise.catch(()=>{}),1===r.length?r(e):r(e,t))}}}g.Deferred=Deferred;class FirebaseError extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}g.FirebaseError=FirebaseError;class ErrorFactory{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var t=t[0]||{},r=this.service+"/"+e,e=this.errors[e],e=e?function replaceTemplate(e,n){return e.replace(l,(e,t)=>{var r=n[t];return null!=r?String(r):`<${t}?>`})}(e,t):"Error",e=this.serviceName+`: ${e} (${r}).`;return new FirebaseError(r,e,t)}}g.ErrorFactory=ErrorFactory;const l=/\{\$([^}]+)}/g;function jsonEval(e){return JSON.parse(e)}function rF0(e){let t={},r={},n={},i="";try{var s=e.split(".");t=jsonEval(gF0(s[0])||""),r=jsonEval(gF0(s[1])||""),i=s[2],n=r.d||{},delete r.d}catch(e){}return{header:t,claims:r,data:n,signature:i}}g.decode=rF0;g.isValidTimestamp=function(e){var e=rF0(e).claims,t=Math.floor((new Date).getTime()/1e3);let r=0,n=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),n=e.hasOwnProperty("exp")?e.exp:r+86400),!!t&&!!r&&!!n&&t>=r&&t<=n},g.issuedAtTime=function(e){e=rF0(e).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},g.isValidFormat=function(e){e=rF0(e).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")};function isObject(e){return null!==e&&"object"==typeof e}g.isAdmin=function(e){e=rF0(e).claims;return"object"==typeof e&&!0===e.admin};g.Sha1=class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r=r||0;var n=this.W_;if("string"==typeof t)for(let e=0;e<16;e++)n[e]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let e=0;e<16;e++)n[e]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let e=16;e<80;e++){var i=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(i<<1|i>>>31)}let s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],u=this.chain_[3],l=this.chain_[4],c,h;for(let e=0;e<80;e++){h=e<40?e<20?(c=u^a&(o^u),1518500249):(c=a^o^u,1859775393):e<60?(c=a&o|u&(a|o),2400959708):(c=a^o^u,3395469782);var p=(s<<5|s>>>27)+c+l+h+n[e]&4294967295;l=u,u=o,o=4294967295&(a<<30|a>>>2),a=s,s=p}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(r,n){if(null!=r){var i=(n=void 0===n?r.length:n)-this.blockSize;let e=0;var s=this.buf_;let t=this.inbuf_;for(;e<n;){if(0===t)for(;e<=i;)this.compress_(r,e),e+=this.blockSize;if("string"==typeof r){for(;e<n;)if(s[t]=r.charCodeAt(e),++t,++e,t===this.blockSize){this.compress_(s),t=0;break}}else for(;e<n;)if(s[t]=r[e],++t,++e,t===this.blockSize){this.compress_(s),t=0;break}}this.inbuf_=t,this.total_+=n}}digest(){var r=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;56<=e;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let e=24;0<=e;e-=8)r[n]=this.chain_[t]>>e&255,++n;return r}};class ObserverProxy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");void 0===(n=function implementsAnyMethods(e,t){if("object"==typeof e&&null!==e)for(const r of t)if(r in e&&"function"==typeof e[r])return 1;return}(e,["next","error","complete"])?e:{next:e,error:t,complete:r}).next&&(n.next=noop),void 0===n.error&&(n.error=noop),void 0===n.complete&&(n.complete=noop);e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),e}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount)&&void 0!==this.onNoObservers&&this.onNoObservers(this)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function noop(){}function errorPrefix(e,t){return e+` failed: ${t} argument `}g.validateArgCount=function(e,t,r,n){let i;if(n<t?i="at least "+t:r<n&&(i=0===r?"none":"no more than "+r),i)throw t=e+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+i+".",new Error(t)};g.stringToByteArray=function(r){var n,i,s=[];let a=0;for(let t=0;t<r.length;t++){let e=r.charCodeAt(t);55296<=e&&e<=56319&&(n=e-55296,t++,_E0(t<r.length,"Surrogate pair missing trail surrogate."),i=r.charCodeAt(t)-56320,e=65536+(n<<10)+i),e<128?s[a++]=e:(e<2048?s[a++]=e>>6|192:(e<65536?s[a++]=e>>12|224:(s[a++]=e>>18|240,s[a++]=e>>12&63|128),s[a++]=e>>6&63|128),s[a++]=63&e|128)}return s},g.stringLength=function(t){let r=0;for(let e=0;e<t.length;e++){var n=t.charCodeAt(e);n<128?r++:n<2048?r+=2:55296<=n&&n<=56319?(r+=4,e++):r+=3}return r};g.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})};const c=1e3,h=2,p=144e5,d=(g.MAX_VALUE_MILLIS=p,.5);g.RANDOM_FACTOR=d}.call(this)}.call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:119}],109:[function(e,t,r){"use strict";r.byteLength=function byteLength(e){var e=getLens(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function toByteArray(e){var t,r,n=getLens(e),i=n[0],n=n[1],s=new l(function _byteLength(e,t,r){return 3*(t+r)/4-r}(0,i,n)),a=0,o=0<n?i-4:i;for(r=0;r<o;r+=4)t=u[e.charCodeAt(r)]<<18|u[e.charCodeAt(r+1)]<<12|u[e.charCodeAt(r+2)]<<6|u[e.charCodeAt(r+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;2===n&&(t=u[e.charCodeAt(r)]<<2|u[e.charCodeAt(r+1)]>>4,s[a++]=255&t);1===n&&(t=u[e.charCodeAt(r)]<<10|u[e.charCodeAt(r+1)]<<4|u[e.charCodeAt(r+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t);return s},r.fromByteArray=function fromByteArray(e){for(var t,r=e.length,n=r%3,i=[],s=0,a=r-n;s<a;s+=16383)i.push(function encodeChunk(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(function tripletToBase64(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}(n));return i.join("")}(e,s,a<s+16383?a:s+16383));1==n?(t=e[r-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"="));return i.join("")};for(var o=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)o[i]=n[i],u[n.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],110:[function(n,e,a){!function(e){!function(){"use strict";var i=n("base64-js"),s=n("ieee754"),t=(a.Buffer=Buffer,a.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},a.INSPECT_MAX_BYTES=50,2147483647);function createBuffer(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=Buffer.prototype,e}function Buffer(e,t,r){if("number"!=typeof e)return from(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}function from(e,t,r){if("string"==typeof e)return function fromString(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Buffer.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|byteLength(e,t),n=createBuffer(r),e=n.write(e,t);e!==r&&(n=n.slice(0,e));return n}(e,t);if(ArrayBuffer.isView(e))return fromArrayLike(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return function fromArrayBuffer(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');e=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return e.__proto__=Buffer.prototype,e}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return Buffer.from(n,t,r);n=function fromObject(e){{var t,r;if(Buffer.isBuffer(e))return t=0|checked(e.length),0!==(r=createBuffer(t)).length&&e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e);if("Buffer"===e.type&&Array.isArray(e.data))return fromArrayLike(e.data)}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){for(var t=e.length<0?0:0|checked(e.length),r=createBuffer(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function checked(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return n?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}function slowToString(e,t,r){var n=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||n<r)&&(r=n);for(var i="",s=t;s<r;++s)i+=function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[s]);return i}(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return function base64Slice(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=numberIsNaN(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):arrayIndexOf(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,i){var s=1,a=e.length,o=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a/=s=2,o/=2,r/=2}function read(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i)for(var u=-1,l=r;l<a;l++)if(read(e,l)===read(t,-1===u?0:l-u)){if(l-(u=-1===u?l:u)+1===o)return u*s}else-1!==u&&(l-=l-u),u=-1;else for(l=r=a<r+o?a-o:r;0<=l;l--){for(var c=!0,h=0;h<o;h++)if(read(e,l+h)!==read(t,h)){c=!1;break}if(c)return l}return-1}function asciiWrite(e,t,r,n){return blitBuffer(function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(function utf16leToBytes(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i.push(r%256),i.push(n);return i}(t,e.length-r),e,r,n)}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,a,o,u,l=e[i],c=null,h=239<l?4:223<l?3:191<l?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(s=e[i+1]))&&127<(u=(31&l)<<6|63&s)&&(c=u);break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&2047<(u=(15&l)<<12|(63&s)<<6|63&a)&&(u<55296||57343<u)&&(c=u);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&65535<(u=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)&&u<1114112&&(c=u)}null===c?(c=65533,h=1):65535<c&&(n.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function decodeCodePointsArray(e){var t=e.length;if(t<=p)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=p));return r}(n)}a.kMaxLength=t,(Buffer.TYPED_ARRAY_SUPPORT=function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=from,Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function alloc(e,t,r){return assertSize(e),!(e<=0)&&void 0!==t?"string"==typeof r?createBuffer(e).fill(t,r):createBuffer(e).fill(t):createBuffer(e)},Buffer.allocUnsafe=allocUnsafe,Buffer.allocUnsafeSlow=allocUnsafe,Buffer.isBuffer=function isBuffer(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function compare(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=Buffer.allocUnsafe(t),n=0,i=0;i<e.length;++i){var s=e[i];if(isInstance(s,Uint8Array)&&(s=Buffer.from(s)),!Buffer.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toLocaleString=Buffer.prototype.toString=function toString(){var e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(Buffer.isBuffer(e))return this===e||0===Buffer.compare(this,e);throw new TypeError("Argument must be a Buffer")},Buffer.prototype.inspect=function inspect(){var e="",t=a.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,r,n,i){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(s,a),u=this.slice(n,i),l=e.slice(t,r),c=0;c<o;++c)if(u[c]!==l[c]){s=u[c],a=l[c];break}return s<a?-1:a<s?1:0},Buffer.prototype.includes=function includes(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function indexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function write(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var s=!1;;)switch(n){case"hex":return function hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;(!n||i<(n=Number(n)))&&(n=i),(i=t.length)/2<n&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(numberIsNaN(a))return s;e[r+s]=a}return s}(this,e,t,r);case"utf8":case"utf-8":return function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return asciiWrite(this,e,t,r);case"base64":return function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var p=4096;function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,i,s){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function checkIEEE754(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,i){return t=+t,r>>>=0,i||checkIEEE754(e,0,r,4),s.write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,i){return t=+t,r>>>=0,i||checkIEEE754(e,0,r,8),s.write(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function slice(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=Buffer.prototype,r},Buffer.prototype.readUIntLE=function readUIntLE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},Buffer.prototype.readUIntBE=function readUIntBE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},Buffer.prototype.readUInt8=function readUInt8(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function readIntBE(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=t,i=1,s=this[e+--n];0<n&&(i*=256);)s+=this[e+--n]*i;return(i*=128)<=s&&(s-=Math.pow(2,8*t)),s},Buffer.prototype.readInt8=function readInt8(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){e>>>=0,t||checkOffset(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},Buffer.prototype.readInt16BE=function readInt16BE(e,t){e>>>=0,t||checkOffset(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),s.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),s.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return e>>>=0,t||checkOffset(e,8,this.length),s.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return e>>>=0,t||checkOffset(e,8,this.length),s.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;0<=--i&&(s*=256);)this[t+i]=e/s&255;return t+r},Buffer.prototype.writeUInt8=function writeUInt8(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,r,n){e=+e,t>>>=0,n||checkInt(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},Buffer.prototype.writeIntBE=function writeIntBE(e,t,r,n){e=+e,t>>>=0,n||checkInt(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},Buffer.prototype.writeInt8=function writeInt8(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function copy(e,t,r,n){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=i-1;0<=s;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},Buffer.prototype.fill=function fill(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===e.length&&(i=e.charCodeAt(0),"utf8"===n&&i<128||"latin1"===n)&&(e=i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");var s;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(s=t;s<r;++s)this[s]=e;else{var a=Buffer.isBuffer(e)?e:Buffer.from(e,n),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%o]}return this};var r=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&s.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&s.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,r<128){if(--t<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function base64ToBytes(e){return i.toByteArray(function base64clean(e){if((e=(e=e.split("=")[0]).trim().replace(r,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}}.call(this)}.call(this,n("buffer").Buffer)},{"base64-js":109,buffer:110,ieee754:116}],111:[function(t,n,i){!function(r){!function(){var e,t;e=this,t=function(){"use strict";function c(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){i(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function d(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&t.status<=299}function e(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var u="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,l=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=u.saveAs||("object"!=typeof window||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(t,r,n){var i=u.URL||u.webkitURL,s=document.createElement("a");r=r||t.name||"download",s.download=r,s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?e(s):d(s.href)?c(t,r,n):e(s,s.target="_blank")):(s.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){e(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,n){var i;r=r||t.name||"download","string"!=typeof t?navigator.msSaveOrOpenBlob(function b(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(t,n),r):d(t)?c(t,r,n):((i=document.createElement("a")).href=t,i.target="_blank",setTimeout(function(){e(i)}))}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return c(e,t,r);var i,s,a,t="application/octet-stream"===e.type,r=/constructor/i.test(u.HTMLElement)||u.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);(o||t&&r||l)&&"undefined"!=typeof FileReader?((i=new FileReader).onloadend=function(){var e=i.result,e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;");n?n.location.href=e:location=e,n=null},i.readAsDataURL(e)):(s=u.URL||u.webkitURL,a=s.createObjectURL(e),n?n.location=a:location.href=a,n=null,setTimeout(function(){s.revokeObjectURL(a)},4e4))});u.saveAs=i.saveAs=i,void 0!==n&&(n.exports=i)},"function"==typeof define&&define.amd?define([],t):void 0!==i?t():(t(),e.FileSaver={})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],112:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("@firebase/app");Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});(0,n.registerVersion)("firebase","9.14.0","app")},{"@firebase/app":104}],113:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("@firebase/database");Object.keys(n).forEach(function(e){"default"===e||"__esModule"===e||e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})})},{"@firebase/database":106}],114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteDB=function deleteDB(e,{blocked:t}={}){e=indexedDB.deleteDatabase(e);t&&e.addEventListener("blocked",()=>t());return(0,u.w)(e).then(()=>{})},r.openDB=function openDB(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=(0,u.w)(a);n&&a.addEventListener("upgradeneeded",e=>{n((0,u.w)(a.result),e.oldVersion,e.newVersion,(0,u.w)(a.transaction))});r&&a.addEventListener("blocked",()=>r());return o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),o},Object.defineProperty(r,"unwrap",{enumerable:!0,get:function(){return u.u}}),Object.defineProperty(r,"wrap",{enumerable:!0,get:function(){return u.w}});var u=e("./wrap-idb-value.js");const a=["get","getKey","getAll","getAllKeys","count"],o=["put","add","delete","clear"],l=new Map;function getMethod(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(l.get(t))return l.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=o.includes(n);return n in(i?IDBIndex:IDBObjectStore).prototype&&(s||a.includes(n))?(e=async function(e,...t){e=this.transaction(e,s?"readwrite":"readonly");let r=e.store;return i&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),s&&e.done]))[0]},l.set(t,e),e):void 0}}(0,u.r)(n=>({...n,get:(e,t,r)=>getMethod(e,t)||n.get(e,t,r),has:(e,t)=>!!getMethod(e,t)||n.has(e,t)}))},{"./wrap-idb-value.js":115}],115:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.i=r.a=void 0,r.r=function replaceTraps(e){h=e(h)},r.u=void 0,r.w=wrap;const n=(t,e)=>e.some(e=>t instanceof e);r.i=n;let i,s;const a=new WeakMap,o=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap;r.a=c;let h={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wrap(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function wrapFunction(r){return r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function getCursorAdvanceMethods(){return s=s||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}().includes(r)?function(...e){return r.apply(p(this),e),wrap(a.get(this))}:function(...e){return wrap(r.apply(p(this),e))}:function(e,...t){t=r.call(p(this),e,...t);return u.set(t,e.sort?e.sort():[e]),wrap(t)}}function transformCachableValue(e){return"function"==typeof e?wrapFunction(e):(e instanceof IDBTransaction&&function cacheDonePromiseForTransaction(s){var e;o.has(s)||(e=new Promise((e,t)=>{const r=()=>{s.removeEventListener("complete",n),s.removeEventListener("error",i),s.removeEventListener("abort",i)},n=()=>{e(),r()},i=()=>{t(s.error||new DOMException("AbortError","AbortError")),r()};s.addEventListener("complete",n),s.addEventListener("error",i),s.addEventListener("abort",i)}),o.set(s,e))}(e),n(e,function getIdbProxyableTypes(){return i=i||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}())?new Proxy(e,h):e)}function wrap(e){var t;return e instanceof IDBRequest?function promisifyRequest(s){var e=new Promise((e,t)=>{const r=()=>{s.removeEventListener("success",n),s.removeEventListener("error",i)},n=()=>{e(wrap(s.result)),r()},i=()=>{t(s.error),r()};s.addEventListener("success",n),s.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&a.set(e,s)}).catch(()=>{}),c.set(e,s),e}(e):l.has(e)?l.get(e):((t=transformCachableValue(e))!==e&&(l.set(e,t),c.set(t,e)),t)}const p=e=>c.get(e);r.u=p},{}],116:[function(e,t,r){r.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,u=(1<<o)-1,l=u>>1,c=-7,h=r?i-1:0,p=r?-1:1,i=e[t+h];for(h+=p,s=i&(1<<-c)-1,i>>=-c,c+=o;0<c;s=256*s+e[t+h],h+=p,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;0<c;a=256*a+e[t+h],h+=p,c-=8);if(0===s)s=1-l;else{if(s===u)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,n),s-=l}return(i?-1:1)*a*Math.pow(2,s-n)},r.write=function(e,t,r,n,i,s){var a,o,u=8*s-i-1,l=(1<<u)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,d=n?1:-1,s=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+c?h/n:h*Math.pow(2,1-c))*n&&(a++,n/=2),l<=a+c?(o=0,a=l):1<=a+c?(o=(t*n-1)*Math.pow(2,i),a+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));8<=i;e[r+p]=255&o,p+=d,o/=256,i-=8);for(a=a<<i|o,u+=i;0<u;e[r+p]=255&a,p+=d,a/=256,u-=8);e[r+p-d]|=128*s}},{}],117:[function(g,o,y){!function(p,i,h,e,t,r,a,m){!function(){!function(e){"object"==typeof y&&void 0!==o?o.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this).JSZip=e()}(function(){return function s(n,i,a){function u(t,e){if(!i[t]){if(!n[t]){var r="function"==typeof g&&g;if(!e&&r)return r(t,!0);if(o)return o(t,!0);e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}r=i[t]={exports:{}};n[t][0].call(r.exports,function(e){return u(n[t][1][e]||e)},r,r.exports,s,n,i,a)}return i[t].exports}for(var o="function"==typeof g&&g,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,r){"use strict";var h=e("./utils"),c=e("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,n,i,s,a,o=[],u=0,l=e.length,c="string"!==h.getTypeOf(e);u<e.length;)a=l-u,n=c?(t=e[u++],r=u<l?e[u++]:0,u<l?e[u++]:0):(t=e.charCodeAt(u++),r=u<l?e.charCodeAt(u++):0,u<l?e.charCodeAt(u++):0),i=(3&t)<<4|r>>4,s=1<a?(15&r)<<2|n>>6:64,a=2<a?63&n:64,o.push(p.charAt(t>>2)+p.charAt(i)+p.charAt(s)+p.charAt(a));return o.join("")},r.decode=function(e){var t,r,n,i,s,a=0,o=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var u,l=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===p.charAt(64)&&l--,e.charAt(e.length-2)===p.charAt(64)&&l--,l%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=new(c.uint8array?Uint8Array:Array)(0|l);a<e.length;)t=p.indexOf(e.charAt(a++))<<2|(i=p.indexOf(e.charAt(a++)))>>4,r=(15&i)<<4|(i=p.indexOf(e.charAt(a++)))>>2,n=(3&i)<<6|(s=p.indexOf(e.charAt(a++))),u[o++]=t,64!==i&&(u[o++]=r),64!==s&&(u[o++]=n);return u}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function o(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new a("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),a=function(){for(var e=[],t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}();t.exports=function(e,t){return void 0!==e&&e.length?("string"!==n.getTypeOf(e)?function(e,t,r){var n=a,i=0+r;e^=-1;for(var s=0;s<i;s++)e=e>>>8^n[255&(e^t[s])];return-1^e}:function(e,t,r){var n=a,i=0+r;e^=-1;for(var s=0;s<i;s++)e=e>>>8^n[255&(e^t.charCodeAt(s))];return-1^e})(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";e="undefined"!=typeof Promise?Promise:e("lie");t.exports={Promise:e}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),a=e("./stream/GenericWorker"),o=n?"uint8array":"array";function h(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",s.inherits(h,a),h.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,e.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(e){return new h("Deflate",e)},r.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function A(e,t){for(var r="",n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function n(e,t,r,n,i,s){var a=e.file,o=e.compression,u=s!==_.utf8encode,l=v.transformTo("string",s(a.name)),c=v.transformTo("string",_.utf8encode(a.name)),h=a.comment,s=v.transformTo("string",s(h)),p=v.transformTo("string",_.utf8encode(h)),d=c.length!==a.name.length,h=p.length!==h.length,f="",m=a.dir,g=a.date,y={crc32:0,compressedSize:0,uncompressedSize:0},r=(t&&!r||(y.crc32=e.crc32,y.compressedSize=e.compressedSize,y.uncompressedSize=e.uncompressedSize),0),e=(t&&(r|=8),u||!d&&!h||(r|=2048),0),t=0,g=(m&&(e|=16),"UNIX"===i?(t=798,e|=(65535&((u=a.unixPermissions)?u:m?16893:33204))<<16):(t=20,e|=63&(a.dosPermissions||0)),i=g.getUTCHours(),i=(i=((i<<=6)|g.getUTCMinutes())<<5)|g.getUTCSeconds()/2,u=g.getUTCFullYear()-1980,u=(u=((u<<=4)|g.getUTCMonth()+1)<<5)|g.getUTCDate(),d&&(m=A(1,1)+A(C(l),4)+c,f+="up"+A(m.length,2)+m),h&&(a=A(1,1)+A(C(s),4)+p,f+="uc"+A(a.length,2)+a),""),g=(g=(g=(g=(g=(g=(g=(g=(g=(g+="\n\0")+A(r,2))+o.magic)+A(i,2))+A(u,2))+A(y.crc32,4))+A(y.compressedSize,4))+A(y.uncompressedSize,4))+A(l.length,2))+A(f.length,2);return{fileRecord:w.LOCAL_FILE_HEADER+g+l+f,dirRecord:w.CENTRAL_FILE_HEADER+A(t,2)+g+A(s.length,2)+"\0\0\0\0"+A(e,4)+A(n,4)+l+f+s}}var v=e("../utils"),i=e("../stream/GenericWorker"),_=e("../utf8"),C=e("../crc32"),w=e("../signature");function s(e,t,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}v.inherits(s,i),s.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},s.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;t?(e=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:e.fileRecord,meta:{percent:0}})):this.accumulate=!0},s.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=n(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:(t=e,w.DATA_DESCRIPTOR+A(t.crc32,4)+A(t.compressedSize,4)+A(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,r=function(e,t,r,n,i){i=v.transformTo("string",i(n));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+A(e,2)+A(e,2)+A(t,4)+A(r,4)+A(i.length,2)+i}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},s.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=s},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var l=e("../compressions"),n=e("./ZipFileWorker");r.generateWorker=function(e,a,t){var o=new n(a.streamFiles,t,a.platform,a.encodeFileName),u=0;try{e.forEach(function(e,t){u++;var r=function(e,t){e=e||t,t=l[e];if(t)return t;throw new Error(e+" is not a valid compression method !")}(t.options.compression,a.compression),n=t.options.compressionOptions||a.compressionOptions||{},i=t.dir,s=t.date;t._compressWorker(r,n).withStreamInfo("file",{name:e,dir:i,date:s,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(o)}),o.entriesCount=u}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e,t=new n;for(e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var u=e("./utils"),i=e("./external"),n=e("./utf8"),s=e("./zipEntries"),l=e("./stream/Crc32Probe"),c=e("./nodejsUtils");t.exports=function(e,a){var o=this;return a=u.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",e,!0,a.optimizedBinaryString,a.base64).then(function(e){var t=new s(a);return t.load(e),t}).then(function(e){var t=[i.Promise.resolve(e)],r=e.files;if(a.checkCRC32)for(var n=0;n<r.length;n++)t.push(function f(n){return new i.Promise(function(e,t){var r=n.decompressed.getContentWorker().pipe(new l);r.on("error",function(e){t(e)}).on("end",function(){r.streamInfo.crc32!==n.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}(r[n]));return i.Promise.all(t)}).then(function(e){for(var e=e.shift(),t=e.files,r=0;r<t.length;r++){var n=t[r],i=n.fileNameStr,s=u.resolve(n.fileNameStr);o.file(s,n.decompressed,{binary:!0,optimizedBinaryString:!0,date:n.date,dir:n.dir,comment:n.fileCommentStr.length?n.fileCommentStr:null,unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions,createFolders:a.createFolders}),n.dir||(o.file(s).unsafeOriginalName=i)}return e.zipComment.length&&(o.comment=e.zipComment),o})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var i=e("readable-stream").Readable;function n(e,t,r){i.call(this,t),this._helper=e;var n=this;e.on("data",function(e,t){n.push(e)||n._helper.pause(),r&&r(t)}).on("error",function(e){n.emit("error",e)}).on("end",function(){n.push(null)})}e("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){"use strict";t.exports={isNode:void 0!==h,newBufferFrom:function(e,t){if(h.from&&h.from!==Uint8Array.from)return h.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new h(e,t)},allocBuffer:function(e){return h.alloc?h.alloc(e):((e=new h(e)).fill(0),e)},isBuffer:function(e){return h.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function s(e,t,r){var n=a.getTypeOf(t),i=a.extend(r||{},l),s=(i.date=i.date||new Date,null!==i.compression&&(i.compression=i.compression.toUpperCase()),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(e=g(e)),i.createFolders&&(s=O_0(e))&&Q_0.call(this,s,!0),"string"===n&&!1===i.binary&&!1===i.base64),n=(r&&void 0!==r.binary||(i.binary=!s),(t instanceof c&&0===t.uncompressedSize||i.dir||!t||0===t.length)&&(i.base64=!1,i.binary=!0,t="",i.compression="STORE"),t instanceof c||t instanceof o?t:f.isNode&&f.isStream(t)?new m(e,t):a.prepareContent(e,t,i.binary,i.optimizedBinaryString,i.base64)),r=new p(e,n,i);this.files[e]=r}function O_0(e){var t=(e="/"===e.slice(-1)?e.substring(0,e.length-1):e).lastIndexOf("/");return 0<t?e.substring(0,t):""}function Q_0(e,t){return t=void 0!==t?t:l.createFolders,e=g(e),this.files[e]||s.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]}var i=e("./utf8"),a=e("./utils"),o=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),p=e("./zipObject"),d=e("./generate"),f=e("./nodejsUtils"),m=e("./nodejs/NodejsStreamInputAdapter"),g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e};function h(e){return"[object RegExp]"===Object.prototype.toString.call(e)}t.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(r){var n=[];return this.forEach(function(e,t){r(e,t)&&n.push(t)}),n},file:function(e,t,r){var n;return 1!==arguments.length?(e=this.root+e,s.call(this,e,t,r),this):h(e)?(n=e,this.filter(function(e,t){return!t.dir&&n.test(e)})):(t=this.files[this.root+e])&&!t.dir?t:null},folder:function(r){var e,t;return r?h(r)?this.filter(function(e,t){return t.dir&&r.test(e)}):(e=this.root+r,e=Q_0.call(this,e),(t=this.clone()).root=e.name,t):this},remove:function(r){r=this.root+r;var e=this.files[r];if(e||("/"!==r.slice(-1)&&(r+="/"),e=this.files[r]),e&&!e.dir)delete this.files[r];else for(var t=this.filter(function(e,t){return t.name.slice(0,r.length)===r}),n=0;n<t.length;n++)delete this.files[t[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t={};try{if((t=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");a.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var r=t.comment||this.comment||"",n=d.generateWorker(this,t,r)}catch(e){(n=new o("error")).error(e)}return new u(n,t.type||"string",t.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),e=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&r===i[1]&&n===i[2]&&e===i[3]},i.prototype.readData=function(e){var t;return this.checkOffset(e),0===e?[]:(t=this.data.slice(this.zero+this.index,this.zero+this.index+e),this.index+=e,t)},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){var t;return this.checkOffset(e),0===e?new Uint8Array(0):(t=this.data.subarray(this.zero+this.index,this.zero+this.index+e),this.index+=e,t)},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../support"),s=e("./ArrayReader"),a=e("./StringReader"),o=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new u(n.transformTo("uint8array",e)):new s(n.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../utils");function s(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,i),s.prototype.processChunk=function(e){var t;e&&(t=this.streamInfo[this.propName]||0,this.streamInfo[this.propName]=t+e.data.length),i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished)||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){var e;return!(!this.isPaused||this.isFinished||(e=this.isPaused=!1,this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),e))},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){"use strict";var u=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),c=e("../base64"),n=e("../support"),a=e("../external"),o=null;if(n.nodestream)try{o=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function f(e,t,r){var n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=t,this._mimeType=r,u.checkSupport(n),this._worker=e.pipe(new i(n)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}f.prototype={accumulate:function(e){return function l(e,o){return new a.Promise(function(t,r){var n=[],i=e._internalType,s=e._outputType,a=e._mimeType;e.on("data",function(e,t){n.push(e),o&&o(t)}).on("error",function(e){n=[],r(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return u.newBlob(u.transformTo("arraybuffer",t),r);case"base64":return c.encode(t);default:return u.transformTo(e,t)}}(s,function(e,t){for(var r=0,n=null,i=0,s=0;s<t.length;s++)i+=t[s].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(n=new Uint8Array(i),s=0;s<t.length;s++)n.set(t[s],r),r+=t[s].length;return n;case"nodebuffer":return h.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(i,n),a);t(e)}catch(e){r(e)}n=[]}).resume()})}(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){u.delay(t,arguments,r)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(u.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new o(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==h,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,i){"use strict";for(var u=e("./utils"),c=e("./support"),h=e("./nodejsUtils"),r=e("./stream/GenericWorker"),p=new Array(256),n=0;n<256;n++)p[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function a(){r.call(this,"utf-8 decode"),this.leftOver=null}function l(){r.call(this,"utf-8 encode")}p[254]=p[254]=1,i.utf8encode=function(e){if(c.nodebuffer)return h.newBufferFrom(e,"utf-8");for(var t,r,n,i,s=e,a=s.length,o=0,u=0;u<a;u++)55296==(64512&(r=s.charCodeAt(u)))&&u+1<a&&56320==(64512&(n=s.charCodeAt(u+1)))&&(r=65536+(r-55296<<10)+(n-56320),u++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new(c.uint8array?Uint8Array:Array)(o),u=i=0;i<o;u++)55296==(64512&(r=s.charCodeAt(u)))&&u+1<a&&56320==(64512&(n=s.charCodeAt(u+1)))&&(r=65536+(r-55296<<10)+(n-56320),u++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},i.utf8decode=function(e){if(c.nodebuffer)return u.transformTo("nodebuffer",e).toString("utf-8");for(var t,r,n,i=e=u.transformTo(c.uint8array?"uint8array":"array",e),s=i.length,a=new Array(2*s),o=t=0;o<s;)if((r=i[o++])<128)a[t++]=r;else if(4<(n=p[r]))a[t++]=65533,o+=n-1;else{for(r&=2===n?31:3===n?15:7;1<n&&o<s;)r=r<<6|63&i[o++],n--;1<n?a[t++]=65533:r<65536?a[t++]=r:(r-=65536,a[t++]=55296|r>>10&1023,a[t++]=56320|1023&r)}return a.length!==t&&(a.subarray?a=a.subarray(0,t):a.length=t),u.applyFromCharCode(a)},u.inherits(a,r),a.prototype.processChunk=function(e){var t=u.transformTo(c.uint8array?"uint8array":"array",e.data),r=(this.leftOver&&this.leftOver.length&&(c.uint8array?(r=t,(t=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),t.set(r,this.leftOver.length)):t=this.leftOver.concat(t),this.leftOver=null),function(e,t){for(var r=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+p[e[r]]>t?r:t}(t)),n=t;r!==t.length&&(c.uint8array?(n=t.subarray(0,r),this.leftOver=t.subarray(r,t.length)):(n=t.slice(0,r),this.leftOver=t.slice(r,t.length))),this.push({data:i.utf8decode(n),meta:e.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=a,u.inherits(l,r),l.prototype.processChunk=function(e){this.push({data:i.utf8encode(e.data),meta:e.meta})},i.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,a){"use strict";var o=e("./support"),u=e("./base64"),r=e("./nodejsUtils"),c=e("./external");function n(e){return e}function l(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),a.newBlob=function(t,r){a.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var i={stringifyByChunk:function(e,t,r){var n=[],i=0,s=e.length;if(s<=r)return String.fromCharCode.apply(null,e);for(;i<s;)n.push("array"===t||"nodebuffer"===t?String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,s))):String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,s)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(e){return!1}}()}};function s(e){var t=65536,r=a.getTypeOf(e),n=!0;if("uint8array"===r?n=i.applyCanBeUsed.uint8array:"nodebuffer"===r&&(n=i.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return i.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return i.stringifyByChar(e)}function f(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}a.applyFromCharCode=s;var h={};h.string={string:n,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,r.allocBuffer(e.length))}},h.array={string:s,array:n,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(e)}},h.arraybuffer={string:function(e){return s(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:n,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:s,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:n,nodebuffer:function(e){return r.newBufferFrom(e)}},h.nodebuffer={string:s,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:n},a.transformTo=function(e,t){if(t=t||"",!e)return t;a.checkSupport(e);var r=a.getTypeOf(t);return h[r][e](t)},a.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var i=t[n];"."===i||""===i&&0!==n&&n!==t.length-1||(".."===i?r.pop():r.push(i))}return r.join("/")},a.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":o.nodebuffer&&r.isBuffer(e)?"nodebuffer":o.uint8array&&e instanceof Uint8Array?"uint8array":o.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(e){if(!o[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(e){for(var t,r="",n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},a.delay=function(e,t,r){m(function(){e.apply(r||null,t||[])})},a.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},a.extend=function(){for(var e,t={},r=0;r<arguments.length;r++)for(e in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],e)&&void 0===t[e]&&(t[e]=arguments[r][e]);return t},a.prepareContent=function(r,e,n,i,s){return c.Promise.resolve(e).then(function(n){return o.blob&&(n instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(n)))&&"undefined"!=typeof FileReader?new c.Promise(function(t,r){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=function(e){r(e.target.error)},e.readAsArrayBuffer(n)}):n}).then(function(e){var t=a.getTypeOf(e);return t?("arraybuffer"===t?e=a.transformTo("uint8array",e):"string"===t&&(s?e=u.decode(e):n&&!0!==i&&(e=l(t=e,new(o.uint8array?Uint8Array:Array)(t.length)))),e):c.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),a=e("./zipEntry"),o=e("./support");function h(e){this.files=[],this.loadOptions=e}h.prototype={checkSignature:function(e){var t;if(!this.reader.readAndCheckSignature(e))throw this.reader.index-=4,t=this.reader.readString(4),new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")},isSignature:function(e,t){var r=this.reader.index,e=(this.reader.setIndex(e),this.reader.readString(4)===t);return this.reader.setIndex(r),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",t=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){for(var e,t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}e=this.centralDirOffset+this.centralDirSize,e=t-(e=this.zip64?e+20+(12+this.zip64EndOfCentralSize):e);if(0<e)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),s=e("./compressedObject"),a=e("./crc32"),o=e("./utf8"),u=e("./compressions"),c=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(Object.prototype.hasOwnProperty.call(u,t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){var e;this.extraFields[1]&&(e=n(this.extraFields[1].value),this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS)&&(this.diskNumberStart=e.readInt(4))},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e,t=c.uint8array?"uint8array":"array";this.useUTF8()?(this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment)):(null!==(e=this.findExtraFieldUnicodePath())?this.fileNameStr=e:(e=i.transformTo(t,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(e)),null!==(e=this.findExtraFieldUnicodeComment())?this.fileCommentStr=e:(e=i.transformTo(t,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(e)))},findExtraFieldUnicodePath:function(){var e,t=this.extraFields[28789];return!t||1!==(e=n(t.value)).readInt(1)||a(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))},findExtraFieldUnicodeComment:function(){var e,t=this.extraFields[25461];return!t||1!==(e=n(t.value)).readInt(1)||a(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),a=e("./utf8"),o=e("./compressedObject"),u=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r,i=("binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker(),!this._dataBinary);i&&!n&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&n&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new s(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){var r;return this._data instanceof o&&this._data.compression.magic===e.magic?this._data.getCompressedWorker():(r=this._decompressWorker(),this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t))},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof u?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)n.prototype[l[h]]=c;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,l,t){!function(t){"use strict";var n,e,r,i,s=t.MutationObserver||t.WebKitMutationObserver,a=s?(e=0,s=new s(u),r=t.document.createTextNode(""),s.observe(r,{characterData:!0}),function(){r.data=e=++e%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)}:((i=new t.MessageChannel).port1.onmessage=u,function(){i.port2.postMessage(0)}),o=[];function u(){var e,t;n=!0;for(var r=o.length;r;){for(t=o,o=[],e=-1;++e<r;)t[e]();r=o.length}n=!1}l.exports=function(e){1!==o.push(e)||n||a()}}.call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var s=e("immediate");function u(){}var l={},a=["REJECTED"],m=["FULFILLED"],g=["PENDING"];function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,e!==u&&d(this,e)}function h(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,r,n){s(function(){var e;try{e=r(n)}catch(e){return l.reject(t,e)}e===t?l.reject(t,new TypeError("Cannot resolve promise with itself")):l.resolve(t,e)})}function c(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,l.reject(t,e))}function i(e){r||(r=!0,l.resolve(t,e))}var s=p(function(){e(i,n)});"error"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=o).prototype.finally=function(t){var r;return"function"!=typeof t?this:(r=this.constructor,this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}))},o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var r;return"function"!=typeof e&&this.state===m||"function"!=typeof t&&this.state===a?this:(r=new this.constructor(u),this.state!==g?f(r,this.state===m?e:t,this.outcome):this.queue.push(new h(r,e,t)),r)},h.prototype.callFulfilled=function(e){l.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){l.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},l.resolve=function(e,t){var r=p(c,t);if("error"===r.status)return l.reject(e,r.value);r=r.value;if(r)d(e,r);else{e.state=m,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callFulfilled(t)}return e},l.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},o.resolve=function(e){return e instanceof this?e:l.resolve(new this(u),e)},o.reject=function(e){var t=new this(u);return l.reject(t,e)},o.all=function(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,t=-1,o=new this(u);++t<n;)!function h(e,t){r.resolve(e).then(function(e){s[t]=e,++a!==n||i||(i=!0,l.resolve(o,s))},function(e){i||(i=!0,l.reject(o,e))})}(e[t],t);return o},o.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n,i=-1,s=new this(u);++i<t;)n=e[i],this.resolve(n).then(function(e){r||(r=!0,l.resolve(s,e))},function(e){r||(r=!0,l.reject(s,e))});return s}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var a=e("./zlib/deflate"),o=e("./utils/common"),u=e("./utils/strings"),i=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString;function p(e){if(!(this instanceof p))return new p(e);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var e=this.options,t=(e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0,a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(0!==t)throw new Error(i[t]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){e="string"==typeof e.dictionary?u.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if(0!==(t=a.deflateSetDictionary(this.strm,e)))throw new Error(i[t]);this._dict_set=!0}}function n(e,t){t=new p(t);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}p.prototype.push=function(e,t){var r,n,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===l.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(s),i.next_out=0,i.avail_out=s),1!==(r=a.deflate(i,n))&&0!==r)return this.onEnd(r),!(this.ended=!0)}while(0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(u.buf2binstring(o.shrinkBuf(i.output,i.next_out))):this.onData(o.shrinkBuf(i.output,i.next_out))),(0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==n||(this.onEnd(0),!(i.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=p,r.deflate=n,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,n(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var h=e("./zlib/inflate"),p=e("./utils/common"),d=e("./utils/strings"),f=e("./zlib/constants"),n=e("./zlib/messages"),i=e("./zlib/zstream"),s=e("./zlib/gzheader"),m=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options,e=(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits)&&(t.windowBits=-15),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0,h.inflateInit2(this.strm,t.windowBits));if(e!==f.Z_OK)throw new Error(n[e]);this.header=new s,h.inflateGetHeader(this.strm,this.header)}function o(e,t){t=new a(t);if(t.push(e,!0),t.err)throw t.msg||n[t.err];return t.result}a.prototype.push=function(e,t){var r,n,i,s,a,o=this.strm,u=this.options.chunkSize,l=this.options.dictionary,c=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?f.Z_FINISH:f.Z_NO_FLUSH,"string"==typeof e?o.input=d.binstring2buf(e):"[object ArrayBuffer]"===m.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new p.Buf8(u),o.next_out=0,o.avail_out=u),(r=h.inflate(o,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&l&&(a="string"==typeof l?d.string2buf(l):"[object ArrayBuffer]"===m.call(l)?new Uint8Array(l):l,r=h.inflateSetDictionary(this.strm,a)),r===f.Z_BUF_ERROR&&!0===c&&(r=f.Z_OK,c=!1),r!==f.Z_STREAM_END&&r!==f.Z_OK)return this.onEnd(r),!(this.ended=!0)}while(!o.next_out||0!==o.avail_out&&r!==f.Z_STREAM_END&&(0!==o.avail_in||n!==f.Z_FINISH&&n!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(a=d.utf8border(o.output,o.next_out),i=o.next_out-a,s=d.buf2string(o.output,a),o.next_out=i,o.avail_out=u-i,i&&p.arraySet(o.output,o.output,a,i,0),this.onData(s)):this.onData(p.shrinkBuf(o.output,o.next_out))),0===o.avail_in&&0===o.avail_out&&(c=!0),(0<o.avail_in||0===o.avail_out)&&r!==f.Z_STREAM_END);return(n=r===f.Z_STREAM_END?f.Z_FINISH:n)===f.Z_FINISH?(r=h.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f.Z_OK):n!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(o.avail_out=0))},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){e===f.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},r.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,i=(r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)},{arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){for(var t,r,n,i,s=t=0,a=e.length;s<a;s++)t+=e[s].length;for(i=new Uint8Array(t),s=r=0,a=e.length;s<a;s++)n=e[s],i.set(n,r),r+=n.length;return i}}),s={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var u=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var c=new u.Buf8(256),n=0;n<256;n++)c[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function l(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,u.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}c[254]=c[254]=1,r.string2buf=function(e){for(var t,r,n,i,s=e.length,a=0,o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new u.Buf8(a),o=i=0;i<a;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new u.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){for(var r,n,i,s=t||e.length,a=new Array(2*s),o=r=0;o<s;)if((n=e[o++])<128)a[r++]=n;else if(4<(i=c[n]))a[r++]=65533,o+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&o<s;)n=n<<6|63&e[o++],i--;1<i?a[r++]=65533:n<65536?a[r++]=n:(n-=65536,a[r++]=55296|n>>10&1023,a[r++]=56320|1023&n)}return l(a,r)},r.utf8border=function(e,t){for(var r=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+c[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,s=e>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(i=i+t[n++]|0)|0,--a;);i%=65521,s%=65521}return i|s<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var o=function(){for(var e=[],t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}();t.exports=function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],46:[function(e,w,t){"use strict";var o,h=e("../utils/common"),u=e("./trees"),p=e("./adler32"),d=e("./crc32"),r=e("./messages"),l=0,c=0,f=-2,n=2,m=8,i=286,s=30,a=19,b=2*i+1,E=15,g=3,y=258,v=y+g+1,_=42,C=113;function R(e,t){return e.msg=r[t],t}function T(e){return(e<<1)-(4<e?9:0)}function D(e){for(var t=e.length;0<=--t;)e[t]=0}function F(e){var t=e.state,r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(h.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending)&&(t.pending_out=0)}function N(e,t){u._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,F(e.strm)}function U(e,t){e.pending_buf[e.pending++]=t}function P(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var r,n,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-v?e.strstart-(e.w_size-v):0,l=e.window,c=e.w_mask,h=e.prev,p=e.strstart+y,d=l[s+a-1],f=l[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(r=t)+a]===f&&l[r+a-1]===d&&l[r]===l[s]&&l[++r]===l[s+1]){for(s+=2,r++;l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<p;);if(n=y-(p-s),s=p-y,a<n){if(e.match_start=t,o<=(a=n))break;d=l[s+a-1],f=l[s+a]}}}while((t=h[t&c])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function j(e){var t,r,n,i,s,a,o,u,l,c=e.w_size;do{if(u=e.window_size-e.lookahead-e.strstart,e.strstart>=c+(c-v)){for(h.arraySet(e.window,e.window,c,c,0),e.match_start-=c,e.strstart-=c,e.block_start-=c,t=r=e.hash_size;n=e.head[--t],e.head[t]=c<=n?n-c:0,--r;);for(t=r=c;n=e.prev[--t],e.prev[t]=c<=n?n-c:0,--r;);u+=c}if(0===e.strm.avail_in)break;if(s=e.strm,a=e.window,o=e.strstart+e.lookahead,l=void 0,r=0===(l=(u=u)<(l=s.avail_in)?u:l)?0:(s.avail_in-=l,h.arraySet(a,s.input,s.next_in,l,o),1===s.state.wrap?s.adler=p(s.adler,a,l,o):2===s.state.wrap&&(s.adler=d(s.adler,a,l,o)),s.next_in+=l,s.total_in+=l,l),e.lookahead+=r,e.lookahead+e.insert>=g)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+g-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<g)););}while(e.lookahead<v&&0!==e.strm.avail_in)}function Z(e,t){for(var r,n;;){if(e.lookahead<v){if(j(e),e.lookahead<v&&t===l)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=g&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+g-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-v&&(e.match_length=L(e,r)),e.match_length>=g)if(n=u._tr_tally(e,e.strstart-e.match_start,e.match_length-g),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=g){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+g-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(N(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<g-1?e.strstart:g-1,4===t?(N(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?1:2}function W(e,t){for(var r,n,i;;){if(e.lookahead<v){if(j(e),e.lookahead<v&&t===l)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=g&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+g-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=g-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-v&&(e.match_length=L(e,r),e.match_length<=5)&&(1===e.strategy||e.match_length===g&&4096<e.strstart-e.match_start)&&(e.match_length=g-1),e.prev_length>=g&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-g,n=u._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-g),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+g-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=g-1,e.strstart++,n&&(N(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=u._tr_tally(e,0,e.window[e.strstart-1]))&&N(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=u._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<g-1?e.strstart:g-1,4===t?(N(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?1:2}function M(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(2*b),this.dyn_dtree=new h.Buf16(2*(2*s+1)),this.bl_tree=new h.Buf16(2*(2*a+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(E+1),this.heap=new h.Buf16(2*i+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*i+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=n,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?_:C,e.adler=2===t.wrap?0:1,t.last_flush=l,u._tr_init(t),c):R(e,f)}function K(e){var t=G(e);return t===c&&((e=e.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=o[e.level].max_lazy,e.good_match=o[e.level].good_length,e.nice_match=o[e.level].nice_length,e.max_chain_length=o[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=g-1,e.match_available=0,e.ins_h=0),t}function Y(e,t,r,n,i,s){if(!e)return f;var a=1;if(-1===t&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||9<i||r!==m||n<8||15<n||t<0||9<t||s<0||4<s)return R(e,f);8===n&&(n=9);var o=new H;return(e.state=o).strm=e,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+g-1)/g),o.window=new h.Buf8(2*o.w_size),o.head=new h.Buf16(o.hash_size),o.prev=new h.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new h.Buf8(o.pending_buf_size),o.d_buf=+o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=r,K(e)}o=[new M(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&t===l)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,N(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-v&&(N(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(N(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(N(e,!1),e.strm.avail_out),1)}),new M(4,4,8,4,Z),new M(4,5,16,8,Z),new M(4,6,32,32,Z),new M(4,4,16,16,W),new M(8,16,32,32,W),new M(8,16,128,128,W),new M(8,32,128,256,W),new M(32,128,258,1024,W),new M(32,258,258,4096,W)],t.deflateInit=function(e,t){return Y(e,t,m,15,8,0)},t.deflateInit2=Y,t.deflateReset=K,t.deflateResetKeep=G,t.deflateSetHeader=function(e,t){return!e||!e.state||2!==e.state.wrap?f:(e.state.gzhead=t,c)},t.deflate=function(e,t){var r,n,i,s;if(!e||!e.state||5<t||t<0)return e?R(e,f):f;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return R(e,0===e.avail_out?-5:f);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===_&&(2===n.wrap?(e.adler=0,U(n,31),U(n,139),U(n,8),n.gzhead?(U(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),U(n,255&n.gzhead.time),U(n,n.gzhead.time>>8&255),U(n,n.gzhead.time>>16&255),U(n,n.gzhead.time>>24&255),U(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),U(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(U(n,255&n.gzhead.extra.length),U(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=d(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(U(n,0),U(n,0),U(n,0),U(n,0),U(n,0),U(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),U(n,3),n.status=C)):(a=m+(n.w_bits-8<<4)<<8,a|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),a+=31-a%31,n.status=C,P(n,a),0!==n.strstart&&(P(n,e.adler>>>16),P(n,65535&e.adler)),e.adler=1)),69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=d(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending!==n.pending_buf_size));)U(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=d(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=d(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}}while(s=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,U(n,s),0!==s);n.gzhead.hcrc&&n.pending>i&&(e.adler=d(e.adler,n.pending_buf,n.pending-i,i)),0===s&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=d(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}}while(s=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,U(n,s),0!==s);n.gzhead.hcrc&&n.pending>i&&(e.adler=d(e.adler,n.pending_buf,n.pending-i,i)),0===s&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&F(e),n.pending+2<=n.pending_buf_size&&(U(n,255&e.adler),U(n,e.adler>>8&255),e.adler=0,n.status=C)):n.status=C),0!==n.pending){if(F(e),0===e.avail_out)return n.last_flush=-1,c}else if(0===e.avail_in&&T(t)<=T(r)&&4!==t)return R(e,-5);if(666===n.status&&0!==e.avail_in)return R(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==l&&666!==n.status){var a=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(t===l)return 1;break}if(e.match_length=0,r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(N(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(N(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,n,i,s,a=e.window;;){if(e.lookahead<=y){if(j(e),e.lookahead<=y&&t===l)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=g&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){for(s=e.strstart+y;n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s;);e.match_length=y-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=g?(r=u._tr_tally(e,1,e.match_length-g),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(N(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(N(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?1:2}(n,t):o[n.level].func(n,t);if(3!==a&&4!==a||(n.status=666),1===a||3===a)return 0===e.avail_out&&(n.last_flush=-1),c;if(2===a&&(1===t?u._tr_align(n):5!==t&&(u._tr_stored_block(n,0,0,!1),3===t)&&(D(n.head),0===n.lookahead)&&(n.strstart=0,n.block_start=0,n.insert=0),F(e),0===e.avail_out))return n.last_flush=-1,c}return 4!==t||!(n.wrap<=0)&&(2===n.wrap?(U(n,255&e.adler),U(n,e.adler>>8&255),U(n,e.adler>>16&255),U(n,e.adler>>24&255),U(n,255&e.total_in),U(n,e.total_in>>8&255),U(n,e.total_in>>16&255),U(n,e.total_in>>24&255)):(P(n,e.adler>>>16),P(n,65535&e.adler)),F(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending)?c:1},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==_&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?R(e,f):(e.state=null,t===C?R(e,-3):c):f},t.deflateSetDictionary=function(e,t){var r,n,i,s,a,o,u,l=t.length;if(!e||!e.state)return f;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==_||r.lookahead)return f;for(1===s&&(e.adler=p(e.adler,t,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new h.Buf8(r.w_size),h.arraySet(u,t,l-r.w_size,r.w_size,0),t=u,l=r.w_size),u=e.avail_in,a=e.next_in,o=e.input,e.avail_in=l,e.next_in=0,e.input=t,j(r);r.lookahead>=g;){for(n=r.strstart,i=r.lookahead-(g-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+g-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=g-1,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=g-1,r.match_available=0,e.next_in=a,e.input=o,e.avail_in=u,r.wrap=s,c},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,s,a,o,u=e.state,l=e.next_in,c=e.input,h=l+(e.avail_in-5),p=e.next_out,d=e.output,f=p-(t-e.avail_out),m=p+(e.avail_out-257),g=u.dmax,y=u.wsize,v=u.whave,_=u.wnext,C=u.window,w=u.hold,b=u.bits,E=u.lencode,x=u.distcode,D=(1<<u.lenbits)-1,S=(1<<u.distbits)-1;e:do{for(b<15&&(w+=c[l++]<<b,b+=8,w+=c[l++]<<b,b+=8),r=E[w&D];;){if(w>>>=n=r>>>24,b-=n,0==(n=r>>>16&255))d[p++]=65535&r;else{if(!(16&n)){if(0==(64&n)){r=E[(65535&r)+(w&(1<<n)-1)];continue}if(32&n){u.mode=12;break e}e.msg="invalid literal/length code",u.mode=30;break e}for(i=65535&r,(n&=15)&&(b<n&&(w+=c[l++]<<b,b+=8),i+=w&(1<<n)-1,w>>>=n,b-=n),b<15&&(w+=c[l++]<<b,b+=8,w+=c[l++]<<b,b+=8),r=x[w&S];;){if(w>>>=n=r>>>24,b-=n,!(16&(n=r>>>16&255))){if(0==(64&n)){r=x[(65535&r)+(w&(1<<n)-1)];continue}e.msg="invalid distance code",u.mode=30;break e}if(s=65535&r,b<(n&=15)&&(w+=c[l++]<<b,(b+=8)<n)&&(w+=c[l++]<<b,b+=8),g<(s+=w&(1<<n)-1)){e.msg="invalid distance too far back",u.mode=30;break e}if(w>>>=n,b-=n,(n=p-f)<s){if(v<(n=s-n)&&u.sane){e.msg="invalid distance too far back",u.mode=30;break e}if(o=C,(a=0)===_){if(a+=y-n,n<i){for(i-=n;d[p++]=C[a++],--n;);a=p-s,o=d}}else if(_<n){if(a+=y+_-n,(n-=_)<i){for(i-=n;d[p++]=C[a++],--n;);if(a=0,_<i){for(i-=n=_;d[p++]=C[a++],--n;);a=p-s,o=d}}}else if(a+=_-n,n<i){for(i-=n;d[p++]=C[a++],--n;);a=p-s,o=d}for(;2<i;)d[p++]=o[a++],d[p++]=o[a++],d[p++]=o[a++],i-=3;i&&(d[p++]=o[a++],1<i)&&(d[p++]=o[a++])}else{for(a=p-s;d[p++]=d[a++],d[p++]=d[a++],d[p++]=d[a++],2<(i-=3););i&&(d[p++]=d[a++],1<i)&&(d[p++]=d[a++])}break}}break}}while(l<h&&p<m);l-=i=b>>3,w&=(1<<(b-=i<<3))-1,e.next_in=l,e.next_out=p,e.avail_in=l<h?h-l+5:5-(l-h),e.avail_out=p<m?m-p+257:257-(p-m),u.hold=w,u.bits=b}},{}],49:[function(e,t,r){"use strict";var k=e("../utils/common"),B=e("./adler32"),I=e("./crc32"),T=e("./inffast"),P=e("./inftrees"),N=0,R=-2,M=1,n=852,i=592;function L(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new k.Buf16(320),this.work=new k.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=M,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new k.Buf32(n),t.distcode=t.distdyn=new k.Buf32(i),t.sane=1,t.back=-1,N):R}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,a(e)):R}function h(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?R:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(e))}function u(e,t){var r;return e?(r=new s,(e.state=r).window=null,(r=h(e,t))!==N&&(e.state=null),r):R}var O,U,z=!0;function Z(e,t,r,n){var i,e=e.state;return null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new k.Buf8(e.wsize)),n>=e.wsize?(k.arraySet(e.window,t,r-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(n<(i=e.wsize-e.wnext)&&(i=n),k.arraySet(e.window,t,r-n,i,e.wnext),(n-=i)?(k.arraySet(e.window,t,r-n,n,0),e.wnext=n,e.whave=e.wsize):(e.wnext+=i,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=i))),0}r.inflateReset=o,r.inflateReset2=h,r.inflateResetKeep=a,r.inflateInit=function(e){return u(e,15)},r.inflateInit2=u,r.inflate=function(e,t){var r,n,i,s,a,o,u,l,c,h,p,d,f,m,g,y,v,_,C,w,b,E,x,D,S=0,A=new k.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return R;12===(r=e.state).mode&&(r.mode=13),a=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,l=r.hold,c=r.bits,h=o,p=u,E=N;e:for(;;)switch(r.mode){case M:if(0===r.wrap)r.mode=13;else{for(;c<16;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(2&r.wrap&&35615===l)A[r.check=0]=255&l,A[1]=l>>>8&255,r.check=I(r.check,A,2,0),c=l=0,r.mode=2;else if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31)e.msg="incorrect header check",r.mode=30;else if(8!=(15&l))e.msg="unknown compression method",r.mode=30;else{if(c-=4,b=8+(15&(l>>>=4)),0===r.wbits)r.wbits=b;else if(b>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<b,e.adler=r.check=1,r.mode=512&l?10:12,c=l=0}}break;case 2:for(;c<16;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(r.flags=l,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=I(r.check,A,2,0)),c=l=0,r.mode=3;case 3:for(;c<32;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}r.head&&(r.head.time=l),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,r.check=I(r.check,A,4,0)),c=l=0,r.mode=4;case 4:for(;c<16;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=I(r.check,A,2,0)),c=l=0,r.mode=5;case 5:if(1024&r.flags){for(;c<16;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(A[0]=255&l,A[1]=l>>>8&255,r.check=I(r.check,A,2,0)),c=l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((d=o<(d=r.length)?o:d)&&(r.head&&(b=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),k.arraySet(r.head.extra,n,s,d,b)),512&r.flags&&(r.check=I(r.check,n,d,s)),o-=d,s+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break e;for(d=0;b=n[s+d++],r.head&&b&&r.length<65536&&(r.head.name+=String.fromCharCode(b)),b&&d<o;);if(512&r.flags&&(r.check=I(r.check,n,d,s)),o-=d,s+=d,b)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break e;for(d=0;b=n[s+d++],r.head&&b&&r.length<65536&&(r.head.comment+=String.fromCharCode(b)),b&&d<o;);if(512&r.flags&&(r.check=I(r.check,n,d,s)),o-=d,s+=d,b)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;c<16;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}c=l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;c<32;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}e.adler=r.check=L(l),c=l=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=l,r.bits=c,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last)l>>>=7&c,c-=7&c,r.mode=27;else{for(;c<3;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}switch(r.last=1&l,--c,3&(l>>>=1)){case 0:r.mode=14;break;case 1:if(function j(e){if(z){var t;for(O=new k.Buf32(512),U=new k.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(P(1,e.lens,0,288,O,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;P(2,e.lens,0,32,U,0,e.work,{bits:5}),z=!1}e.lencode=O,e.lenbits=9,e.distcode=U,e.distbits=5}(r),r.mode=20,6!==t)break;l>>>=2,c-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}l>>>=2,c-=2}break;case 14:for(l>>>=7&c,c-=7&c;c<32;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&l,c=l=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(d=r.length){if(0===(d=u<(d=o<d?o:d)?u:d))break e;k.arraySet(i,n,s,d,a),o-=d,s+=d,u-=d,a+=d,r.length-=d}else r.mode=12;break;case 17:for(;c<14;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(r.nlen=257+(31&l),l>>>=5,c-=5,r.ndist=1+(31&l),l>>>=5,c-=5,r.ncode=4+(15&l),l>>>=4,c-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;c<3;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}r.lens[F[r.have++]]=7&l,l>>>=3,c-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,x={bits:r.lenbits},E=P(0,r.lens,0,19,r.lencode,0,r.work,x),r.lenbits=x.bits,E){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;y=(S=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,v=65535&S,!((g=S>>>24)<=c);){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(v<16)l>>>=g,c-=g,r.lens[r.have++]=v;else{if(16===v){for(D=g+2;c<D;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(l>>>=g,c-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}b=r.lens[r.have-1],d=3+(3&l),l>>>=2,c-=2}else if(17===v){for(D=g+3;c<D;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}b=0,d=3+(7&(l>>>=g)),l>>>=3,c=c-g-3}else{for(D=g+7;c<D;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}b=0,d=11+(127&(l>>>=g)),l>>>=7,c=c-g-7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=b}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,x={bits:r.lenbits},E=P(1,r.lens,0,r.nlen,r.lencode,0,r.work,x),r.lenbits=x.bits,E){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,x={bits:r.distbits},E=P(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,x),r.distbits=x.bits,E){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=o&&258<=u){e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=l,r.bits=c,T(e,p),a=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,l=r.hold,c=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;y=(S=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,v=65535&S,!((g=S>>>24)<=c);){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(y&&0==(240&y)){for(_=g,C=y,w=v;y=(S=r.lencode[w+((l&(1<<_+C)-1)>>_)])>>>16&255,v=65535&S,!(_+(g=S>>>24)<=c);){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}l>>>=_,c-=_,r.back+=_}if(l>>>=g,c-=g,r.back+=g,r.length=v,0===y){r.mode=26;break}if(32&y){r.back=-1,r.mode=12;break}if(64&y){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&y,r.mode=22;case 22:if(r.extra){for(D=r.extra;c<D;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;y=(S=r.distcode[l&(1<<r.distbits)-1])>>>16&255,v=65535&S,!((g=S>>>24)<=c);){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(0==(240&y)){for(_=g,C=y,w=v;y=(S=r.distcode[w+((l&(1<<_+C)-1)>>_)])>>>16&255,v=65535&S,!(_+(g=S>>>24)<=c);){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}l>>>=_,c-=_,r.back+=_}if(l>>>=g,c-=g,r.back+=g,64&y){e.msg="invalid distance code",r.mode=30;break}r.offset=v,r.extra=15&y,r.mode=24;case 24:if(r.extra){for(D=r.extra;c<D;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===u)break e;if(r.offset>(d=p-u)){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}f=d>r.wnext?(d-=r.wnext,r.wsize-d):r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=i,f=a-r.offset,d=r.length;for(u-=d=u<d?u:d,r.length-=d;i[a++]=m[f++],--d;);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;i[a++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;c<32;){if(0===o)break e;o--,l|=n[s++]<<c,c+=8}if(p-=u,e.total_out+=p,r.total+=p,p&&(e.adler=r.check=(r.flags?I:B)(r.check,i,p,a-p)),p=u,(r.flags?l:L(l))!==r.check){e.msg="incorrect data check",r.mode=30;break}c=l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;c<32;){if(0===o)break e;o--,l+=n[s++]<<c,c+=8}if(l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}c=l=0}r.mode=29;case 29:E=1;break e;case 30:E=-3;break e;case 31:return-4;default:return R}return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=o,r.hold=l,r.bits=c,(r.wsize||p!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&Z(e,e.output,e.next_out,p-e.avail_out)?(r.mode=31,-4):(h-=e.avail_in,p-=e.avail_out,e.total_in+=h,e.total_out+=p,r.total+=p,r.wrap&&p&&(e.adler=r.check=(r.flags?I:B)(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),E=(0==h&&0===p||4===t)&&E===N?-5:E)},r.inflateEnd=function(e){var t;return e&&e.state?((t=e.state).window&&(t.window=null),e.state=null,N):R},r.inflateGetHeader=function(e,t){return!e||!e.state||0==(2&(e=e.state).wrap)?R:((e.head=t).done=!1,N)},r.inflateSetDictionary=function(e,t){var r,n=t.length;return!e||!e.state||0!==(r=e.state).wrap&&11!==r.mode?R:11===r.mode&&B(1,t,n,0)!==r.check?-3:Z(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,N)},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var N=e("../utils/common"),R=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],L=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],M=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],O=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,n,i,s,a,o){for(var u,l,c,h,p,d,f,m,g,y=o.bits,v=0,_=0,C=0,w=0,b=0,E=0,x=0,D=0,S=0,A=0,F=null,k=0,B=new N.Buf16(16),I=new N.Buf16(16),T=null,P=0,v=0;v<=15;v++)B[v]=0;for(_=0;_<n;_++)B[t[r+_]]++;for(b=y,w=15;1<=w&&0===B[w];w--);if(w<b&&(b=w),0===w)i[s++]=20971520,i[s++]=20971520,o.bits=1;else{for(C=1;C<w&&0===B[C];C++);for(b<C&&(b=C),v=D=1;v<=15;v++)if((D=(D<<1)-B[v])<0)return-1;if(0<D&&(0===e||1!==w))return-1;for(I[1]=0,v=1;v<15;v++)I[v+1]=I[v]+B[v];for(_=0;_<n;_++)0!==t[r+_]&&(a[I[t[r+_]]++]=_);if(d=0===e?(F=T=a,19):1===e?(F=R,k-=257,T=L,P-=257,256):(F=M,T=O,-1),v=C,p=s,x=_=A=0,c=-1,h=(S=1<<(E=b))-1,1===e&&852<S||2===e&&592<S)return 1;for(;;){for(g=a[_]<d?(m=0,a[_]):a[_]>d?(m=T[P+a[_]],F[k+a[_]]):(m=96,0),u=1<<(f=v-x),C=l=1<<E;i[p+(A>>x)+(l-=u)]=f<<24|m<<16|g|0,0!==l;);for(u=1<<v-1;A&u;)u>>=1;if(0!==u?A=(A&u-1)+u:A=0,_++,0==--B[v]){if(v===w)break;v=t[r+a[_]]}if(b<v&&(A&h)!==c){for(p+=C,D=1<<(E=v-(x=0===x?b:x));E+x<w&&!((D-=B[E+x])<=0);)E++,D<<=1;if(S+=1<<E,1===e&&852<S||2===e&&592<S)return 1;i[c=A&h]=b<<24|E<<16|p-s|0}}0!==A&&(i[p+A]=v-x<<24|64<<16|0),o.bits=b}return 0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,r,t){"use strict";var i=e("../utils/common");function n(e){for(var t=e.length;0<=--t;)e[t]=0}var s=16,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576),p=(n(h),new Array(60)),d=(n(p),new Array(512)),f=(n(d),new Array(256)),m=(n(f),new Array(29));n(m);var g,y,v,_=new Array(30);function D(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function F(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?d[e]:d[256+(e>>>7)]}function U(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function P(e,t,r){e.bi_valid>s-r?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>s-e.bi_valid,e.bi_valid+=r-s):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function L(e,t,r){P(e,r[2*t],r[2*t+1])}function j(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function Z(e,t,r){for(var n,i=new Array(16),s=0,a=1;a<=15;a++)i[a]=s=s+r[a-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=j(i[o]++,o))}}function W(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function M(e){8<e.bi_valid?U(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function G(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function K(e,t,r){var n,i,s,a,o=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0==n?L(e,i,t):(L(e,(s=f[i])+256+1,t),0!==(a=u[s])&&P(e,i-=m[s],a),L(e,s=N(--n),r),0!==(a=l[s])&&P(e,n-=_[s],a)),o<e.last_lit;);L(e,256,t)}function Y(e,t){var r,n,i,s=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==s[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=a[2*i+1]);for(t.max_code=l,r=e.heap_len>>1;1<=r;r--)G(e,s,r);for(i=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,G(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var c,h,p,d,f,m=e,g=t.dyn_tree,y=t.max_code,v=t.stat_desc.static_tree,_=t.stat_desc.has_stree,C=t.stat_desc.extra_bits,w=t.stat_desc.extra_base,b=t.stat_desc.max_length,E=0,x=0;x<=15;x++)m.bl_count[x]=0;for(g[2*m.heap[m.heap_max]+1]=0,c=m.heap_max+1;c<573;c++)b<(x=g[2*g[2*(h=m.heap[c])+1]+1]+1)&&(x=b,E++),g[2*h+1]=x,y<h||(m.bl_count[x]++,d=0,w<=h&&(d=C[h-w]),f=g[2*h],m.opt_len+=f*(x+d),_&&(m.static_len+=f*(v[2*h+1]+d)));if(0!==E){do{for(x=b-1;0===m.bl_count[x];)x--}while(m.bl_count[x]--,m.bl_count[x+1]+=2,m.bl_count[b]--,0<(E-=2));for(x=b;0!==x;x--)for(h=m.bl_count[x];0!==h;)y<(p=m.heap[--c])||(g[2*p+1]!==x&&(m.opt_len+=(x-g[2*p+1])*g[2*p],g[2*p+1]=x),h--)}Z(s,l,e.bl_count)}function X(e,t,r){var n,i,s=-1,a=t[1],o=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++o<u&&i===a||(o<l?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=i,l=(o=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4))}function V(e,t,r){var n,i,s=-1,a=t[1],o=0,u=7,l=4;for(0===a&&(u=138,l=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++o<u&&i===a)){if(o<l)for(;L(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==s&&(L(e,i,e.bl_tree),o--),L(e,16,e.bl_tree),P(e,o-3,2)):o<=10?(L(e,17,e.bl_tree),P(e,o-3,3)):(L(e,18,e.bl_tree),P(e,o-11,7));s=i,l=(o=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4)}}n(_);var C=!1;function J(e,t,r,n){P(e,0+(n?1:0),3),n=t,t=r,M(r=e),U(r,t),U(r,~t),i.arraySet(r.pending_buf,r.window,n,t,r.pending),r.pending+=t}t._tr_init=function(e){if(!C){for(var t,r,n,i,s=new Array(16),a=n=0;a<28;a++)for(m[a]=n,t=0;t<1<<u[a];t++)f[n++]=a;for(f[n-1]=a,a=i=0;a<16;a++)for(_[a]=i,t=0;t<1<<l[a];t++)d[i++]=a;for(i>>=7;a<30;a++)for(_[a]=i<<7,t=0;t<1<<l[a]-7;t++)d[256+i++]=a;for(r=0;r<=15;r++)s[r]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,s[8]++;for(;t<=255;)h[2*t+1]=9,t++,s[9]++;for(;t<=279;)h[2*t+1]=7,t++,s[7]++;for(;t<=287;)h[2*t+1]=8,t++,s[8]++;for(Z(h,287,s),t=0;t<30;t++)p[2*t+1]=5,p[2*t]=j(t,5);g=new D(h,u,257,286,15),y=new D(p,l,0,30,15),v=new D(new Array(0),o,0,19,7),C=!0}e.l_desc=new F(e.dyn_ltree,g),e.d_desc=new F(e.dyn_dtree,y),e.bl_desc=new F(e.bl_tree,v),e.bi_buf=0,e.bi_valid=0,W(e)},t._tr_stored_block=J,t._tr_flush_block=function(e,t,r,n){var i,s,a,o=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(r=32;r<256;r++)if(0!==e.dyn_ltree[2*r])return 1;return 0}(e)),Y(e,e.l_desc),Y(e,e.d_desc),o=function(e){var t;for(X(e,e.dyn_ltree,e.l_desc.max_code),X(e,e.dyn_dtree,e.d_desc.max_code),Y(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t)J(e,t,r,n);else if(4===e.strategy||s===i)P(e,2+(n?1:0),3),K(e,h,p);else{P(e,4+(n?1:0),3);var u=e,l=(t=e.l_desc.max_code+1,r=e.d_desc.max_code+1,o+1);for(P(u,t-257,5),P(u,r-1,5),P(u,l-4,4),a=0;a<l;a++)P(u,u.bl_tree[2*c[a]+1],3);V(u,u.dyn_ltree,t-1),V(u,u.dyn_dtree,r-1),K(e,e.dyn_ltree,e.dyn_dtree)}W(e),n&&M(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(f[r]+256+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){P(e,2,3),L(e,256,h),16===(e=e).bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){!function(e){!function(r,i){"use strict";var n,t,s,a,o,u,l,e,h;function f(e){delete o[e]}function c(e){if(u)setTimeout(c,0,e);else{var t=o[e];if(t){u=!0;try{var r=t.callback,n=t.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(i,n)}}finally{f(e),u=!1}}}}function d(e){e.source===r&&"string"==typeof e.data&&0===e.data.indexOf(s)&&c(+e.data.slice(s.length))}r.setImmediate||(a=1,u=!(o={}),l=r.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(r))&&e.setTimeout?e:r,h="[object process]"==={}.toString.call(r.process)?function(e){p.nextTick(function(){c(e)})}:function(){var e,t;if(r.postMessage&&!r.importScripts)return e=!0,t=r.onmessage,r.onmessage=function(){e=!1},r.postMessage("","*"),r.onmessage=t,e}()?(s="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",d,!1):r.attachEvent("onmessage",d),function(e){r.postMessage(s+e,"*")}):r.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){c(e.data)},function(e){t.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){c(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(c,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];return o[a]={callback:e,args:t},h(a),a++},e.clearImmediate=f)}("undefined"==typeof self?void 0===e?this:e:self)}.call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)})}.call(this)}.call(this,g("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},g("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],g("timers").setImmediate)},{_process:119,buffer:110,timers:120}],118:[function(l,t,r){!function(n){!function(){!function(e){"object"==typeof r&&void 0!==t?t.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).localforage=e()}(function(){return function e(i,a,o){function s(r,t){if(!a[r]){if(!i[r]){var n="function"==typeof l&&l;if(!t&&n)return n(r,!0);if(u)return u(r,!0);t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}n=a[r]={exports:{}};i[r][0].call(n.exports,function(e){var t=i[r][1][e];return s(t||e)},n,n.exports,e,i,a,o)}return a[r].exports}for(var u="function"==typeof l&&l,t=0;t<o.length;t++)s(o[t]);return s}({1:[function(e,u,t){!function(t){"use strict";var e,r,n,i,s=t.MutationObserver||t.WebKitMutationObserver,a=s?(e=0,s=new s(nextTick),r=t.document.createTextNode(""),s.observe(r,{characterData:!0}),function(){r.data=e=++e%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){nextTick(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(nextTick,0)}:((n=new t.MessageChannel).port1.onmessage=nextTick,function(){n.port2.postMessage(0)}),o=[];function nextTick(){i=!0;for(var e,t,r=o.length;r;){for(t=o,o=[],e=-1;++e<r;)t[e]();r=o.length}i=!1}u.exports=function immediate(e){1!==o.push(e)||i||a()}}.call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var i=e(1);function INTERNAL(){}var u={},s=["REJECTED"],a=["FULFILLED"],n=["PENDING"];function Promise(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=n,this.queue=[],this.outcome=void 0,e!==INTERNAL&&safelyResolveThenable(this,e)}function QueueItem(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function unwrap(t,r,n){i(function(){var e;try{e=r(n)}catch(e){return u.reject(t,e)}e===t?u.reject(t,new TypeError("Cannot resolve promise with itself")):u.resolve(t,e)})}function getThen(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function appyThen(){t.apply(e,arguments)}}function safelyResolveThenable(t,e){var r=!1;function onError(e){r||(r=!0,u.reject(t,e))}function onSuccess(e){r||(r=!0,u.resolve(t,e))}var n=tryCatch(function tryToUnwrap(){e(onSuccess,onError)});"error"===n.status&&onError(n.value)}function tryCatch(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=Promise).prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){var r;return"function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s?this:(r=new this.constructor(INTERNAL),this.state!==n?unwrap(r,this.state===a?e:t,this.outcome):this.queue.push(new QueueItem(r,e,t)),r)},QueueItem.prototype.callFulfilled=function(e){u.resolve(this.promise,e)},QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)},QueueItem.prototype.callRejected=function(e){u.reject(this.promise,e)},QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)},u.resolve=function(e,t){var r=tryCatch(getThen,t);if("error"===r.status)return u.reject(e,r.value);r=r.value;if(r)safelyResolveThenable(e,r);else{e.state=a,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callFulfilled(t)}return e},u.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},Promise.resolve=function resolve(e){if(e instanceof this)return e;return u.resolve(new this(INTERNAL),e)},Promise.reject=function reject(e){var t=new this(INTERNAL);return u.reject(t,e)},Promise.all=function all(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);var s=new Array(n),a=0,t=-1,o=new this(INTERNAL);for(;++t<n;)!function allResolver(e,t){r.resolve(e).then(function resolveFromAll(e){s[t]=e,++a!==n||i||(i=!0,u.resolve(o,s))},function(e){i||(i=!0,u.reject(o,e))})}(e[t],t);return o},Promise.race=function race(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var i=-1,s=new this(INTERNAL);for(;++i<r;)!function resolver(e){t.resolve(e).then(function(e){n||(n=!0,u.resolve(s,e))},function(e){n||(n=!0,u.reject(s,e))})}(e[i]);return s}},{1:1}],3:[function(t,e,r){!function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}.call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,y,v){"use strict";var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function getIDB(){try{return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}catch(e){}}();function createBlob(t,r){t=t||[],r=r||{};try{return new Blob(t,r)}catch(e){if("TypeError"!==e.name)throw e;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(r.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function executeCallback(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function executeTwoCallbacks(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function normalizeKey(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function getCallback(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var a="local-forage-detect-blob-support",t=void 0,l={},C=Object.prototype.toString,r="readonly",h="readwrite";function _checkBlobSupport(e){return"boolean"==typeof t?c.resolve(t):function _checkBlobSupportWithoutCaching(n){return new c(function(r){var e=n.transaction(a,h),t=createBlob([""]);e.objectStore(a).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),r(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);r(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})}(e).then(function(e){return t=e})}function _deferReadiness(e){var e=l[e.name],r={};r.promise=new c(function(e,t){r.resolve=e,r.reject=t}),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then(function(){return r.promise}):e.dbReady=r.promise}function _advanceReadiness(e){e=l[e.name].deferredOperations.pop();e&&(e.resolve(),e.promise)}function _rejectReadiness(e,t){e=l[e.name].deferredOperations.pop();if(e)return e.reject(t),e.promise}function _getConnection(i,s){return new c(function(t,r){if(l[i.name]=l[i.name]||createDbContext(),i.db){if(!s)return t(i.db);_deferReadiness(i),i.db.close()}var e=[i.name],n=(s&&e.push(i.version),o.open.apply(o,e));s&&(n.onupgradeneeded=function(t){var e=n.result;try{e.createObjectStore(i.storeName),t.oldVersion<=1&&e.createObjectStore(a)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+i.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+i.storeName+'" already exists.')}}),n.onerror=function(e){e.preventDefault(),r(n.error)},n.onsuccess=function(){var e=n.result;e.onversionchange=function(e){e.target.close()},t(e),_advanceReadiness(i)}})}function _getOriginalConnection(e){return _getConnection(e,!1)}function _getUpgradedConnection(e){return _getConnection(e,!0)}function _isUpgradeNeeded(e,t){var r,n,i;return!e.db||(r=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,n=e.version>e.db.version,i&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(n||r)&&(r&&(i=e.db.version+1)>e.version&&(e.version=i),1))}function _decodeBlob(e){return createBlob([function _binStringToArrayBuffer(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}(atob(e.data))],{type:e.type})}function _isEncodedBlob(e){return e&&e.__local_forage_encoded_blob}function _fullyReady(e){var t=this,r=t._initReady().then(function(){var e=l[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return executeTwoCallbacks(r,e,e),r}function createTransaction(t,r,n,i){void 0===i&&(i=1);try{var e=t.db.transaction(t.storeName,r);n(null,e)}catch(e){if(0<i&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return c.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),_getUpgradedConnection(t)}).then(function(){return function _tryReconnect(r){_deferReadiness(r);for(var n=l[r.name],i=n.forages,e=0;e<i.length;e++){var t=i[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return r.db=null,_getOriginalConnection(r).then(function(e){return r.db=e,_isUpgradeNeeded(r)?_getUpgradedConnection(r):e}).then(function(e){r.db=n.db=e;for(var t=0;t<i.length;t++)i[t]._dbInfo.db=e}).catch(function(e){throw _rejectReadiness(r,e),e})}(t).then(function(){createTransaction(t,r,n,i-1)})}).catch(n);n(e)}}function createDbContext(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}e={_driver:"asyncStorage",_initStorage:function _initStorage(e){var n=this,i={db:null};if(e)for(var t in e)i[t]=e[t];var s=l[i.name],r=(s||(s=createDbContext(),l[i.name]=s),s.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=_fullyReady),[]);function ignoreErrors(){return c.resolve()}for(var a=0;a<s.forages.length;a++){var o=s.forages[a];o!==n&&r.push(o._initReady().catch(ignoreErrors))}var u=s.forages.slice(0);return c.all(r).then(function(){return i.db=s.db,_getOriginalConnection(i)}).then(function(e){return i.db=e,_isUpgradeNeeded(i,n._defaultConfig.version)?_getUpgradedConnection(i):e}).then(function(e){i.db=s.db=e,n._dbInfo=i;for(var t=0;t<u.length;t++){var r=u[t];r!==n&&(r._dbInfo.db=i.db,r._dbInfo.version=i.version)}})},_support:function isIndexedDBValid(){try{var e,t;return o&&o.open?(e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code"),(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange):!1}catch(e){return!1}}(),iterate:function iterate(a,e){var o=this,t=new c(function(i,s){o.ready().then(function(){createTransaction(o._dbInfo,r,function(e,t){if(e)return s(e);try{var r=t.objectStore(o._dbInfo.storeName).openCursor(),n=1;r.onsuccess=function(){var e,t=r.result;t?(_isEncodedBlob(e=t.value)&&(e=_decodeBlob(e)),void 0!==(e=a(e,t.key,n++))?i(e):t.continue()):i()},r.onerror=function(){s(r.error)}}catch(e){s(e)}})}).catch(s)});return executeCallback(t,e),t},getItem:function getItem(s,e){var a=this,t=(s=normalizeKey(s),new c(function(n,i){a.ready().then(function(){createTransaction(a._dbInfo,r,function(e,t){if(e)return i(e);try{var r=t.objectStore(a._dbInfo.storeName).get(s);r.onsuccess=function(){var e=r.result;_isEncodedBlob(e=void 0===e?null:e)&&(e=_decodeBlob(e)),n(e)},r.onerror=function(){i(r.error)}}catch(e){i(e)}})}).catch(i)}));return executeCallback(t,e),t},setItem:function setItem(o,t,e){var u=this,r=(o=normalizeKey(o),new c(function(s,a){var e;u.ready().then(function(){return e=u._dbInfo,"[object Blob]"===C.call(t)?_checkBlobSupport(e.db).then(function(e){return e?t:function _encodeBlob(n){return new c(function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){e=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:e,type:n.type})},r.readAsBinaryString(n)})}(t)}):t}).then(function(i){createTransaction(u._dbInfo,h,function(e,t){if(e)return a(e);try{var r=t.objectStore(u._dbInfo.storeName),n=(null===i&&(i=void 0),r.put(i,o));t.oncomplete=function(){s(i=void 0===i?null:i)},t.onabort=t.onerror=function(){var e=n.error||n.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)}));return executeCallback(r,e),r},removeItem:function removeItem(s,e){var a=this,t=(s=normalizeKey(s),new c(function(n,i){a.ready().then(function(){createTransaction(a._dbInfo,h,function(e,t){if(e)return i(e);try{var r=t.objectStore(a._dbInfo.storeName).delete(s);t.oncomplete=function(){n()},t.onerror=function(){i(r.error)},t.onabort=function(){var e=r.error||r.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)}));return executeCallback(t,e),t},clear:function clear(e){var s=this,t=new c(function(n,i){s.ready().then(function(){createTransaction(s._dbInfo,h,function(e,t){if(e)return i(e);try{var r=t.objectStore(s._dbInfo.storeName).clear();t.oncomplete=function(){n()},t.onabort=t.onerror=function(){var e=r.error||r.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return executeCallback(t,e),t},length:function length(e){var s=this,t=new c(function(n,i){s.ready().then(function(){createTransaction(s._dbInfo,r,function(e,t){if(e)return i(e);try{var r=t.objectStore(s._dbInfo.storeName).count();r.onsuccess=function(){n(r.result)},r.onerror=function(){i(r.error)}}catch(e){i(e)}})}).catch(i)});return executeCallback(t,e),t},key:function key(o,e){var u=this,t=new c(function(s,a){o<0?s(null):u.ready().then(function(){createTransaction(u._dbInfo,r,function(e,t){if(e)return a(e);try{var r=t.objectStore(u._dbInfo.storeName),n=!1,i=r.openKeyCursor();i.onsuccess=function(){var e=i.result;e?0===o||n?s(e.key):(n=!0,e.advance(o)):s(null)},i.onerror=function(){a(i.error)}}catch(e){a(e)}})}).catch(a)});return executeCallback(t,e),t},keys:function keys(e){var a=this,t=new c(function(i,s){a.ready().then(function(){createTransaction(a._dbInfo,r,function(e,t){if(e)return s(e);try{var r=t.objectStore(a._dbInfo.storeName).openKeyCursor(),n=[];r.onsuccess=function(){var e=r.result;e?(n.push(e.key),e.continue()):i(n)},r.onerror=function(){s(r.error)}}catch(e){s(e)}})}).catch(s)});return executeCallback(t,e),t},dropInstance:function dropInstance(a,e){e=getCallback.apply(this,arguments);var t=this.config();return(a="function"!=typeof a&&a||{}).name||(a.name=a.name||t.name,a.storeName=a.storeName||t.storeName),executeCallback(t=a.name?(t=a.name===t.name&&this._dbInfo.db?c.resolve(this._dbInfo.db):_getOriginalConnection(a).then(function(e){var t=l[a.name],r=t.forages;t.db=e;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=e;return e}),a.storeName?t.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var i=e.version+1,n=(_deferReadiness(a),l[a.name]),s=n.forages;e.close();for(var t=0;t<s.length;t++){var r=s[t];r._dbInfo.db=null,r._dbInfo.version=i}return new c(function(t,r){var n=o.open(a.name,i);n.onerror=function(e){n.result.close(),r(e)},n.onupgradeneeded=function(){n.result.deleteObjectStore(a.storeName)},n.onsuccess=function(){var e=n.result;e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<s.length;t++){var r=s[t];r._dbInfo.db=e,_advanceReadiness(r._dbInfo)}}).catch(function(e){throw(_rejectReadiness(a,e)||c.resolve()).catch(function(){}),e})}}):t.then(function(e){_deferReadiness(a);var r=l[a.name],n=r.forages;e.close();for(var t=0;t<n.length;t++)n[t]._dbInfo.db=null;return new c(function(t,r){var n=o.deleteDatabase(a.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<n.length;t++)_advanceReadiness(n[t]._dbInfo)}).catch(function(e){throw(_rejectReadiness(a,e)||c.resolve()).catch(function(){}),e})})):c.reject("Invalid arguments"),e),t}};var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=/^~~local_forage_type~([^~]+)~/,s="__lfsc__:",u=s.length,b=u+"arbf".length,E=Object.prototype.toString;function stringToBuffer(e){for(var t,r,n,i,s=.75*e.length,a=e.length,o=0,s=("="===e[e.length-1]&&(s--,"="===e[e.length-2])&&s--,new ArrayBuffer(s)),u=new Uint8Array(s),l=0;l<a;l+=4)t=p.indexOf(e[l]),r=p.indexOf(e[l+1]),n=p.indexOf(e[l+2]),i=p.indexOf(e[l+3]),u[o++]=t<<2|r>>4,u[o++]=(15&r)<<4|n>>2,u[o++]=(3&n)<<6|63&i;return s}function bufferToString(e){for(var t=new Uint8Array(e),r="",n=0;n<t.length;n+=3)r=(r=(r=(r+=p[t[n]>>2])+p[(3&t[n])<<4|t[n+1]>>4])+p[(15&t[n+1])<<2|t[n+2]>>6])+p[63&t[n+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var d={serialize:function serialize(t,r){var e="";if(t&&(e=E.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===E.call(t.buffer))){var n,i=s;t instanceof ArrayBuffer?(n=t,i+="arbf"):(n=t.buffer,"[object Int8Array]"===e?i+="si08":"[object Uint8Array]"===e?i+="ui08":"[object Uint8ClampedArray]"===e?i+="uic8":"[object Int16Array]"===e?i+="si16":"[object Uint16Array]"===e?i+="ur16":"[object Int32Array]"===e?i+="si32":"[object Uint32Array]"===e?i+="ui32":"[object Float32Array]"===e?i+="fl32":"[object Float64Array]"===e?i+="fl64":r(new Error("Failed to get type for BinaryArray"))),r(i+bufferToString(n))}else if("[object Blob]"===e){i=new FileReader;i.onload=function(){var e="~~local_forage_type~"+t.type+"~"+bufferToString(this.result);r(s+"blob"+e)},i.readAsArrayBuffer(t)}else try{r(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),r(null,e)}},deserialize:function deserialize(e){if(e.substring(0,u)!==s)return JSON.parse(e);var t,r=e.substring(b),n=e.substring(u,b),i=("blob"===n&&w.test(r)&&(t=(e=r.match(w))[1],r=r.substring(e[0].length)),stringToBuffer(r));switch(n){case"arbf":return i;case"blob":return createBlob([i],{type:t});case"si08":return new Int8Array(i);case"ui08":return new Uint8Array(i);case"uic8":return new Uint8ClampedArray(i);case"si16":return new Int16Array(i);case"ur16":return new Uint16Array(i);case"si32":return new Int32Array(i);case"ui32":return new Uint32Array(i);case"fl32":return new Float32Array(i);case"fl64":return new Float64Array(i);default:throw new Error("Unkown type: "+n)}},stringToBuffer:stringToBuffer,bufferToString:bufferToString};function createDbTable(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function tryExecuteSql(e,n,i,s,a,o){e.executeSql(i,s,a,function(e,r){r.code===r.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(e,t){t.rows.length?o(e,r):createDbTable(e,n,function(){e.executeSql(i,s,a,o)},o)},o):o(e,r)},o)}function _setItem(a,e,o,u){var l=this,t=(a=normalizeKey(a),new c(function(i,s){l.ready().then(function(){var r=e=void 0===e?null:e,n=l._dbInfo;n.serializer.serialize(e,function(t,e){e?s(e):n.db.transaction(function(e){tryExecuteSql(e,n,"INSERT OR REPLACE INTO "+n.storeName+" (key, value) VALUES (?, ?)",[a,t],function(){i(r)},function(e,t){s(t)})},function(e){e.code===e.QUOTA_ERR&&(0<u?i(_setItem.apply(l,[a,r,o,u-1])):s(e))})})}).catch(s)}));return executeCallback(t,o),t}var n={_driver:"webSQLStorage",_initStorage:function _initStorage$1(e){var n=this,i={db:null};if(e)for(var t in e)i[t]="string"!=typeof e[t]?e[t].toString():e[t];var r=new c(function(t,r){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(e){return r(e)}i.db.transaction(function(e){createDbTable(e,i,function(){n._dbInfo=i,t()},function(e,t){r(t)})},r)});return i.serializer=d,r},_support:function isWebSQLValid(){return"function"==typeof openDatabase}(),iterate:function iterate$1(l,e){var t=this,r=new c(function(u,r){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(e){tryExecuteSql(e,o,"SELECT * FROM "+o.storeName,[],function(e,t){for(var r=t.rows,n=r.length,i=0;i<n;i++){var s=r.item(i),a=(a=s.value)&&o.serializer.deserialize(a);if(void 0!==(a=l(a,s.key,i+1)))return void u(a)}u()},function(e,t){r(t)})})}).catch(r)});return executeCallback(r,e),r},getItem:function getItem$1(t,e){var s=this,r=(t=normalizeKey(t),new c(function(n,i){s.ready().then(function(){var r=s._dbInfo;r.db.transaction(function(e){tryExecuteSql(e,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){t=(t=t.rows.length?t.rows.item(0).value:null)&&r.serializer.deserialize(t);n(t)},function(e,t){i(t)})})}).catch(i)}));return executeCallback(r,e),r},setItem:function setItem$1(e,t,r){return _setItem.apply(this,[e,t,r,1])},removeItem:function removeItem$1(i,e){var s=this,t=(i=normalizeKey(i),new c(function(r,n){s.ready().then(function(){var t=s._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[i],function(){r()},function(e,t){n(t)})})}).catch(n)}));return executeCallback(t,e),t},clear:function clear$1(e){var i=this,t=new c(function(r,n){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"DELETE FROM "+t.storeName,[],function(){r()},function(e,t){n(t)})})}).catch(n)});return executeCallback(t,e),t},length:function length$1(e){var i=this,t=new c(function(r,n){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){t=t.rows.item(0).c;r(t)},function(e,t){n(t)})})}).catch(n)});return executeCallback(t,e),t},key:function key$1(i,e){var s=this,t=new c(function(r,n){s.ready().then(function(){var t=s._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[i+1],function(e,t){t=t.rows.length?t.rows.item(0).key:null;r(t)},function(e,t){n(t)})})}).catch(n)});return executeCallback(t,e),t},keys:function keys$1(e){var n=this,t=new c(function(i,r){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).key);i(r)},function(e,t){r(t)})})}).catch(r)});return executeCallback(t,e),t},dropInstance:function dropInstance$1(r,e){e=getCallback.apply(this,arguments);var n=this.config(),i=((r="function"!=typeof r&&r||{}).name||(r.name=r.name||n.name,r.storeName=r.storeName||n.storeName),this),t=r.name?new c(function(e){var t=r.name===n.name?i._dbInfo.db:openDatabase(r.name,"","",0);r.storeName?e({db:t,storeNames:[r.storeName]}):e(function getAllStoreNames(s){return new c(function(i,r){s.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).name);i({db:s,storeNames:r})},function(e,t){r(t)})},function(e){r(e)})})}(t))}).then(function(a){return new c(function(i,s){a.db.transaction(function(n){for(var e=[],t=0,r=a.storeNames.length;t<r;t++)e.push(function dropTable(t){return new c(function(e,r){n.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){r(t)})})}(a.storeNames[t]));c.all(e).then(function(){i()}).catch(function(e){s(e)})},function(e){s(e)})})}):c.reject("Invalid arguments");return executeCallback(t,e),t}};function _getKeyPrefix(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function _isLocalStorageUsable(){return!function checkIfLocalStorageThrows(){var e="_localforage_support_test";try{localStorage.setItem(e,!0),localStorage.removeItem(e)}catch(e){return 1}}()||0<localStorage.length}var x={_driver:"localStorageWrapper",_initStorage:function _initStorage$2(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=_getKeyPrefix(e,this._defaultConfig),_isLocalStorageUsable()?((this._dbInfo=t).serializer=d,c.resolve()):c.reject()},_support:function isLocalStorageValid(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function iterate$2(u,e){var l=this,t=l.ready().then(function(){for(var e=l._dbInfo,t=e.keyPrefix,r=t.length,n=localStorage.length,i=1,s=0;s<n;s++){var a=localStorage.key(s);if(0===a.indexOf(t)){var o=(o=localStorage.getItem(a))&&e.serializer.deserialize(o);if(void 0!==(o=u(o,a.substring(r),i++)))return o}}});return executeCallback(t,e),t},getItem:function getItem$2(r,e){var n=this,t=(r=normalizeKey(r),n.ready().then(function(){var e=n._dbInfo,t=localStorage.getItem(e.keyPrefix+r);return t=t&&e.serializer.deserialize(t)}));return executeCallback(t,e),t},setItem:function setItem$2(a,e,t){var o=this,r=(a=normalizeKey(a),o.ready().then(function(){var s=e=void 0===e?null:e;return new c(function(r,n){var i=o._dbInfo;i.serializer.serialize(e,function(e,t){if(t)n(t);else try{localStorage.setItem(i.keyPrefix+a,e),r(s)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||n(e),n(e)}})})}));return executeCallback(r,t),r},removeItem:function removeItem$2(t,e){var r=this,n=(t=normalizeKey(t),r.ready().then(function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return executeCallback(n,e),n},clear:function clear$2(e){var n=this,t=n.ready().then(function(){for(var e=n._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}});return executeCallback(t,e),t},length:function length$2(e){var t=this.keys().then(function(e){return e.length});return executeCallback(t,e),t},key:function key$2(r,e){var n=this,t=n.ready().then(function(){var t,e=n._dbInfo;try{t=localStorage.key(r)}catch(e){t=null}return t=t&&t.substring(e.keyPrefix.length)});return executeCallback(t,e),t},keys:function keys$2(e){var s=this,t=s.ready().then(function(){for(var e=s._dbInfo,t=localStorage.length,r=[],n=0;n<t;n++){var i=localStorage.key(n);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r});return executeCallback(t,e),t},dropInstance:function dropInstance$2(t,e){e=getCallback.apply(this,arguments),(t="function"!=typeof t&&t||{}).name||(n=this.config(),t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r=this,n=t.name?new c(function(e){t.storeName?e(_getKeyPrefix(t,r._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}):c.reject("Invalid arguments");return executeCallback(n,e),n}},D=function sameValue(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},S=function includes(e,t){for(var r=e.length,n=0;n<r;){if(D(e[n],t))return!0;n++}return!1},A=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},f={},F={},i={INDEXEDDB:e,WEBSQL:n,LOCALSTORAGE:x},e=[i.INDEXEDDB._driver,i.WEBSQL._driver,i.LOCALSTORAGE._driver],m=["dropInstance"],g=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(m),k={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function extend(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)r.hasOwnProperty(n)&&(A(r[n])?e[n]=r[n].slice():e[n]=r[n])}return e}function LocalForage(e){for(var t in!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LocalForage),i){var r,n;i.hasOwnProperty(t)&&(n=(r=i[t])._driver,this[t]=n,f[n]||this.defineDriver(r))}this._defaultConfig=extend({},k),this._config=extend({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}LocalForage.prototype.config=function config(e){if("object"!==(void 0===e?"undefined":_(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},LocalForage.prototype.defineDriver=function defineDriver(l,e,t){var r=new c(function(t,r){try{var n=l._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(l._driver){for(var i=g.concat("_initStorage"),s=0,a=i.length;s<a;s++){var o=i[s];if((!S(m,o)||l[o])&&"function"!=typeof l[o])return void r(e)}(function configureMissingMethods(){for(var e=function methodNotImplementedFactory(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),e=c.reject(e);return executeCallback(e,arguments[arguments.length-1]),e}},t=0,r=m.length;t<r;t++){var n=m[t];l[n]||(l[n]=e(n))}})();var u=function setDriverSupport(e){f[n]&&console.info("Redefining LocalForage driver: "+n),f[n]=l,F[n]=e,t()};"_support"in l?l._support&&"function"==typeof l._support?l._support().then(u,r):u(!!l._support):u(!0)}else r(e)}catch(e){r(e)}});return executeTwoCallbacks(r,e,t),r},LocalForage.prototype.driver=function driver(){return this._driver||null},LocalForage.prototype.getDriver=function getDriver(e,t,r){e=f[e]?c.resolve(f[e]):c.reject(new Error("Driver not found."));return executeTwoCallbacks(e,t,r),e},LocalForage.prototype.getSerializer=function getSerializer(e){var t=c.resolve(d);return executeTwoCallbacks(t,e),t},LocalForage.prototype.ready=function ready(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return executeTwoCallbacks(r,e,e),r},LocalForage.prototype.setDriver=function setDriver(e,t,r){var i=this,n=(A(e)||(e=[e]),this._getSupportedDrivers(e));function setDriverToConfig(){i._config.driver=i.driver()}function extendSelfWithDriver(e){return i._extend(e),setDriverToConfig(),i._ready=i._initStorage(i._config),i._ready}function initDriver(n){return function(){var r=0;return function driverPromiseLoop(){for(;r<n.length;){var e=n[r];return r++,i._dbInfo=null,i._ready=null,i.getDriver(e).then(extendSelfWithDriver).catch(driverPromiseLoop)}setDriverToConfig();var t=new Error("No available storage method found.");return i._driverSet=c.reject(t),i._driverSet}()}}e=null!==this._driverSet?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=e.then(function(){var e=n[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,setDriverToConfig(),i._wrapLibraryMethodsWithReady(),i._initDriver=initDriver(n)})}).catch(function(){setDriverToConfig();var e=new Error("No available storage method found.");return i._driverSet=c.reject(e),i._driverSet}),executeTwoCallbacks(this._driverSet,t,r),this._driverSet},LocalForage.prototype.supports=function supports(e){return!!F[e]},LocalForage.prototype._extend=function _extend(e){extend(this,e)},LocalForage.prototype._getSupportedDrivers=function _getSupportedDrivers(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},LocalForage.prototype._wrapLibraryMethodsWithReady=function _wrapLibraryMethodsWithReady(){for(var e=0,t=g.length;e<t;e++)!function callWhenReady(t,r){t[r]=function(){var e=arguments;return t.ready().then(function(){return t[r].apply(t,e)})}}(this,g[e])},LocalForage.prototype.createInstance=function createInstance(e){return new LocalForage(e)};n=new LocalForage;y.exports=n},{3:3}]},{},[4])(4)})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],119:[function(e,t,r){var n,i,t=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){i=defaultClearTimeout}function runTimeout(t){if(n===setTimeout)return setTimeout(t,0);if((n===defaultSetTimout||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var s,a=[],o=!1,u=-1;function cleanUpNextTick(){o&&s&&(o=!1,s.length?a=s.concat(a):u=-1,a.length)&&drainQueue()}function drainQueue(){if(!o){for(var e=runTimeout(cleanUpNextTick),t=(o=!0,a.length);t;){for(s=a,a=[];++u<t;)s&&s[u].run();u=-1,t=a.length}s=null,o=!1,!function runClearTimeout(t){if(i===clearTimeout)return clearTimeout(t);if((i===defaultClearTimeout||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||o||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=noop,t.addListener=noop,t.once=noop,t.off=noop,t.removeListener=noop,t.removeAllListeners=noop,t.emit=noop,t.prependListener=noop,t.prependOnceListener=noop,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],120:[function(o,e,u){!function(t,r){!function(){var n=o("process/browser.js").nextTick,e=Function.prototype.apply,i=Array.prototype.slice,s={},a=0;function Timeout(e,t){this._id=e,this._clearFn=t}u.setTimeout=function(){return new Timeout(e.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new Timeout(e.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},u.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},u._unrefActive=u.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function onTimeout(){e._onTimeout&&e._onTimeout()},t))},u.setImmediate="function"==typeof t?t:function(e){var t=a++,r=!(arguments.length<2)&&i.call(arguments,1);return s[t]=!0,n(function onNextTick(){s[t]&&(r?e.apply(null,r):e.call(null),u.clearImmediate(t))}),t},u.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}.call(this)}.call(this,o("timers").setImmediate,o("timers").clearImmediate)},{"process/browser.js":119,timers:120}],121:[function(e,t,r){let c=1;class Node{constructor(e=c++){this.id=e}}class Directory extends Node{constructor(){super(),this.children={}}addChild(e){this.children[e.name]=e}unlink(e){this.children[e.name]==e&&delete this.children[e.name]}lookup(e){return this.children[e]}unserialize(t,e){e.forEach(e=>{e=t[e];this.children[e.name]=e})}serialize(e){var t,r=[];for(t in this.children){var n=this.children[t];r.push(n.id),n.serialize(e)}e[this.id]={Directory:[r]}}}class File extends Node{constructor(e=null){super(),this.data=e}serialize(e){e[this.id]={File:[this.data]}}}class Entry extends Node{constructor(e,t){super(),this.name=e,this.node=t}is(e){return this.node instanceof e}isFile(){return this.is(File)}isDirectory(){return this.is(Directory)}get extension(){return(this.name.match(/\.([^./]+)$/i)?.[1]||"").toLowerCase()}unserialize(e,t,r){this.name=t,this.node=e[r],this.node||(this.node=new Directory,this.node.id=r)}serialize(e){this.node.serialize(e),e[this.id]={Entry:[this.name,this.node.id]}}}t.exports.PNGFS=class PNGFS{#jsonCache;onDirty;constructor(e){this.root=new Entry("",new Directory),this.root.id="root",this.path=[this.root],this.version=1,e&&e.pngfs<=this.version&&this.loadJSON(e)}dirty(){this.#jsonCache=null,this.onDirty?.()}loadJSON(e){var t,r,n,i,s={Entry:Entry,File:File,Directory:Directory},a={},o={};for(t in e)"pngfs"!=t&&(i=e[t],n=s[r=Object.keys(i)[0]],o[t]=i[r],a[(i=new n(...o[t])).id=t]=i,c<=t)&&(c=t+1);for(const l in a){var u=a[l];u.unserialize&&u.unserialize(a,...o[l])}this.root=a.root,this.path=[this.root]}toJSON(){var e;return this.#jsonCache||(e={pngfs:this.version},this.root.serialize(e),this.#jsonCache=e)}ls(e=""){var t=[...this.path],r=e.split("/");if(e&&r.length)for(""==r[0]&&(t.length=1,r.shift());r.length;){var n=r.shift();if("."!=n&&""!=n)if(".."==n){if(1==t.length)return!1;t.pop()}else{const i=t[t.length-1];n=i.node.lookup(n);if(!n||!n.is(Directory))return!1;t.push(n)}}const i=t[t.length-1];return Object.values(i.node.children)}cd(e){var t=e.split("/");if(t.length)for(""==t[0]&&(this.path.length=1,t.shift());t.length;){var r=t.shift();if("."!=r&&""!=r)if(".."==r){if(1==this.path.length)return!1;this.path.pop()}else{r=this.path[this.path.length-1].node.lookup(r);if(!r||!r.is(Directory))return!1;this.path.push(r)}}return!0}mkdir(e){var t=[...this.path],r=e.split("/");if(r.length)for(""==r[0]&&(t.length=1,r.shift());r.length;){var n=r.shift();if("."!=n&&""!=n)if(".."==n){if(1==t.length)return!1;t.pop()}else{var i=t[t.length-1],s=i.node.lookup(n);if(s){if(!s.is(Directory))return!1;t.push(s)}else{s=new Entry(n,new Directory);i.node.addChild(s),t.push(s),this.dirty()}}}return!0}link(e,t){var r=[...this.path],n=e.split("/");if(n.length)for(""==n[0]&&(r.length=1,n.shift());n.length;){var i=n.shift();if("."!=i&&""!=i)if(".."==i){if(1==r.length)return!1;r.pop()}else{var s=r[r.length-1];if(!n.length)return this.dirty(),s.node.addChild(new Entry(i,t));s=s.node.lookup(i);if(!s||!s.is(Directory))return!1;r.push(s)}}return!0}writeFile(e,t){var r=this.lookup(e)["child"];return r?!!r.is(File)&&(r.node.data=t,this.dirty(),!0):(this.link(e,new File(t)),!0)}readFile(e){var t=this.lookup(e)["child"];if(!t)throw`Could not read inexistant file ${e}.`;if(t.is(File))return t.node.data;throw`Could not read ${t.constructor.name} ${e} as file.`}rm(e){var{parent:e,child:t}=this.lookup(e);return!(!e||!t||(this.dirty(),e.node.unlink(t),0))}lookup(e){var t=[...this.path],r=e.split("/");if(r.length)for(""==r[0]&&(t.length=1,r.shift());r.length;){var n=r.shift();if("."!=n&&""!=n)if(".."==n){if(1==t.length)return!1;t.pop()}else{var i=t[t.length-1],n=i.node.lookup(n);if(!n)return!1;if(!r.length)return{parent:i,child:n};if(!n.is(Directory))return!1;t.push(n)}}return!0}cwd(){return this.path.map(e=>e.name).join("/")}recurse(e){const n=[];!function recurse(e,t){n.push(e.name);if(!1!==t(e,n)&&e.isDirectory())for(var r of Object.values(e.node.children))recurse(r,t);n.pop()}(this.root,e)}}},{}],122:[function(e,t,r){const{sleep:a,Uint8Buffer:n,toByteArray:o}=e("./Uint8Buffer.js");class SamBAError extends Error{constructor(e){super(e)}}t.exports.SamBAError=SamBAError;new Uint8Array;t.exports.SamBA=class SamBA{options;serialPort;closed=!0;readLoopPromise=void 0;serialReader=void 0;inputBuffer=new n(64);_canChipErase=!1;_canWriteBuffer=!1;_canChecksumBuffer=!1;_canProtect=!1;_readBufferSize;get canChecksumBuffer(){return this._canChecksumBuffer}get canProtect(){return this._canProtect}get canChipErase(){return this._canChipErase}get canWriteBuffer(){return this._canWriteBuffer}get writeBufferSize(){return 4096}constructor(e,t){this.options=Object.assign({flashSize:4194304,logger:console,debug:!1,trace:!1},t||{}),this.serialPort=e,this._canChipErase=!1,this._canWriteBuffer=!1,this._canChecksumBuffer=!1,this._canProtect=!1,this._readBufferSize=0}get logger(){return this.options.logger}async checksumBuffer(e,t){if(!this._canWriteBuffer)throw new SamBAError("Cannot write buffer");if(t>this.checksumBufferSize())throw new SamBAError("Size too large for checksum buffer");this.options.debug&&this.options.logger.debug("checksumBuffer(start_addr=0x",this.hex(e),",size=0x",this.hex(t),")");e=await this.sendCommand("Z"+this.hex(e)+","+this.hex(t),12,void 0,0,5e3);if(!e||90!=e[0])throw new SamBAError("Board response for 'Z' command wrong");let r=this.decodeResponse(e);r=r.substr(1,8);t=parseInt(r,16);if(NaN==t)throw new SamBAError("Invalid checksum returned");return t}checksumBufferSize(){return 4096}checksumCalc(e,t){return-1}async chipErase(e){if(!this._canChipErase)throw new SamBAError("Chip erase not supported");this.options.debug&&this.options.logger.debug("chipErase(start_addr=0x",this.hex(e),")");e=await this.sendCommand("X"+this.hex(e),3,void 0,0,5e3);if(!e||88!=e[0])throw new SamBAError("Board response for 'X' command wrong")}async writeBuffer(e,t,r){if(!this._canWriteBuffer)throw new SamBAError("Cannot write buffer");if(r>this.checksumBufferSize())throw new SamBAError("Size too large for checksum buffer");this.options.debug&&this.options.logger.debug("writeBuffer(src_addr=0x",this.hex(e),",dst_addr=0x",this.hex(t),",size=0x",this.hex(r),")");e=await this.sendCommand("Y"+this.hex(e)+",0",3,void 0,0,200);if(!e||89!=e[0])throw new SamBAError("Board response for 'Y' command wrong");if(e=await this.sendCommand("Y"+this.hex(t)+","+this.hex(r),3,void 0,0,1e4),await a(50),!e||89!=e[0])throw new SamBAError("Board response for 'Y' command wrong")}async writeToStream(e){if(this.serialPort.writable){var t=this.serialPort.writable.getWriter();try{await a(50),await t.write(e)}finally{t.releaseLock()}}}hex(e,t=8){for(var r=e.toString(16);r.length<t;)r="0"+r;return r}writeByte(e,t){this.options.debug&&this.options.logger.debug("writeByte(addr=0x",this.hex(e),",value=0x",this.hex(t,2),")"),this.sendCommand("O"+this.hex(e)+","+this.hex(t,2),0)}async readByte(e){this.options.debug&&this.options.logger.debug("readByte(addr=0x",this.hex(e),")");var t=await this.sendCommand("o"+this.hex(e)+",4",1);if(t)return t=t[0],this.options.debug&&this.options.logger.debug("readByte(addr=0x",this.hex(e),")=0x",this.hex(t,2)),t;throw new SamBAError("Reading")}async writeWord(e,t){this.options.debug&&this.options.logger.debug("writeWord(addr=0x",this.hex(e),",value=0x",this.hex(t),")"),await this.sendCommand("W"+this.hex(e)+","+this.hex(t,8),0)}async readWord(e){this.options.debug&&this.options.logger.debug("readWord(addr=0x",this.hex(e),")");var t=await this.sendCommand("w"+this.hex(e)+",4",4);if(t)return t=t[3]<<24|t[2]<<16|t[1]<<8|t[0]<<0,this.options.debug&&this.options.logger.debug("readByte(addr=0x",this.hex(e),")=0x",this.hex(t,8)),t;throw new SamBAError("Reading")}async write(e,t,r=t.length){this.options.debug&&this.options.logger.debug("write(addr=0x",this.hex(e),",size=0x",this.hex(r),")"),await this.sendCommand("S"+this.hex(e)+","+this.hex(r,8),0,t,r,5e3)}async read(e,t,r){this.options.debug&&this.options.logger.debug("read(addr=0x",this.hex(e),",size=0x",this.hex(r),")");var n=0;for(0==this._readBufferSize&&32<r&&!(r&r-1)&&(t[n]=await this.readByte(e),e++,n++,r--);0<r;){var i=r,s=(0<this._readBufferSize&&r>this._readBufferSize&&(i=this._readBufferSize),await this.sendCommand("R"+this.hex(e)+","+this.hex(i),i));if(!s)throw new SamBAError("Reading binary");for(var a=0;a<i;a++)t[n++]=s[a];r-=i,e+=i,n+=i}}async go(e){this.options.debug&&this.options.logger.debug("go(addr=0x",this.hex(e),")"),await this.sendCommand("G"+this.hex(e),0)}async connect(e=!1,t){if(this.readLoopPromise)throw"already open";e||(await this.serialPort.open({dataBits:8,stopBits:1,parity:"none",bufferSize:63,flowControl:"hardware",baudRate:921600}),await a(50)),await this._connect()}async _connect(){this.closed=!1,this.readLoopPromise=(async()=>{this.readLoop().catch(e=>{"NetworkError"==e.name&&19==e.code&&console.log("readLoop terminated because the connection was closed.")}),this.readLoopPromise=void 0})(),await this.readBuffer(200),await this.setBinaryMode();var e=await this.readVersion(),t=e.indexOf("[Arduino:");if(this.options.debug&&this.options.logger.debug("Version-Info from bootloader: "+e),-1!=t){for(t+=9;t<e.length&&"]"!=e[t];){switch(e[t]){case"X":this._canChipErase=!0;break;case"Y":this._canWriteBuffer=!0;break;case"Z":this._canChecksumBuffer=!0;break;case"P":this._canProtect=!0}t++}this._readBufferSize=63}}async setBinaryMode(){return this.sendCommand("N",2)}async readVersion(){var e=await this.sendCommand("V",256);if(e)return this.decodeResponse(e);throw new SamBAError("No data received")}decodeResponse(e){return 2<e.length&&(e[e.length-1]=12,e[e.length-2]=10,e=e.subarray(0,e.length-2)),new TextDecoder("ascii").decode(e)}async sendCommand(e,t=2,r=void 0,n,i=6e3){this.inputBuffer.reset();var s=this._sendCommandBuffer,e=(s.reset(),s.copy(o(e)),s.push(35),s.view());return this.options.trace&&this.logger.debug("Writing ",this.hex(e.length)," byte"+(1==e.length?"":"s")+":",e.slice(0,s.length)),await this.writeToStream(e),r&&(await a(50),await this.writeToStream(r)),0<t?this.readBuffer(i,t):null}async setBaudRate(e){this.logger.log("Attempting to change baud rate to",e,"..."),await this.disconnect(),await this.serialPort.close(),await this.serialPort.open({baudRate:e}),await a(50),this._connect(),this.logger.log("Changed baud rate to",e)}async disconnect(){var e=this.readLoopPromise,t=this.serialReader;if(!e||!t)throw"not open";this.closed=!0,await t.cancel(),await e}_sendCommandBuffer=new n;async readBuffer(e=6e3,t=void 0){for(var r,n=[],i=Date.now();Date.now()-i<e&&(0<this.inputBuffer.length?(r=this.inputBuffer.shift()||0,this.options.debug,n.push(r)):await a(10),t||!(1<n.length)||0!=n[n.length-1])&&(!t||n.length!=t););return 0==n.length?(this.logger.log("Timed out after",e,"milliseconds"),null):(this.options.trace&&this.logger.debug("Reading",n.length,"byte"+(1==n.length?"":"s")+":",n),Uint8Array.from(n))}async readLoop(){if(this.inputBuffer.reset(),this.serialPort.readable){var e=this.serialPort.readable;this.serialReader=e.getReader();try{for(;!this.closed;){var{value:t,done:r}=await this.serialReader.read();if(r)break;t&&(this.options.trace&&this.logger.debug("Received "+t),this.inputBuffer.copy(t))}}finally{await this.serialReader.cancel(),this.serialReader.releaseLock(),this.serialReader=void 0,this.closed=!0}}}}},{"./Uint8Buffer.js":97}],123:[function(e,t,r){t.exports.stdlib=`

/**
 * Prints messages into the console for debugging
 */
declare function debug(...args):void;

/**
 * Returns a floating-point value between 0 (inclusive) and 1 (exclusive)
 */
declare function rand():number;

/**
 * Returns an integer value between 0 (inclusive) and max (exclusive)
 */
declare function rand(max:number):number;

/**
 * Returns a floating-point value between min (inclusive) and max (exclusive)
 */
declare function rand(min:number, max:number):number;

/**
 * Returns an integer value between min (inclusive) and max (exclusive)
 */
declare function rand(min:number, max:number, ignored:any):number;

/**
 * Returns the absolute value of value
 */
declare function abs(value:number):number;

/**
 * Returns value rounded down to the nearest integer
 */
declare function floor(value:number):number;

/**
 * Returns value rounded to the nearest integer
 */
declare function round(value:number):number;

/**
 * Returns value rounded up to the nearest integer
 */
declare function ceil(value:number):number;

/**
 * Returns the square root of value
 */
declare function sqrt(value:number):number;

/**
 * Returns the cosine of angle, given in radians
 */
declare function cos(angle:number):number;

/**
 * Returns the sine of angle, given in radians
 */
declare function sin(angle:number):number;

/**
 * Returns the arc tangent of y/x
 */
declare function atan2(y:number, x:number):number;

/**
 * Returns the arc tangent of angle, given in radians
 */
declare function tan(angle:number):number;


/**
 * Returns the lowest of the given values
 */
declare function min(...value):number;

/**
 * Returns the highest of the given values
 */
declare function max(...value):number;

/**
 * Returns the root of the sum of each argument squared
 */
declare function vectorLength(...args):number;

/**
 * Returns the difference between two angles given in radians
 */
declare function angleDifference(angleA, angleB):number

/**
 * Sets the target framerate that the game should update at.
 */
declare function setFPS(fps:number):void;

/**
 * Sets the current drawing color.
 * Returns a color.
 */
declare function setPen(R:number, G:number, B:number):number;

/**
 * Sets the current drawing color.
 * Returns a color.
 */
declare function setPen(color:number):number;

/**
 * Sets the font used by the text() function.
 */
declare function setFont(font:FontResource):void;

/**
 * Sets the LED color on supported hardware.
 */
declare function setLED(R:number, G:number, B:number):void;

/**
 * Fills a rectangle on the screen using the current pen color.
 */
declare function rect(x:number, y:number, width:number, height:number):void;

/**
 * Sets the texture to be used by the image() function.
 */
declare function setTexture(texture:ImageResource):void;

/**
 * Sets if the following image() calls should be flipped horizontally.
 */
declare function setMirrored(mirror:boolean):void;

/**
 * Sets if the following image() calls should be flipped vertically.
 */
declare function setFlipped(flip:boolean):void;

/**
 * Sets if the following image() calls should support transparency.
 */
declare function setTransparent(transparent:boolean):void;

/**
 * Returns the screen's width in pixels.
 */
declare function getWidth():number;

/**
 * Returns the screen's height in pixels.
 */
declare function getHeight():number;

/**
 * Reads a byte from a resource at the specified offset.
 */
declare function readByte(resource:Resource, offset?:number):number;

/**
 * Returns the image's width in pixels.
 */
declare function getWidth(image:ImageResource):number;

/**
 * Returns the image's height in pixels.
 */
declare function getHeight(image:ImageResource):number;

/**
 * Fills the entire screen with the current pen's color.
 */
declare function clear():void;

/**
 * Draws the active texture onto the screen at position 0, 0.
 */
declare function image():void;

/**
 * Draws texture onto the screen at position 0, 0.
 */
declare function image(texture:ImageResource):void;

/**
 * Draws the active texture onto the screen at position X, Y.
 */
declare function image(X:number, Y:number):void;

/**
 * Draws texture onto the screen at position X, Y.
 */
declare function image(texture:ImageResource, X:number, Y:number, rotation?:number, scale?:number):void;

/**
 * Draws text onto the screen.
 */
declare function text(message:string, x?:number, y?:number):void;

/**
 * True while button is pressed, false otherwise.
 */
var UP:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var DOWN:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var LEFT:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var RIGHT:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var A:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var B:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var C:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var D:boolean;

`},{}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WordCopyApplet=void 0;var n=e("./applet");e("./samba");const i={dst_addr:40,reset:36,src_addr:44,stack:32,start:0,words:48,code:new Uint8Array([9,72,10,73,10,74,2,224,8,201,8,192,1,58,0,42,250,209,4,72,0,40,1,209,1,72,133,70,112,71,192,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])};class WordCopyApplet extends n.Applet{constructor(e,t){super(e,t,i.code,i.code.length,t+i.start,t+i.stack,t+i.reset)}async setDstAddr(e){await this.checkInstall(),await this._samba.writeWord(this._addr+i.dst_addr,e)}async setSrcAddr(e){await this.checkInstall(),await this._samba.writeWord(this._addr+i.src_addr,e)}async setWords(e){await this.checkInstall(),await this._samba.writeWord(this._addr+i.words,e)}}r.WordCopyApplet=WordCopyApplet},{"./applet":98,"./samba":122}]},{},[103]);