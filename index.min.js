!function r(i,s,a){function o(t,e){if(!s[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=s[t]={exports:{}},i[t][0].call(n.exports,function(e){return o(i[t][1][e]||e)},n,n.exports,r,i,s,a)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Var=n.UnaryExpression=n.Scope=n.Return=n.Program=n.Pop=n.Objekt=n.Method=n.LookUp=n.Location=n.Literal=n.Error=n.Deref=n.Continue=n.CallExpression=n.Break=n.BinaryExpression=n.AssignmentExpression=n.Array=void 0,n.getUniqueId=getUniqueId,n.getUniqueName=function getUniqueName(e="_"){return e+r()};let r=1;function getUniqueId(){return r++}class Expr{constructor(){this.id=r++,this.parent=null,this.program=null}setProgram(e){this.program=e}toJSON(){return{constructor:this.constructor.name}}}class Pop extends Expr{}n.Pop=Pop;class Deref extends Expr{}n.Deref=Deref;class Return extends Expr{constructor(e){super(),this.hasValue=e}toJSON(){return{constructor:this.constructor.name,hasValue:this.hasValue}}}n.Return=Return;class Break extends Expr{constructor(e){super(),this.target=e}toJSON(){return{constructor:this.constructor.name,target:this.target?this.target.id:null}}}n.Break=Break;class Continue extends Expr{constructor(e){super(),this.target=e}toJSON(){return{constructor:this.constructor.name,target:this.target?this.target.id:null}}}n.Continue=Continue;class Array extends Expr{constructor(e){super(),this.length=e}toJSON(){return{constructor:this.constructor.name,length:this.length}}}n.Array=Array;class Objekt extends Expr{constructor(e,t){super(),this.length=e,this.construct=t}toJSON(){return{constructor:this.constructor.name,length:this.length}}}n.Objekt=Objekt;class CallExpression extends Expr{constructor(e,t,n){super(),this.argc=e,this.isNew=t,this.isForward=n}toJSON(){return{constructor:this.constructor.name,argc:this.argc,isNew:this.isNew,isForward:this.isForward}}}n.CallExpression=CallExpression;class AssignmentExpression extends Expr{constructor(e){super(),this.operator=e}toJSON(){return{constructor:this.constructor.name,operator:this.operator}}}n.AssignmentExpression=AssignmentExpression;class BinaryExpression extends Expr{constructor(e){super(),this.operator=e}toJSON(){return{constructor:this.constructor.name,operator:this.operator}}}n.BinaryExpression=BinaryExpression;class UnaryExpression extends Expr{constructor(e,t){super(),this.operator=e,this.prefix=t}toJSON(){return{constructor:this.constructor.name,operator:this.operator}}}n.UnaryExpression=UnaryExpression;class LookUp extends Expr{constructor(e){if(super(),void 0===e)throw new Error("Internal error: invalid LookUp");this.variable=e,this.container=null}toJSON(){return{constructor:this.constructor.name,variable:this.variable,container:this.container}}}n.LookUp=LookUp;class Literal extends Expr{constructor(e){super(),this.value=e}toJSON(){return{constructor:this.constructor.name,value:this.value}}}n.Literal=Literal;class Var{constructor(e="var",t=void 0,n){this.id=r++,this.kind=e,this.name=t,this.location=null,this.parent=null,this.context=null,this.deref=null,this.read=0,this.write=0,this.program=null}setProgram(e){this.program=e}toJSON(){return{constructor:this.constructor.name,id:this.id,name:this.name,parent:this.parent?this.parent.name:null,kind:this.kind}}addDeref(e){this.deref||(this.deref={}),this.deref[e]=e}isCaptured(){return this.parent.method.captured&&this.id in this.parent.method.captured}rename(e){this.parent?(this.parent.remove(this),this.name=e,this.parent.add(this)):this.name=e}}n.Var=Var;class Scope extends Expr{constructor(e){super(),this.name=e,this.variables=[],this.index=Object.create(null),this.parent=null,this.children=[],this.method=null,this.transparent=!1,this.breakable=!1,this.hasBreak=!1,this.continuable=!1,this.hasContinue=!1,this.returnable=!1,this.debug=null,this.program=null,this.preEnter=void 0,this.enterCondition=void 0,this.failEnter=void 0,this.preLoop=void 0,this.loopCondition=void 0}toJSON(){return{constructor:this.constructor.name,id:this.id,name:this.name,index:this.index,parent:this.parent?this.parent.name:null,preEnter:this.preEnter,enterCondition:this.enterCondition,failEnter:this.failEnter,children:this.children,loopCondition:this.loopCondition,preLoop:this.preLoop}}label(e){return e+"_"+this.id+(this.debug?`/*${this.debug}*/`:"")}has(e,t){return this.transparent&&this.parent?this.parent.has(e,t):e in this.index||t&&this.parent&&this.parent.has(e,!0)}find(e,t){var n;return this.transparent&&this.parent?this.parent.find(e,t):(n=this.index[e])||(t&&this.parent?(n=this.parent.find(e,!0))&&n.parent.method!=this.method&&n.parent.method.parent?this.method.capture(n):n:void 0)}remove(e){var t;this.transparent&&this.parent?this.parent.remove(e):e&&e.parent==this&&(-1!=(t=this.variables.indexOf(e))&&(this.variables[t]=this.variables[this.variables.length-1],this.variables.pop()),this.index[e.name]==e&&delete this.index[e.name],delete this.index[e.id])}addPreEnter(){var e=new Scope;return(this.preEnter=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(preEnter)"),e}addEnterCondition(){var e=new Scope;return(this.enterCondition=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(enterCondition)"),e}addFailEnter(){var e=new Scope;return(this.failEnter=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(failEnter)"),e}addPreLoop(){var e=new Scope;return(this.preLoop=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(preLoop)"),e}addLoopCondition(){var e=new Scope;return(this.loopCondition=e).parent=this,e.transparent=!0,e.method=this.method,this.debug&&(e.debug=this.debug+"(loopCondition)"),e}setProgram(e){if(e!=this.program){this.program=e;for(var t of this.variables)t.setProgram(e);for(var n of this.children)n.setProgram(e)}}_reg(e){return this.transparent?this.parent._reg(e):(e.name&&(this.index[e.name]=e),e.id&&(this.index[e.id]=e),this)}add(e){if(!e)throw new Error("Internal Error: adding null to scope");if(this.program&&e.setProgram(this.program),e instanceof Var)e.parent=this._reg(e),e.parent.variables.push(e);else if(e instanceof Method)e.parent=this._reg(e),e.parent.children.push(e);else if(e instanceof Scope)this._reg(e),e.parent=this,e.parent.children.push(e),e.method=this.method;else{if(!(e instanceof Expr))throw new Error("Internal Error: Can't add to scope: ",e);this.children.push(e),e.parent=this}}}class Method extends(n.Scope=Scope){constructor(e){super(),this.name=e,(this.method=this).args=new Var,this.add(this.args),this.add(new Var("const","this")),this.isNative=!1,this.isClass=!1,this.captures=void 0,this.captured=void 0,this.returnable=!0}guessObjectSize(){let e=Object.keys(this.index.this.deref||{}).length;var t,n={};for(t in this.index){var r=this.index[t];r.id in n||!(r instanceof Method)||r.isClass||(n[r.id]=r,e+=r.guessObjectSize())}return e}toJSON(){return Object.assign(super.toJSON(),{name:this.name,args:this.args,isNative:this.isNative})}capture(e){var t=new Var("capture",e.name);return t.context=e.parent.method.setCaptured(e),this.add(t),this.captures||(this.captures={}),this.captures[t.context.id]=e.id,t}setCaptured(e){return this.captured||(this.captured={},this.context=new Var("var"),this.add(this.context)),this.captured[e.id]=e,this.context}}n.Method=Method;n.Program=class Program{constructor(){this.main=new Method("_main"),this.main.setProgram(this),this.resources=new Var("var","R"),this.resourceData={},this.strings=[],this.sourceAST=[],this.main.add(this.resources)}toJSON(){return{constructor:this.constructor.name,main:this.main}}};n.Location=class Location{constructor(e,t,n){this.file=e,this.line=t,this.column=n}clone(){return new Location(this.file,this.line,this.column)}};class Error{constructor(e,t){this.message=e,this.location=t}toJSON(){return{constructor:this.constructor.name,message:this.message,location:this.location}}}n.Error=Error},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cppWriter=function cppWriter(n,e){const r=new CPP;Array.isArray(e.strings)&&e.strings.forEach(e=>literalToString(e,!0));Array.isArray(e.globals)&&e.globals.forEach(e=>{let t=n.main.index[e];t||(t=new f.Var("var",e),n.main.add(t)),r.globals[t.id]=t});return r.write(n),r.toString(e.platform)};var f=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((s=i?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./IR.js"));function _getRequireWildcardCache(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function(e){return e?n:t})(e))}const s={std:`
$[[minStringTable]]

#define PRINT(str) printf("%s", str)
#define PRINTLN() printf("\\n");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);

#include "js.hpp"

$[[translated]]

int main() {
  {
    js::Local args = js::arguments(0);
    $[[main]](args, false);
  }
  js::gc();
  return 0;
}
`,blit:`
#define RESOURCEREF(x) ((js::ResourceRef*)x)
#define RESOURCEDECL(x) const uint8_t x[]
#define PRINT(str) blit::debug((const char*)(str))
#define PRINTLN() blit::debug("\\n\\r");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);

$[[minStringTable]]

#include "blit.h"

$[[resources]]

$[[translated]]

void init() {
  {
    js::Local args = js::arguments(0);
    js::call($[[main]], args, false);
    js::call($[[init]], args, false);
  }
  js::gc();
}

void render(uint32_t time) {
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, time);
    js::call($[[render]], args, false);
  }
  js::gc();
}

void JSupdate(uint32_t time) {
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, time);
    js::call($[[update]], args, false);
  }
  js::gc();
}
`,pokitto:`
#define RESOURCEREF(x) ((js::ResourceRef*)::x)
#define RESOURCEDECL(x) const uint8_t x[]
#define PRINT(str) LOG((const char*)(str))
#define PRINTLN() LOG("\\n");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);

$[[minStringTable]]

#include "api.h"

$[[resources]]

$[[translated]]

void JSinit() {
  {
    js::Local args = js::arguments(0);
    js::call($[[main]], args, false);
    js::call($[[init]], args, false);
  }
  js::gc();
}

void JSupdate() {
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, Pokitto::Core::getTime());
    js::call($[[update]], args, false);
    js::call($[[render]], args, false);
  }
  js::gc();
}
`,espboy:`
#define RESOURCEREF(x) ((js::ResourceRef*)x)
#define RESOURCEDECL(x) const uint8_t PROGMEM x[]
#define PRINT(str) Serial.print((const char*)str)
#define PRINTLN() Serial.print("\\n");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);
$[[minStringTable]]

#include "espboy.hpp"

$[[resources]]

$[[translated]]

void JSinit() {
  {
    js::Local args = js::arguments(0);
    js::call($[[main]], args, false);
    js::call($[[init]], args, false);
  }
  js::gc();
}

void JSupdate(uint32_t time, uint32_t updateCount) {
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, time);
    for (uint32_t i = 0; i < updateCount; ++i)
      js::call($[[update]], args, false);
    js::call($[[render]], args, false);
  }
  js::gc();
}
`,meta:`
#define RESOURCEREF(x) ((js::ResourceRef*)x)
#define RESOURCEDECL(x) const uint8_t x[]
#define PRINT(str) SerialUSB.print((const char*)str)
#define PRINTLN() SerialUSB.print("\\n");
#define STRDECL(VAR, LEN, STR) __attribute__ ((aligned)) const std::array<uint8_t, sizeof(js::Buffer) + LEN> VAR = js::bufferFrom<LEN>(STR);
$[[minStringTable]]

#include "meta.hpp"

$[[resources]]

$[[translated]]

void JSinit() {
  {
    js::Local args = js::arguments(0);
    js::call($[[main]], args, false);
    js::call($[[init]], args, false);
  }
  js::gc();
}

void JSupdate(uint32_t time, uint32_t updateCount) {
  {
    js::Local args = js::arguments(1);
    js::set(args, V_0, time);
    for (uint32_t i = 0; i < updateCount; ++i)
      js::call($[[update]], args, false);
    js::call($[[render]], args, false);
  }
  js::gc();
}
`};let i;function literalToString(e,t){let n=e+"",r=-1;return"string"==typeof e||t?(-1==(r=i.stringTable.indexOf(n))&&(r=i.stringTable.length,i.stringTable.push(n)),n=`js::BufferRef{stringTable[${r}]}`):(0|e)!=e?n+="f":n=`int32_t(${n})`,t&&((t="V_"+(e+"").replace(/([^a-zA-Z_0-9])/g,(e,t)=>t.charCodeAt(0)))in i.minStringTable||(i.minStringTable[t]=n),n=t),n}function local(e){return e instanceof f.Literal?`{${encode(e)}}`:encode(e)}function encode(e,t){switch(e.constructor.name){case"Method":if(e.isNative&&e.name)return e.name;case"Var":return i.globals[e.id]?e.name:e.name?`_${e.id}/*${e.name}*/`:"_"+e.id;case"Literal":return literalToString(e.value,!!t);case"LookUp":var n=e.container||e.parent;if(n instanceof f.Var){if(e.variable instanceof f.Literal&&(n.addDeref(e.variable.value),n==i.program.resources)){if(e.variable.value in i.program.resourceData)return`RESOURCEREF(${e.variable.value})`;throw"No resource named "+e.variable.value}return`js::get(${encode(n)}, ${encode(e.variable,!0)})`}if(n instanceof f.Scope)return encode(n.find(e.variable,!0))}return e.constructor.name}class CPP{constructor(){this.minStringTable={},this.globals={},this.stringTable=[],this.out=[],this.method=null,this.indent=0,this.stack=[],this.main=null,this.program=null,i=this,["","buffer","length","__proto__","this","undefined","[Object]","[Resource]","[Array]","[Function]","null","true","false","this","0","1","2","3","4","5","//new","//method"].forEach(e=>literalToString(e,!0))}error(e,t){throw new f.Error(e,t)}write(e){var t=this[e.constructor.name];if(t)return t.call(this,e);this.error("No writer for "+e.constructor.name,e.location)}Program(e){(i=this).program=e,this.main=e.main,this.out.push(this.write(e.main)),this.writeStringTable()}writeStringTable(){this.out.unshift(["","js::Buffer* const stringTable[] = ","{",this.stringTable.map((e,t)=>`(js::Buffer*) _str${t}.data()`).join(",\n  "),"};","",`const uint32_t stringTableSize = ${this.stringTable.length};`,""]),this.out.unshift([this.stringTable.map((e,t)=>{var n=JSON.stringify(e);return`STRDECL(_str${t}, ${e.length+1}, ${n});`})])}Break(e){return`goto ${e.target.label("failEnter")}; // break`}Continue(e){return`goto ${e.target.label("preLoop")}; // continue`}Return(e){return[this.Deref(),e.hasValue?`return {${encode(this.stack.pop())}};`:"return {};"]}Method(e){var t,n;this.out.unshift(`js::Local ${encode(e)}(js::Local&, bool);`),e.isNative||(t=this.method,n=["",`js::Local ${encode(this.method=e)}(js::Local& ${encode(e.args)}, bool isNew)`],this.out.push(n),n.push(this.Scope(e,!0)),this.method=t)}declare(e){return"capture"==e.kind?`js::Tagged& ${encode(e)} = *js::getTaggedPtr(js::to<js::Object*>(${encode(this.method.args)}), ${literalToString(e.name,!0)}, true);`:e.isCaptured()?`js::Tagged& ${encode(e)} = *js::set(${encode(this.method.context)}, ${literalToString(e.name,!0)}, {});`:`js::Local ${encode(e)}; // `+e.kind}Scope(e,t){var n,r,i,s=[],a=[],o=["// begin "+e.debug,e.transparent?"":"{",a,s],u=[e.transparent?"":"}","// end "+e.debug],l=e.children.map(e=>this.write(e)),c=(!t||(t=e.children[e.children.length-1])&&t instanceof f.Return||l.push("return {};"),e.preEnter&&o.push(this.Scope(e.preEnter,!1)),e.loopCondition?(t=e.label("enterCondition"),n=e.label("failEnter"),r=e.label("preLoop"),o.push(t+":;"),e.enterCondition&&(o.push(this.write(e.enterCondition)),o.push(this.Deref()),o.push(`if (!js::to<bool>(${encode(this.stack.pop())})) goto ${n};`)),e.hasContinue&&l.push(r+":;"),e.preLoop&&(l.push(this.write(e.preLoop)),this.stack.pop()),e.loopCondition&&e.loopCondition.children[0]&&((r=e.loopCondition.children[0])instanceof f.Literal&&r.value?l.push(`goto ${t};`):r instanceof f.Literal&&!r.value||(l.push(this.write(e.loopCondition)),l.push(`if (js::to<bool>(${encode(this.stack.pop())})) goto ${t};`))),u.unshift(n+":;")):e.enterCondition&&(o.push(this.write(e.enterCondition)),o.push(this.Deref()),r=e.label("failEnter"),o.push(`if (!js::to<bool>(${encode(this.stack.pop())})) goto ${r};`),e.failEnter?(t=e.label("afterFail"),u.unshift([`goto ${t};`,r+":;",this.write(e.failEnter),t+":;"])):u.push(r+":;")),{}),h=(c[e.method.args.id]=e.method.args,e.context&&(c[e.context.id]=e.context,a.push(this.declare(e.context)),a.push(`${encode(e.context)} = js::alloc(${Object.keys(e.captured).length});`)),e.index);for(i in h){var p,d=h[i];!(d.id in c)&&d instanceof f.Var&&(c[d.id]=d,p=this.declare(d),e==this.main&&d.name?this.out.unshift(p):s.push(p))}return e instanceof f.Method&&s.push(`js::initThis(${encode(e.index.this)}, ${encode(e.args)}, ${e.guessObjectSize()}, isNew);`),[o,l,u]}LookUp(e){this.stack.push(e)}Literal(e){this.stack.push(e)}Deref(){var e=this.stack.pop();if(e instanceof f.LookUp){var t=e.container||e.parent;if(t instanceof f.Var)return n=new f.Var,this.method.add(n),this.stack.push(n),`${encode(n)} = ${encode(e)};`;if(t instanceof f.Scope){var n=t.find(e.variable,!0);if(n||this.error(`ReferenceError: ${e.variable} is not defined`,e.location),this.stack.push(n),n instanceof f.Method)return this.Deref()}else this.error("Null context in lookup")}else{if(e instanceof f.Method&&e.captures)return n=encode(t=new f.Var),this.method.add(t),this.stack.push(t),(t=[]).push(""+n+` = js::alloc(1, ${encode(this.method.context)});`),t.push(`js::set(${n}, V_4747method, ${encode(e)});`),t;this.stack.push(e)}}Pop(){this.stack.pop()}AssignmentExpression(e){let t=this.stack.pop();t||this.error("Missing right-hand side for "+e.operator);var n=this.stack.pop(),r=(n||this.error("Missing left-hand side for "+e.operator+encode(t)),n instanceof f.LookUp||this.error("Invalid assignment left-hand side "+encode(n)),n.container||n.parent),i=[];return"="!=e.operator&&(this.stack.push(n),i.push(this.Deref()),this.stack.push(t),i.push(this.BinaryExpression(e)),t=this.stack.pop()),r instanceof f.Var?n.variable instanceof f.Literal?(r.addDeref(n.variable.value),i.push(`js::set(${encode(r)}, ${encode(n.variable,!0)}, ${encode(t)});`)):i.push(`js::set(${encode(r)}, ${encode(n.variable)}, ${encode(t)});`):r instanceof f.Scope&&((e=r.find(n.variable,!0))||this.error(`Variable ${n.variable} not defined`),i.push(`${encode(e)} = ${encode(t)};`)),this.stack.push(t),i}UnaryExpression(e){var t=this.stack.pop(),n=new f.Var,r=(e.parent.method.add(n),{true:{"++":"preinc","--":"predec","!":"not","-":"neg","+":"pos"},false:{"++":"inc","--":"dec"}}[!!e.prefix][e.operator]);return this.stack.push(n),`js::op_${r}(${encode(n)}, ${encode(t)}); // `+e.operator}BinaryExpression(e){var t=[],n=this.stack.pop(),r=(t.push(this.Deref()),this.stack.pop());switch(e.operator){case".":case"[]":var i=new f.LookUp(n);return i.container=r,this.stack.push(i),t}var s=new f.Var;e.parent.add(s),this.stack.push(s);return t.push(`js::op_${{"+":"add","-":"sub","*":"mul","%":"mod","/":"div","<":"lt","<=":"leq",">":"gt",">=":"geq","==":"eq","===":"seq","|":"or","&":"and","^":"xor","<<":"shl",">>":"shr",">>>":"sru","+=":"add","-=":"sub","*=":"mul","%=":"mod","/=":"div","|=":"or","&=":"and","^=":"xor","<<=":"shl",">>=":"shr",">>>=":"sru"}[e.operator]||e.operator}(${encode(s)}, ${local(r)}, ${local(n)});`),t}Array(t){var e=new f.Var,n=(this.method.add(e),[]),r=[],i=encode(e);n.push(`${i} = js::arguments(${t.length});`),n.push(r);for(let e=0;e<t.length;++e)r[t.length-e-1]=`js::set(${i}, ${literalToString(t.length-e-1,!0)}, ${encode(this.stack.pop())});`;return this.stack.push(e),n}Objekt(t){var e=new f.Var,n=(this.method.add(e),[]),r=[],i=encode(e);n.push(`${i} = js::alloc(${t.length});`),n.push(r);for(let e=0;e<t.length;++e){var s=this.stack.pop(),a=this.stack.pop();r[t.length-e-1]=`js::set(${i}, ${literalToString(a.variable,!0)}, ${encode(s)});`}return this.stack.push(e),n}CallExpression(t){if(t.isForward){const s=this.stack.pop(),o=encode(s);return`js::call(${o}, ${encode(this.method.args)}, false);`}var e=new f.Var,n=new f.Var,r=(this.method.add(e),this.method.add(n),[]),i=encode(e);for(let e=0;e<t.argc;++e)r[t.argc-e-1]=`js::set(${i}, ${literalToString(t.argc-e-1,!0)}, ${encode(this.stack.pop())});`;const s=this.stack.pop();this.stack.push(s),r.push(this.Deref());let a=t.argc;const o=encode(this.stack.pop());return t.isNew?a++:s.container&&(r.push(`js::set(${i}, V_this, ${encode(s.container)});`),a++),this.stack.push(n),[`${i} = js::arguments(${a});`,r,`${encode(n)} = js::call(${o}, ${i}, ${t.isNew});`,i+".reset();"]}toString(e){let r=Object.keys(this.minStringTable).map(e=>`#define ${e} `+this.minStringTable[e]).join("\n"),i="";return toString.call(this,this.out),(s[e]||s.std).replace(/\$\[\[([^\]]+)\]\]/g,(e,t)=>{if("minStringTable"==t)return r;if("translated"==t)return i;if("resources"==t)return Object.keys(this.program.resourceData).map(e=>{var n=this.program.resourceData[e];if(!n)return"// RESOURCEDECL(${res}); // built-in";var r=[];for(let e=0,t=n.length;e<t;e+=2)r.push(parseInt(n.substr(e,2),16));return`RESOURCEDECL(${e}) = {${r.join(",")}};`}).join("\n");let n=this.main;return(n="main"!=t?this.main.find(t,!0):n)||this.error("Could not find "+t),encode(n)});function toString(n){for(let e=0,t=n.length;e<t;++e){var r=n[e];"string"==typeof r?("}"==r[0]&&this.indent--,i=(i+="    ".repeat(this.indent))+r+"\n","{"==r&&this.indent++):void 0!==r&&toString.call(this,r)}}}}},{"./IR.js":1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dataProg=function dataProg(e,t,n,r){n=n.split("/").pop().split(".")[0];return console.log("Adding resource ",n,e),t.resourceData[n]=e,t}},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.esAST=function esAST(e,t,n){var r="object"==typeof i&&i.esprima?i.esprima:s,r=r.parse(e,{loc:!0});return r.file=n,r},i.esProg=function esProg(e,t,n,r){a=r;r=new ProgramParser(t);return r.location.file=e.file,r.parse(e),t.sourceAST.unshift(e),t};var s=_interopRequireWildcard(e("./node_modules/esprima/dist/esprima.js")),o=_interopRequireWildcard(e("./IR.js"));function _getRequireWildcardCache(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function(e){return e?n:t})(e))}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var n,r,i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=s?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=e[n]);return i.default=e,t&&t.set(e,i),i}let a;class ProgramParser{constructor(e){this.program=e,this.scope=null,this.location=new o.Location,this.node=null,this.scopeStack=[],this.parse=(e,...t)=>{var n,r=this[e.type];if(r)return n=this.node,this.setNode(e),r=r.call(this,e,...t),this.setNode(n),r;throw console.error("Don't know how to parse "+e.type+" inside",this.node?this.node.type:"null"),console.log(JSON.stringify(e,0,4)),new o.Error("Internal error",this.location)}}getNodeLocation(e){return e&&e.loc&&e.loc.start?new o.Location(this.location.file,e.loc.start.line,e.loc.start.column):this.location.clone()}setNode(e){(this.node=e)&&e.loc&&e.loc.start&&(this.location.column=e.loc.start.column,this.location.line=e.loc.start.line)}error(e){throw new o.Error(e,this.location)}push(e,t){this.scopeStack.push(e);var n=this.scope;t(this.scope=e),this.scope=n,this.scopeStack.pop()}Program(t){this.push(this.program.main,e=>{t.body.forEach(e=>this.parse(e))})}BreakStatement(t){for(let e=this.scopeStack.length-1;-1<e;--e){var n=this.scopeStack[e];if(n.breakable&&(!t.label||n.name==t.label.name))return n.hasBreak=!0,void this.scope.add(new o.Break(n))}}ContinueStatement(t){for(let e=this.scopeStack.length-1;-1<e;--e){var n=this.scopeStack[e];if(n.continuable&&(!t.label||n.name==t.label.name))return n.hasContinue=!0,void this.scope.add(new o.Continue(n))}}BlockStatement(n,e=null){e||(e=new o.Scope,this.scope.add(e)),this.push(e,e=>{for(var t of n.body)if(this.parse(t),a.opts.cancel){a.opts.cancel=!1;break}})}LabeledStatement(e,t){(t=t||new o.Scope).name=e.label.name,this.parse(e.body,t)}IfStatement(t,n){n=n||new o.Scope,this.scope.add(n),n.debug="if",this.push(n.addEnterCondition(),e=>{this.parse(t.test)}),t.alternate&&this.push(n.addFailEnter(),e=>{this.parse(t.alternate)}),this.push(n,e=>{this.parse(t.consequent,n)})}WhileStatement(t,n){n=n||new o.Scope,this.scope.add(n),n.continuable=!0,n.breakable=!0,this.push(n.addEnterCondition(),e=>{this.parse(t.test)}),this.push(n.addLoopCondition(),e=>{this.scope.add(new o.Literal(!0))}),this.push(n,e=>{this.parse(t.body,n)})}ForOfStatement(i,s){s=s||new o.Scope,this.scope.add(s),s.continuable=!0,s.breakable=!0,s.debug="forOf",this.push(s,e=>{const t=new o.Var,n=(s.add(t),new o.Var);s.add(n);let r;this.push(s.addPreEnter(),e=>{e.add(new o.LookUp(n.id)),e.add(new o.Literal(0)),e.add(new o.AssignmentExpression("=")),e.add(new o.Pop),e.add(new o.LookUp(t.id)),this.parse(i.right),e.add(new o.AssignmentExpression("=")),e.add(new o.Pop),this.parse(i.left),(r=e.find(i.left.declarations[0].id.name,!0))||this.error("Could not find iterator "+i.left.declarations[0].id.name)}),this.push(s.addEnterCondition(),e=>{e.add(new o.LookUp(n.id)),e.add(new o.LookUp(t.id)),e.add(new o.Deref),e.add(new o.Literal("length")),e.add(new o.BinaryExpression(".")),e.add(new o.BinaryExpression("<"))}),this.push(s.addPreLoop(),e=>{e.add(new o.LookUp(n.id)),e.add(new o.Literal(1)),e.add(new o.AssignmentExpression("+=")),e.add(new o.Pop)}),this.push(s.addLoopCondition(),e=>{e.add(new o.Literal(!0))}),s.add(new o.LookUp(r.id)),s.add(new o.LookUp(t.id)),s.add(new o.Deref),s.add(new o.LookUp(n.id)),s.add(new o.Deref),s.add(new o.BinaryExpression(".")),s.add(new o.AssignmentExpression("=")),this.parse(i.body,s)})}ForStatement(t,n){n=n||new o.Scope,this.scope.add(n),n.continuable=!0,n.breakable=!0,this.push(n,e=>{t.init&&this.push(n.addPreEnter(),e=>{this.parse(t.init)}),t.test&&this.push(n.addEnterCondition(),e=>{this.parse(t.test)}),t.update&&this.push(n.addPreLoop(),e=>{this.parse(t.update)}),this.push(n.addLoopCondition(),e=>{this.scope.add(new o.Literal(!0))}),this.parse(t.body,n)})}DoWhileStatement(t,n){n=n||new o.Scope,this.scope.add(n),n.continuable=!0,n.breakable=!0,this.push(n.addLoopCondition(),e=>{this.parse(t.test)}),this.push(n,e=>{this.parse(t.body,n)})}VariableDeclaration(t){t.declarations.forEach(e=>this.parse(e,t.kind))}VariableDeclarator(e,t){var n=e.id,r=("Identifier"!=n.type&&this.error("Unsupported initializer type: "+n.type),"var"==t?this.scope.method:this.scope),i=r.find(n.name,!1);i?"var"==t&&"var"==i.kind||this.error("redeclaration of "+i.kind+" "+i.name):r.add(new o.Var(t,n.name,this.location.clone())),e.init&&(this.parse({type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:n.name},right:e.init}),this.scope.add(new o.Pop))}ClassDeclaration(t){var e,n,r=new o.Method(t.id?t.id.name:void 0),i=(r.isClass=!0,this.scope.add(r),this.push(r,e=>{this.parse(t.body)}),r.index.this),s={};for(e in r.index){var a=r.index[e];!(a.id in s)&&a instanceof o.Method&&((s[a.id]=a).index.this,i.addDeref(a.name),r.add(new o.LookUp("this")),r.add(new o.Deref),r.add(new o.Literal(a.name)),r.add(new o.BinaryExpression(".")),r.add(new o.LookUp(a.id)),r.add(new o.AssignmentExpression("=")),r.add(new o.Pop))}r.index.constructor&&(((n=new o.LookUp("constructor")).container=r).add(n),r.add(new o.CallExpression(0,!0,!0)))}ClassBody(e){e.body.forEach(e=>this.parse(e))}EmptyStatement(e){}AssignmentExpression(e){this.parse(e.left),this.parse(e.right),this.scope.add(new o.Deref),this.scope.add(new o.AssignmentExpression(e.operator))}ExpressionStatement(e){"Literal"==e.expression.type&&"string"==typeof e.expression.value?a.pragma(e.expression.value):(this.parse(e.expression),this.scope.add(new o.Pop))}ReturnStatement(e){e.argument&&this.parse(e.argument),this.scope.add(new o.Return(!!e.argument))}Identifier(e){this.scope.add(new o.LookUp(e.name))}ThisExpression(e){this.scope.add(new o.LookUp("this"))}ObjectExpression(e){e.properties.forEach(e=>{this.parse(e.key),this.parse(e.value)}),this.scope.add(new o.Objekt(e.properties.length,!1))}ArrayExpression(e){e.elements.forEach(e=>{this.parse(e)}),this.scope.add(new o.Array(e.elements.length))}Literal(e){this.scope.add(new o.Literal(e.value))}UnaryExpression(e){this.parse(e.argument),this.scope.add(new o.UnaryExpression(e.operator,e.prefix))}UpdateExpression(e){this.parse(e.argument),this.scope.add(new o.UnaryExpression(e.operator,e.prefix))}BinaryExpression(e){this.parse(e.left),this.scope.add(new o.Deref),this.parse(e.right),this.scope.add(new o.Deref),this.scope.add(new o.BinaryExpression(e.operator)),"."==e.operator&&console.log(e)}LogicalExpression(t){"&&"!=t.operator&&"||"!=t.operator&&this.error("Unimplemented operator "+t.operator);const n=new o.Var("var"),r=(this.scope.add(n),this.scope.add(new o.LookUp(n.id)),this.parse(t.left),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop),new o.Scope);r.debug=t.operator,this.scope.add(r),this.push(r,e=>{this.push(r.addEnterCondition(),e=>{this.scope.add(new o.LookUp(n.id))}),this.push("&&"==t.operator?r:r.addFailEnter(),e=>{this.scope.add(new o.LookUp(n.id)),this.parse(t.right),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop)})}),this.scope.add(new o.LookUp(n.id))}MemberExpression(e){this.parse(e.object),this.scope.add(new o.Deref),e.computed?this.parse(e.property):this.scope.add(new o.Literal(e.property.name)),this.scope.add(new o.BinaryExpression(e.computed?"[]":"."))}CallExpression(e,t){this.parse(e.callee),e.arguments.forEach(e=>{this.parse(e),this.scope.add(new o.Deref)}),this.scope.add(new o.CallExpression(e.arguments.length,!!t))}NewExpression(e){this.CallExpression(e,!0)}ArrowFunctionExpression(e){e=this.FunctionDeclaration(e,!0);this.scope.add(new o.LookUp(e.id))}FunctionExpression(e){e=this.FunctionDeclaration(e);this.scope.add(new o.LookUp(e.id))}MethodDefinition(e){this.FunctionDeclaration(e.value,e.key.name)}FunctionDeclaration(t,e){const a=new o.Method(e||(t.id?t.id.name:void 0));return this.scope.add(a),this.push(a,e=>{const i=new o.Var("var"),s=new o.Var("var","arguments");this.scope.add(i),this.scope.add(s),this.scope.add(new o.LookUp(i.id)),this.scope.add(new o.LookUp(s.id)),this.scope.add(new o.LookUp(a.args.id)),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Literal("length")),this.scope.add(new o.BinaryExpression(".")),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop),t.params.forEach((t,n)=>{const r=new o.Var("var",t.name,this.getNodeLocation(t));var e;"Identifier"==t.type?(this.scope.add(new o.LookUp(r.id)),this.scope.add(new o.LookUp(s.id)),this.scope.add(new o.Deref),this.scope.add(new o.Literal(n)),this.scope.add(new o.BinaryExpression(".")),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop)):"AssignmentPattern"==t.type&&(r.rename(t.left.name),this.scope.add(new o.LookUp(r.id)),this.scope.add(new o.LookUp(a.args.id)),this.scope.add(new o.Literal(n)),this.scope.add(new o.BinaryExpression(".")),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop),e=new o.Scope,this.scope.add(e),this.push(e.addEnterCondition(),e=>{this.scope.add(new o.LookUp(i.id)),this.scope.add(new o.Literal(n)),this.scope.add(new o.BinaryExpression("<="))}),this.push(e,e=>{this.scope.add(new o.LookUp(r.id)),this.parse(t.right),this.scope.add(new o.AssignmentExpression("=")),this.scope.add(new o.Pop)})),this.scope.add(r)}),this.parse(t.body,a),t.expression&&(this.scope.add(new o.Deref),this.scope.add(new o.Return(!0)))}),a}}},{"./IR.js":1,"./node_modules/esprima/dist/esprima.js":55}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.jsWriter=function jsWriter(t,e){var n=Object.keys(t.resourceData).map(e=>{var n=t.resourceData[e];if(!n)return`//R.${e}; // built-in`;var r=[];for(let e=0,t=n.length;e<t;e+=2)r.push(parseInt(n.substr(e,2),16));return`R.${e} = Uint8Array.from([${r.join(",")}]);`}).join("\n");return n+"\n"+t.sourceAST.map(e=>function toString(e){var t=["pass/transform-dynamic-to-static-property-access","pass/transform-dynamic-to-static-property-definition","pass/transform-immediate-function-call","pass/transform-logical-association","pass/reordering-function-declarations","pass/remove-unused-label","pass/remove-empty-statement","pass/remove-wasted-blocks","pass/transform-typeof-undefined","pass/reduce-sequence-expression","pass/reduce-branch-jump","pass/reduce-multiple-if-statements","pass/dead-code-elimination","pass/remove-side-effect-free-expressions","pass/remove-context-sensitive-expressions","pass/tree-based-constant-folding","pass/remove-unreachable-branch"].map(e=>i.pass.require(e)),n=["post/transform-static-to-dynamic-property-access"].map(e=>i.pass.require(e)),t=[t,{once:!0,pass:n}];n=i.optimize(e,t);return r.generate(n,{format:{indent:{style:""},quotes:"auto",compact:!0}})}(e)).join("\n")};!function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return;if(null===e||"object"!=typeof e&&"function"!=typeof e)return;t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((s=i?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}r.default=e,t&&t.set(e,r)}(e("./IR.js"));function _getRequireWildcardCache(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function(e){return e?n:t})(e))}e("esprima");const r=e("escodegen"),i=e("esmangle")},{"./IR.js":1,escodegen:8,esmangle:15,esprima:55}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JSC=void 0;var r=e("./esProg.js"),i=e("./dataProg.js"),s=e("./cppWriter.js"),a=e("./jsWriter.js"),o=e("./jsonWriter.js"),u=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((s=i?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}r.default=e,t&&t.set(e,r);return r}(e("./IR.js"));function _getRequireWildcardCache(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(_getRequireWildcardCache=function(e){return e?n:t})(e))}const l={cpp:s.cppWriter,json:o.jsonWriter,js:a.jsWriter},c={js:[function print(e){console.log(JSON.stringify(e,0,4))},r.esAST,r.esProg],raw:[i.dataProg]};n.JSC=class JSC{constructor(e){var t;this.program=new u.Program,this.opts={},this.dependencies={},this.reader=e,this.lock=!1;for(t of`
                debug, Array,
                rand,
                abs, floor, round, ceil, sqrt,
                cos, sin, atan2, tan,
                min, max,
                vectorLength, angleDifference
                `.trim().split(/\s*,\s*/))this.addSysCall(t)}write(e,t={}){var n=l[e];if(n)return n(this.program,Object.assign({},t,this.opts));throw new Error("No writer for format "+e)}process(){if(!this.lock){this.lock++;let e;do{for(var t in e=!1,this.dependencies){var n=this.dependencies[t];"string"==typeof n&&(console.log("Dependency ",t),e=!0,this.add(t,n),this.dependencies[t]=null)}}while(e);this.lock--}}add(t,e){var n=t.split(".").pop().toLowerCase(),r=c[n];if(!r)throw new Error("No transformer queue for "+n,new u.Location(t));let i=e;r.forEach(e=>i=e(i,this.program,t,this)||i)}pragma(e){var e=e.trim().split(" "),t=this[e[0]];t&&(e.shift(),t.apply(this,e))}include(e){e in this.dependencies||(this.dependencies[e]=this.reader(e))}ifeq(e,t){this.set("cancel",this.opts[e]!=t)}ifneq(e,t){this.set("cancel",this.opts[e]==t)}getOpt(e){return this.opts[e]}set(e,t){this.opts[e]=t}push(e,...t){let n=this.opts[e];n&&Array.isArray(n)||(n=[],this.opts[e]=n),n.push(...t)}registerBuiltinResource(...e){e.forEach(e=>{this.program.resourceData[e]=null})}addSysCall(...e){e.forEach(e=>{e=new u.Method(e);e.isNative=!0,this.program.main.add(e)})}}},{"./IR.js":1,"./cppWriter.js":2,"./dataProg.js":3,"./esProg.js":4,"./jsWriter.js":5,"./jsonWriter.js":7}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.jsonWriter=function jsonWriter(e){return JSON.stringify(e,0,2)}},{}],8:[function(T,e,B){!function(k){!function(){!function(){"use strict";var i,f,m,l,a,o,c,h,p,d,u,w,g,A,y,s,v,C,D,e,t;function isStatement(e){return CodeGenerator.Statement.hasOwnProperty(e.type)}var E,n=T("estraverse"),_=T("esutils"),S=n.Syntax,F={"||":(E={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21}).LogicalOR,"&&":E.LogicalAND,"|":E.BitwiseOR,"^":E.BitwiseXOR,"&":E.BitwiseAND,"==":E.Equality,"!=":E.Equality,"===":E.Equality,"!==":E.Equality,is:E.Equality,isnt:E.Equality,"<":E.Relational,">":E.Relational,"<=":E.Relational,">=":E.Relational,in:E.Relational,instanceof:E.Relational,"<<":E.BitwiseSHIFT,">>":E.BitwiseSHIFT,">>>":E.BitwiseSHIFT,"+":E.Additive,"-":E.Additive,"*":E.Multiplicative,"%":E.Multiplicative,"/":E.Multiplicative,"**":E.Exponentiation},x=7,b=1;function getDefaultOptions(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function stringRepeat(e,t){var n="";for(t|=0;0<t;t>>>=1,e+=e)1&t&&(n+=e);return n}function endsWithLineTerminator(e){var t=e.length;return t&&_.code.isLineTerminator(e.charCodeAt(t-1))}function merge(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function updateDeeply(e,t){var n,r;function isHashObject(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}for(n in t)t.hasOwnProperty(n)&&(isHashObject(r=t[n])?isHashObject(e[n])?updateDeeply(e[n],r):e[n]=updateDeeply({},r):e[n]=r);return e}function escapeRegExpCharacter(e,t){return 8232==(-2&e)?(t?"u":"\\u")+(8232===e?"2028":"2029"):10===e||13===e?(t?"":"\\")+(10===e?"n":"r"):String.fromCharCode(e)}function escapeString(e){for(var t,n,r,i="",s=0,a=0,o=0,u=e.length;o<u;++o){if(39===(t=e.charCodeAt(o)))++s;else if(34===t)++a;else if(47===t&&l)i+="\\";else{if(_.code.isLineTerminator(t)||92===t){i+=function escapeDisallowedCharacter(e){if(92===e)return"\\\\";if(10===e)return"\\n";if(13===e)return"\\r";if(8232===e)return"\\u2028";if(8233===e)return"\\u2029";throw new Error("Incorrectly classified character")}(t);continue}if(!_.code.isIdentifierPartES5(t)&&(l&&t<32||!l&&!h&&(t<32||126<t))){i+=function escapeAllowedCharacter(e,t){var n;return 8===e?"\\b":12===e?"\\f":9===e?"\\t":(n=e.toString(16).toUpperCase(),l||255<e?"\\u"+"0000".slice(n.length)+n:0!==e||_.code.isDecimalDigit(t)?11===e?"\\x0B":"\\x"+"00".slice(n.length)+n:"\\0")}(t,e.charCodeAt(o+1));continue}}i+=String.fromCharCode(t)}if(r=(n=!("double"===c||"auto"===c&&a<s))?"'":'"',!(n?s:a))return r+i+r;for(e=i,i=r,o=0,u=e.length;o<u;++o)(39===(t=e.charCodeAt(o))&&n||34===t&&!n)&&(i+="\\"),i+=String.fromCharCode(t);return i+r}function toSourceNodeWhenNeeded(e,t){if(!v)return Array.isArray(e)?function flattenToString(e){for(var t,n="",r=0,i=e.length;r<i;++r)t=e[r],n+=Array.isArray(t)?flattenToString(t):t;return n}(e):e;if(null==t){if(e instanceof i)return e;t={}}return null==t.loc?new i(null,null,v,e,t.name||null):new i(t.loc.start.line,t.loc.start.column,!0===v?t.loc.source||null:v,e,t.name||null)}function join(e,t){var n,r=toSourceNodeWhenNeeded(e).toString();return 0===r.length?[t]:0===(n=toSourceNodeWhenNeeded(t).toString()).length?[e]:(r=r.charCodeAt(r.length-1),n=n.charCodeAt(0),(43===r||45===r)&&r===n||_.code.isIdentifierPartES5(r)&&_.code.isIdentifierPartES5(n)||47===r&&105===n?[e,d||" ",t]:_.code.isWhiteSpace(r)||_.code.isLineTerminator(r)||_.code.isWhiteSpace(n)||_.code.isLineTerminator(n)?[e,t]:[e,d,t])}function addIndent(e){return[f,e]}function withIndent(e){var t=f;e(f+=m),f=t}function generateComment(e,t){var n;return"Line"===e.type?endsWithLineTerminator(e.value)?"//"+e.value:(n="//"+e.value,D||(n+="\n"),n):y.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)?function adjustMultilineComment(e,t){for(var n,r,i,s,a=e.split(/\r\n|[\r\n]/),o=Number.MAX_VALUE,u=1,l=a.length;u<l;++u){for(n=a[u],r=0;r<n.length&&_.code.isWhiteSpace(n.charCodeAt(r));)++r;r<o&&(o=r)}for(void 0!==t?(i=f,"*"===a[1][o]&&(t+=" "),f=t):(1&o&&--o,i=f),u=1,l=a.length;u<l;++u)s=toSourceNodeWhenNeeded(addIndent(a[u].slice(o))),a[u]=v?s.join(""):s;return f=i,a.join("\n")}("/*"+e.value+"*/",t):"/*"+e.value+"*/"}function addComments(e,t){var n,r,i,s,a,o,u,l,c,h,p,d;if(e.leadingComments&&0<e.leadingComments.length){if(s=t,D){for(t=[],l=(i=e.leadingComments[0]).extendedRange,c=i.range,0<(d=((p=C.substring(l[0],c[0])).match(/\n/g)||[]).length)?(t.push(stringRepeat("\n",d)),t.push(addIndent(generateComment(i)))):(t.push(p),t.push(generateComment(i))),h=c,n=1,r=e.leadingComments.length;n<r;n++)c=(i=e.leadingComments[n]).range,d=(C.substring(h[1],c[0]).match(/\n/g)||[]).length,t.push(stringRepeat("\n",d)),t.push(addIndent(generateComment(i))),h=c;d=(C.substring(c[1],l[1]).match(/\n/g)||[]).length,t.push(stringRepeat("\n",d))}else for(i=e.leadingComments[0],t=[],g&&e.type===S.Program&&0===e.body.length&&t.push("\n"),t.push(generateComment(i)),endsWithLineTerminator(toSourceNodeWhenNeeded(t).toString())||t.push("\n"),n=1,r=e.leadingComments.length;n<r;++n)endsWithLineTerminator(toSourceNodeWhenNeeded(u=[generateComment(i=e.leadingComments[n])]).toString())||u.push("\n"),t.push([f,u]);t.push([f,s])}if(e.trailingComments)if(D)l=(i=e.trailingComments[0]).extendedRange,c=i.range,0<(d=((p=C.substring(l[0],c[0])).match(/\n/g)||[]).length)?(t.push(stringRepeat("\n",d)),t.push(addIndent(generateComment(i)))):(t.push(p),t.push(generateComment(i)));else for(a=!endsWithLineTerminator(toSourceNodeWhenNeeded(t).toString()),o=stringRepeat(" ",function calculateSpaces(e){for(var t=e.length-1;0<=t&&!_.code.isLineTerminator(e.charCodeAt(t));--t);return e.length-1-t}(toSourceNodeWhenNeeded([f,t,m]).toString())),n=0,r=e.trailingComments.length;n<r;++n)i=e.trailingComments[n],a?(t=0===n?[t,m]:[t,o]).push(generateComment(i,o)):t=[t,addIndent(generateComment(i))],n===r-1||endsWithLineTerminator(toSourceNodeWhenNeeded(t).toString())||(t=[t,"\n"]);return t}function generateBlankLines(e,t,n){for(var r=0,i=e;i<t;i++)"\n"===C[i]&&r++;for(i=1;i<r;i++)n.push(p)}function parenthesize(e,t,n){return t<n?["(",e,")"]:e}function generateVerbatimString(e){for(var t=e.split(/\r\n|\n/),n=1,r=t.length;n<r;n++)t[n]=p+f+t[n];return t}function CodeGenerator(){}function generateIdentifier(e){return toSourceNodeWhenNeeded(e.name,e)}function generateAsyncPrefix(e,t){return e.async?"async"+(t?d||" ":d):""}function generateStarSuffix(e){return e.generator&&!y.moz.starlessGenerator?"*"+d:""}function generateMethodPrefix(e){var t=e.value,n="";return t.async&&(n+=generateAsyncPrefix(t,!e.computed)),t.generator&&(n+=generateStarSuffix(t)?"*":""),n}function generateInternal(e){var t=new CodeGenerator;if(isStatement(e))return t.generateStatement(e,b);if(function isExpression(e){return CodeGenerator.Expression.hasOwnProperty(e.type)}(e))return t.generateExpression(e,E.Sequence,x);throw new Error("Unknown node type: "+e.type)}CodeGenerator.prototype.maybeBlock=function(e,t){var n,r=this,i=!y.comment||!e.leadingComments;return e.type===S.BlockStatement&&i?[d,this.generateStatement(e,t)]:e.type===S.EmptyStatement&&i?";":(withIndent(function(){n=[p,addIndent(r.generateStatement(e,t))]}),n)},CodeGenerator.prototype.maybeBlockSuffix=function(e,t){var n=endsWithLineTerminator(toSourceNodeWhenNeeded(t).toString());return e.type!==S.BlockStatement||y.comment&&e.leadingComments||n?n?[t,f]:[t,p,f]:[t,d]},CodeGenerator.prototype.generatePattern=function(e,t,n){return e.type===S.Identifier?generateIdentifier(e):this.generateExpression(e,t,n)},CodeGenerator.prototype.generateFunctionParams=function(e){var t,n,r,i=!1;if(e.type!==S.ArrowFunctionExpression||e.rest||e.defaults&&0!==e.defaults.length||1!==e.params.length||e.params[0].type!==S.Identifier){for((r=e.type===S.ArrowFunctionExpression?[generateAsyncPrefix(e,!1)]:[]).push("("),e.defaults&&(i=!0),t=0,n=e.params.length;t<n;++t)i&&e.defaults[t]?r.push(this.generateAssignment(e.params[t],e.defaults[t],"=",E.Assignment,x)):r.push(this.generatePattern(e.params[t],E.Assignment,x)),t+1<n&&r.push(","+d);e.rest&&(e.params.length&&r.push(","+d),r.push("..."),r.push(generateIdentifier(e.rest))),r.push(")")}else r=[generateAsyncPrefix(e,!0),generateIdentifier(e.params[0])];return r},CodeGenerator.prototype.generateFunctionBody=function(e){var t,n=this.generateFunctionParams(e);return e.type===S.ArrowFunctionExpression&&(n.push(d),n.push("=>")),e.expression?(n.push(d),"{"===(t=this.generateExpression(e.body,E.Assignment,x)).toString().charAt(0)&&(t=["(",t,")"]),n.push(t)):n.push(this.maybeBlock(e.body,9)),n},CodeGenerator.prototype.generateIterationForStatement=function(e,t,n){var r=["for"+(t.await?(d||" ")+"await":"")+d+"("],i=this;return withIndent(function(){t.left.type===S.VariableDeclaration?withIndent(function(){r.push(t.left.kind+(d||" ")),r.push(i.generateStatement(t.left.declarations[0],0))}):r.push(i.generateExpression(t.left,E.Call,x)),r=join(r,e),r=[join(r,i.generateExpression(t.right,E.Assignment,x)),")"]}),r.push(this.maybeBlock(t.body,n)),r},CodeGenerator.prototype.generatePropertyKey=function(e,t){var n=[];return t&&n.push("["),n.push(this.generateExpression(e,E.Assignment,x)),t&&n.push("]"),n},CodeGenerator.prototype.generateAssignment=function(e,t,n,r,i){return E.Assignment<r&&(i|=1),parenthesize([this.generateExpression(e,E.Call,i),d+n+d,this.generateExpression(t,E.Assignment,i)],E.Assignment,r)},CodeGenerator.prototype.semicolon=function(e){return!w&&32&e?"":";"},merge(CodeGenerator.prototype,CodeGenerator.Statement={BlockStatement:function(i,s){var a,o,u=["{",p],l=this;return withIndent(function(){var e,t,n,r;for(0===i.body.length&&D&&2<(a=i.range)[1]-a[0]&&(o=C.substring(a[0]+1,a[1]-1),(u="\n"===o[0]?["{"]:u).push(o)),r=b,8&s&&(r|=16),e=0,t=i.body.length;e<t;++e)D&&(0===e&&(i.body[0].leadingComments&&(a=i.body[0].leadingComments[0].extendedRange,"\n"===(o=C.substring(a[0],a[1]))[0])&&(u=["{"]),i.body[0].leadingComments||generateBlankLines(i.range[0],i.body[0].range[0],u)),0<e)&&(i.body[e-1].trailingComments||i.body[e].leadingComments||generateBlankLines(i.body[e-1].range[1],i.body[e].range[0],u)),e===t-1&&(r|=32),n=i.body[e].leadingComments&&D?l.generateStatement(i.body[e],r):addIndent(l.generateStatement(i.body[e],r)),u.push(n),endsWithLineTerminator(toSourceNodeWhenNeeded(n).toString())||D&&e<t-1&&i.body[e+1].leadingComments||u.push(p),!D||e!==t-1||i.body[e].trailingComments||generateBlankLines(i.body[e].range[1],i.range[1],u)}),u.push([f,"}"]),u},BreakStatement:function(e,t){return e.label?"break "+e.label.name+this.semicolon(t):"break"+this.semicolon(t)},ContinueStatement:function(e,t){return e.label?"continue "+e.label.name+this.semicolon(t):"continue"+this.semicolon(t)},ClassBody:function(r,e){var i=["{",p],s=this;return withIndent(function(e){for(var t=0,n=r.body.length;t<n;++t)i.push(e),i.push(s.generateExpression(r.body[t],E.Sequence,x)),t+1<n&&i.push(p)}),endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())||i.push(p),i.push(f),i.push("}"),i},ClassDeclaration:function(e,t){var n,r=["class"];return e.id&&(r=join(r,this.generateExpression(e.id,E.Sequence,x))),e.superClass&&(n=join("extends",this.generateExpression(e.superClass,E.Unary,x)),r=join(r,n)),r.push(d),r.push(this.generateStatement(e.body,33)),r},DirectiveStatement:function(e,t){return y.raw&&e.raw?e.raw+this.semicolon(t):function escapeDirective(e){for(var t,n="double"===c?'"':"'",r=0,i=e.length;r<i;++r){if(39===(t=e.charCodeAt(r))){n='"';break}if(34===t){n="'";break}92===t&&++r}return n+e+n}(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,t){var n=join("do",this.maybeBlock(e.body,b));return join(this.maybeBlockSuffix(e.body,n),["while"+d+"(",this.generateExpression(e.test,E.Sequence,x),")"+this.semicolon(t)])},CatchClause:function(t,e){var n,r=this;return withIndent(function(){var e;t.param?(n=["catch"+d+"(",r.generateExpression(t.param,E.Sequence,x),")"],t.guard&&(e=r.generateExpression(t.guard,E.Sequence,x),n.splice(2,0," if ",e))):n=["catch"]}),n.push(this.maybeBlock(t.body,b)),n},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){return";"},ExportDefaultDeclaration:function(e,t){var n=32&t?33:b,r=join(r=["export"],"default");return r=isStatement(e.declaration)?join(r,this.generateStatement(e.declaration,n)):join(r,this.generateExpression(e.declaration,E.Assignment,x)+this.semicolon(t))},ExportNamedDeclaration:function(r,e){var i=["export"],s=this,t=32&e?33:b;return r.declaration?join(i,this.generateStatement(r.declaration,t)):(r.specifiers&&(0===r.specifiers.length?i=join(i,"{"+d+"}"):r.specifiers[0].type===S.ExportBatchSpecifier?i=join(i,this.generateExpression(r.specifiers[0],E.Sequence,x)):(i=join(i,"{"),withIndent(function(e){var t,n;for(i.push(p),t=0,n=r.specifiers.length;t<n;++t)i.push(e),i.push(s.generateExpression(r.specifiers[t],E.Sequence,x)),t+1<n&&i.push(","+p)}),endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())||i.push(p),i.push(f+"}")),r.source?i=join(i,["from"+d,this.generateExpression(r.source,E.Sequence,x),this.semicolon(e)]):i.push(this.semicolon(e))),i)},ExportAllDeclaration:function(e,t){return["export"+d,"*"+d,"from"+d,this.generateExpression(e.source,E.Sequence,x),this.semicolon(t)]},ExpressionStatement:function(e,t){var n,r;return 123===(r=toSourceNodeWhenNeeded(n=[this.generateExpression(e.expression,E.Sequence,x)]).toString()).charCodeAt(0)||function isClassPrefixed(e){return"class"===e.slice(0,5)&&(123===(e=e.charCodeAt(5))||_.code.isWhiteSpace(e)||_.code.isLineTerminator(e))}(r)||function isFunctionPrefixed(e){return"function"===e.slice(0,8)&&(40===(e=e.charCodeAt(8))||_.code.isWhiteSpace(e)||42===e||_.code.isLineTerminator(e))}(r)||function isAsyncPrefixed(e){var t,n,r;if("async"===e.slice(0,5)&&_.code.isWhiteSpace(e.charCodeAt(5))){for(n=6,r=e.length;n<r&&_.code.isWhiteSpace(e.charCodeAt(n));++n);return n!==r?"function"===e.slice(n,n+8)&&(40===(t=e.charCodeAt(n+8))||_.code.isWhiteSpace(t)||42===t||_.code.isLineTerminator(t)):void 0}}(r)||A&&16&t&&e.expression.type===S.Literal&&"string"==typeof e.expression.value?n=["(",n,")"+this.semicolon(t)]:n.push(this.semicolon(t)),n},ImportDeclaration:function(r,e){var i,s,a=this;return 0===r.specifiers.length?["import",d,this.generateExpression(r.source,E.Sequence,x),this.semicolon(e)]:(i=["import"],s=0,r.specifiers[s].type===S.ImportDefaultSpecifier&&(i=join(i,[this.generateExpression(r.specifiers[s],E.Sequence,x)]),++s),r.specifiers[s]&&(0!==s&&i.push(","),r.specifiers[s].type===S.ImportNamespaceSpecifier?i=join(i,[d,this.generateExpression(r.specifiers[s],E.Sequence,x)]):(i.push(d+"{"),r.specifiers.length-s==1?(i.push(d),i.push(this.generateExpression(r.specifiers[s],E.Sequence,x)),i.push(d+"}"+d)):(withIndent(function(e){var t,n;for(i.push(p),t=s,n=r.specifiers.length;t<n;++t)i.push(e),i.push(a.generateExpression(r.specifiers[t],E.Sequence,x)),t+1<n&&i.push(","+p)}),endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())||i.push(p),i.push(f+"}"+d)))),i=join(i,["from"+d,this.generateExpression(r.source,E.Sequence,x),this.semicolon(e)]))},VariableDeclarator:function(e,t){t=1&t?x:6;return e.init?[this.generateExpression(e.id,E.Assignment,t),d,"=",d,this.generateExpression(e.init,E.Assignment,t)]:this.generatePattern(e.id,E.Assignment,t)},VariableDeclaration:function(e,t){var n,r,i,s,a,o=this;function block(){for(s=e.declarations[0],y.comment&&s.leadingComments?(n.push("\n"),n.push(addIndent(o.generateStatement(s,a)))):(n.push(d||" "),n.push(o.generateStatement(s,a))),r=1,i=e.declarations.length;r<i;++r)s=e.declarations[r],y.comment&&s.leadingComments?(n.push(","+p),n.push(addIndent(o.generateStatement(s,a)))):(n.push(","+d),n.push(o.generateStatement(s,a)))}return n=[e.kind],a=1&t?b:0,1<e.declarations.length?withIndent(block):block(),n.push(this.semicolon(t)),n},ThrowStatement:function(e,t){return[join("throw",this.generateExpression(e.argument,E.Sequence,x)),this.semicolon(t)]},TryStatement:function(e,t){var n,r,i,s=["try",this.maybeBlock(e.block,b)];if(s=this.maybeBlockSuffix(e.block,s),e.handlers)for(n=0,r=e.handlers.length;n<r;++n)s=join(s,this.generateStatement(e.handlers[n],b)),!e.finalizer&&n+1===r||(s=this.maybeBlockSuffix(e.handlers[n].body,s));else{for(n=0,r=(i=e.guardedHandlers||[]).length;n<r;++n)s=join(s,this.generateStatement(i[n],b)),!e.finalizer&&n+1===r||(s=this.maybeBlockSuffix(i[n].body,s));if(e.handler)if(Array.isArray(e.handler))for(n=0,r=e.handler.length;n<r;++n)s=join(s,this.generateStatement(e.handler[n],b)),!e.finalizer&&n+1===r||(s=this.maybeBlockSuffix(e.handler[n].body,s));else s=join(s,this.generateStatement(e.handler,b)),e.finalizer&&(s=this.maybeBlockSuffix(e.handler.body,s))}return s=e.finalizer?join(s,["finally",this.maybeBlock(e.finalizer,b)]):s},SwitchStatement:function(e,t){var n,r,i,s,a,o=this;if(withIndent(function(){n=["switch"+d+"(",o.generateExpression(e.discriminant,E.Sequence,x),")"+d+"{"+p]}),e.cases)for(a=b,i=0,s=e.cases.length;i<s;++i)i===s-1&&(a|=32),r=addIndent(this.generateStatement(e.cases[i],a)),n.push(r),endsWithLineTerminator(toSourceNodeWhenNeeded(r).toString())||n.push(p);return n.push([f,"}"]),n},SwitchCase:function(e,t){var n,r,i,s,a,o=this;return withIndent(function(){for(n=e.test?[join("case",o.generateExpression(e.test,E.Sequence,x)),":"]:["default:"],i=0,(s=e.consequent.length)&&e.consequent[0].type===S.BlockStatement&&(r=o.maybeBlock(e.consequent[0],b),n.push(r),i=1),i===s||endsWithLineTerminator(toSourceNodeWhenNeeded(n).toString())||n.push(p),a=b;i<s;++i)i===s-1&&32&t&&(a|=32),r=addIndent(o.generateStatement(e.consequent[i],a)),n.push(r),i+1===s||endsWithLineTerminator(toSourceNodeWhenNeeded(r).toString())||n.push(p)}),n},IfStatement:function(e,t){var n,r,i=this;return withIndent(function(){n=["if"+d+"(",i.generateExpression(e.test,E.Sequence,x),")"]}),r=b,32&t&&(r|=32),e.alternate?(n.push(this.maybeBlock(e.consequent,b)),n=this.maybeBlockSuffix(e.consequent,n),n=e.alternate.type===S.IfStatement?join(n,["else ",this.generateStatement(e.alternate,r)]):join(n,join("else",this.maybeBlock(e.alternate,r)))):n.push(this.maybeBlock(e.consequent,r)),n},ForStatement:function(e,t){var n,r=this;return withIndent(function(){n=["for"+d+"("],e.init?e.init.type===S.VariableDeclaration?n.push(r.generateStatement(e.init,0)):(n.push(r.generateExpression(e.init,E.Sequence,6)),n.push(";")):n.push(";"),e.test&&(n.push(d),n.push(r.generateExpression(e.test,E.Sequence,x))),n.push(";"),e.update&&(n.push(d),n.push(r.generateExpression(e.update,E.Sequence,x))),n.push(")")}),n.push(this.maybeBlock(e.body,32&t?33:b)),n},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,32&t?33:b)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,32&t?33:b)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,32&t?33:b)]},Program:function(e,t){for(var n,r=e.body.length,i=[g&&0<r?"\n":""],s=17,a=0;a<r;++a)g||a!==r-1||(s|=32),D&&(0!==a||e.body[0].leadingComments||generateBlankLines(e.range[0],e.body[a].range[0],i),0<a)&&(e.body[a-1].trailingComments||e.body[a].leadingComments||generateBlankLines(e.body[a-1].range[1],e.body[a].range[0],i)),n=addIndent(this.generateStatement(e.body[a],s)),i.push(n),a+1<r&&!endsWithLineTerminator(toSourceNodeWhenNeeded(n).toString())&&(D&&e.body[a+1].leadingComments||i.push(p)),!D||a!==r-1||e.body[a].trailingComments||generateBlankLines(e.body[a].range[1],e.range[1],i);return i},FunctionDeclaration:function(e,t){return[generateAsyncPrefix(e,!0),"function",generateStarSuffix(e)||d||" ",e.id?generateIdentifier(e.id):"",this.generateFunctionBody(e)]},ReturnStatement:function(e,t){return e.argument?[join("return",this.generateExpression(e.argument,E.Sequence,x)),this.semicolon(t)]:["return"+this.semicolon(t)]},WhileStatement:function(e,t){var n,r=this;return withIndent(function(){n=["while"+d+"(",r.generateExpression(e.test,E.Sequence,x),")"]}),n.push(this.maybeBlock(e.body,32&t?33:b)),n},WithStatement:function(e,t){var n,r=this;return withIndent(function(){n=["with"+d+"(",r.generateExpression(e.object,E.Sequence,x),")"]}),n.push(this.maybeBlock(e.body,32&t?33:b)),n}}),merge(CodeGenerator.prototype,CodeGenerator.Expression={SequenceExpression:function(e,t,n){var r,i,s;for(E.Sequence<t&&(n|=1),r=[],i=0,s=e.expressions.length;i<s;++i)r.push(this.generateExpression(e.expressions[i],E.Assignment,n)),i+1<s&&r.push(","+d);return parenthesize(r,E.Sequence,t)},AssignmentExpression:function(e,t,n){return this.generateAssignment(e.left,e.right,e.operator,t,n)},ArrowFunctionExpression:function(e,t,n){return parenthesize(this.generateFunctionBody(e),E.ArrowFunction,t)},ConditionalExpression:function(e,t,n){return E.Conditional<t&&(n|=1),parenthesize([this.generateExpression(e.test,E.LogicalOR,n),d+"?"+d,this.generateExpression(e.consequent,E.Assignment,n),d+":"+d,this.generateExpression(e.alternate,E.Assignment,n)],E.Conditional,t)},LogicalExpression:function(e,t,n){return this.BinaryExpression(e,t,n)},BinaryExpression:function(e,t,n){var r,i=F[e.operator],s="**"===e.operator?E.Postfix:i,a="**"===e.operator?i:i+1;return i<t&&(n|=1),r=47===(r=(s=this.generateExpression(e.left,s,n)).toString()).charCodeAt(r.length-1)&&_.code.isIdentifierPartES5(e.operator.charCodeAt(0))?[s,d||" ",e.operator]:join(s,e.operator),s=this.generateExpression(e.right,a,n),"/"===e.operator&&"/"===s.toString().charAt(0)||"<"===e.operator.slice(-1)&&"!--"===s.toString().slice(0,3)?(r.push(d||" "),r.push(s)):r=join(r,s),"in"!==e.operator||1&n?parenthesize(r,i,t):["(",r,")"]},CallExpression:function(e,t,n){var r,i,s=[this.generateExpression(e.callee,E.Call,3)];for(e.optional&&s.push("?."),s.push("("),r=0,i=e.arguments.length;r<i;++r)s.push(this.generateExpression(e.arguments[r],E.Assignment,x)),r+1<i&&s.push(","+d);return s.push(")"),2&n?parenthesize(s,E.Call,t):["(",s,")"]},ChainExpression:function(e,t,n){return E.OptionalChaining<t&&(n|=2),parenthesize(this.generateExpression(e.expression,E.OptionalChaining,n),E.OptionalChaining,t)},NewExpression:function(e,t,n){var r,i,s=e.arguments.length,a=4&n&&!u&&0===s?5:1,o=join("new",this.generateExpression(e.callee,E.New,a));if(!(4&n)||u||0<s){for(o.push("("),r=0,i=s;r<i;++r)o.push(this.generateExpression(e.arguments[r],E.Assignment,x)),r+1<i&&o.push(","+d);o.push(")")}return parenthesize(o,E.New,t)},MemberExpression:function(e,t,n){var r=[this.generateExpression(e.object,E.Call,2&n?3:1)];return e.computed?(e.optional&&r.push("?."),r.push("["),r.push(this.generateExpression(e.property,E.Sequence,2&n?x:5)),r.push("]")):(e.optional||e.object.type!==S.Literal||"number"!=typeof e.object.value||(n=toSourceNodeWhenNeeded(r).toString()).indexOf(".")<0&&!/[eExX]/.test(n)&&_.code.isDecimalDigit(n.charCodeAt(n.length-1))&&!(2<=n.length&&48===n.charCodeAt(0))&&r.push(" "),r.push(e.optional?"?.":"."),r.push(generateIdentifier(e.property))),parenthesize(r,E.Member,t)},MetaProperty:function(e,t,n){var r=[];return r.push("string"==typeof e.meta?e.meta:generateIdentifier(e.meta)),r.push("."),r.push("string"==typeof e.property?e.property:generateIdentifier(e.property)),parenthesize(r,E.Member,t)},UnaryExpression:function(e,t,n){var r,i,s=this.generateExpression(e.argument,E.Unary,x);return""===d?r=join(e.operator,s):(r=[e.operator],2<e.operator.length?r=join(r,s):(e=(e=toSourceNodeWhenNeeded(r).toString()).charCodeAt(e.length-1),i=s.toString().charCodeAt(0),((43===e||45===e)&&e===i||_.code.isIdentifierPartES5(e)&&_.code.isIdentifierPartES5(i))&&r.push(d||" "),r.push(s))),parenthesize(r,E.Unary,t)},YieldExpression:function(e,t,n){var r=e.delegate?"yield*":"yield";return parenthesize(r=e.argument?join(r,this.generateExpression(e.argument,E.Yield,x)):r,E.Yield,t)},AwaitExpression:function(e,t,n){return parenthesize(join(e.all?"await*":"await",this.generateExpression(e.argument,E.Await,x)),E.Await,t)},UpdateExpression:function(e,t,n){return e.prefix?parenthesize([e.operator,this.generateExpression(e.argument,E.Unary,x)],E.Unary,t):parenthesize([this.generateExpression(e.argument,E.Postfix,x),e.operator],E.Postfix,t)},FunctionExpression:function(e,t,n){var r=[generateAsyncPrefix(e,!0),"function"];return e.id?(r.push(generateStarSuffix(e)||d||" "),r.push(generateIdentifier(e.id))):r.push(generateStarSuffix(e)||d),r.push(this.generateFunctionBody(e)),r},ArrayPattern:function(e,t,n){return this.ArrayExpression(e,t,n,!0)},ArrayExpression:function(r,e,t,n){var i,s,a=this;return r.elements.length?(s=!n&&1<r.elements.length,i=["[",s?p:""],withIndent(function(e){for(var t=0,n=r.elements.length;t<n;++t)r.elements[t]?(i.push(s?e:""),i.push(a.generateExpression(r.elements[t],E.Assignment,x))):(s&&i.push(e),t+1===n&&i.push(",")),t+1<n&&i.push(","+(s?p:d))}),s&&!endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())&&i.push(p),i.push(s?f:""),i.push("]"),i):"[]"},RestElement:function(e,t,n){return"..."+this.generatePattern(e.argument)},ClassExpression:function(e,t,n){var r,i=["class"];return e.id&&(i=join(i,this.generateExpression(e.id,E.Sequence,x))),e.superClass&&(r=join("extends",this.generateExpression(e.superClass,E.Unary,x)),i=join(i,r)),i.push(d),i.push(this.generateStatement(e.body,33)),i},MethodDefinition:function(e,t,n){var r=e.static?["static"+d]:[],e="get"===e.kind||"set"===e.kind?[join(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]:[generateMethodPrefix(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)];return join(r,e)},Property:function(e,t,n){return"get"===e.kind||"set"===e.kind?[e.kind,d||" ",this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:e.shorthand?"AssignmentPattern"===e.value.type?this.AssignmentPattern(e.value,E.Sequence,x):this.generatePropertyKey(e.key,e.computed):e.method?[generateMethodPrefix(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]:[this.generatePropertyKey(e.key,e.computed),":"+d,this.generateExpression(e.value,E.Assignment,x)]},ObjectExpression:function(r,e,t){var i,s,a,o=this;return r.properties.length?(i=1<r.properties.length,withIndent(function(){a=o.generateExpression(r.properties[0],E.Sequence,x)}),i||function hasLineTerminator(e){return/[\r\n]/g.test(e)}(toSourceNodeWhenNeeded(a).toString())?(withIndent(function(e){var t,n;if(s=["{",p,e,a],i)for(s.push(","+p),t=1,n=r.properties.length;t<n;++t)s.push(e),s.push(o.generateExpression(r.properties[t],E.Sequence,x)),t+1<n&&s.push(","+p)}),endsWithLineTerminator(toSourceNodeWhenNeeded(s).toString())||s.push(p),s.push(f),s.push("}"),s):["{",d,a,d,"}"]):"{}"},AssignmentPattern:function(e,t,n){return this.generateAssignment(e.left,e.right,"=",t,n)},ObjectPattern:function(r,e,t){var i,n,s,a,o,u=this;if(!r.properties.length)return"{}";if(a=!1,1===r.properties.length)(o=r.properties[0]).type===S.Property&&o.value.type!==S.Identifier&&(a=!0);else for(n=0,s=r.properties.length;n<s;++n)if((o=r.properties[n]).type===S.Property&&!o.shorthand){a=!0;break}return i=["{",a?p:""],withIndent(function(e){for(var t=0,n=r.properties.length;t<n;++t)i.push(a?e:""),i.push(u.generateExpression(r.properties[t],E.Sequence,x)),t+1<n&&i.push(","+(a?p:d))}),a&&!endsWithLineTerminator(toSourceNodeWhenNeeded(i).toString())&&i.push(p),i.push(a?f:""),i.push("}"),i},ThisExpression:function(e,t,n){return"this"},Super:function(e,t,n){return"super"},Identifier:generateIdentifier,ImportDefaultSpecifier:function(e,t,n){return generateIdentifier(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,n){var r=["*"],e=e.id||e.local;return e&&r.push(d+"as"+(d||" ")+generateIdentifier(e)),r},ImportSpecifier:function(e,t,n){var r=e.imported,i=[r.name],e=e.local;return e&&e.name!==r.name&&i.push((d||" ")+"as"+(d||" ")+generateIdentifier(e)),i},ExportSpecifier:function(e,t,n){var r=e.local,i=[r.name],e=e.exported;return e&&e.name!==r.name&&i.push((d||" ")+"as"+(d||" ")+generateIdentifier(e)),i},Literal:function(e,t,n){var r;if(e.hasOwnProperty("raw")&&s&&y.raw)try{if((r=s(e.raw).body[0].expression).type===S.Literal&&r.value===e.value)return e.raw}catch(e){}return e.regex?"/"+e.regex.pattern+"/"+e.regex.flags:null===e.value?"null":"string"==typeof e.value?escapeString(e.value):"number"==typeof e.value?function generateNumber(e){var t,n,r,i,s;if(e!=e)throw new Error("Numeric literal whose value is NaN");if(e<0||0===e&&1/e<0)throw new Error("Numeric literal whose value is negative");if(e===1/0)return l?"null":a?"1e400":"1e+400";if(t=""+e,a&&!(t.length<3)){for(n=t.indexOf("."),l||48!==t.charCodeAt(0)||1!==n||(n=0,t=t.slice(1)),t=(r=t).replace("e+","e"),(i=0)<(s=r.indexOf("e"))&&(i=+r.slice(s+1),r=r.slice(0,s)),0<=n&&(i-=r.length-n-1,r=+(r.slice(0,n)+r.slice(n+1))+""),s=0;48===r.charCodeAt(r.length+s-1);)--s;0!==s&&(i-=s,r=r.slice(0,s)),0!==i&&(r+="e"+i),(r.length<t.length||o&&1e12<e&&Math.floor(e)===e&&(r="0x"+e.toString(16)).length<t.length)&&+r===e&&(t=r)}return t}(e.value):"boolean"==typeof e.value?e.value?"true":"false":function generateRegExp(e){var t,n,r,i,s,a,o=e.toString();if(e.source){if(!(t=o.match(/\/([^/]*)$/)))return o;for(t=t[1],o="",a=s=!1,n=0,r=e.source.length;n<r;++n)i=e.source.charCodeAt(n),a=a?(o+=escapeRegExpCharacter(i,a),!1):(s?93===i&&(s=!1):47===i?o+="\\":91===i&&(s=!0),o+=escapeRegExpCharacter(i,a),92===i);return"/"+o+"/"+t}return o}(e.value)},GeneratorExpression:function(e,t,n){return this.ComprehensionExpression(e,t,n)},ComprehensionExpression:function(e,t,n){var r,i,s,a=this,o=e.type===S.GeneratorExpression?["("]:["["];return y.moz.comprehensionExpressionStartsWithAssignment&&(s=this.generateExpression(e.body,E.Assignment,x),o.push(s)),e.blocks&&withIndent(function(){for(r=0,i=e.blocks.length;r<i;++r)s=a.generateExpression(e.blocks[r],E.Sequence,x),0<r||y.moz.comprehensionExpressionStartsWithAssignment?o=join(o,s):o.push(s)}),e.filter&&(o=join(o,"if"+d),s=this.generateExpression(e.filter,E.Sequence,x),o=join(o,["(",s,")"])),y.moz.comprehensionExpressionStartsWithAssignment||(s=this.generateExpression(e.body,E.Assignment,x),o=join(o,s)),o.push(e.type===S.GeneratorExpression?")":"]"),o},ComprehensionBlock:function(e,t,n){var r=e.left.type===S.VariableDeclaration?[e.left.kind,d||" ",this.generateStatement(e.left.declarations[0],0)]:this.generateExpression(e.left,E.Call,x);return r=join(r,e.of?"of":"in"),r=join(r,this.generateExpression(e.right,E.Sequence,x)),["for"+d+"(",r,")"]},SpreadElement:function(e,t,n){return["...",this.generateExpression(e.argument,E.Assignment,x)]},TaggedTemplateExpression:function(e,t,n){var r=3;return parenthesize([this.generateExpression(e.tag,E.Call,r=2&n?r:1),this.generateExpression(e.quasi,E.Primary,4)],E.TaggedTemplate,t)},TemplateElement:function(e,t,n){return e.value.raw},TemplateLiteral:function(e,t,n){for(var r=["`"],i=0,s=e.quasis.length;i<s;++i)r.push(this.generateExpression(e.quasis[i],E.Primary,x)),i+1<s&&(r.push("${"+d),r.push(this.generateExpression(e.expressions[i],E.Sequence,x)),r.push(d+"}"));return r.push("`"),r},ModuleSpecifier:function(e,t,n){return this.Literal(e,t,n)},ImportExpression:function(e,t,n){return parenthesize(["import(",this.generateExpression(e.source,E.Assignment,x),")"],E.Call,t)}}),CodeGenerator.prototype.generateExpression=function(e,t,n){var r=e.type||S.Property;return y.verbatim&&e.hasOwnProperty(y.verbatim)?function generateVerbatim(e,t){var n=e[y.verbatim],r="string"==typeof n?parenthesize(generateVerbatimString(n),E.Sequence,t):parenthesize(r=generateVerbatimString(n.content),null!=n.precedence?n.precedence:E.Sequence,t);return toSourceNodeWhenNeeded(r,e)}(e,t):(r=this[r](e,t,n),toSourceNodeWhenNeeded(r=y.comment?addComments(e,r):r,e))},e={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!(CodeGenerator.prototype.generateStatement=function(e,t){var t=this[e.type](e,t),n=toSourceNodeWhenNeeded(t=y.comment?addComments(e,t):t).toString();return e.type!==S.Program||g||""!==p||"\n"!==n.charAt(n.length-1)||(t=v?toSourceNodeWhenNeeded(t).replaceRight(/\s+$/,""):n.replace(/\s+$/,"")),toSourceNodeWhenNeeded(t,e)}),semicolons:!1},t=getDefaultOptions().format,B.version=T("./package.json").version,B.generate=function generate(e,t){var n,r=getDefaultOptions();return f=null!=t?("string"==typeof t.indent&&(r.format.indent.style=t.indent),"number"==typeof t.base&&(r.format.indent.base=t.base),t=updateDeeply(r,t),m=t.format.indent.style,"string"==typeof t.base?t.base:stringRepeat(m,t.format.indent.base)):stringRepeat(m=(t=r).format.indent.style,t.format.indent.base),l=t.format.json,a=t.format.renumber,o=!l&&t.format.hexadecimal,c=l?"double":t.format.quotes,h=t.format.escapeless,p=t.format.newline,d=t.format.space,t.format.compact&&(p=d=m=f=""),u=t.format.parentheses,w=t.format.semicolons,g=t.format.safeConcatenation,A=t.directive,s=l?null:t.parse,v=t.sourceMap,C=t.sourceCode,D=t.format.preserveBlankLines&&null!==C,y=t,v&&(i=(B.browser?k.sourceMap:T("source-map")).SourceNode),r=generateInternal(e),v?(n=r.toStringWithSourceMap({file:t.file,sourceRoot:t.sourceMapRoot}),t.sourceContent&&n.map.setSourceContent(t.sourceMap,t.sourceContent),t.sourceMapWithCode?n:n.map.toString()):(n={code:r.toString(),map:null},t.sourceMapWithCode?n:n.code)},B.attachComments=n.attachComments,B.Precedence=updateDeeply({},E),B.browser=!1,B.FORMAT_MINIFY=e,B.FORMAT_DEFAULTS=t}()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./package.json":9,estraverse:62,esutils:66,"source-map":77}],9:[function(e,t,n){t.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:"2.0.0",engines:{node:">=6.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^5.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies:{"source-map":"~0.6.1"},devDependencies:{acorn:"^7.3.1",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^4.2.0","chai-exclude":"^2.0.2","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}},{}],10:[function(e,t,i){!function(n,r){"use strict";"function"==typeof define&&define.amd?define("escope",["exports","estraverse"],function(e,t){n(e,r,t)}):void 0!==i?n(i,r,e("estraverse")):n(function namespace(e,t){for(var n,r=e.split("."),i=0,s=r.length;i<s;++i)n=r[i],t=t.hasOwnProperty(n)?t[n]:t[n]={};return t}("escope",r),r,r.estraverse)}(function(e,t,n){"use strict";var o,r,a,i,u;function assert(e,t){if(!e)throw new Error(t)}function Reference(e,t,n,r,i){this.identifier=e,this.from=t,this.tainted=!1,this.resolved=null,this.flag=n,this.isWrite()&&(this.writeExpr=r),this.__maybeImplicitGlobal=i}function Variable(e,t){this.name=e,this.identifiers=[],this.references=[],this.defs=[],this.tainted=!1,this.stack=!0,this.scope=t}function Scope(e,t){this.type=e.type===o.CatchClause?"catch":e.type===o.WithStatement?"with":e.type===o.Program?"global":"function",this.set=new r,this.taints=new r,this.dynamic="global"===this.type||"with"===this.type,this.block=e,this.through=[],this.variables=[],this.references=[],this.left=[],this.variableScope="global"===this.type||"function"===this.type?this:a.variableScope,this.functionExpressionScope=!1,this.directCallToEvalScope=!1,this.thisFound=!1,"function"===this.type&&e.body,t.naming?(this.__define(e.id,{type:Variable.FunctionName,name:e.id,node:e}),this.functionExpressionScope=!0):("function"===this.type&&(t=new Variable("arguments",this),this.taints.set("arguments",!0),this.set.set("arguments",t),this.variables.push(t)),e.type===o.FunctionExpression&&e.id&&new Scope(e,{naming:!0})),this.upper=a,this.isStrict=function isStrictScope(e,t){var n,r,i,s,a;if(e.upper&&e.upper.isStrict)return!0;if("function"===e.type)n=t.body;else{if("global"!==e.type)return!1;n=t}if(u.directive){for(r=0,i=n.body.length;r<i&&"DirectiveStatement"===(s=n.body[r]).type;++r)if('"use strict"'===s.raw||"'use strict'"===s.raw)return!0}else for(r=0,i=n.body.length;r<i&&(s=n.body[r]).type===o.ExpressionStatement&&((a=s.expression).type===o.Literal&&"string"==typeof a.value);++r)if(null!=a.raw){if('"use strict"'===a.raw||"'use strict'"===a.raw)return!0}else if("use strict"===a.value)return!0;return!1}(this,e),this.childScopes=[],a&&a.childScopes.push(this),"global"===(a=this).type&&(this.implicit={set:new r,variables:[]}),i.push(this)}function ScopeManager(e){this.scopes=e,this.attached=!1}o=n.Syntax,void 0!==t.Map?r=t.Map:((r=function Map(){this.__data={}}).prototype.get=function MapGet(e){if(this.__data.hasOwnProperty(e="$"+e))return this.__data[e]},r.prototype.has=function MapHas(e){return this.__data.hasOwnProperty(e="$"+e)},r.prototype.set=function MapSet(e,t){this.__data[e="$"+e]=t},r.prototype.delete=function MapDelete(e){return delete this.__data[e="$"+e]}),Reference.READ=1,Reference.WRITE=2,Reference.RW=3,Reference.prototype.isStatic=function isStatic(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()},Reference.prototype.isWrite=function isWrite(){return this.flag&Reference.WRITE},Reference.prototype.isRead=function isRead(){return this.flag&Reference.READ},Reference.prototype.isReadOnly=function isReadOnly(){return this.flag===Reference.READ},Reference.prototype.isWriteOnly=function isWriteOnly(){return this.flag===Reference.WRITE},Reference.prototype.isReadWrite=function isReadWrite(){return this.flag===Reference.RW},Variable.CatchClause="CatchClause",Variable.Parameter="Parameter",Variable.FunctionName="FunctionName",Variable.Variable="Variable",Variable.ImplicitGlobalVariable="ImplicitGlobalVariable",Scope.prototype.__close=function __close(){var e,t,n,r,i,s;if(!this.dynamic||u.optimistic)for(e=0,t=this.left.length;e<t;++e)n=this.left[e],this.__resolve(n)||this.__delegateToUpperScope(n);else if("with"===this.type)for(e=0,t=this.left.length;e<t;++e)(n=this.left[e]).tainted=!0,this.__delegateToUpperScope(n);else for(e=0,t=this.left.length;e<t;++e)for(n=this.left[e],r=this;r.through.push(n),r=r.upper;);if("global"===this.type){for(s=[],e=0,t=this.left.length;e<t;++e)(n=this.left[e]).__maybeImplicitGlobal&&!this.set.has(n.identifier.name)&&s.push(n.__maybeImplicitGlobal);for(e=0,t=s.length;e<t;++e)this.__defineImplicit((i=s[e]).left,{type:Variable.ImplicitGlobalVariable,name:i.left,node:i})}this.left=null,a=this.upper},Scope.prototype.__resolve=function __resolve(e){var t=e.identifier.name;return!!this.set.has(t)&&((t=this.set.get(t)).references.push(e),t.stack=t.stack&&e.from.variableScope===this.variableScope,e.tainted&&(t.tainted=!0,this.taints.set(t.name,!0)),e.resolved=t,!0)},Scope.prototype.__delegateToUpperScope=function __delegateToUpperScope(e){this.upper&&this.upper.left.push(e),this.through.push(e)},Scope.prototype.__defineImplicit=function __defineImplicit(e,t){var n,r;e&&e.type===o.Identifier&&(n=e.name,this.implicit.set.has(n)?((r=this.implicit.set.get(n)).identifiers.push(e),r.defs.push(t)):((r=new Variable(n,this)).identifiers.push(e),r.defs.push(t),this.implicit.set.set(n,r),this.implicit.variables.push(r)))},Scope.prototype.__define=function __define(e,t){var n,r;e&&e.type===o.Identifier&&(n=e.name,this.set.has(n)?((r=this.set.get(n)).identifiers.push(e),r.defs.push(t)):((r=new Variable(n,this)).identifiers.push(e),r.defs.push(t),this.set.set(n,r),this.variables.push(r)))},Scope.prototype.__referencing=function __referencing(e,t,n,r){e&&e.type===o.Identifier&&(e=new Reference(e,this,t||Reference.READ,n,r),this.references.push(e),this.left.push(e))},Scope.prototype.__detectEval=function __detectEval(){var e=this;for(this.directCallToEvalScope=!0;e.dynamic=!0,e=e.upper;);},Scope.prototype.__detectThis=function __detectThis(){this.thisFound=!0},Scope.prototype.__isClosed=function isClosed(){return null===this.left},Scope.prototype.resolve=function resolve(e){var t,n,r;for(assert(this.__isClosed(),"scope should be closed"),assert(e.type===o.Identifier,"target should be identifier"),n=0,r=this.references.length;n<r;++n)if((t=this.references[n]).identifier===e)return t;return null},Scope.prototype.isStatic=function isStatic(){return!this.dynamic},Scope.prototype.isArgumentsMaterialized=function isArgumentsMaterialized(){var e;return"function"!==this.type||!this.isStatic()||(assert(e=this.set.get("arguments"),"always have arguments variable"),e.tainted)||0!==e.references.length},Scope.prototype.isThisMaterialized=function isThisMaterialized(){return"function"!==this.type||!this.isStatic()||this.thisFound},Scope.mangledName="__$escope$__",Scope.prototype.attach=function attach(){this.functionExpressionScope||(this.block[Scope.mangledName]=this)},Scope.prototype.detach=function detach(){this.functionExpressionScope||delete this.block[Scope.mangledName]},Scope.prototype.isUsedName=function(e){if(this.set.has(e))return!0;for(var t=0,n=this.through.length;t<n;++t)if(this.through[t].identifier.name===e)return!0;return!1},ScopeManager.prototype.__get=function __get(e){var t,n,r;if(this.attached)return e[Scope.mangledName]||null;if(Scope.isScopeRequired(e))for(t=0,n=this.scopes.length;t<n;++t)if(!(r=this.scopes[t]).functionExpressionScope&&r.block===e)return r;return null},ScopeManager.prototype.acquire=function acquire(e){return this.__get(e)},ScopeManager.prototype.release=function release(e){var t=this.__get(e);if(t)for(t=t.upper;t;){if(!t.functionExpressionScope)return t;t=t.upper}return null},ScopeManager.prototype.attach=function attach(){for(var e=0,t=this.scopes.length;e<t;++e)this.scopes[e].attach();this.attached=!0},ScopeManager.prototype.detach=function detach(){for(var e=0,t=this.scopes.length;e<t;++e)this.scopes[e].detach();this.attached=!1},Scope.isScopeRequired=function isScopeRequired(e){return Scope.isVariableScopeRequired(e)||e.type===o.WithStatement||e.type===o.CatchClause},Scope.isVariableScopeRequired=function isVariableScopeRequired(e){return e.type===o.Program||e.type===o.FunctionExpression||e.type===o.FunctionDeclaration},e.version="1.0.3",e.Reference=Reference,e.Variable=Variable,e.Scope=Scope,e.ScopeManager=ScopeManager,e.analyze=function analyze(e,t){return u=function updateDeeply(e,t){var n,r;function isHashObject(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}for(n in t)t.hasOwnProperty(n)&&(isHashObject(r=t[n])?isHashObject(e[n])?updateDeeply(e[n],r):e[n]=updateDeeply({},r):e[n]=r);return e}(function defaultOptions(){return{optimistic:!1,directive:!1,ecmaVersion:5}}(),t),t=i=[],a=null,n.traverse(e,{enter:function enter(e){var t,n,r;switch(Scope.isScopeRequired(e)&&new Scope(e,{}),e.type){case o.AssignmentExpression:"="===e.operator?a.__referencing(e.left,Reference.WRITE,e.right,!a.isStrict&&null!=e.left.name&&e):a.__referencing(e.left,Reference.RW,e.right),a.__referencing(e.right);break;case o.ArrayExpression:for(t=0,n=e.elements.length;t<n;++t)a.__referencing(e.elements[t]);break;case o.BlockStatement:break;case o.BinaryExpression:a.__referencing(e.left),a.__referencing(e.right);break;case o.BreakStatement:break;case o.CallExpression:for(a.__referencing(e.callee),t=0,n=e.arguments.length;t<n;++t)a.__referencing(e.arguments[t]);u.ignoreEval||e.callee.type!==o.Identifier||"eval"!==e.callee.name||a.variableScope.__detectEval();break;case o.CatchClause:a.__define(e.param,{type:Variable.CatchClause,name:e.param,node:e});break;case o.ConditionalExpression:a.__referencing(e.test),a.__referencing(e.consequent),a.__referencing(e.alternate);break;case o.ContinueStatement:case o.DirectiveStatement:break;case o.DoWhileStatement:a.__referencing(e.test);break;case o.DebuggerStatement:case o.EmptyStatement:break;case o.ExpressionStatement:a.__referencing(e.expression);break;case o.ForStatement:a.__referencing(e.init),a.__referencing(e.test),a.__referencing(e.update);break;case o.ForInStatement:e.left.type===o.VariableDeclaration?a.__referencing(e.left.declarations[0].id,Reference.WRITE,null,!1):a.__referencing(e.left,Reference.WRITE,null,!a.isStrict&&null!=e.left.name&&e),a.__referencing(e.right);break;case o.FunctionDeclaration:for(a.upper.__define(e.id,{type:Variable.FunctionName,name:e.id,node:e}),t=0,n=e.params.length;t<n;++t)a.__define(e.params[t],{type:Variable.Parameter,name:e.params[t],node:e,index:t});break;case o.FunctionExpression:for(t=0,n=e.params.length;t<n;++t)a.__define(e.params[t],{type:Variable.Parameter,name:e.params[t],node:e,index:t});break;case o.Identifier:break;case o.IfStatement:a.__referencing(e.test);break;case o.Literal:case o.LabeledStatement:break;case o.LogicalExpression:a.__referencing(e.left),a.__referencing(e.right);break;case o.MemberExpression:a.__referencing(e.object),e.computed&&a.__referencing(e.property);break;case o.NewExpression:for(a.__referencing(e.callee),t=0,n=e.arguments.length;t<n;++t)a.__referencing(e.arguments[t]);break;case o.ObjectExpression:for(t=0;t<e.properties.length;t++)"init"===e.properties[t].kind&&a.__referencing(e.properties[t].value);break;case o.Program:case o.Property:break;case o.ReturnStatement:a.__referencing(e.argument);break;case o.SequenceExpression:for(t=0,n=e.expressions.length;t<n;++t)a.__referencing(e.expressions[t]);break;case o.SwitchStatement:a.__referencing(e.discriminant);break;case o.SwitchCase:a.__referencing(e.test);break;case o.ThisExpression:a.variableScope.__detectThis();break;case o.ThrowStatement:a.__referencing(e.argument);break;case o.TryStatement:break;case o.UnaryExpression:a.__referencing(e.argument);break;case o.UpdateExpression:a.__referencing(e.argument,Reference.RW,null);break;case o.VariableDeclaration:for(t=0,n=e.declarations.length;t<n;++t)r=e.declarations[t],a.variableScope.__define(r.id,{type:Variable.Variable,name:r.id,node:r,index:t,parent:e}),r.init&&(a.__referencing(r.id,Reference.WRITE,r.init,!1),a.__referencing(r.init));break;case o.VariableDeclarator:break;case o.WhileStatement:a.__referencing(e.test);break;case o.WithStatement:a.upper.__referencing(e.object)}},leave:function leave(e){for(;a&&e===a.block;)a.__close()}}),assert(null===a),u=i=null,new ScopeManager(t)}},this)},{estraverse:11}],11:[function(t,e,n){!function clone(e){"use strict";var n,m,u,r,i,g,y,v,C;function deepCopy(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?deepCopy(n):n);return r}function F(){}function Reference(e,t){this.parent=e,this.key=t}function Element(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function Controller(){}function isNode(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function isProperty(e,t){return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function traverse(e,t){return(new Controller).traverse(e,t)}function extendCommentRange(t,e){var n=function upperBound(e,t){for(var n,r,i=e.length,s=0;i;)t(e[r=s+(n=i>>>1)])?i=n:(s=r+1,i-=1+n);return s}(e,function search(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],n!==e.length&&(t.extendedRange[1]=e[n].range[0]),0<=--n&&(t.extendedRange[0]=e[n].range[1]),t}return m=(m=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.create||function(e){return F.prototype=e,new F},g=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={Break:y={},Skip:v={},Remove:C={}},Reference.prototype.replace=function replace(e){this.parent[this.key]=e},Reference.prototype.remove=function remove(){return m(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},Controller.prototype.path=function path(){var e,t,n,r,i;function addToPath(e,t){if(m(t))for(n=0,r=t.length;n<r;++n)e.push(t[n]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)addToPath(i,this.__leavelist[e].path);return addToPath(i,this.__current.path),i},Controller.prototype.type=function(){return this.current().type||this.__current.wrap},Controller.prototype.parents=function parents(){for(var e=[],t=1,n=this.__leavelist.length;t<n;++t)e.push(this.__leavelist[t].node);return e},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(e,t){var n=void 0,r=this.__current;return this.__current=t,this.__state=null,e&&(n=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=r,n},Controller.prototype.notify=function notify(e){this.__state=e},Controller.prototype.skip=function(){this.notify(v)},Controller.prototype.break=function(){this.notify(y)},Controller.prototype.remove=function(){this.notify(C)},Controller.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=r,t.keys&&(this.__keys=function extend(e,t){for(var n,r=g(t),i=0,s=r.length;i<s;i+=1)e[n=r[i]]=t[n];return e}(i(this.__keys),t.keys))},Controller.prototype.traverse=function traverse(e,t){var n,r,i,s,a,o,u,l,c,h,p,d;for(this.__initialize(e,t),d={},n=this.__worklist,r=this.__leavelist,n.push(new Element(e,null,null,null)),r.push(new Element(null,null,null,null));n.length;)if((i=n.pop())===d){if(i=r.pop(),o=this.__execute(t.leave,i),this.__state===y||o===y)return}else if(i.node){if(o=this.__execute(t.enter,i),this.__state===y||o===y)return;if(n.push(d),r.push(i),this.__state!==v&&o!==v){if(s=i.node,a=i.wrap||s.type,!(h=this.__keys[a])){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=g(s)}for(l=h.length;0<=--l;)if(p=s[u=h[l]])if(m(p)){for(c=p.length;0<=--c;)if(p[c]){if(isProperty(a,h[l]))i=new Element(p[c],[u,c],"Property",null);else{if(!isNode(p[c]))continue;i=new Element(p[c],[u,c],null,null)}n.push(i)}}else isNode(p)&&n.push(new Element(p,u,null,null))}}},Controller.prototype.replace=function replace(e,t){function removeElem(e){var t,n,r,i;if(e.ref.remove())for(n=e.ref.key,i=e.ref.parent,t=s.length;t--;)if((r=s[t]).ref&&r.ref.parent===i){if(r.ref.key<n)break;--r.ref.key}}var s,n,r,i,a,o,u,l,c,h,p,d,f;for(this.__initialize(e,t),p={},s=this.__worklist,n=this.__leavelist,o=new Element(e,null,null,new Reference(d={root:e},"root")),s.push(o),n.push(o);s.length;)if((o=s.pop())===p){if(o=n.pop(),void 0!==(a=this.__execute(t.leave,o))&&a!==y&&a!==v&&a!==C&&o.ref.replace(a),this.__state!==C&&a!==C||removeElem(o),this.__state===y||a===y)return d.root}else{if(void 0!==(a=this.__execute(t.enter,o))&&a!==y&&a!==v&&a!==C&&(o.ref.replace(a),o.node=a),this.__state!==C&&a!==C||(removeElem(o),o.node=null),this.__state===y||a===y)return d.root;if((r=o.node)&&(s.push(p),n.push(o),this.__state!==v)&&a!==v){if(i=o.wrap||r.type,!(c=this.__keys[i])){if(!this.__fallback)throw new Error("Unknown node type "+i+".");c=g(r)}for(u=c.length;0<=--u;)if(h=r[f=c[u]])if(m(h)){for(l=h.length;0<=--l;)if(h[l]){if(isProperty(i,c[u]))o=new Element(h[l],[f,l],"Property",new Reference(h,l));else{if(!isNode(h[l]))continue;o=new Element(h[l],[f,l],null,new Reference(h,l))}s.push(o)}}else isNode(h)&&s.push(new Element(h,f,null,new Reference(r,f)))}}return d.root},e.version=t("./package.json").version,e.Syntax=n,e.traverse=traverse,e.replace=function replace(e,t){return(new Controller).replace(e,t)},e.attachComments=function attachComments(e,t,n){var r,i,s,a,o=[];if(!e.range)throw new Error("attachComments needs range information");if(n.length){for(s=0,i=t.length;s<i;s+=1)o.push(extendCommentRange(deepCopy(t[s]),n));a=0,traverse(e,{enter:function(e){for(var t;a<o.length&&!((t=o[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}}),a=0,traverse(e,{leave:function(e){for(var t;a<o.length&&(t=o[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}})}else if(t.length){for(s=0,i=t.length;s<i;s+=1)(r=deepCopy(t[s])).extendedRange=[0,e.range[0]],o.push(r);e.leadingComments=o}return e},e.VisitorKeys=r,e.VisitorOption=u,e.Controller=Controller,e.cloneEnvironment=function(){return clone({})},e}(n)},{"./package.json":12}],12:[function(e,t,n){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"2.0.0",engines:{node:">=0.10.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/estraverse/raw/master/LICENSE.BSD"}],scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"}}},{}],13:[function(e,t,n){!function(){"use strict";var n,s,a;function escapeString(e){for(var t,n="",r=0,i=(e=void 0===e[0]?a.stringToArray(e):e).length;r<i;r+=1)"'"===(t=e[r])?n+="\\'":0<="\\\n\r\u2028\u2029".indexOf(t)?n+=function escapeDisallowedCharacter(e){var t="\\";switch(e){case"\\":t+="\\";break;case"\n":t+="n";break;case"\r":t+="r";break;case"\u2028":t+="u2028";break;case"\u2029":t+="u2029";break;default:throw new Error("Incorrectly classified character")}return t}(t):n+=" "<=t&&t<="~"?t:function escapeAllowedCharacter(e,t){var n=e.charCodeAt(0),r=n.toString(16),i="\\";switch(e){case"\b":i+="b";break;case"\f":i+="f";break;case"\t":i+="t";break;default:255<n?i+="u"+"0000".slice(r.length)+r:"\0"===e&&"0123456789".indexOf(t)<0?i+="0":i+="\v"===e?"v":"x"+"00".slice(r.length)+r}return i}(t,e[r+1]);return n}function annotateDirective(e,t){t=t.get("destructive",{pathName:n})?e:a.deepCopy(e);return a.traverse(t,{enter:function enter(e,t){var n,r,i;if(e.type===s.Program||e.type===s.BlockStatement&&(t.type===s.FunctionExpression||t.type===s.FunctionDeclaration))for(r=0,i=e.body.length;r<i;++r){if(!function isDirective(e){return e.type===s.ExpressionStatement&&(e=e.expression).type===s.Literal&&"string"==typeof e.value}(n=e.body[r]))return;n.type=s.DirectiveStatement,n.expression.raw?(n.directive=n.expression.raw.substring(1,n.expression.raw.length-1),n.value=n.expression.value,n.raw=n.expression.raw):(n.directive=escapeString(n.expression.value),n.value=n.expression.value,n.raw="'"+n.directive+"'"),delete n.expression}}}),t}n="annotate-directive",a=e("./common"),s=a.Syntax,annotateDirective.passName=n,t.exports=annotateDirective}()},{"./common":14}],14:[function(p,e,d){!function(){"use strict";var s,i,e,t,n,r,a,o,u,l,c,h;function arrayLast(e){return e[e.length-1]}function deepCopy(e){return function deepCopyInternal(e,t){var n,r;for(n in e)0!==n.lastIndexOf("__",0)&&e.hasOwnProperty(n)&&("object"==typeof(r=e[n])&&null!==r&&(r=r instanceof RegExp?new RegExp(r):deepCopyInternal(r,i(r)?[]:{})),t[n]=r);return t}(e,i(e)?[]:{})}function moveLocation(e,t){return null!=e.loc&&(t.loc=deepCopy(e.loc)),t}function isNegative(e){return e==e&&(e<0||0===e&&1/e<0)}function isNumberLiteral(e){return e.type===s.Literal&&"number"==typeof e.value}function isOptimizedArgument(e){return isNumberLiteral(e)&&1===String(e.value).length}function generateNegativeNode(e,t){e={type:s.UnaryExpression,operator:"-",argument:{type:s.Literal,value:-e}};return t?moveLocation(t,e):e}function generateUndefined(e){var t={type:s.UnaryExpression,operator:"void",argument:{type:s.Literal,value:0}};return e?moveLocation(e,t):t}function generateNaN(e){var t={type:s.BinaryExpression,operator:"/",left:{type:s.Literal,value:0},right:{type:s.Literal,value:0}};return e?moveLocation(e,t):t}function isReference(e){e=e.type;return e===s.Identifier||e===s.MemberExpression}a=p("estraverse"),o=p("escope"),u=p("esutils"),s=a.Syntax,i=(i=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},l={}.hasOwnProperty,n=function has(e,t){return l.call(e,t)},c=Array.prototype.slice,e=function arrayFrom(e){return c.call(e)},h=Array.prototype.slice,t=function arrayOf(){return h.call(arguments)},r=Object.is||function sameValue(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},d.deepCopy=deepCopy,d.stringRepeat=function stringRepeat(e,t){var n="";for(t|=0;0<t;t>>>=1,e+=e)1&t&&(n+=e);return n},d.sameValue=r,d.Array={isArray:i,from:e,of:t,last:arrayLast,empty:function arrayEmpty(e){return 0===e.length}},d.Object={isObject:function isObject(e){return"object"==typeof e&&null!==e},has:n},d.Syntax=s,d.traverse=a.traverse,d.replace=a.replace,d.VisitorKeys=a.VisitorKeys,d.VisitorOption=a.VisitorOption,d.assert=function assert(e,t){if(!e)throw new Error(t)},d.unreachable=function unreachable(){throw new Error("Unreachable point. logically broken.")},d.isIdentifier=function isIdentifier(e){return!u.keyword.isKeywordES5(e,!0)&&!u.keyword.isRestrictedWord(e)&&u.keyword.isIdentifierName(e)},d.moveLocation=moveLocation,d.deleteLocation=function deleteLocation(e){return!!e.hasOwnProperty("loc")&&delete e.loc},d.convertToEmptyStatement=function convertToEmptyStatement(e){for(var t=a.VisitorKeys[e.type],n=0,r=t.length;n<r;++n)delete e[t[n]];return e.type=s.EmptyStatement,e},d.mayBeCompletionValue=function mayBeCompletionValue(e,t){var n,r;if(e.type===s.ExpressionStatement)for(n=t.length-1;0<=n;--n,e=r)switch((r=t[n]).type){case s.FunctionExpression:case s.FunctionDeclaration:return!1;case s.BlockStatement:case s.Program:if(arrayLast(r.body)!==e)return!1;break;case s.SwitchCase:if(arrayLast(r.consequent)!==e)return!1}return!0},d.isNegative=isNegative,d.isFunctionBody=function isFunctionBody(e,t){return e.type===s.BlockStatement&&(t.type===s.FunctionDeclaration||t.type===s.FunctionExpression)},d.SpecialNode={generateNegative:generateNegativeNode,isNegative:function isNegativeNode(e){return e.type===s.UnaryExpression&&"-"===e.operator&&isNumberLiteral(e.argument)},generateUndefined:generateUndefined,isUndefined:function isUndefined(e){return e.type===s.UnaryExpression&&"void"===e.operator&&isOptimizedArgument(e.argument)},generateNaN:generateNaN,isNaN:function isNaNNode(e){return!(e.type!==s.BinaryExpression||!isOptimizedArgument(e.left)||!isOptimizedArgument(e.right))&&0===e.left.value&&0===e.right.value},isReference:isReference,canExtractSequence:function canExtractSequence(e,t,n){var r;if(t.type===s.CallExpression)return e.type===s.Identifier?"eval"!==e.name&&(r=n.resolve(e))&&r.isStatic():e.type!==s.MemberExpression;if(t.type===s.UnaryExpression){if("delete"===t.operator)return!isReference(e);if("typeof"===t.operator&&e.type===s.Identifier)return(r=n.resolve(e))&&r.isStatic()}else if(t.type===s.UpdateExpression)return!isReference(e);return!0},generateFromValue:function generateFromValue(e){if("number"==typeof e){if(isNaN(e))return generateNaN();if(isNegative(e))return generateNegativeNode(e)}return void 0===e?generateUndefined():{type:s.Literal,value:e}}},d.delegateVariableDeclarations=function delegateVariableDeclarations(n,e){var r,i=[];return a.traverse(n,{enter:function(e){var t,n,r;if(e.type===s.VariableDeclaration){if("let"!==e.kind&&"const"!==e.kind){for(t=0,n=e.declarations.length;t<n;++t)delete(r=e.declarations[t]).init,i.push(r);return a.VisitorOption.Skip}}else if(o.Scope.isVariableScopeRequired(e))return a.VisitorOption.Skip}}),i.length?(r=null,a.traverse(e.body,{enter:function(e,t){return e===n||o.Scope.isVariableScopeRequired(e)?a.VisitorOption.Skip:e.type===s.VariableDeclaration&&"var"===e.kind&&t.type!==s.ForInStatement?(r=e,a.VisitorOption.Break):void 0}}),r?(r.declarations=r.declarations.concat(i),null):{type:s.VariableDeclaration,kind:"var",declarations:i}):null},d.isScopedDeclaration=function isScopedDeclaration(e){return e.type===s.VariableDeclaration&&("let"===e.kind||"const"===e.kind)||e.type===s.FunctionDeclaration}}()},{escope:10,estraverse:50,esutils:53}],15:[function(t,e,r){!function(){"use strict";var e,c,l,n,h,p;function recover(e,t){return c.traverse(e,{leave:function leave(e){e.type===n.IfStatement&&e.alternate&&e.consequent.type!==n.BlockStatement&&function trailingIf(e){for(;;){switch(e.type){case n.IfStatement:if(!e.alternate)return 1;e=e.alternate;continue;case n.LabeledStatement:case n.ForStatement:case n.ForInStatement:case n.WhileStatement:case n.WithStatement:e=e.body;continue}return}}(e.consequent)&&(e.consequent={type:n.BlockStatement,body:[e.consequent]}),t||e.type!==n.DirectiveStatement||(e.type=n.ExpressionStatement,e.expression=c.moveLocation(e,{type:n.Literal,value:e.value,raw:e.raw}),delete e.directive,delete e.value,delete e.raw)}}),e}function iteration(e,t,n){var r,i,s,a,o,u,l;for(l=n.get("destructive")?e:c.deepCopy(e),o=[],u=[],r=0,i=t.length;r<i;++r)!function addPass(e){(e="function"!=typeof e?e[Object.keys(e)[0]]:e).hasOwnProperty("passName")?e.passName:e.name,u.push(e),o.push(!0)}(t[r]);do{for(a=!1,r=0,i=u.length;r<i;++r)s=u[r],o[r]&&((s=s(l,n)).modified?function fillStatuses(e){for(var t=0,n=o.length;t<n;++t)o[t]=e}(a=!0):o[r]=!1,l=s.result)}while(a);return l}e=t("esshorten"),c=t("./common"),l=t("./options"),h=t("./pass"),p=t("./annotate-directive"),n=c.Syntax,r.version=t("../package.json").version,r.mangle=e.mangle,r.optimize=function optimize(e,t,n){var r,i,s,a,o,u;for(e=p(e,new l({destructive:!1})),null==t&&(t=h.__defaultPipeline),n=new l(n),r=0,i=t.length;r<i;++r)if(o=t[r],c.Array.isArray(o))e=iteration(e,o,n);else if(o.once)for(s=0,a=(u=o.pass).length;s<a;++s)e=u[s](e,n).result;return recover(e,n.get("directive"))},r.pass=h}()},{"../package.json":54,"./annotate-directive":13,"./common":14,"./options":18,"./pass":19,esshorten:56}],16:[function(e,t,n){!function(){"use strict";var s,r;function isConstant(e,t){return e.type===s.Literal?"object"!=typeof e.value||null===e.value||t:e.type===s.UnaryExpression?"void"===e.operator||"delete"===e.operator||"!"===e.operator?isConstant(e.argument,!0):isConstant(e.argument,!1):e.type===s.BinaryExpression?"in"!==e.operator&&"instanceof"!==e.operator&&isConstant(e.left,!1)&&isConstant(e.right,!1):e.type===s.LogicalExpression&&isConstant(e.left,!0)&&isConstant(e.right,!0)}function getConstant(e){return e.type===s.Literal?e.value:e.type===s.UnaryExpression?doUnary(e.operator,getConstant(e.argument)):e.type===s.BinaryExpression?doBinary(e.operator,getConstant(e.left),getConstant(e.right)):e.type===s.LogicalExpression?doLogical(e.operator,getConstant(e.left),getConstant(e.right)):void r.unreachable()}function doLogical(e,t,n){return"||"===e?t||n:"&&"===e?t&&n:void r.unreachable()}function doUnary(e,t){switch(e){case"+":return+t;case"-":return-t;case"~":return~t;case"!":return!t;case"delete":return!0;case"void":return;case"typeof":return typeof t}r.unreachable()}function doBinary(e,t,n){switch(e){case"|":return t|n;case"^":return t^n;case"&":return t&n;case"==":return t==n;case"!=":return t!=n;case"===":return t===n;case"!==":return t!==n;case"<":return t<n;case">":return n<t;case"<=":return t<=n;case">=":return n<=t;case"<<":return t<<n;case">>":return t>>n;case">>>":return t>>>n;case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n}r.unreachable()}r=e("./common"),s=r.Syntax,n.constant={doBinary:doBinary,doUnary:doUnary,doLogical:doLogical,evaluate:getConstant,isConstant:isConstant},n.hasSideEffect=function hasSideEffect(e,i){return function visit(e){var t,n,r;switch(e.type){case s.AssignmentExpression:return!0;case s.ArrayExpression:for(t=0,n=e.elements.length;t<n;++t)if(null!==e.elements[t]&&visit(e.elements[t]))return!0;return!1;case s.BinaryExpression:return!isConstant(e);case s.CallExpression:return!0;case s.ConditionalExpression:return visit(e.test)||visit(e.consequent)||visit(e.alternate);case s.FunctionExpression:return!1;case s.Identifier:return!(r=i.resolve(e))||!r.isStatic();case s.Literal:return!1;case s.LogicalExpression:return visit(e.left)||visit(e.right);case s.MemberExpression:case s.NewExpression:return!0;case s.ObjectExpression:for(t=0,n=e.properties.length;t<n;++t)if(visit(e.properties[t]))return!0;return!1;case s.Property:return visit(e.value);case s.SequenceExpression:for(t=0,n=e.expressions.length;t<n;++t)if(visit(e.expressions[t]))return!0;return!1;case s.ThisExpression:return!1;case s.UnaryExpression:return"void"===e.operator||"delete"===e.operator||"typeof"===e.operator||"!"===e.operator?visit(e.argument):!isConstant(e);case s.UpdateExpression:return!0}return!0}(e)},n.booleanCondition=function booleanCondition(e){var t;switch(e.type){case s.AssignmentExpression:return booleanCondition(e.right);case s.ArrayExpression:return!0;case s.BinaryExpression:return isConstant(e)?!!getConstant(e):null;case s.CallExpression:return null;case s.ConditionalExpression:return!0===(t=booleanCondition(e.test))?booleanCondition(e.consequent):!1===t?booleanCondition(e.alternate):(t=booleanCondition(e.consequent))===booleanCondition(e.alternate)?t:null;case s.FunctionExpression:return!0;case s.Identifier:return null;case s.Literal:return!!getConstant(e);case s.LogicalExpression:return"&&"===e.operator?null===(t=booleanCondition(e.left))?null:!!t&&booleanCondition(e.right):null===(t=booleanCondition(e.left))?null:!!t||booleanCondition(e.right);case s.MemberExpression:return null;case s.NewExpression:case s.ObjectExpression:return!0;case s.Property:return r.unreachable(),null;case s.SequenceExpression:return booleanCondition(r.Array.last(e.expressions));case s.ThisExpression:return null;case s.UnaryExpression:return"void"!==e.operator&&("typeof"===e.operator||("!"===e.operator?null===(t=booleanCondition(e.argument))?null:!t:isConstant(e)?!!getConstant(e):null));case s.UpdateExpression:return null}return null}}()},{"./common":14}],17:[function(e,n,t){!function(t){!function(){!function(){"use strict";var e;void 0!==t.Map?e=t.Map:((e=function Map(){this.__data={}}).prototype.get=function MapGet(e){if(this.__data.hasOwnProperty(e="$"+e))return this.__data[e]},e.prototype.has=function MapHas(e){return this.__data.hasOwnProperty(e="$"+e)},e.prototype.set=function MapSet(e,t){this.__data[e="$"+e]=t},e.prototype.delete=function MapDelete(e){return delete this.__data[e="$"+e]},e.prototype.clear=function MapClear(){this.__data={}},e.prototype.forEach=function MapForEach(e,t){var n,r;for(n in this.__data)this.__data.hasOwnProperty(n)&&(r=n.substring(1),e.call(t,this.__data[n],r,this))},e.prototype.keys=function MapKeys(){var e,t=[];for(e in this.__data)this.__data.hasOwnProperty(e)&&t.push(e.substring(1));return t},e.prototype.values=function MapValues(){var e,t=[];for(e in this.__data)this.__data.hasOwnProperty(e)&&t.push(this.__data[e]);return t},e.prototype.items=function MapItems(){var e,t=[];for(e in this.__data)this.__data.hasOwnProperty(e)&&t.push([e.substring(1),this.__data[e]]);return t}),n.exports=e}()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){!function(){"use strict";var s;function Options(e){var t={destructive:!0,preserveCompletionValue:!1};this.data=null==e?t:function extend(e,t){var n,r,i;for(n in t)s.Object.has(t,n)&&(n in e&&(r=e[n],i=t[n],s.Object.isObject(i))&&s.Object.isObject(r)?e[n]=extend(r,i):e[n]=t[n]);return e}(t,e)}s=e("./common"),Options.prototype.get=function get(e,t){return(null!=t&&s.Object.has(t,"pathName")&&null!=(t=this.data[t.pathName])&&s.Object.has(t,e)?t:this.data)[e]},t.exports=Options}()},{"./common":14}],19:[function(r,e,i){!function(){"use strict";var t,s,e,n,a;function initialize(e,t){var n,r,i;for(s[e]={},n=0,r=t.length;n<r;++n)i=t[n],a.assert(null==s[e][i.passName],"don't create duplicate pass names"),s[e][i.passName]=i;a.assert(null==s.__direct[i.passName],"don't create duplicate pass names"),s.__direct[i.passName]=i}a=r("./common"),t=r("./query"),s={__direct:{}},e=[r("./pass/hoist-variable-to-arguments"),r("./pass/transform-dynamic-to-static-property-access"),r("./pass/transform-dynamic-to-static-property-definition"),r("./pass/transform-immediate-function-call"),r("./pass/transform-logical-association"),r("./pass/reordering-function-declarations"),r("./pass/remove-unused-label"),r("./pass/remove-empty-statement"),r("./pass/remove-wasted-blocks"),r("./pass/transform-to-compound-assignment"),r("./pass/transform-to-sequence-expression"),r("./pass/transform-branch-to-expression"),r("./pass/transform-typeof-undefined"),r("./pass/reduce-sequence-expression"),r("./pass/reduce-branch-jump"),r("./pass/reduce-multiple-if-statements"),r("./pass/dead-code-elimination"),r("./pass/remove-side-effect-free-expressions"),r("./pass/remove-context-sensitive-expressions"),r("./pass/tree-based-constant-folding"),r("./pass/concatenate-variable-definition"),r("./pass/drop-variable-definition"),r("./pass/remove-unreachable-branch"),r("./pass/eliminate-duplicate-function-declarations")],n=[r("./post/transform-static-to-dynamic-property-access"),r("./post/transform-infinity"),r("./post/rewrite-boolean"),r("./post/rewrite-conditional-expression"),r("./post/omit-parens-in-void-context-iife")],initialize("pass",e),initialize("post",n),i.require=function passRequire(e){return a.Object.has(s.__direct,e)?s.__direct[e]:t.get(s,e.split("/"))},i.Registry=s,i.__defaultPipeline=[e,{once:!0,pass:n}]}()},{"./common":14,"./pass/concatenate-variable-definition":20,"./pass/dead-code-elimination":21,"./pass/drop-variable-definition":22,"./pass/eliminate-duplicate-function-declarations":23,"./pass/hoist-variable-to-arguments":24,"./pass/reduce-branch-jump":25,"./pass/reduce-multiple-if-statements":26,"./pass/reduce-sequence-expression":27,"./pass/remove-context-sensitive-expressions":28,"./pass/remove-empty-statement":29,"./pass/remove-side-effect-free-expressions":30,"./pass/remove-unreachable-branch":31,"./pass/remove-unused-label":32,"./pass/remove-wasted-blocks":33,"./pass/reordering-function-declarations":34,"./pass/transform-branch-to-expression":35,"./pass/transform-dynamic-to-static-property-access":36,"./pass/transform-dynamic-to-static-property-definition":37,"./pass/transform-immediate-function-call":38,"./pass/transform-logical-association":39,"./pass/transform-to-compound-assignment":40,"./pass/transform-to-sequence-expression":41,"./pass/transform-typeof-undefined":42,"./pass/tree-based-constant-folding":43,"./post/omit-parens-in-void-context-iife":44,"./post/rewrite-boolean":45,"./post/rewrite-conditional-expression":46,"./post/transform-infinity":47,"./post/transform-static-to-dynamic-property-access":48,"./query":49}],20:[function(e,t,n){!function(){"use strict";var n,l,r,c;function concatenateVariableDefinition(e,t){t=t.get("destructive",{pathName:n})?e:r.deepCopy(e);return c=!1,r.traverse(t,{leave:function leave(e){var t,n,r,i,s,a,o,u;if(e.type===l.BlockStatement||e.type===l.Program){for(o=null,u=[],t=0,n=e.body.length;t<n;++t)if((s=e.body[t]).type===l.VariableDeclaration&&"var"===s.kind)if(o)for(c=!0,r=0,i=s.declarations.length;r<i;++r)a=s.declarations[r],o.declarations.push(a);else u.push(o=s);else o=null,u.push(s);e.body=u}}}),{result:t,modified:c}}n="concatenate-variable-definition",r=e("../common"),l=r.Syntax,concatenateVariableDefinition.passName=n,t.exports=concatenateVariableDefinition}()},{"../common":14}],21:[function(e,t,n){!function(){"use strict";var n,l,c,h,p;function JumpTarget(e,t,n){this.node=e,this.type=n,this.labels=t.labels||[],t.labels=null}function Jumps(){this.targets=[]}function Status(e){this.current=[],this.upper=e,this.jumps=new Jumps,this.labels=null,this.next()}function Context(e){(e.__$context=this).node=e}function visitLoopBody(e,t){var n=function getForwardLastNode(e){for(;;){switch(e.type){case l.IfStatement:if(e.alternate)return null;e=e.consequent;continue;case l.WithStatement:case l.LabeledStatement:e=e.body;continue;case l.BlockStatement:if(e.body.length){e=c.Array.last(e.body);continue}}return e}}(t);return n&&n.type===l.ContinueStatement&&h.jumps.lookupContinuableTarget(n.label)===e&&(p=!0,c.convertToEmptyStatement(n)),visit(t)}function visit(e){var u=!1;return e?(c.traverse(e,{enter:function enter(e){var t,n,r,i,s,a,o;switch(Status.isRequired(e)&&(h=new Status(h)),u|=!h.isDead(),e.type){case l.Program:return e.body=eliminate(0,e.body),c.VisitorOption.Skip;case l.BlockStatement:return h.jumps.push(new JumpTarget(e,h,JumpTarget.NAMED_ONLY)),e.body=eliminate(0,e.body),h.jumps.pop(),h.resolveJump(e),c.VisitorOption.Skip;case l.BreakStatement:return e.label&&h.labels&&h.labels.indexOf(e.label)?(p=!0,c.convertToEmptyStatement(e)):h.jumpTo(h.jumps.lookupBreakableTarget(e.label)),c.VisitorOption.Skip;case l.CatchClause:return u|=visit(e.body),c.VisitorOption.Skip;case l.ContinueStatement:return h.jumpTo(h.jumps.lookupContinuableTarget(e.label)),c.VisitorOption.Skip;case l.DoWhileStatement:return h.jumps.push(new JumpTarget(e,h,JumpTarget.ITERATION)),u|=visitLoopBody(e,e.body),h.jumps.pop(),u|=visit(e.test),h.resolveJump(e),h.revive(),c.VisitorOption.Skip;case l.DebuggerStatement:case l.EmptyStatement:return c.VisitorOption.Skip;case l.ExpressionStatement:break;case l.ForStatement:return u=(u|=visit(e.init))|visit(e.test),h.jumps.push(new JumpTarget(e,h,JumpTarget.ITERATION)),u|=visitLoopBody(e,e.body),h.jumps.pop(),u|=visit(e.update),h.resolveJump(e),h.revive(),c.VisitorOption.Skip;case l.ForInStatement:return u=(u|=visit(e.left))|visit(e.right),h.jumps.push(new JumpTarget(e,h,JumpTarget.ITERATION)),u|=visitLoopBody(e,e.body),h.jumps.pop(),h.resolveJump(e),h.revive(),c.VisitorOption.Skip;case l.IfStatement:return u=(u|=visit(e.test))|visit(e.consequent),e.alternate?(i=!h.isDead(),h.revive()||h.insert(e),u|=visit(e.alternate),s=!h.isDead(),h.erase(e)&&h.revive(),(a=Context.lookup(e))&&(a.consequent=i,a.alternate=s)):h.revive(),c.VisitorOption.Skip;case l.LabeledStatement:h.register(e);break;case l.ReturnStatement:return u|=visit(e.argument),h.kill(),c.VisitorOption.Skip;case l.SwitchStatement:for(visit(e.discriminant),h.jumps.push(new JumpTarget(e,h,JumpTarget.SWITCH)),t=0,n=e.cases.length;t<n;++t)r=e.cases[t],u|=visit(r),r.test||(o=!0),h.isDead()&&t+1<n&&h.next();return h.jumps.pop(),h.resolveJump(e),h.isDead()&&!o&&h.next(),c.VisitorOption.Skip;case l.SwitchCase:return e.test&&(u|=visit(e.test)),e.consequent=eliminate(0,e.consequent),c.VisitorOption.Skip;case l.ThrowStatement:return u|=visit(e.argument),h.kill(),c.VisitorOption.Skip;case l.TryStatement:return u|=visit(e.block),e.handlers&&e.handlers.length&&(h.revive()||h.insert(e),e.handlers=eliminate(0,e.handlers),h.erase(e))&&h.revive(),e.finalizer&&(h.revive()||h.insert(e),u|=visit(e.finalizer),h.erase(e)||h.kill()),c.VisitorOption.Skip;case l.WhileStatement:return u|=visit(e.test),h.jumps.push(new JumpTarget(e,h,JumpTarget.ITERATION)),u|=visitLoopBody(e,e.body),h.jumps.pop(),h.resolveJump(e),h.revive(),c.VisitorOption.Skip;case l.WithStatement:break;case l.VariableDeclaration:case l.FunctionDeclaration:u=!0}},leave:function leave(e){Status.isRequired(e)?h=h.upper:e.type===l.LabeledStatement&&h.unregister()}}),u):!h.isDead();function eliminate(e,t){for(var n,r,i,s=[],a=0,o=t.length;a<o;++a)(n=t[a]).type===l.IfStatement?(i=new Context(n),r=visit(n),i.detach()):r=visit(n),r?(u|=1,s.push(n),n.type!==l.IfStatement||!n.alternate||i.consequent&&i.alternate||i.consequent===i.alternate||(p=!0,i.consequent?(n.test=c.moveLocation(n.test,{type:l.UnaryExpression,operator:"!",argument:n.test}),s.push(n.consequent),n.consequent=n.alternate):s.push(n.alternate),n.alternate=null)):p=!0;return s}}function deadCodeElimination(e,t){t=t.get("destructive",{pathName:n})?e:c.deepCopy(e);return h=null,p=!1,visit(t),c.assert(null===h,"status should be null"),{result:t,modified:p}}n="dead-code-elimination",c=e("../common"),l=c.Syntax,JumpTarget.NAMED_ONLY=0,JumpTarget.ITERATION=2,JumpTarget.SWITCH=3,JumpTarget.prototype.isIteration=function isIteration(){return this.type===JumpTarget.ITERATION},JumpTarget.prototype.isAnonymous=function isAnonymous(){return 2&this.type},JumpTarget.prototype.contains=function contains(e){return-1!==this.labels.indexOf(e)},Jumps.prototype.lookupContinuableTarget=function lookupContinuableTarget(e){for(var t,n=this.targets.length-1;0<=n;--n)if((t=this.targets[n]).isIteration()&&(!e||t.contains(e.name)))return t.node;c.unreachable()},Jumps.prototype.lookupBreakableTarget=function lookupBreakableTarget(e){for(var t,n=this.targets.length-1;0<=n;--n)if(t=this.targets[n],e){if(t.contains(e.name))return t.node}else if(t.isAnonymous())return t.node;c.unreachable()},Jumps.prototype.push=function push(e){this.targets.push(e)},Jumps.prototype.pop=function pop(){this.targets.pop()},Status.NEXT={},Status.prototype.insert=function insert(e){this.current.push(e)},Status.prototype.erase=function erase(e){e=this.current.indexOf(e);return-1!==e&&(this.current.splice(e,1),!0)},Status.prototype.kill=function kill(){return this.erase(Status.NEXT)},Status.prototype.has=function has(e){return-1!==this.current.indexOf(e)},Status.prototype.jumpTo=function jumpTo(e){this.kill(),this.insert(e)},Status.prototype.resolveJump=function resolveJump(e){e=this.current.indexOf(e);-1!==e&&(this.current.splice(e,1),this.insert(Status.NEXT))},Status.prototype.clear=function clear(){this.current.length=0},Status.prototype.next=function next(){this.insert(Status.NEXT)},Status.prototype.isDead=function isDead(){return!this.has(Status.NEXT)},Status.prototype.revive=function revive(){return!!this.isDead()&&(this.next(),!0)},Status.prototype.register=function register(e){this.labels||(this.labels=[]),this.labels.push(e.label.name)},Status.prototype.unregister=function unregister(){this.labels=null},Status.isRequired=function isRequired(e){var t=e.type;return c.assert(e,"should be node"),t===l.Program||t===l.FunctionExpression||t===l.FunctionDeclaration},Context.prototype.detach=function detach(){delete this.node.__$context},Context.lookup=function lookup(e){return e.__$context},deadCodeElimination.passName=n,t.exports=deadCodeElimination}()},{"../common":14}],22:[function(e,t,n){!function(){"use strict";var n,c,h,p,r,d;function removeDefinition(e,t,n){var r,i,s;for(e.declarations.splice(t,1),r=0,i=n.references.length;r<i;++r)s=n.references[r],h.assert(!s.isRead()),s.isWrite()&&s.writeExpr.__$parent$__.type===c.AssignmentExpression&&!function overrideExpression(e,t){for(var n in e)delete e[n];for(n in t)e[n]=t[n]}(s.writeExpr.__$parent$__,s.writeExpr)}function dropVariableDefinition(e,t){var u,l,t=t.get("destructive",{pathName:n})?e:h.deepCopy(e);return p=!1,l=null,(u=r.analyze(t,{directive:!0})).attach(),function attachParent(e){h.traverse(e,{enter:function(e,t){e.__$parent$__=t}})}(t),t=h.replace(t,{enter:function enter(e,t){var n,r,i,s,a,o=e;if(l&&l.variableScope.isStatic()){if(i=function getCandidates(e){var t,n,r,i,s,a,o;if(!e.candidates){for(a=[],s=[],t=0,n=e.variables.length;t<n;++t)for(r=0,i=(o=e.variables[t]).identifiers.length;r<i;++r)s.push(o.identifiers[r]),a.push(o);e.candidates={slots:a,identifiers:s}}return e.candidates}(l.variableScope),e.type===c.VariableDeclaration&&"var"===e.kind){for(n=e.declarations.length;n--;)r=e.declarations[n],-1===(s=i.identifiers.indexOf(r.id))||!function isRemovableDefinition(e){var t,n,r,i;if(1===e.identifiers.length){if(0!==e.references.length)for(t=0,n=e.references.length;t<n;++t){if((r=e.references[t]).isRead())return;if(r.isWrite()){if(!r.writeExpr)return;if(!(i=r.writeExpr.__$parent$__))return;if(i.type!==c.AssignmentExpression&&i.type!==c.VariableDeclarator)return;if(d.hasSideEffect(r.writeExpr,r.from))return}}return 1}}(a=i.slots[s])||(p=!0,removeDefinition(e,n,a));0===e.declarations.length&&(o=t.type===c.ForStatement?null:h.moveLocation(e,{type:c.EmptyStatement}))}if(e.type===c.FunctionDeclaration&&-1!==(s=i.identifiers.indexOf(e.id))&&1===(a=i.slots[s]).identifiers.length&&0===a.references.length)return p=!0,o=h.moveLocation(e,{type:c.EmptyStatement})}return l=u.acquire(e)||l,o},leave:function leave(e){l=u.release(e)||l}}),u.detach(),function removeParent(e){h.traverse(e,{enter:function(e){delete e.__$parent$__,delete e.__$escope$__}})}(t),{result:t,modified:p}}n="drop-variable-definition",h=e("../common"),r=e("escope"),d=e("../evaluator"),c=h.Syntax,dropVariableDefinition.passName=n,t.exports=dropVariableDefinition}()},{"../common":14,"../evaluator":16,escope:10}],23:[function(e,t,n){!function(){"use strict";var n,a,o,u,l;function main(e,t){var t=t.get("destructive",{pathName:n})?e:u.deepCopy(e),i=0,r=l=!1,s=[new o];return t=u.replace(t,{enter:function enter(e){var t,n,r;e.type===a.FunctionDeclaration&&(n=e.id.name,(t=u.Array.last(s)).has(n)?((r=t.get(n)).declarations.push(e),++r.count):t.set(n,r={declarations:[e],count:1})),e.type===a.BlockStatement&&s.push(new o),e.type!==a.FunctionDeclaration&&e.type!==a.FunctionExpression||++i},leave:function leave(e){var t,n;return e.type===a.BlockStatement&&(t=s.pop(),0===i?0!==t.keys().length&&(r=!0):n=function unique(n,r){return u.replace(r,{enter:function(e){var t;return e.type===a.FunctionDeclaration&&(t=e.id.name,--(t=n.get(t)).count,0!==t.count)?(l=!0,u.moveLocation(e,{type:a.EmptyStatement})):e!==r&&e.type===a.BlockStatement?this.skip():void 0}})}(t,e)),e.type!==a.FunctionDeclaration&&e.type!==a.FunctionExpression||--i,n}}),u.assert(1===s.length,"global map remains"),{result:t=r?t:function uniqueInGlobal(r,i){return u.replace(i,{enter:function(e){var t,n;return e.type===a.FunctionDeclaration&&(t=e.id.name,n=(t=r.get(t)).count===t.declarations.length,--t.count,1<t.declarations.length)?n?(l=!0,u.Array.last(t.declarations)):(l=!0,u.moveLocation(e,{type:a.EmptyStatement})):e!==i&&e.type===a.BlockStatement?this.skip():void 0}})}(s[0],t),modified:l}}n="eliminate-duplicate-function-declarations",u=e("../common"),o=e("../map"),a=u.Syntax,main.passName=n,t.exports=main}()},{"../common":14,"../map":17}],24:[function(e,t,n){!function(){"use strict";var i,o,u,s,l;function hoistVariableToArguments(e,t){var n,r,t=t.get("destructive",{pathName:i})?e:u.deepCopy(e);return l=!1,(r=s.analyze(t,{directive:!(n=null)})).attach(),u.traverse(t,{enter:function enter(e){var t;e.type!==o.CallExpression&&e.type!==o.NewExpression||(t=e.callee).type!==o.FunctionExpression||t.id||t.params.length!==e.arguments.length||(n=r.acquire(t)).isArgumentsMaterialized()||e.type===o.NewExpression&&n.isThisMaterialized()||!function hoist(i){function hoisting(e){for(var t=!1,n=0,r=i.params.length;n<r;++n)if(e.name===i.params[n].name){t=!0;break}t||i.params.push(e)}i.body=u.replace(i.body,{enter:function(e,t){var n,r,i,s,a;if(e.type===o.FunctionExpression||e.type===o.FunctionDeclaration)this.skip();else if(e.type===o.VariableDeclaration&&"var"===e.kind){if(t.type===o.ForInStatement)return u.assert(1===e.declarations.length,"for-in declaration length should be 1"),(s=e.declarations[0]).init||s.id.type!==o.Identifier?void 0:(hoisting(s.id),l=!0,s.id);for(t=t.type===o.ForStatement,i=[],n=0,r=e.declarations.length;n<r;++n){if((s=e.declarations[n]).id.type!==o.Identifier)return;hoisting(s.id),s.init&&i.push(u.moveLocation(s,{type:o.AssignmentExpression,operator:"=",left:s.id,right:s.init}))}return(l=!0,0===i.length)?t?null:u.moveLocation(e,{type:o.EmptyStatement}):(a=1===i.length?i[0]:u.moveLocation(e,{type:o.SequenceExpression,expressions:i}),t?a:u.moveLocation(e,{type:o.ExpressionStatement,expression:a}))}}})}(t)}}),r.detach(),{result:t,modified:l}}i="hoist-variable-to-arguments",s=e("escope"),u=e("../common"),o=u.Syntax,hoistVariableToArguments.passName=i,t.exports=hoistVariableToArguments}()},{"../common":14,escope:10}],25:[function(e,t,n){!function(){"use strict";var n,s,a,o;function reduce(e,t){var n,r=e[t],i=e[t+1];return r.type===s.IfStatement&&!r.alternate&&r.consequent.type===s.ReturnStatement&&i.type===s.ReturnStatement&&(o=!0,e.splice(t,1),n=r.consequent.argument,i=i.argument,n||i?(n=n||a.SpecialNode.generateUndefined(),i=i||a.SpecialNode.generateUndefined(),e[t]=a.moveLocation(r,{type:s.ReturnStatement,argument:{type:s.ConditionalExpression,test:r.test,consequent:n,alternate:i}})):e[t]=a.moveLocation(r,{type:s.ReturnStatement,argument:{type:s.SequenceExpression,expressions:[r.test,a.SpecialNode.generateUndefined()]}}),1)}function reduceBranchJump(e,t){t=t.get("destructive",{pathName:n})?e:a.deepCopy(e);return o=!1,a.traverse(t,{leave:function leave(e,t){var n;switch(e.type){case s.BlockStatement:case s.Program:for(n=0;n<e.body.length-1;)reduce(e.body,n)||++n;a.isFunctionBody(e,t)&&0<e.body.length&&(n=e.body.length-1,function reduceLast(e,t){var n,r=e[t];r.type!==s.IfStatement||r.alternate||r.consequent.type===s.ReturnStatement&&(o=!0,(n=r.consequent.argument)?e[t]=a.moveLocation(r,{type:s.ReturnStatement,argument:{type:s.ConditionalExpression,test:r.test,consequent:n,alternate:a.SpecialNode.generateUndefined()}}):e[t]=a.moveLocation(r,{type:s.ReturnStatement,argument:{type:s.SequenceExpression,expressions:[r.test,a.SpecialNode.generateUndefined()]}}))}(e.body,n));break;case s.SwitchCase:for(n=0;n<e.consequent.length-1;)reduce(e.consequent,n)||++n}}}),{result:t,modified:o}}n="reduce-branch-jump",a=e("../common"),s=a.Syntax,reduceBranchJump.passName=n,t.exports=reduceBranchJump}()},{"../common":14}],26:[function(e,t,n){!function(){"use strict";var n,r,i,s;function reduceMultipleIfStatements(e,t){t=t.get("destructive",{pathName:n})?e:i.deepCopy(e);return s=!1,i.traverse(t,{leave:function leave(e){e.type!==r.IfStatement||e.alternate||e.consequent.type!==r.IfStatement||e.consequent.alternate||(s=!0,e.test={type:r.LogicalExpression,operator:"&&",left:e.test,right:e.consequent.test},e.consequent=e.consequent.consequent)}}),{result:t,modified:s}}n="reduce-multiple-if-statements",i=e("../common"),r=i.Syntax,reduceMultipleIfStatements.passName=n,t.exports=reduceMultipleIfStatements}()},{"../common":14}],27:[function(e,t,n){!function(){"use strict";var n,o,u,s,a,l;function isStoreSideEffectFree(e,t){return!s.hasSideEffect(e,t)||e.type===o.Identifier||e.type===o.MemberExpression&&!(s.hasSideEffect(e.object,t)||e.computed&&!function isLoadSideEffectFree(e,t){var n;return s.constant.isConstant(e)&&(null===(n=s.constant.evaluate(e))||"object"!=typeof n)||e.type===o.Identifier&&(n=t.resolve(e))&&n.isStatic()}(e.property,t))}function reduceSequenceExpression(e,t){var r,i,t=t.get("destructive",{pathName:n})?e:u.deepCopy(e);return l=!1,r=null,(i=a.analyze(t,{directive:!0})).attach(),t=u.replace(t,{enter:function enter(e){r=i.acquire(e)||r},leave:function leave(e){var t,n;switch(e.type){case o.SequenceExpression:!function reduce(e){for(var t,n,r,i=[],s=0,a=e.expressions.length;s<a;++s)if((r=e.expressions[s]).type===o.SequenceExpression)for(l=!0,u.deleteLocation(e),t=0,n=r.expressions.length;t<n;++t)i.push(r.expressions[t]);else i.push(r);e.expressions=i}(e);break;case o.ConditionalExpression:e.test.type===o.SequenceExpression&&(l=!0,t=e.test,e.test=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e);break;case o.LogicalExpression:e.left.type===o.SequenceExpression&&(l=!0,t=e.left,e.left=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e);break;case o.BinaryExpression:e.left.type===o.SequenceExpression?(l=!0,t=e.left,e.left=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e):e.right.type!==o.SequenceExpression||s.hasSideEffect(e.left,r)||(l=!0,t=e.right,e.right=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e);break;case o.UpdateExpression:case o.UnaryExpression:if(e.argument.type===o.SequenceExpression){if(n=u.Array.last(e.argument.expressions),!u.SpecialNode.canExtractSequence(n,e,r))break;l=!0,t=e.argument,e.argument=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e}break;case o.AssignmentExpression:"="===e.operator&&e.right.type===o.SequenceExpression&&isStoreSideEffectFree(e.left,r)&&(l=!0,t=e.right,e.right=u.Array.last(t.expressions),t.expressions[t.expressions.length-1]=e)}return r=i.release(e)||r,t}}),i.detach(),{result:t,modified:l}}n="reduce-sequence-expression",a=e("escope"),u=e("../common"),s=e("../evaluator"),o=u.Syntax,reduceSequenceExpression.passName=n,t.exports=reduceSequenceExpression}()},{"../common":14,"../evaluator":16,escope:10}],28:[function(e,t,n){!function(){"use strict";var n,o,u,r,l,c;function Transformer(e,t,n,r){this.transform=e,this.booleanFunction=t,this.voidFunction=n,this.scope=r}function voidContext(e,t){return new Transformer(Transformer.prototype.voidTransformation,booleanContext,voidContext,t).apply(e)}function booleanContext(e,t){return new Transformer(Transformer.prototype.booleanTransformation,booleanContext,booleanContext,t).apply(e)}function removeContextSensitiveExpressions(e,t){var r,i,s,a,e=t.get("destructive",{pathName:n})?e:u.deepCopy(e);return c=!1,r=0,i=t.get("preserveCompletionValue",{pathName:n}),s=null,(a=l.analyze(e,{directive:!0})).attach(),e=u.replace(e,{enter:function enter(e){var t,n;switch(s=a.acquire(e)||s,e.type!==o.FunctionExpression&&e.type!==o.FunctionDeclaration||++r,e.type){case o.AssignmentExpression:case o.ArrayExpression:case o.BlockStatement:case o.BinaryExpression:case o.BreakStatement:case o.CallExpression:case o.CatchClause:break;case o.ConditionalExpression:e.test=booleanContext(e.test,s);break;case o.ContinueStatement:break;case o.DoWhileStatement:e.test=booleanContext(e.test,s);break;case o.DebuggerStatement:case o.EmptyStatement:break;case o.ExpressionStatement:i&&0===r||(e.expression=voidContext(e.expression,s));break;case o.FunctionExpression:case o.ForInStatement:case o.FunctionDeclaration:break;case o.ForStatement:e.init&&e.init.type!==o.VariableDeclaration&&(e.init=voidContext(e.init,s)),e.test&&(e.test=booleanContext(e.test,s)),e.update&&(e.update=voidContext(e.update,s));break;case o.Identifier:break;case o.IfStatement:e.test=booleanContext(e.test,s);break;case o.Literal:case o.LabeledStatement:case o.LogicalExpression:case o.MemberExpression:case o.NewExpression:case o.ObjectExpression:case o.Program:case o.Property:case o.ReturnStatement:break;case o.SequenceExpression:for(t=0,n=e.expressions.length-1;t<n;++t)e.expressions[t]=voidContext(e.expressions[t],s);break;case o.SwitchStatement:case o.SwitchCase:case o.ThisExpression:case o.ThrowStatement:case o.TryStatement:break;case o.UnaryExpression:"!"===e.operator?e.argument=booleanContext(e.argument,s):"void"===e.operator&&(e.argument=voidContext(e.argument,s));break;case o.UpdateExpression:case o.VariableDeclaration:case o.VariableDeclarator:break;case o.WhileStatement:e.test=booleanContext(e.test,s);break;case o.WithStatement:}},leave:function leave(e){s=a.release(e)||s,e.type!==o.FunctionExpression&&e.type!==o.FunctionDeclaration||--r}}),a.detach(),{result:e,modified:c}}n="remove-context-sensitive-expressions",u=e("../common"),r=e("../evaluator"),l=e("escope"),o=u.Syntax,Transformer.prototype.booleanTransformation=function(e){var t;do{if(e.type===o.UnaryExpression){if("!"===e.operator&&e.argument.type===o.UnaryExpression&&"!"===e.argument.operator){c=!0,e=e.argument.argument;continue}}else if(e.type===o.LogicalExpression){if(e.left.type===o.UnaryExpression&&"!"===e.left.operator&&e.right.type===o.UnaryExpression&&"!"===e.right.operator){c=!0,e.left=e.left.argument,e.right=e.right.argument,e.operator="||"===e.operator?"&&":"||",e=u.moveLocation(e,{type:o.UnaryExpression,operator:"!",argument:e});continue}}else e.type===o.ConditionalExpression&&e.test.type===o.UnaryExpression&&"!"===e.test.operator&&(c=!0,e.test=e.test.argument,t=e.consequent,e.consequent=e.alternate,e.alternate=t);break}while(1);return e},Transformer.prototype.voidTransformation=function(e){var t,n;do{if((e=this.booleanTransformation(e)).type===o.UnaryExpression){if("!"===e.operator||"void"===e.operator){c=!0,e=e.argument;continue}}else e.type===o.LogicalExpression?e.left.type===o.UnaryExpression&&"!"===e.left.operator&&(c=!0,e.left=e.left.argument,e.operator="||"===e.operator?"&&":"||"):e.type===o.ConditionalExpression&&(t=r.hasSideEffect(e.consequent,this.scope),n=r.hasSideEffect(e.alternate,this.scope),t||n?t?n||(c=!0,e=u.moveLocation(e,{type:o.LogicalExpression,operator:"&&",left:e.test,right:e.consequent})):(c=!0,e=u.moveLocation(e,{type:o.LogicalExpression,operator:"||",left:e.test,right:e.alternate})):(c=!0,e=e.test));break}while(1);return e},Transformer.prototype.apply=function(e){for(;;)if(e===(e=this.transform(e))){e.type===o.LogicalExpression?(e.left=this.booleanFunction(e.left,this.scope),e.right=this.voidFunction(e.right,this.scope)):e.type===o.ConditionalExpression?(e.consequent=this.voidFunction(e.consequent,this.scope),e.alternate=this.voidFunction(e.alternate,this.scope)):e.type===o.SequenceExpression&&(e.expressions[e.expressions.length-1]=this.voidFunction(u.Array.last(e.expressions),this.scope));break}return e},removeContextSensitiveExpressions.passName=n,t.exports=removeContextSensitiveExpressions}()},{"../common":14,"../evaluator":16,escope:10}],29:[function(e,t,n){!function(){"use strict";var n,s,r,a;function remove(e){for(var t,n=[],r=0,i=e.length;r<i;++r)(t=e[r]).type===s.EmptyStatement?a=!0:n.push(t);return n}function removeEmptyStatement(e,t){return a=!1,t=t.get("destructive",{pathName:n})?e:r.deepCopy(e),r.traverse(t,{enter:function enter(e){var t;switch(e.type){case s.BlockStatement:case s.Program:e.body=remove(e.body);break;case s.SwitchCase:e.consequent=remove(e.consequent);break;case s.IfStatement:!function removeAlternate(e){e.alternate&&(e.alternate.type===s.EmptyStatement?(a=!0,e.alternate=null):e.consequent.type===s.EmptyStatement&&(a=!0,e.consequent=e.alternate,e.alternate=null,e.test=r.moveLocation(e.test,{type:s.UnaryExpression,operator:"!",argument:e.test})))}(e);break;case s.SwitchStatement:e.cases.length&&!(t=r.Array.last(e.cases)).test&&r.Array.empty(t.consequent)&&(a=!0,e.cases.pop())}}}),{result:t,modified:a}}n="remove-empty-statement",r=e("../common"),s=r.Syntax,removeEmptyStatement.passName=n,t.exports=removeEmptyStatement}()},{"../common":14}],30:[function(e,t,n){!function(){"use strict";var s,a,l,o,c,h;function removeSideEffectFreeExpressions(e,t){var r,i,n;function isResultNeeded(e,t){return!!(e.type!==a.ExpressionStatement||n&&"global"===t.type)}return e=t.get("destructive",{pathName:s})?e:l.deepCopy(e),n=t.get("preserveCompletionValue",{pathName:s}),h=!1,r=null,(i=o.analyze(e,{directive:!0})).attach(),e=l.replace(e,{enter:function enter(e,t){var n=e;return r=i.acquire(e)||r,(n=n.type===a.SequenceExpression?function reduce(e,t,n,r){var i,s,a,o,u;for(l.assert(1<e.expressions.length,"expressions should be more than one"),o=[],i=0,s=e.expressions.length;i<s;++i)u=a,a=e.expressions[i],(i+1===s&&r||c.hasSideEffect(a,t))&&o.push(a);if(!r&&0===o.length)return h=!0,a;for(l.assert(0<o.length,"result should be more than zero");;){if(s===o.length)return e;if(1!==o.length)return h=!0,e.expressions=o,e;if(l.SpecialNode.canExtractSequence(o[0],n,t))return h=!0,o[0];o.unshift(u)}}(n,r,t,isResultNeeded(t,r)):n).type===a.SequenceExpression&&(l.assert(1<n.expressions.length,"sequences' length should be more than 1"),(e=l.Array.last(n.expressions)).type!==a.UnaryExpression||"void"!==e.operator||c.hasSideEffect(e.argument,r)||(h=!0,n.expressions.pop(),t=l.moveLocation(e,{type:a.UnaryExpression,operator:"void",argument:l.Array.last(n.expressions)}),1===n.expressions.length?n=t:n.expressions[n.expressions.length-1]=t)),isResultNeeded(n,r)||c.hasSideEffect(n.expression,r)||(h=!0,n=l.moveLocation(n,{type:a.EmptyStatement})),n},leave:function leave(e){r=i.release(e)||r}}),i.detach(),{result:e,modified:h}}s="remove-side-effect-free-expressions",o=e("escope"),l=e("../common"),c=e("../evaluator"),a=l.Syntax,removeSideEffectFreeExpressions.passName=s,t.exports=removeSideEffectFreeExpressions}()},{"../common":14,"../evaluator":16,escope:10}],31:[function(e,t,n){!function(){"use strict";var r,s,a,i,o,u;function removeUnreachableBranch(e,t){var n,t=t.get("destructive",{pathName:r})?e:a.deepCopy(e);return u=!1,n=[],{result:a.replace(t,{enter:function enter(e){var t;if(i.Scope.isVariableScopeRequired(e))n.push(e);else switch(t=a.Array.last(n),e.type){case s.IfStatement:return function handleIfStatement(e,t){var n,r,i=o.booleanCondition(t.test);if(t.alternate){if("boolean"==typeof i)return u=!0,n=[],i?((r=a.delegateVariableDeclarations(t.alternate,e))&&n.push(r),n.push(a.moveLocation(t.test,{type:s.ExpressionStatement,expression:t.test}),t.consequent)):((r=a.delegateVariableDeclarations(t.consequent,e))&&n.push(r),n.push(a.moveLocation(t.test,{type:s.ExpressionStatement,expression:t.test}),t.alternate)),{type:s.BlockStatement,body:n}}else if("boolean"==typeof i)return u=!0,n=[],i?n.push(a.moveLocation(t.test,{type:s.ExpressionStatement,expression:t.test}),t.consequent):((r=a.delegateVariableDeclarations(t.consequent,e))&&n.push(r),n.push(a.moveLocation(t.test,{type:s.ExpressionStatement,expression:t.test}))),{type:s.BlockStatement,body:n}}(t,e);case s.LogicalExpression:return function handleLogicalExpression(e,t){var n=o.booleanCondition(t.left);if("boolean"==typeof n)return u=!0,n?"&&"===t.operator?a.moveLocation(t,{type:s.SequenceExpression,expressions:[t.left,t.right]}):t.left:"&&"===t.operator?t.left:a.moveLocation(t,{type:s.SequenceExpression,expressions:[t.left,t.right]})}(0,e);case s.ConditionalExpression:return function handleConditionalExpression(e,t){var n=o.booleanCondition(t.test);if("boolean"==typeof n)return u=!0,n?a.moveLocation(t,{type:s.SequenceExpression,expressions:[t.test,t.consequent]}):a.moveLocation(t,{type:s.SequenceExpression,expressions:[t.test,t.alternate]})}(0,e)}},leave:function leave(e){i.Scope.isVariableScopeRequired(e)&&n.pop()}}),modified:u}}r="remove-unreachable-branch",i=e("escope"),a=e("../common"),o=e("../evaluator"),s=a.Syntax,removeUnreachableBranch.passName=r,t.exports=removeUnreachableBranch}()},{"../common":14,"../evaluator":16,escope:10}],32:[function(e,o,t){!function(){"use strict";var n,r,t,i,s,a;function Scope(e){this.set=new t,this.unused=[],this.upper=e}function removeUnusedLabel(e,t){t=t.get("destructive",{pathName:n})?e:i.deepCopy(e);return s=null,a=!1,{result:i.replace(t,{enter:function enter(e){switch(e.type){case r.Program:case r.FunctionDeclaration:case r.FunctionExpression:s=new Scope(s);break;case r.LabeledStatement:s.register(e);break;case r.BreakStatement:case r.ContinueStatement:s.resolve(e)}},leave:function leave(e){var t=s.unregister(e);return e.type!==r.Program&&e.type!==r.FunctionDeclaration&&e.type!==r.FunctionExpression||(s=s.close()),t}}),modified:a}}n="remove-unused-label",i=e("../common"),t=e("../map"),r=i.Syntax,Scope.prototype.register=function register(e){var t;i.assert(e.type===r.LabeledStatement),t=e.label.name,i.assert(!this.set.has(t),"duplicate label is found"),this.set.set(t,{used:!1,stmt:e})},Scope.prototype.unregister=function unregister(e){var t,n;return e.type!==r.LabeledStatement||(t=e.label.name,n=this.set.get(t),this.set.delete(t),n.used)?e:(a=!0,e.body)},Scope.prototype.resolve=function resolve(e){e.label&&(e=e.label.name,i.assert(this.set.has(e),"unresolved label"),this.set.get(e).used=!0)},Scope.prototype.close=function close(){return this.upper},removeUnusedLabel.passName=n,o.exports=removeUnusedLabel}()},{"../common":14,"../map":17}],33:[function(e,t,n){!function(){"use strict";var n,l,c,h;function removeWastedBlocks(e,t){t=t.get("destructive",{pathName:n})?e:c.deepCopy(e);return h=!1,{result:c.replace(t,{leave:function leave(e,t){var n,r;if(e.type===l.BlockStatement||e.type===l.Program)for(n=0,r=e.body.length;n<r;++n)if(e.body[n].type===l.BlockStatement){e.body=function flattenBlockStatement(e){for(var t,n,r,i,s,a=[],o=0,u=e.length;o<u;++o)if((r=e[o]).type===l.BlockStatement){for(s=!0,t=0,n=r.body.length;t<n;++t)i=r.body[t],c.isScopedDeclaration(i)&&(s=!1);s?(h=!0,a=a.concat(r.body)):a.push(r)}else a.push(r);return a}(e.body);break}if(t.type!==l.FunctionDeclaration&&t.type!==l.FunctionExpression&&t.type!==l.TryStatement&&t.type!==l.CatchClause){for(;e.type===l.BlockStatement&&1===e.body.length&&!c.isScopedDeclaration(e.body[0]);)h=!0,e=e.body[0];return e.type===l.BlockStatement&&0===e.body.length?(h=!0,{type:l.EmptyStatement}):e}}}),modified:h}}n="remove-wasted-blocks",c=e("../common"),l=c.Syntax,removeWastedBlocks.passName=n,t.exports=removeWastedBlocks}()},{"../common":14}],34:[function(e,t,n){!function(){"use strict";var n,o,r,u;function reordering(e){for(var t,n=[],r=[],i=[],s=0,a=e.length;s<a;++s)((t=e[s]).type===o.FunctionDeclaration?(r.length+n.length!==s&&(u=!0),r):t.type===o.DirectiveStatement?n:i).push(t);return n.concat(r,i)}function reorderingFunctionDeclarations(e,t){t=t.get("destructive",{pathName:n})?e:r.deepCopy(e);return u=!1,r.traverse(t,{leave:function leave(e){switch(e.type){case o.Program:e.body=reordering(e.body);break;case o.FunctionDeclaration:case o.FunctionExpression:e.body.body=reordering(e.body.body)}}}),{result:t,modified:u}}n="reordering-function-declarations",r=e("../common"),o=r.Syntax,reorderingFunctionDeclarations.passName=n,t.exports=reorderingFunctionDeclarations}()},{"../common":14}],35:[function(e,t,n){!function(){"use strict";var n,i,s,a;function transformBranchToExpression(e,t){var e=t.get("destructive",{pathName:n})?e:s.deepCopy(e),r=t.get("preserveCompletionValue",{pathName:n});return a=!1,{result:s.replace(e,{leave:function leave(e){var t,n;if(e.type===i.IfStatement&&(n=this.parents(),!r||!s.mayBeCompletionValue(e,n)))return e.alternate?e.consequent.type===i.ExpressionStatement&&e.alternate.type===i.ExpressionStatement?(a=!0,s.moveLocation(e,{type:i.ExpressionStatement,expression:s.moveLocation(e,{type:i.ConditionalExpression,test:e.test,consequent:e.consequent.expression,alternate:e.alternate.expression})})):e.consequent.type===i.ReturnStatement&&e.alternate.type===i.ReturnStatement?(a=!0,e.consequent.argument||e.alternate.argument?(n=e.consequent.argument||s.SpecialNode.generateUndefined(),t=e.alternate.argument||s.SpecialNode.generateUndefined(),s.moveLocation(e,{type:i.ReturnStatement,argument:s.moveLocation(e,{type:i.ConditionalExpression,test:e.test,consequent:n,alternate:t})})):s.moveLocation(e,{type:i.ReturnStatement,argument:s.moveLocation(e,{type:i.SequenceExpression,expressions:[e.test,s.SpecialNode.generateUndefined()]})})):e.consequent.type===i.ThrowStatement&&e.alternate.type===i.ThrowStatement?(a=!0,s.moveLocation(e,{type:i.ThrowStatement,argument:s.moveLocation(e,{type:i.ConditionalExpression,test:e.test,consequent:e.consequent.argument,alternate:e.alternate.argument})})):void 0:e.consequent.type===i.ExpressionStatement?(a=!0,s.moveLocation(e,{type:i.ExpressionStatement,expression:s.moveLocation(e,{type:i.LogicalExpression,operator:"&&",left:e.test,right:e.consequent.expression})})):e.consequent.type===i.EmptyStatement?(a=!0,s.moveLocation(e,{type:i.ExpressionStatement,expression:e.test})):void 0}}),modified:a}}n="transform-branch-to-expression",s=e("../common"),i=s.Syntax,transformBranchToExpression.passName=n,t.exports=transformBranchToExpression}()},{"../common":14}],36:[function(e,t,n){!function(){"use strict";var n,r,i,s;function transformDynamicToStaticPropertyAccess(e,t){return s=!1,t=t.get("destructive",{pathName:n})?e:i.deepCopy(e),i.traverse(t,{enter:function enter(e){var t;e.type===r.MemberExpression&&e.computed&&(t=e.property).type===r.Literal&&"string"==typeof t.value&&(i.isIdentifier(t.value)?(s=!0,e.computed=!1,e.property=i.moveLocation(t,{type:r.Identifier,name:t.value})):t.value===Number(t.value).toString()&&(s=!0,e.computed=!0,e.property=i.moveLocation(e.property,i.SpecialNode.generateFromValue(Number(e.property.value)))))}}),{result:t,modified:s}}n="transform-dynamic-to-static-property-access",i=e("../common"),r=i.Syntax,transformDynamicToStaticPropertyAccess.passName=n,t.exports=transformDynamicToStaticPropertyAccess}()},{"../common":14}],37:[function(e,t,n){!function(){"use strict";var n,r,i,s;function transformDynamicToStaticPropertyDefinition(e,t){t=t.get("destructive",{pathName:n})?e:i.deepCopy(e);return s=!1,i.traverse(t,{enter:function enter(e){var t;e.type===r.Property&&e.key.type===r.Literal&&"string"==typeof e.key.value&&(i.isIdentifier(e.key.value)?(s=!0,e.key=i.moveLocation(e.key,{type:r.Identifier,name:e.key.value})):e.key.value===Number(e.key.value).toString()&&(t=i.SpecialNode.generateFromValue(Number(e.key.value))).type===r.Literal&&(s=!0,e.key=i.moveLocation(e.key,t)))}}),{result:t,modified:s}}n="transform-dynamic-to-static-property-definition",i=e("../common"),r=i.Syntax,transformDynamicToStaticPropertyDefinition.passName=n,t.exports=transformDynamicToStaticPropertyDefinition}()},{"../common":14}],38:[function(e,t,n){!function(){"use strict";var n,i,r,s;function transformImmediateFunctionCall(e,t){t=t.get("destructive",{pathName:n})?e:r.deepCopy(e);return s=!1,{result:r.replace(t,{leave:function leave(e){if(function isEmptyFunctionCall(e){var t,n,r;if(e.type===i.CallExpression&&(t=e.callee).type===i.FunctionExpression&&t.body.type===i.BlockStatement){if(0!==t.body.body.length)for(n=0,r=t.body.body.length;n<r;++n)if(t.body.body[n].type!==i.FunctionDeclaration)return;return 1}}(e))return s=!0,function callToSequence(e){var t=r.Array.from(e.arguments);return 0===t.length?r.SpecialNode.generateUndefined(e):(t.push(r.SpecialNode.generateUndefined()),r.moveLocation(e,{type:i.SequenceExpression,expressions:t}))}(e)}}),modified:s}}n="transform-immediate-function-call",r=e("../common"),i=r.Syntax,transformImmediateFunctionCall.passName=n,t.exports=transformImmediateFunctionCall}()},{"../common":14}],39:[function(e,t,n){!function(){"use strict";var n,r,i,s;function transformLogicalAssociation(e,t){t=t.get("destructive",{pathName:n})?e:i.deepCopy(e);return s=!1,i.traverse(t,{enter:function enter(e){e.type===r.LogicalExpression&&e.right.type===r.LogicalExpression&&e.operator===e.right.operator&&(s=!0,e.left={type:r.LogicalExpression,operator:e.operator,left:e.left,right:e.right.left},e.right=e.right.right)}}),{result:t,modified:s}}n="transform-logical-association",i=e("../common"),r=i.Syntax,transformLogicalAssociation.passName=n,t.exports=transformLogicalAssociation}()},{"../common":14}],40:[function(e,t,n){!function(){"use strict";var n,a,r,o,u;function equals(e,t){return e.type===t.type&&e.type===a.Identifier&&e.name===t.name}function transformToCompoundAssignment(e,t){var i,s,t=t.get("destructive",{pathName:n})?e:r.deepCopy(e);return u=!1,i=null,(s=o.analyze(t,{directive:!0})).attach(),r.traverse(t,{enter:function enter(e){var t,n,r;i=s.acquire(e)||i,e.type===a.AssignmentExpression&&"="===e.operator&&(t=e.left,(n=e.right).type===a.BinaryExpression&&equals(n.left,t)?(r=function compound(e){switch(e){case"*":case"/":case"%":case"+":case"-":case"<<":case">>":case">>>":case"&":case"^":case"|":return e+"="}return null}(n.operator))&&(u=!0,e.operator=r,e.right=n.right):n.type===a.AssignmentExpression&&equals(n.left,t)&&function observableCompound(e){switch(e){case"*=":case"/=":case"%=":case"+=":case"-=":case"<<=":case">>=":case">>>=":case"&=":case"^=":case"|=":return e}}(n.operator)&&i.resolve(e.left).isStatic()&&(u=!0,e.operator=n.operator,e.right=n.right))},leave:function leave(e){i=s.release(e)||i}}),s.detach(),{result:t,modified:u}}n="transform-to-compound-assignment",o=e("escope"),r=e("../common"),a=r.Syntax,transformToCompoundAssignment.passName=n,t.exports=transformToCompoundAssignment}()},{"../common":14,escope:10}],41:[function(e,t,n){!function(){"use strict";var n,o,r,u;function transformToSequenceExpression(e,t){return u=!1,t=t.get("destructive",{pathName:n})?e:r.deepCopy(e),r.traverse(t,{enter:function enter(e){switch(e.type){case o.BlockStatement:case o.Program:!function transform(e){var t,n,r,i,s,a;function constructSeq(e,t){return 1!==e.length&&(u=!0,e={type:o.SequenceExpression,expressions:e},t.type===o.ExpressionStatement?t.expression=e:t.argument=e),t}for(a=[],r=[],t=0,n=e.body.length;t<n;++t)s=i,(i=e.body[t]).type===o.ExpressionStatement?r.push(i.expression):i.type===o.ReturnStatement&&null!=i.argument||i.type===o.ThrowStatement?(r.push(i.argument),a.push(constructSeq(r,i)),r=[]):(i.type!==o.ForStatement||i.init&&i.init.type===o.VariableDeclaration?i.type===o.IfStatement?r.length&&(u=!0,r.push(i.test),i.test={type:o.SequenceExpression,expressions:r},r=[]):r.length&&(a.push(constructSeq(r,s)),r=[]):r.length&&(u=!0,i.init&&r.push(i.init),1===r.length?i.init=r[0]:i.init={type:o.SequenceExpression,expressions:r},r=[]),a.push(i));r.length&&a.push(constructSeq(r,i)),e.body=a}(e)}}}),{result:t,modified:u}}n="transform-to-sequence-expression",r=e("../common"),o=r.Syntax,transformToSequenceExpression.passName=n,t.exports=transformToSequenceExpression}()},{"../common":14}],42:[function(e,t,n){!function(){"use strict";var n,o,u,r,l;function isUndefinedStringLiteral(e){return e.type===o.Literal&&"undefined"===e.value}function transformTypeofUndefined(e,t){var s,a,t=t.get("destructive",{pathName:n})?e:u.deepCopy(e);return l=!1,a=null,(s=r.analyze(t,{directive:!0})).attach(),u.traverse(t,{enter:function enter(e){var t,n,r,i;if(a=s.acquire(e)||a,e.type===o.BinaryExpression&&("==="===e.operator||"!=="===e.operator||"=="===e.operator||"!="===e.operator)){if(isUndefinedStringLiteral(e.left))n="left",t="right";else{if(!isUndefinedStringLiteral(e.right))return;n="right",t="left"}e[t].type===o.UnaryExpression&&"typeof"===e[t].operator&&((r=e[t].argument).type!==o.Identifier||(i=a.resolve(r))&&i.isStatic()&&i.resolved)&&(l=!0,e[n]=u.SpecialNode.generateUndefined(),e[t]=r,e.operator="!"===e.operator.charAt(0)?"!==":"===")}},leave:function leave(e){a=s.release(e)||a}}),s.detach(),{result:t,modified:l}}n="transform-typeof-undefined",r=e("escope"),u=e("../common"),o=u.Syntax,transformTypeofUndefined.passName=n,t.exports=transformTypeofUndefined}()},{"../common":14,escope:10}],43:[function(e,t,n){!function(){"use strict";var n,i,s,a,o;function isFoldableConditional(e){return e.type===i.ConditionalExpression&&(a.constant.isConstant(e.consequent)||a.constant.isConstant(e.alternate))}function treeBasedConstantFolding(e,t){t=t.get("destructive",{pathName:n})?e:s.deepCopy(e);return o=!1,{result:s.replace(t,{leave:function leave(e){var t,n;switch(e.type){case i.BinaryExpression:case i.LogicalExpression:case i.UnaryExpression:return function isModifiedConstant(e){return!s.SpecialNode.isUndefined(e)&&!s.SpecialNode.isNegative(e)&&!s.SpecialNode.isNaN(e)&&a.constant.isConstant(e,!1)}(e)?(o=!0,s.moveLocation(e,s.SpecialNode.generateFromValue(a.constant.evaluate(e)))):function foldConditional(e){var t,n,r;switch(e.type){case i.BinaryExpression:if("in"===e.operator||"instanceof"===e.operator)return e;a.constant.isConstant(e.left)&&isFoldableConditional(e.right)?(o=!0,n=(t=e).operator,r=a.constant.evaluate(t.left),e=e.right,a.constant.isConstant(e.consequent)?e.consequent=s.SpecialNode.generateFromValue(a.constant.doBinary(n,r,a.constant.evaluate(e.consequent))):(t.right=e.consequent,e.consequent=t),a.constant.isConstant(e.alternate)?e.alternate=s.SpecialNode.generateFromValue(a.constant.doBinary(n,r,a.constant.evaluate(e.alternate))):(t.right=e.alternate,e.alternate=t)):a.constant.isConstant(e.right)&&isFoldableConditional(e.left)&&(o=!0,n=(t=e).operator,r=a.constant.evaluate(t.right),e=e.left,a.constant.isConstant(e.consequent)?e.consequent=s.SpecialNode.generateFromValue(a.constant.doBinary(n,a.constant.evaluate(e.consequent),r)):(t.left=e.consequent,e.consequent=t),a.constant.isConstant(e.alternate)?e.alternate=s.SpecialNode.generateFromValue(a.constant.doBinary(n,a.constant.evaluate(e.alternate),r)):(t.left=e.alternate,e.alternate=t));break;case i.LogicalExpression:break;case i.UnaryExpression:isFoldableConditional(e.argument)&&(o=!0,n=(r=e).operator,e=r.argument,a.constant.isConstant(e.consequent)?e.consequent=s.SpecialNode.generateFromValue(a.constant.doUnary(n,a.constant.evaluate(e.consequent))):(r.argument=e.consequent,e.consequent=r),a.constant.isConstant(e.alternate)?e.alternate=s.SpecialNode.generateFromValue(a.constant.doUnary(n,a.constant.evaluate(e.alternate))):(r.argument=e.alternate,e.alternate=r))}return e}(e);case i.ConditionalExpression:if(a.constant.isConstant(e.consequent)&&a.constant.isConstant(e.alternate)&&(t=a.constant.evaluate(e.consequent),n=a.constant.evaluate(e.alternate),s.sameValue(t,n)))return o=!0,s.moveLocation(e,{type:i.SequenceExpression,expressions:[e.test,s.SpecialNode.generateFromValue(t)]})}}}),modified:o}}n="tree-based-constant-folding",s=e("../common"),a=e("../evaluator"),i=s.Syntax,treeBasedConstantFolding.passName=n,t.exports=treeBasedConstantFolding}()},{"../common":14,"../evaluator":16}],44:[function(e,t,n){!function(){"use strict";var n,i,s,a;function main(e,t){var e=t.get("destructive",{pathName:n})?e:s.deepCopy(e),r=t.get("preserveCompletionValue",{pathName:n});return a=!1,{result:s.replace(e,{enter:function enter(e,t){var n;if(function isIIFE(e){return e.type===i.CallExpression&&e.callee.type===i.FunctionExpression}(e)){if((t=t).type===i.ExpressionStatement){if((n=this.parents()).pop(),r&&s.mayBeCompletionValue(t,n))return}else{if(!(t.type===i.SequenceExpression&&2<=t.expressions.length&&t.expressions[0]===e))return;if((n=this.parents()).pop(),n.pop().type!==i.ExpressionStatement)return}return a=!0,{type:i.UnaryExpression,operator:"!",argument:e}}},leave:function leave(e){e.type!==i.FunctionExpression&&e.type!==i.FunctionDeclaration||0}}),modified:a}}n="omit-parens-in-void-context-iife",s=e("../common"),i=s.Syntax,main.passName=n,t.exports=main}()},{"../common":14}],45:[function(e,s,t){!function(){"use strict";var n,t,r,i;function isBooleanLiteral(e){return e.type===t.Literal&&"boolean"==typeof e.value}function rewrite(e){if(isBooleanLiteral(e))return i=!0,r.moveLocation(e,{type:t.UnaryExpression,operator:"!",argument:r.moveLocation(e,{type:t.Literal,value:+!e.value})});if(e.type===t.BinaryExpression&&"=="===e.operator||"!="===e.operator){if(isBooleanLiteral(e.left))return i=!0,e.left=r.moveLocation(e.left,{type:t.Literal,value:+e.left.value}),e;if(isBooleanLiteral(e.right))i=!0,e.right=r.moveLocation(e.right,{type:t.Literal,value:+e.right.value})}return e}function rewriteBoolean(e,t){return i=!1,t=t.get("destructive",{pathName:n})?e:r.deepCopy(e),{result:r.replace(t,{enter:rewrite}),modified:i}}n="rewrite-boolean",r=e("../common"),t=r.Syntax,rewriteBoolean.passName=n,s.exports=rewriteBoolean}()},{"../common":14}],46:[function(e,t,n){!function(){"use strict";var n,i,r,s;function rewriteConditionalExpression(e,t){return s=!1,t=t.get("destructive",{pathName:n})?e:r.deepCopy(e),r.traverse(t,{enter:function enter(e){e.type===i.ConditionalExpression&&!function rewrite(e){var t=e.test,n=e.consequent,r=e.alternate;t.type===i.UnaryExpression&&"!"===t.operator&&(s=!0,e.consequent=r,e.alternate=n,e.test=t.argument)}(e)}}),{result:t,modified:s}}n="rewrite-conditional-expression",r=e("../common"),i=r.Syntax,rewriteConditionalExpression.passName=n,t.exports=rewriteConditionalExpression}()},{"../common":14}],47:[function(e,t,n){!function(){"use strict";var r,i,s;function transformInfinity(e,t){var t=t.get("destructive",{pathName:r})?e:s.deepCopy(e),n=!1;return{result:s.replace(t,{enter:function enter(e){if(e.type===i.Literal&&"number"==typeof e.value&&e.value===1/0)return n=!0,s.moveLocation(e,{type:i.BinaryExpression,operator:"/",left:{type:i.Literal,value:1},right:{type:i.Literal,value:0}})}}),modified:n}}r="transform-infinity",s=e("../common"),i=s.Syntax,transformInfinity.passName=r,t.exports=transformInfinity}()},{"../common":14}],48:[function(e,t,n){!function(){"use strict";var r,i,s;function transformStaticToDynamicPropertyAccess(e,t){var t=t.get("destructive",{pathName:r})?e:s.deepCopy(e),n=!1;return s.traverse(t,{enter:function enter(e){var t;if(e.type===i.MemberExpression&&!e.computed&&e.property.type===i.Identifier)switch((t=e.property).name){case"undefined":n=!0,e.computed=!0,e.property=s.moveLocation(t,{type:i.UnaryExpression,operator:"void",argument:{type:i.Literal,value:0}});break;case"true":case"false":n=!0,e.computed=!0,e.property=s.moveLocation(t,{type:i.Literal,value:"true"===t.name});break;case"Infinity":n=!0,e.computed=!0,e.property=s.moveLocation(t,{type:i.BinaryExpression,operator:"/",left:{type:i.Literal,value:1},right:{type:i.Literal,value:0}})}}}),{result:t,modified:n}}r="transform-static-to-dynamic-property-access",s=e("../common"),i=s.Syntax,transformStaticToDynamicPropertyAccess.passName=r,t.exports=transformStaticToDynamicPropertyAccess}()},{"../common":14}],49:[function(e,t,n){!function(){"use strict";var a=e("./common");n.get=function get(e,t){for(var n=e,r=0,i=t.length;r<i;++r)n=n[t[r]];return n},n.set=function set(e,t,n){var r,i,s;for(a.assert(0<t.length),s=e,r=0,i=t.length-1;r<i;++r)s=s[t[r]];s[t[r]]=n}}()},{"./common":14}],50:[function(e,t,n){!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t(void 0!==n?n:e.estraverse={})}(this,function(e){"use strict";var m,g,u,y,v,C;function deepCopy(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?deepCopy(n):n);return r}function Reference(e,t){this.parent=e,this.key=t}function Element(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function Controller(){}function traverse(e,t){return(new Controller).traverse(e,t)}function extendCommentRange(t,e){var n=function upperBound(e,t){for(var n,r,i=e.length,s=0;i;)t(e[r=s+(n=i>>>1)])?i=n:(s=r+1,i-=1+n);return s}(e,function search(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],n!==e.length&&(t.extendedRange[1]=e[n].range[0]),0<=--n&&(t.extendedRange[0]=e[n].range[1]),t}m={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},g=(g=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},y={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={Break:v={},Skip:C={}},Reference.prototype.replace=function replace(e){this.parent[this.key]=e},Controller.prototype.path=function path(){var e,t,n,r,i;function addToPath(e,t){if(g(t))for(n=0,r=t.length;n<r;++n)e.push(t[n]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)addToPath(i,this.__leavelist[e].path);return addToPath(i,this.__current.path),i},Controller.prototype.parents=function parents(){for(var e=[],t=1,n=this.__leavelist.length;t<n;++t)e.push(this.__leavelist[t].node);return e},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(e,t){var n=void 0,r=this.__current;return this.__current=t,this.__state=null,e&&(n=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=r,n},Controller.prototype.notify=function notify(e){this.__state=e},Controller.prototype.skip=function(){this.notify(C)},Controller.prototype.break=function(){this.notify(v)},Controller.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null},Controller.prototype.traverse=function traverse(e,t){var n,r,i,s,a,o,u,l,c,h,p,d;for(this.__initialize(e,t),d={},n=this.__worklist,r=this.__leavelist,n.push(new Element(e,null,null,null)),r.push(new Element(null,null,null,null));n.length;)if((i=n.pop())===d){if(i=r.pop(),o=this.__execute(t.leave,i),this.__state===v||o===v)return}else if(i.node){if(o=this.__execute(t.enter,i),this.__state===v||o===v)return;if(n.push(d),r.push(i),this.__state!==C&&o!==C)for(s=i.node,a=i.wrap||s.type,l=(h=y[a]).length;0<=--l;)if(p=s[u=h[l]])if(g(p))for(c=p.length;0<=--c;)p[c]&&(i=a!==m.ObjectExpression&&a!==m.ObjectPattern||"properties"!==h[l]?new Element(p[c],[u,c],null,null):new Element(p[c],[u,c],"Property",null),n.push(i));else n.push(new Element(p,u,null,null))}},Controller.prototype.replace=function replace(e,t){var n,r,i,s,a,o,u,l,c,h,p,d,f;for(this.__initialize(e,t),p={},n=this.__worklist,r=this.__leavelist,o=new Element(e,null,null,new Reference(d={root:e},"root")),n.push(o),r.push(o);n.length;)if((o=n.pop())===p){if(o=r.pop(),void 0!==(a=this.__execute(t.leave,o))&&a!==v&&a!==C&&o.ref.replace(a),this.__state===v||a===v)return d.root}else{if(void 0!==(a=this.__execute(t.enter,o))&&a!==v&&a!==C&&(o.ref.replace(a),o.node=a),this.__state===v||a===v)return d.root;if((i=o.node)&&(n.push(p),r.push(o),this.__state!==C)&&a!==C)for(s=o.wrap||i.type,u=(c=y[s]).length;0<=--u;)if(h=i[f=c[u]])if(g(h))for(l=h.length;0<=--l;)h[l]&&(o=s===m.ObjectExpression&&"properties"===c[u]?new Element(h[l],[f,l],"Property",new Reference(h,l)):new Element(h[l],[f,l],null,new Reference(h,l)),n.push(o));else n.push(new Element(h,f,null,new Reference(i,f)))}return d.root},e.version="1.5.1-dev",e.Syntax=m,e.traverse=traverse,e.replace=function replace(e,t){return(new Controller).replace(e,t)},e.attachComments=function attachComments(e,t,n){var r,i,s,a,o=[];if(!e.range)throw new Error("attachComments needs range information");if(n.length){for(s=0,i=t.length;s<i;s+=1)o.push(extendCommentRange(deepCopy(t[s]),n));a=0,traverse(e,{enter:function(e){for(var t;a<o.length&&!((t=o[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}}),a=0,traverse(e,{leave:function(e){for(var t;a<o.length&&(t=o[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}})}else if(t.length){for(s=0,i=t.length;s<i;s+=1)(r=deepCopy(t[s])).extendedRange=[0,e.range[0]],o.push(r);e.leadingComments=o}return e},e.VisitorKeys=y,e.VisitorOption=u,e.Controller=Controller})},{}],51:[function(e,n,t){!function(){"use strict";var t;function isDecimalDigit(e){return 48<=e&&e<=57}t={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},n.exports={isDecimalDigit:isDecimalDigit,isHexDigit:function isHexDigit(e){return isDecimalDigit(e)||97<=e&&e<=102||65<=e&&e<=70},isOctalDigit:function isOctalDigit(e){return 48<=e&&e<=55},isWhiteSpace:function isWhiteSpace(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)},isLineTerminator:function isLineTerminator(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function isIdentifierStart(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&t.NonAsciiIdentifierStart.test(String.fromCharCode(e))},isIdentifierPart:function isIdentifierPart(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&t.NonAsciiIdentifierPart.test(String.fromCharCode(e))}}}()},{}],52:[function(e,t,n){!function(){"use strict";var i=e("./code");function isKeywordES6(e,t){if(t&&function isStrictModeReservedWordES6(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return 1;default:return}}(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}t.exports={isKeywordES5:function isKeywordES5(e,t){return!(!t&&"yield"===e)&&isKeywordES6(e,t)},isKeywordES6:isKeywordES6,isRestrictedWord:function isRestrictedWord(e){return"eval"===e||"arguments"===e},isIdentifierName:function isIdentifierName(e){var t,n,r;if(0===e.length)return!1;if(r=e.charCodeAt(0),!i.isIdentifierStart(r)||92===r)return!1;for(t=1,n=e.length;t<n;++t)if(r=e.charCodeAt(t),!i.isIdentifierPart(r)||92===r)return!1;return!0}}}()},{"./code":51}],53:[function(e,t,n){!function(){"use strict";n.code=e("./code"),n.keyword=e("./keyword")}()},{"./code":51,"./keyword":52}],54:[function(e,t,n){t.exports={name:"esmangle",description:"ECMAScript code mangler / minifier",homepage:"http://github.com/Constellation/esmangle.html",main:"lib/esmangle.js",bin:{esmangle:"./bin/esmangle.js"},version:"1.0.1",engines:{node:">=0.6.0"},directories:{lib:"./lib"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/Constellation/esmangle.git"},dependencies:{esutils:"~ 1.0.0",esshorten:"~1.1.0",estraverse:"~1.5.0",escope:"~1.0.1","source-map":"~0.1.33",escodegen:"~1.3.2",optionator:"~0.3.0",esprima:"~1.1.1"},devDependencies:{chai:"*","grunt-contrib-jshint":"~0.8.0","grunt-mocha-test":"~0.8.1","grunt-contrib-copy":"~0.5.0","grunt-contrib-clean":"~0.5.0",async:"~0.2.9",q:"~0.9.7","commonjs-everywhere":"~0.9.4","grunt-cli":"~0.1.11",grunt:"~0.4.2","grunt-update-submodules":"~0.2.1","grunt-shell":"~0.6.1",clone:"~0.1.11"},licenses:[{type:"BSD",url:"http://github.com/Constellation/esmangle/raw/master/LICENSE.BSD"}],scripts:{test:"grunt travis",lint:"grunt lint","regression-test":"grunt test:regression","unit-test":"grunt test",build:"grunt build"}}},{}],55:[function(e,n,r){!function webpackUniversalModuleDefinition(e,t){"object"==typeof r&&"object"==typeof n?n.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof r?r.esprima=t():e.esprima=t()}(this,function(){return n=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=n(3),l=n(8),a=n(15);function parse(e,t,n){function nG(e,t){n&&n(e,t),r&&r.visit(e,t)}var r=null,i="function"==typeof n?nG:null,s=!1,a=(t&&(s="boolean"==typeof t.comment&&t.comment,a="boolean"==typeof t.attachComment&&t.attachComment,s||a)&&((r=new o.CommentHandler).attach=a,t.comment=!0,i=nG),!1),e=(t&&"string"==typeof t.sourceType&&(a="module"===t.sourceType),new(t&&"boolean"==typeof t.jsx&&t.jsx?u.JSXParser:l.Parser)(e,t,i)),t=a?e.parseModule():e.parseScript();return s&&r&&(t.comments=r.comments),e.config.tokens&&(t.tokens=e.tokens),e.config.tolerant&&(t.errors=e.errorHandler.errors),t}t.parse=parse,t.parseModule=function parseModule(e,t,n){return(t=t||{}).sourceType="module",parse(e,t,n)},t.parseScript=function parseScript(e,t,n){return(t=t||{}).sourceType="script",parse(e,t,n)},t.tokenize=function tokenize(e,t,n){var r=new a.Tokenizer(e,t),i=[];try{for(;;){var s=r.getNextToken();if(!s)break;n&&(s=n(s)),i.push(s)}}catch(e){r.errorHandler.tolerate(e)}return r.errorHandler.tolerant&&(i.errors=r.errors()),i};n=n(2);t.Syntax=n.Syntax,t.version="4.0.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(2);function CommentHandler(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}CommentHandler.prototype.insertInnerComments=function(e,t){if(e.type===s.Syntax.BlockStatement&&0===e.body.length){for(var n=[],r=this.leading.length-1;0<=r;--r){var i=this.leading[r];t.end.offset>=i.start&&(n.unshift(i.comment),this.leading.splice(r,1),this.trailing.splice(r,1))}n.length&&(e.innerComments=n)}},CommentHandler.prototype.findTrailingComments=function(e){var t=[];if(0<this.trailing.length){for(var n=this.trailing.length-1;0<=n;--n){var r=this.trailing[n];r.start>=e.end.offset&&t.unshift(r.comment)}this.trailing.length=0}else{var i,s=this.stack[this.stack.length-1];s&&s.node.trailingComments&&(i=s.node.trailingComments[0])&&i.range[0]>=e.end.offset&&(t=s.node.trailingComments,delete s.node.trailingComments)}return t},CommentHandler.prototype.findLeadingComments=function(e){for(var t,n=[];0<this.stack.length&&((s=this.stack[this.stack.length-1])&&s.start>=e.start.offset);)t=s.node,this.stack.pop();if(t){for(var r=(t.leadingComments?t.leadingComments.length:0)-1;0<=r;--r){var i=t.leadingComments[r];i.range[1]<=e.start.offset&&(n.unshift(i),t.leadingComments.splice(r,1))}t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments}else for(var s,r=this.leading.length-1;0<=r;--r)(s=this.leading[r]).start<=e.start.offset&&(n.unshift(s.comment),this.leading.splice(r,1));return n},CommentHandler.prototype.visitNode=function(e,t){var n,r;e.type===s.Syntax.Program&&0<e.body.length||(this.insertInnerComments(e,t),n=this.findTrailingComments(t),0<(r=this.findLeadingComments(t)).length&&(e.leadingComments=r),0<n.length&&(e.trailingComments=n),this.stack.push({node:e,start:t.start.offset}))},CommentHandler.prototype.visitComment=function(e,t){var n="L"===e.type[0]?"Line":"Block",r={type:n,value:e.value};e.range&&(r.range=e.range),e.loc&&(r.loc=e.loc),this.comments.push(r),this.attach&&(r={comment:{type:n,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset},e.loc&&(r.comment.loc=e.loc),e.type=n,this.leading.push(r),this.trailing.push(r))},CommentHandler.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},t.CommentHandler=CommentHandler},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),function(e,t){function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),u=(Object.defineProperty(t,"__esModule",{value:!0}),n(4)),a=n(5),o=n(6),s=n(7),l=n(8),c=n(13),h=n(14);function getQualifiedElementName(e){switch(e.type){case o.JSXSyntax.JSXIdentifier:var t=e.name;break;case o.JSXSyntax.JSXNamespacedName:var n=e;t=getQualifiedElementName(n.namespace)+":"+getQualifiedElementName(n.name);break;case o.JSXSyntax.JSXMemberExpression:n=e;t=getQualifiedElementName(n.object)+"."+getQualifiedElementName(n.property)}return t}c.TokenName[100]="JSXIdentifier",c.TokenName[101]="JSXText";p=l.Parser,i(JSXParser,p),JSXParser.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():p.prototype.parsePrimaryExpression.call(this)},JSXParser.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},JSXParser.prototype.finishJSX=function(){this.nextToken()},JSXParser.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},JSXParser.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},JSXParser.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},JSXParser.prototype.scanXHTMLEntity=function(e){for(var t,n="&",r=!0,i=!1,s=!1,a=!1;!this.scanner.eof()&&r&&!i;){var o=this.scanner.source[this.scanner.index];if(o===e)break;if(i=";"===o,n+=o,++this.scanner.index,!i)switch(n.length){case 2:s="#"===o;break;case 3:s&&(r=(a="x"===o)||u.Character.isDecimalDigit(o.charCodeAt(0)),s=s&&!a);break;default:r=(r=r&&!(s&&!u.Character.isDecimalDigit(o.charCodeAt(0))))&&!(a&&!u.Character.isHexDigit(o.charCodeAt(0)))}}return r&&i&&2<n.length&&(t=n.substr(1,n.length-2),s&&1<t.length?n=String.fromCharCode(parseInt(t.substr(1),10)):a&&2<t.length?n=String.fromCharCode(parseInt("0"+t.substr(1),16)):s||a||!h.XHTMLEntities[t]||(n=h.XHTMLEntities[t])),n},JSXParser.prototype.lexJSX=function(){var e,t,n,r=this.scanner.source.charCodeAt(this.scanner.index);if(60===r||62===r||47===r||58===r||61===r||123===r||125===r)return{type:7,value:n=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===r||39===r){for(var i=this.scanner.index,s=this.scanner.source[this.scanner.index++],a="";!this.scanner.eof();){if((o=this.scanner.source[this.scanner.index++])===s)break;a+="&"===o?this.scanXHTMLEntity(s):o}return{type:8,value:a,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:i,end:this.scanner.index}}if(46===r)return e=this.scanner.source.charCodeAt(this.scanner.index+1),t=this.scanner.source.charCodeAt(this.scanner.index+2),i=this.scanner.index,this.scanner.index+=(n=46===e&&46===t?"...":".").length,{type:7,value:n,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:i,end:this.scanner.index};if(96===r)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(u.Character.isIdentifierStart(r)&&92!==r){i=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var o=this.scanner.source.charCodeAt(this.scanner.index);if((!u.Character.isIdentifierPart(o)||92===o)&&45!==o)break;++this.scanner.index}return{type:100,value:this.scanner.source.slice(i,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:i,end:this.scanner.index}}return this.scanner.lex()},JSXParser.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},JSXParser.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var n=this.scanner.source[this.scanner.index];if("{"===n||"<"===n)break;++this.scanner.index,t+=n,u.Character.isLineTerminator(n.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===n&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;e={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return 0<t.length&&this.config.tokens&&this.tokens.push(this.convertToken(e)),e},JSXParser.prototype.peekJSXToken=function(){var e=this.scanner.saveState(),t=(this.scanner.scanComments(),this.lexJSX());return this.scanner.restoreState(e),t},JSXParser.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},JSXParser.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},JSXParser.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new a.JSXIdentifier(t.value))},JSXParser.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":"))var n=t,r=(this.expectJSX(":"),this.parseJSXIdentifier()),t=this.finalize(e,new a.JSXNamespacedName(n,r));else if(this.matchJSX("."))for(;this.matchJSX(".");){var i=t,s=(this.expectJSX("."),this.parseJSXIdentifier());t=this.finalize(e,new a.JSXMemberExpression(i,s))}return t},JSXParser.prototype.parseJSXAttributeName=function(){var e,t,n=this.createJSXNode(),r=this.parseJSXIdentifier();return this.matchJSX(":")?(e=r,this.expectJSX(":"),t=this.parseJSXIdentifier(),this.finalize(n,new a.JSXNamespacedName(e,t))):r},JSXParser.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken(),n=(8!==t.type&&this.throwUnexpectedToken(t),this.getTokenRaw(t));return this.finalize(e,new s.Literal(t.value,n))},JSXParser.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode(),t=(this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression"),this.parseAssignmentExpression());return this.reenterJSX(),this.finalize(e,new a.JSXExpressionContainer(t))},JSXParser.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},JSXParser.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),n=null;return this.matchJSX("=")&&(this.expectJSX("="),n=this.parseJSXAttributeValue()),this.finalize(e,new a.JSXAttribute(t,n))},JSXParser.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode(),t=(this.expectJSX("{"),this.expectJSX("..."),this.finishJSX(),this.parseAssignmentExpression());return this.reenterJSX(),this.finalize(e,new a.JSXSpreadAttribute(t))},JSXParser.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},JSXParser.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode(),t=(this.expectJSX("<"),this.parseJSXElementName()),n=this.parseJSXAttributes(),r=this.matchJSX("/");return r&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new a.JSXOpeningElement(t,r,n))},JSXParser.prototype.parseJSXBoundaryElement=function(){var e,t,n,r=this.createJSXNode();return this.expectJSX("<"),this.matchJSX("/")?(this.expectJSX("/"),e=this.parseJSXElementName(),this.expectJSX(">"),this.finalize(r,new a.JSXClosingElement(e))):(e=this.parseJSXElementName(),t=this.parseJSXAttributes(),(n=this.matchJSX("/"))&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(r,new a.JSXOpeningElement(e,n,t)))},JSXParser.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new a.JSXEmptyExpression)},JSXParser.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new a.JSXExpressionContainer(e))},JSXParser.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t,n=this.createJSXChildNode(),r=this.nextJSXText();if(r.start<r.end&&(t=this.getTokenRaw(r),n=this.finalize(n,new a.JSXText(r.value,t)),e.push(n)),"{"!==this.scanner.source[this.scanner.index])break;r=this.parseJSXExpressionContainer();e.push(r)}return e},JSXParser.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var n,r=this.createJSXChildNode(),i=this.parseJSXBoundaryElement();if(i.type===o.JSXSyntax.JSXOpeningElement&&((n=i).selfClosing?(s=this.finalize(r,new a.JSXElement(n,[],null)),e.children.push(s)):(t.push(e),e={node:r,opening:n,closing:null,children:[]})),i.type===o.JSXSyntax.JSXClosingElement){e.closing=i;r=getQualifiedElementName(e.opening.name);if(r!==getQualifiedElementName(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",r),!(0<t.length))break;var s=this.finalize(e.node,new a.JSXElement(e.opening,e.children,e.closing));(e=t[t.length-1]).children.push(s),t.pop()}}return e},JSXParser.prototype.parseJSXElement=function(){var e,t=this.createJSXNode(),n=this.parseJSXOpeningElement(),r=[],i=null;return n.selfClosing||(r=(e=this.parseComplexJSXElement({node:t,opening:n,closing:i,children:r})).children,i=e.closing),this.finalize(t,new a.JSXElement(n,r,i))},JSXParser.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},JSXParser.prototype.isStartOfExpression=function(){return p.prototype.isStartOfExpression.call(this)||this.match("<")};var p,n=JSXParser;function JSXParser(e,t,n){return p.call(this,e,t,n)||this}t.JSXParser=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&n.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&n.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return 48<=e&&e<=57},isHexDigit:function(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102},isOctalDigit:function(e){return 48<=e&&e<=55}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),n=(t.JSXClosingElement=function JSXClosingElement(e){this.type=r.JSXSyntax.JSXClosingElement,this.name=e},function JSXElement(e,t,n){this.type=r.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=n}),n=(t.JSXElement=n,function JSXEmptyExpression(){this.type=r.JSXSyntax.JSXEmptyExpression}),n=(t.JSXEmptyExpression=n,function JSXExpressionContainer(e){this.type=r.JSXSyntax.JSXExpressionContainer,this.expression=e}),n=(t.JSXExpressionContainer=n,function JSXIdentifier(e){this.type=r.JSXSyntax.JSXIdentifier,this.name=e}),n=(t.JSXIdentifier=n,function JSXMemberExpression(e,t){this.type=r.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t}),n=(t.JSXMemberExpression=n,function JSXAttribute(e,t){this.type=r.JSXSyntax.JSXAttribute,this.name=e,this.value=t}),n=(t.JSXAttribute=n,function JSXNamespacedName(e,t){this.type=r.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t}),n=(t.JSXNamespacedName=n,function JSXOpeningElement(e,t,n){this.type=r.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=n}),n=(t.JSXOpeningElement=n,function JSXSpreadAttribute(e){this.type=r.JSXSyntax.JSXSpreadAttribute,this.argument=e}),n=(t.JSXSpreadAttribute=n,function JSXText(e,t){this.type=r.JSXSyntax.JSXText,this.value=e,this.raw=t});t.JSXText=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),n=(t.ArrayExpression=function ArrayExpression(e){this.type=a.Syntax.ArrayExpression,this.elements=e},function ArrayPattern(e){this.type=a.Syntax.ArrayPattern,this.elements=e}),n=(t.ArrayPattern=n,function ArrowFunctionExpression(e,t,n){this.type=a.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!1}),n=(t.ArrowFunctionExpression=n,function AssignmentExpression(e,t,n){this.type=a.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=n}),n=(t.AssignmentExpression=n,function AssignmentPattern(e,t){this.type=a.Syntax.AssignmentPattern,this.left=e,this.right=t}),n=(t.AssignmentPattern=n,function AsyncArrowFunctionExpression(e,t,n){this.type=a.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!0}),n=(t.AsyncArrowFunctionExpression=n,function AsyncFunctionDeclaration(e,t,n){this.type=a.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0}),n=(t.AsyncFunctionDeclaration=n,function AsyncFunctionExpression(e,t,n){this.type=a.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0}),n=(t.AsyncFunctionExpression=n,function AwaitExpression(e){this.type=a.Syntax.AwaitExpression,this.argument=e}),n=(t.AwaitExpression=n,function BinaryExpression(e,t,n){this.type="||"===e||"&&"===e?a.Syntax.LogicalExpression:a.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=n}),n=(t.BinaryExpression=n,function BlockStatement(e){this.type=a.Syntax.BlockStatement,this.body=e}),n=(t.BlockStatement=n,function BreakStatement(e){this.type=a.Syntax.BreakStatement,this.label=e}),n=(t.BreakStatement=n,function CallExpression(e,t){this.type=a.Syntax.CallExpression,this.callee=e,this.arguments=t}),n=(t.CallExpression=n,function CatchClause(e,t){this.type=a.Syntax.CatchClause,this.param=e,this.body=t}),n=(t.CatchClause=n,function ClassBody(e){this.type=a.Syntax.ClassBody,this.body=e}),n=(t.ClassBody=n,function ClassDeclaration(e,t,n){this.type=a.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=n}),n=(t.ClassDeclaration=n,function ClassExpression(e,t,n){this.type=a.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=n}),n=(t.ClassExpression=n,function ComputedMemberExpression(e,t){this.type=a.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t}),n=(t.ComputedMemberExpression=n,function ConditionalExpression(e,t,n){this.type=a.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n}),n=(t.ConditionalExpression=n,function ContinueStatement(e){this.type=a.Syntax.ContinueStatement,this.label=e}),n=(t.ContinueStatement=n,function DebuggerStatement(){this.type=a.Syntax.DebuggerStatement}),n=(t.DebuggerStatement=n,function Directive(e,t){this.type=a.Syntax.ExpressionStatement,this.expression=e,this.directive=t}),n=(t.Directive=n,function DoWhileStatement(e,t){this.type=a.Syntax.DoWhileStatement,this.body=e,this.test=t}),n=(t.DoWhileStatement=n,function EmptyStatement(){this.type=a.Syntax.EmptyStatement}),n=(t.EmptyStatement=n,function ExportAllDeclaration(e){this.type=a.Syntax.ExportAllDeclaration,this.source=e}),n=(t.ExportAllDeclaration=n,function ExportDefaultDeclaration(e){this.type=a.Syntax.ExportDefaultDeclaration,this.declaration=e}),n=(t.ExportDefaultDeclaration=n,function ExportNamedDeclaration(e,t,n){this.type=a.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n}),n=(t.ExportNamedDeclaration=n,function ExportSpecifier(e,t){this.type=a.Syntax.ExportSpecifier,this.exported=t,this.local=e}),n=(t.ExportSpecifier=n,function ExpressionStatement(e){this.type=a.Syntax.ExpressionStatement,this.expression=e}),n=(t.ExpressionStatement=n,function ForInStatement(e,t,n){this.type=a.Syntax.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1}),n=(t.ForInStatement=n,function ForOfStatement(e,t,n){this.type=a.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=n}),n=(t.ForOfStatement=n,function ForStatement(e,t,n,r){this.type=a.Syntax.ForStatement,this.init=e,this.test=t,this.update=n,this.body=r}),n=(t.ForStatement=n,function FunctionDeclaration(e,t,n,r){this.type=a.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=r,this.expression=!1,this.async=!1}),n=(t.FunctionDeclaration=n,function FunctionExpression(e,t,n,r){this.type=a.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=r,this.expression=!1,this.async=!1}),n=(t.FunctionExpression=n,function Identifier(e){this.type=a.Syntax.Identifier,this.name=e}),n=(t.Identifier=n,function IfStatement(e,t,n){this.type=a.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=n}),n=(t.IfStatement=n,function ImportDeclaration(e,t){this.type=a.Syntax.ImportDeclaration,this.specifiers=e,this.source=t}),n=(t.ImportDeclaration=n,function ImportDefaultSpecifier(e){this.type=a.Syntax.ImportDefaultSpecifier,this.local=e}),n=(t.ImportDefaultSpecifier=n,function ImportNamespaceSpecifier(e){this.type=a.Syntax.ImportNamespaceSpecifier,this.local=e}),n=(t.ImportNamespaceSpecifier=n,function ImportSpecifier(e,t){this.type=a.Syntax.ImportSpecifier,this.local=e,this.imported=t}),n=(t.ImportSpecifier=n,function LabeledStatement(e,t){this.type=a.Syntax.LabeledStatement,this.label=e,this.body=t}),n=(t.LabeledStatement=n,function Literal(e,t){this.type=a.Syntax.Literal,this.value=e,this.raw=t}),n=(t.Literal=n,function MetaProperty(e,t){this.type=a.Syntax.MetaProperty,this.meta=e,this.property=t}),n=(t.MetaProperty=n,function MethodDefinition(e,t,n,r,i){this.type=a.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=n,this.kind=r,this.static=i}),n=(t.MethodDefinition=n,function Module(e){this.type=a.Syntax.Program,this.body=e,this.sourceType="module"}),n=(t.Module=n,function NewExpression(e,t){this.type=a.Syntax.NewExpression,this.callee=e,this.arguments=t}),n=(t.NewExpression=n,function ObjectExpression(e){this.type=a.Syntax.ObjectExpression,this.properties=e}),n=(t.ObjectExpression=n,function ObjectPattern(e){this.type=a.Syntax.ObjectPattern,this.properties=e}),n=(t.ObjectPattern=n,function Property(e,t,n,r,i,s){this.type=a.Syntax.Property,this.key=t,this.computed=n,this.value=r,this.kind=e,this.method=i,this.shorthand=s}),n=(t.Property=n,function RegexLiteral(e,t,n,r){this.type=a.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:n,flags:r}}),n=(t.RegexLiteral=n,function RestElement(e){this.type=a.Syntax.RestElement,this.argument=e}),n=(t.RestElement=n,function ReturnStatement(e){this.type=a.Syntax.ReturnStatement,this.argument=e}),n=(t.ReturnStatement=n,function Script(e){this.type=a.Syntax.Program,this.body=e,this.sourceType="script"}),n=(t.Script=n,function SequenceExpression(e){this.type=a.Syntax.SequenceExpression,this.expressions=e}),n=(t.SequenceExpression=n,function SpreadElement(e){this.type=a.Syntax.SpreadElement,this.argument=e}),n=(t.SpreadElement=n,function StaticMemberExpression(e,t){this.type=a.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t}),n=(t.StaticMemberExpression=n,function Super(){this.type=a.Syntax.Super}),n=(t.Super=n,function SwitchCase(e,t){this.type=a.Syntax.SwitchCase,this.test=e,this.consequent=t}),n=(t.SwitchCase=n,function SwitchStatement(e,t){this.type=a.Syntax.SwitchStatement,this.discriminant=e,this.cases=t}),n=(t.SwitchStatement=n,function TaggedTemplateExpression(e,t){this.type=a.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t}),n=(t.TaggedTemplateExpression=n,function TemplateElement(e,t){this.type=a.Syntax.TemplateElement,this.value=e,this.tail=t}),n=(t.TemplateElement=n,function TemplateLiteral(e,t){this.type=a.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t}),n=(t.TemplateLiteral=n,function ThisExpression(){this.type=a.Syntax.ThisExpression}),n=(t.ThisExpression=n,function ThrowStatement(e){this.type=a.Syntax.ThrowStatement,this.argument=e}),n=(t.ThrowStatement=n,function TryStatement(e,t,n){this.type=a.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=n}),n=(t.TryStatement=n,function UnaryExpression(e,t){this.type=a.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0}),n=(t.UnaryExpression=n,function UpdateExpression(e,t,n){this.type=a.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=n}),n=(t.UpdateExpression=n,function VariableDeclaration(e,t){this.type=a.Syntax.VariableDeclaration,this.declarations=e,this.kind=t}),n=(t.VariableDeclaration=n,function VariableDeclarator(e,t){this.type=a.Syntax.VariableDeclarator,this.id=e,this.init=t}),n=(t.VariableDeclarator=n,function WhileStatement(e,t){this.type=a.Syntax.WhileStatement,this.test=e,this.body=t}),n=(t.WhileStatement=n,function WithStatement(e,t){this.type=a.Syntax.WithStatement,this.object=e,this.body=t}),n=(t.WithStatement=n,function YieldExpression(e,t){this.type=a.Syntax.YieldExpression,this.argument=e,this.delegate=t});t.YieldExpression=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),r=n(10),d=n(11),m=n(7),i=n(12),p=n(2),s=n(13),f="ArrowParameterPlaceHolder";function Parser(e,t,n){this.config={range:"boolean"==typeof(t=void 0===t?{}:t).range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=n,this.errorHandler=new r.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new i.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}Parser.prototype.throwError=function(e){for(var t=1;t<arguments.length;t++)t-1,0;var n=Array.prototype.slice.call(arguments,1),e=e.replace(/%(\d)/g,function(e,t){return a.assert(t<n.length,"Message reference must be in range"),n[t]}),r=this.lastMarker.index,i=this.lastMarker.line,s=this.lastMarker.column+1;throw this.errorHandler.createError(r,i,s,e)},Parser.prototype.tolerateError=function(e){for(var t=1;t<arguments.length;t++)t-1,0;var n=Array.prototype.slice.call(arguments,1),e=e.replace(/%(\d)/g,function(e,t){return a.assert(t<n.length,"Message reference must be in range"),n[t]}),r=this.lastMarker.index,i=this.scanner.lineNumber,s=this.lastMarker.column+1;this.errorHandler.tolerateError(r,i,s,e)},Parser.prototype.unexpectedTokenError=function(e,t){var n,r,i=t||d.Messages.UnexpectedToken,t=e?(t||(i=2===e.type?d.Messages.UnexpectedEOS:3===e.type?d.Messages.UnexpectedIdentifier:6===e.type?d.Messages.UnexpectedNumber:8===e.type?d.Messages.UnexpectedString:10===e.type?d.Messages.UnexpectedTemplate:d.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?i=d.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(i=d.Messages.StrictReservedWord))),e.value):"ILLEGAL",i=i.replace("%0",t);return e=e&&"number"==typeof e.lineNumber?(n=e.start,r=e.lineNumber,t=this.lastMarker.index-this.lastMarker.column,e.start-t+1):(n=this.lastMarker.index,r=this.lastMarker.line,this.lastMarker.column+1),this.errorHandler.createError(n,r,e,i)},Parser.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},Parser.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},Parser.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(0<e.length&&this.delegate)for(var t=0;t<e.length;++t){var n=e[t],r=void 0,r={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])},n=(this.config.range&&(r.range=n.range),this.config.loc&&(r.loc=n.loc),{start:{line:n.loc.start.line,column:n.loc.start.column,offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}});this.delegate(r,n)}}else this.scanner.scanComments()},Parser.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},Parser.prototype.convertToken=function(e){var t,n={type:s.TokenName[e.type],value:this.getTokenRaw(e)};return this.config.range&&(n.range=[e.start,e.end]),this.config.loc&&(n.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type&&(t=e.pattern,e=e.flags,n.regex={pattern:t,flags:e}),n},Parser.prototype.nextToken=function(){var e=this.lookahead,t=(this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.scanner.lex());return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},Parser.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},Parser.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},Parser.prototype.startNode=function(e,t){void 0===t&&(t=0);var n=e.start-e.lineStart,r=e.lineNumber;return n<0&&(n+=t,r--),{index:e.start,line:r,column:n}},Parser.prototype.finalize=function(e,t){return this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source)&&(t.loc.source=this.config.source),this.delegate&&(e={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}},this.delegate(t,e)),t},Parser.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},Parser.prototype.expectCommaSeparator=function(){var e;this.config.tolerant?7===(e=this.lookahead).type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,d.Messages.UnexpectedToken):this.expect(",")},Parser.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},Parser.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},Parser.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},Parser.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},Parser.prototype.matchAssign=function(){var e;return 7===this.lookahead.type&&("="===(e=this.lookahead.value)||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)},Parser.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError,e=(this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null,e.call(this));return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=r,e},Parser.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError,e=(this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null,e.call(this));return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n,this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError,e},Parser.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},Parser.prototype.parsePrimaryExpression=function(){var e,t,n,r=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(r,new m.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,d.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new m.Literal(t.value,n));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new m.Literal("true"===t.value,n));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new m.Literal(null,n));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),n=this.getTokenRaw(t),e=this.finalize(r,new m.RegexLiteral(t.regex,n,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:e=!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?this.finalize(r,new m.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),this.finalize(r,new m.ThisExpression)):this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},Parser.prototype.parseSpreadElement=function(){var e=this.createNode(),t=(this.expect("..."),this.inheritCoverGrammar(this.parseAssignmentExpression));return this.finalize(e,new m.SpreadElement(t))},Parser.prototype.parseArrayInitializer=function(){var e,t=this.createNode(),n=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),n.push(null)):this.match("...")?(e=this.parseSpreadElement(),this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),n.push(e)):(n.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));return this.expect("]"),this.finalize(t,new m.ArrayExpression(n))},Parser.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,n=this.context.allowStrictDirective,r=(this.context.allowStrictDirective=e.simple,this.isolateCoverGrammar(this.parseFunctionSourceElements));return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=n,r},Parser.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield,n=(this.context.allowYield=!0,this.parseFormalParameters()),r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new m.FunctionExpression(null,n.params,r,!1))},Parser.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,n=this.context.await,r=(this.context.allowYield=!1,this.context.await=!0,this.parseFormalParameters()),i=this.parsePropertyMethod(r);return this.context.allowYield=t,this.context.await=n,this.finalize(e,new m.AsyncFunctionExpression(null,r.params,i))},Parser.prototype.parseObjectPropertyKey=function(){var e=this.createNode(),t=this.nextToken();switch(t.type){case 8:case 6:this.context.strict&&t.octal&&this.tolerateUnexpectedToken(t,d.Messages.StrictOctalLiteral);var n=this.getTokenRaw(t),r=this.finalize(e,new m.Literal(t.value,n));break;case 3:case 1:case 5:case 4:r=this.finalize(e,new m.Identifier(t.value));break;case 7:"["===t.value?(r=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):r=this.throwUnexpectedToken(t);break;default:r=this.throwUnexpectedToken(t)}return r},Parser.prototype.isPropertyKey=function(e,t){return e.type===p.Syntax.Identifier&&e.name===t||e.type===p.Syntax.Literal&&e.value===t},Parser.prototype.parseObjectProperty=function(e){var t,n,r=this.createNode(),i=this.lookahead,s=null,a=null,o=!1,u=!1,l=!1,c=!1,h=(3===i.type?(n=i.value,this.nextToken(),o=this.match("["),s=(c=!(this.hasLineTerminator||"async"!==n||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(r,new m.Identifier(n))):this.match("*")?this.nextToken():(o=this.match("["),s=this.parseObjectPropertyKey()),this.qualifiedPropertyName(this.lookahead));return 3===i.type&&!c&&"get"===i.value&&h?(t="get",o=this.match("["),s=this.parseObjectPropertyKey(),this.context.allowYield=!1,a=this.parseGetterMethod()):3===i.type&&!c&&"set"===i.value&&h?(t="set",o=this.match("["),s=this.parseObjectPropertyKey(),a=this.parseSetterMethod()):7===i.type&&"*"===i.value&&h?(t="init",o=this.match("["),s=this.parseObjectPropertyKey(),a=this.parseGeneratorMethod(),u=!0):(s||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!c?(!o&&this.isPropertyKey(s,"__proto__")&&(e.value&&this.tolerateError(d.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),a=this.inheritCoverGrammar(this.parseAssignmentExpression)):this.match("(")?(a=c?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0):3===i.type?(n=this.finalize(r,new m.Identifier(i.value)),a=this.match("=")?(this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),l=!0,h=this.isolateCoverGrammar(this.parseAssignmentExpression),this.finalize(r,new m.AssignmentPattern(n,h))):(l=!0,n)):this.throwUnexpectedToken(this.nextToken())),this.finalize(r,new m.Property(t,s,o,a,u,l))},Parser.prototype.parseObjectInitializer=function(){for(var e=this.createNode(),t=(this.expect("{"),[]),n={value:!1};!this.match("}");)t.push(this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new m.ObjectExpression(t))},Parser.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),n=t.value,r=t.cooked;return this.finalize(e,new m.TemplateElement({raw:n,cooked:r},t.tail))},Parser.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),n=t.value,r=t.cooked;return this.finalize(e,new m.TemplateElement({raw:n,cooked:r},t.tail))},Parser.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],n=[],r=this.parseTemplateHead();for(n.push(r);!r.tail;)t.push(this.parseExpression()),r=this.parseTemplateElement(),n.push(r);return this.finalize(e,new m.TemplateLiteral(n,t))},Parser.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case p.Syntax.Identifier:case p.Syntax.MemberExpression:case p.Syntax.RestElement:case p.Syntax.AssignmentPattern:break;case p.Syntax.SpreadElement:e.type=p.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case p.Syntax.ArrayExpression:e.type=p.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case p.Syntax.ObjectExpression:e.type=p.Syntax.ObjectPattern;for(t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case p.Syntax.AssignmentExpression:e.type=p.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},Parser.prototype.parseGroupExpression=function(){if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),s={type:f,params:[],async:!1};else{var e=this.lookahead,t=[];if(this.match("..."))s=this.parseRestElement(t),this.expect(")"),this.match("=>")||this.expect("=>"),s={type:f,params:[s],async:!1};else{var n=!1;if(this.context.isBindingElement=!0,s=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var r=[];for(this.context.isAssignmentTarget=!1,r.push(s);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var i=0;i<r.length;i++)this.reinterpretExpressionAsPattern(r[i]);s={type:f,params:r,async:!(n=!0)}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),r.push(this.parseRestElement(t)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(i=0;i<r.length;i++)this.reinterpretExpressionAsPattern(r[i]);s={type:f,params:r,async:!(n=!0)}}else r.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(n)break}n||(s=this.finalize(this.startNode(e),new m.SequenceExpression(r)))}if(!n){if(this.expect(")"),this.match("=>")&&(s.type===p.Syntax.Identifier&&"yield"===s.name&&(s={type:f,params:[s],async:!(n=!0)}),!n)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),s.type===p.Syntax.SequenceExpression)for(i=0;i<s.expressions.length;i++)this.reinterpretExpressionAsPattern(s.expressions[i]);else this.reinterpretExpressionAsPattern(s);var e=s.type===p.Syntax.SequenceExpression?s.expressions:[s],s={type:f,params:e,async:!1}}this.context.isBindingElement=!1}}}return s},Parser.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},Parser.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},Parser.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new m.Identifier(t.value))},Parser.prototype.parseNewExpression=function(){var e,t,n=this.createNode(),r=this.parseIdentifierName();return a.assert("new"===r.name,"New expression must start with `new`"),this.match(".")?(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value?(e=this.parseIdentifierName(),e=new m.MetaProperty(r,e)):this.throwUnexpectedToken(this.lookahead)):(r=this.isolateCoverGrammar(this.parseLeftHandSideExpression),t=this.match("(")?this.parseArguments():[],e=new m.NewExpression(r,t),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),this.finalize(n,e)},Parser.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},Parser.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},Parser.prototype.parseLeftHandSideExpressionAllowCall=function(){var e=this.lookahead,t=this.matchContextualKeyword("async"),n=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(i=this.createNode(),this.nextToken(),i=this.finalize(i,new m.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):i=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var r=this.parseIdentifierName(),i=this.finalize(this.startNode(e),new m.StaticMemberExpression(i,r))}else if(this.match("(")){var s=t&&e.lineNumber===this.lookahead.lineNumber,a=(this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1,s?this.parseAsyncArguments():this.parseArguments());if(i=this.finalize(this.startNode(e),new m.CallExpression(i,a)),s&&this.match("=>")){for(var o=0;o<a.length;++o)this.reinterpretExpressionAsPattern(a[o]);i={type:f,params:a,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");r=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),i=this.finalize(this.startNode(e),new m.ComputedMemberExpression(i,r))}else{if(10!==this.lookahead.type||!this.lookahead.head)break;s=this.parseTemplateLiteral();i=this.finalize(this.startNode(e),new m.TaggedTemplateExpression(i,s))}return this.context.allowIn=n,i},Parser.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new m.Super)},Parser.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new m.ComputedMemberExpression(t,n))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");n=this.parseIdentifierName(),t=this.finalize(e,new m.StaticMemberExpression(t,n))}else{if(10!==this.lookahead.type||!this.lookahead.head)break;var r=this.parseTemplateLiteral();t=this.finalize(e,new m.TaggedTemplateExpression(t,r))}return t},Parser.prototype.parseUpdateExpression=function(){var e,t,n,r=this.lookahead;return this.match("++")||this.match("--")?(n=this.startNode(r),t=this.nextToken(),e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(d.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment),e=this.finalize(n,new m.UpdateExpression(t.value,e,n=!0)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1):(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||(this.match("++")||this.match("--"))&&(this.context.strict&&e.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(d.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken().value,n=!1,e=this.finalize(this.startNode(r),new m.UpdateExpression(t,e,n)))),e},Parser.prototype.parseAwaitExpression=function(){var e=this.createNode(),t=(this.nextToken(),this.parseUnaryExpression());return this.finalize(e,new m.AwaitExpression(t))},Parser.prototype.parseUnaryExpression=function(){var e,t,n;return this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")?(e=this.startNode(this.lookahead),t=this.nextToken(),n=this.inheritCoverGrammar(this.parseUnaryExpression),n=this.finalize(e,new m.UnaryExpression(t.value,n)),this.context.strict&&"delete"===n.operator&&n.argument.type===p.Syntax.Identifier&&this.tolerateError(d.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1):n=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression(),n},Parser.prototype.parseExponentiationExpression=function(){var e,t,n=this.lookahead,r=this.inheritCoverGrammar(this.parseUnaryExpression);return r.type!==p.Syntax.UnaryExpression&&this.match("**")&&(this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,e=r,t=this.isolateCoverGrammar(this.parseExponentiationExpression),r=this.finalize(this.startNode(n),new m.BinaryExpression("**",e,t))),r},Parser.prototype.binaryPrecedence=function(e){var t=e.value,e=7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0;return e},Parser.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),n=this.lookahead,r=this.binaryPrecedence(n);if(0<r){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var i=[e,this.lookahead],s=t,a=this.isolateCoverGrammar(this.parseExponentiationExpression),o=[s,n.value,a],u=[r];;){if((r=this.binaryPrecedence(this.lookahead))<=0)break;for(;2<o.length&&r<=u[u.length-1];){var a=o.pop(),l=o.pop(),c=(u.pop(),s=o.pop(),i.pop(),this.startNode(i[i.length-1]));o.push(this.finalize(c,new m.BinaryExpression(l,s,a)))}o.push(this.nextToken().value),u.push(r),i.push(this.lookahead),o.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}for(var h=o.length-1,p=(t=o[h],i.pop());1<h;){var d=i.pop(),f=p&&p.lineStart,c=this.startNode(d,f),l=o[h-1],t=this.finalize(c,new m.BinaryExpression(l,o[h-2],t));h-=2,p=d}}return t},Parser.prototype.parseConditionalExpression=function(){var e,t,n=this.lookahead,r=this.inheritCoverGrammar(this.parseBinaryExpression);return this.match("?")&&(this.nextToken(),t=this.context.allowIn,this.context.allowIn=!0,e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=t,this.expect(":"),t=this.isolateCoverGrammar(this.parseAssignmentExpression),r=this.finalize(this.startNode(n),new m.ConditionalExpression(r,e,t)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),r},Parser.prototype.checkPatternParam=function(e,t){switch(t.type){case p.Syntax.Identifier:this.validateParam(e,t,t.name);break;case p.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case p.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case p.Syntax.ArrayPattern:for(var n=0;n<t.elements.length;n++)null!==t.elements[n]&&this.checkPatternParam(e,t.elements[n]);break;case p.Syntax.ObjectPattern:for(n=0;n<t.properties.length;n++)this.checkPatternParam(e,t.properties[n].value)}e.simple=e.simple&&t instanceof m.Identifier},Parser.prototype.reinterpretAsCoverFormalsList=function(e){var t=[e],n=!1;switch(e.type){case p.Syntax.Identifier:break;case f:t=e.params,n=e.async;break;default:return null}for(var r,i={simple:!0,paramSet:{}},s=0;s<t.length;++s)(a=t[s]).type===p.Syntax.AssignmentPattern?a.right.type===p.Syntax.YieldExpression&&(a.right.argument&&this.throwUnexpectedToken(this.lookahead),a.right.type=p.Syntax.Identifier,a.right.name="yield",delete a.right.argument,delete a.right.delegate):n&&a.type===p.Syntax.Identifier&&"await"===a.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(i,a),t[s]=a;if(this.context.strict||!this.context.allowYield)for(var a,s=0;s<t.length;++s)(a=t[s]).type===p.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead);return i.message===d.Messages.StrictParamDupe&&(r=this.context.strict?i.stricted:i.firstRestricted,this.throwUnexpectedToken(r,i.message)),{simple:i.simple,params:t,stricted:i.stricted,firstRestricted:i.firstRestricted,message:i.message}},Parser.prototype.parseAssignmentExpression=function(){var e,t,n,r,i,s,a,o,u,l,c,h;return!this.context.allowYield&&this.matchKeyword("yield")?h=this.parseYieldExpression():(t=e=this.lookahead,h=this.parseConditionalExpression(),3!==t.type||t.lineNumber!==this.lookahead.lineNumber||"async"!==t.value||3!==this.lookahead.type&&!this.matchKeyword("yield")||(u=this.parsePrimaryExpression(),this.reinterpretExpressionAsPattern(u),h={type:f,params:[u],async:!0}),h.type===f||this.match("=>")?(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,u=h.async,(c=this.reinterpretAsCoverFormalsList(h))&&(this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null,n=this.context.strict,r=this.context.allowStrictDirective,this.context.allowStrictDirective=c.simple,i=this.context.allowYield,s=this.context.await,this.context.allowYield=!0,this.context.await=u,l=this.startNode(e),a=void this.expect("=>"),this.match("{")?(o=this.context.allowIn,this.context.allowIn=!0,a=this.parseFunctionSourceElements(),this.context.allowIn=o):a=this.isolateCoverGrammar(this.parseAssignmentExpression),o=a.type!==p.Syntax.BlockStatement,this.context.strict&&c.firstRestricted&&this.throwUnexpectedToken(c.firstRestricted,c.message),this.context.strict&&c.stricted&&this.tolerateUnexpectedToken(c.stricted,c.message),h=u?this.finalize(l,new m.AsyncArrowFunctionExpression(c.params,a,o)):this.finalize(l,new m.ArrowFunctionExpression(c.params,a,o)),this.context.strict=n,this.context.allowStrictDirective=r,this.context.allowYield=i,this.context.await=s)):this.matchAssign()&&(this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment),this.context.strict&&h.type===p.Syntax.Identifier&&(u=h,this.scanner.isRestrictedWord(u.name)&&this.tolerateUnexpectedToken(t,d.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(u.name))&&this.tolerateUnexpectedToken(t,d.Messages.StrictReservedWord),this.match("=")?this.reinterpretExpressionAsPattern(h):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),l=(t=this.nextToken()).value,c=this.isolateCoverGrammar(this.parseAssignmentExpression),h=this.finalize(this.startNode(e),new m.AssignmentExpression(l,h,c)),this.context.firstCoverInitializedNameError=null)),h},Parser.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];for(n.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new m.SequenceExpression(n))}return t},Parser.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,d.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,d.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},Parser.prototype.parseBlock=function(){for(var e=this.createNode(),t=(this.expect("{"),[]);!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new m.BlockStatement(t))},Parser.prototype.parseLexicalBinding=function(e,t){var n=this.createNode(),r=this.parsePattern([],e),i=(this.context.strict&&r.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(d.Messages.StrictVarName),null);return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),i=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(d.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&r.type!==p.Syntax.Identifier||this.match("="))&&(this.expect("="),i=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(n,new m.VariableDeclarator(r,i))},Parser.prototype.parseBindingList=function(e,t){for(var n=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),n.push(this.parseLexicalBinding(e,t));return n},Parser.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState(),t=(this.scanner.scanComments(),this.scanner.lex());return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},Parser.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),n=this.nextToken().value,e=(a.assert("let"===n||"const"===n,"Lexical declaration must be either let or const"),this.parseBindingList(n,e));return this.consumeSemicolon(),this.finalize(t,new m.VariableDeclaration(e,n))},Parser.prototype.parseBindingRestElement=function(e,t){var n=this.createNode(),e=(this.expect("..."),this.parsePattern(e,t));return this.finalize(n,new m.RestElement(e))},Parser.prototype.parseArrayPattern=function(e,t){for(var n=this.createNode(),r=(this.expect("["),[]);!this.match("]");)if(this.match(","))this.nextToken(),r.push(null);else{if(this.match("...")){r.push(this.parseBindingRestElement(e,t));break}r.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(n,new m.ArrayPattern(r))},Parser.prototype.parsePropertyPattern=function(e,t){var n,r,i,s,a=this.createNode(),o=!1,u=!1;return s=3===this.lookahead.type?(n=this.lookahead,r=this.parseVariableIdentifier(),i=this.finalize(a,new m.Identifier(n.value)),this.match("=")?(e.push(n),u=!0,this.nextToken(),s=this.parseAssignmentExpression(),this.finalize(this.startNode(n),new m.AssignmentPattern(i,s))):this.match(":")?(this.expect(":"),this.parsePatternWithDefault(e,t)):(e.push(n),u=!0,i)):(o=this.match("["),r=this.parseObjectPropertyKey(),this.expect(":"),this.parsePatternWithDefault(e,t)),this.finalize(a,new m.Property("init",r,o,s,!1,u))},Parser.prototype.parseObjectPattern=function(e,t){var n=this.createNode(),r=[];for(this.expect("{");!this.match("}");)r.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(n,new m.ObjectPattern(r))},Parser.prototype.parsePattern=function(e,t){e=this.match("[")?this.parseArrayPattern(e,t):this.match("{")?this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,d.Messages.LetInLexicalBinding),e.push(this.lookahead),this.parseVariableIdentifier(t));return e},Parser.prototype.parsePatternWithDefault=function(e,t){var n,r=this.lookahead,e=this.parsePattern(e,t);return this.match("=")&&(this.nextToken(),t=this.context.allowYield,this.context.allowYield=!0,n=this.isolateCoverGrammar(this.parseAssignmentExpression),this.context.allowYield=t,e=this.finalize(this.startNode(r),new m.AssignmentPattern(e,n))),e},Parser.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),n=this.nextToken();return 4===n.type&&"yield"===n.value?this.context.strict?this.tolerateUnexpectedToken(n,d.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(n):3!==n.type?this.context.strict&&4===n.type&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,d.Messages.StrictReservedWord):!this.context.strict&&"let"===n.value&&"var"===e||this.throwUnexpectedToken(n):(this.context.isModule||this.context.await)&&3===n.type&&"await"===n.value&&this.tolerateUnexpectedToken(n),this.finalize(t,new m.Identifier(n.value))},Parser.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),n=this.parsePattern([],"var"),r=(this.context.strict&&n.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(d.Messages.StrictVarName),null);return this.match("=")?(this.nextToken(),r=this.isolateCoverGrammar(this.parseAssignmentExpression)):n.type===p.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new m.VariableDeclarator(n,r))},Parser.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},n=[];for(n.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),n.push(this.parseVariableDeclaration(t));return n},Parser.prototype.parseVariableStatement=function(){var e=this.createNode(),t=(this.expectKeyword("var"),this.parseVariableDeclarationList({inFor:!1}));return this.consumeSemicolon(),this.finalize(e,new m.VariableDeclaration(t,"var"))},Parser.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new m.EmptyStatement)},Parser.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new m.ExpressionStatement(t))},Parser.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(d.Messages.StrictFunction),this.parseStatement()},Parser.prototype.parseIfStatement=function(){var e,t=this.createNode(),n=null,r=(this.expectKeyword("if"),this.expect("("),this.parseExpression());return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),n=this.parseIfClause())),this.finalize(t,new m.IfStatement(r,e,n))},Parser.prototype.parseDoWhileStatement=function(){var e=this.createNode(),t=(this.expectKeyword("do"),this.context.inIteration),n=(this.context.inIteration=!0,this.parseStatement()),t=(this.context.inIteration=t,this.expectKeyword("while"),this.expect("("),this.parseExpression());return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new m.DoWhileStatement(n,t))},Parser.prototype.parseWhileStatement=function(){var e,t,n=this.createNode(),r=(this.expectKeyword("while"),this.expect("("),this.parseExpression());return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),t=this.context.inIteration,this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=t),this.finalize(n,new m.WhileStatement(r,e))},Parser.prototype.parseForStatement=function(){var e,t,n=null,r=null,i=null,s=!0,a=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){n=this.createNode(),this.nextToken();var o,u=this.context.allowIn,l=(this.context.allowIn=!1,this.parseVariableDeclarationList({inFor:!0}));this.context.allowIn=u,1===l.length&&this.matchKeyword("in")?((o=l[0]).init&&(o.id.type===p.Syntax.ArrayPattern||o.id.type===p.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(d.Messages.ForInOfLoopInitializer,"for-in"),n=this.finalize(n,new m.VariableDeclaration(l,"var")),this.nextToken(),o=n,e=this.parseExpression(),n=null):1===l.length&&null===l[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new m.VariableDeclaration(l,"var")),this.nextToken(),o=n,e=this.parseAssignmentExpression(),n=null,s=!1):(n=this.finalize(n,new m.VariableDeclaration(l,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){var n=this.createNode(),c=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(u=this.context.allowIn,this.context.allowIn=!1,l=this.parseBindingList(c,{inFor:!0}),this.context.allowIn=u,1===l.length&&null===l[0].init&&this.matchKeyword("in")?(n=this.finalize(n,new m.VariableDeclaration(l,c)),this.nextToken(),o=n,e=this.parseExpression(),n=null):1===l.length&&null===l[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new m.VariableDeclaration(l,c)),this.nextToken(),o=n,e=this.parseAssignmentExpression(),n=null,s=!1):(this.consumeSemicolon(),n=this.finalize(n,new m.VariableDeclaration(l,c)))):(n=this.finalize(n,new m.Identifier(c)),this.nextToken(),o=n,e=this.parseExpression(),n=null)}else{l=this.lookahead,u=this.context.allowIn;if(this.context.allowIn=!1,n=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=u,this.matchKeyword("in"))this.context.isAssignmentTarget&&n.type!==p.Syntax.AssignmentExpression||this.tolerateError(d.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(n),o=n,e=this.parseExpression(),n=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&n.type!==p.Syntax.AssignmentExpression||this.tolerateError(d.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(n),o=n,e=this.parseAssignmentExpression(),n=null,s=!1;else{if(this.match(",")){for(var h=[n];this.match(",");)this.nextToken(),h.push(this.isolateCoverGrammar(this.parseAssignmentExpression));n=this.finalize(this.startNode(l),new m.SequenceExpression(h))}this.expect(";")}}return void 0===o&&(this.match(";")||(r=this.parseExpression()),this.expect(";"),this.match(")")||(i=this.parseExpression())),!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),t=this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),c=this.context.inIteration,this.context.inIteration=!0,t=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=c),void 0===o?this.finalize(a,new m.ForStatement(n,r,i,t)):s?this.finalize(a,new m.ForInStatement(o,e,t)):this.finalize(a,new m.ForOfStatement(o,e,t))},Parser.prototype.parseContinueStatement=function(){var e,t,n=this.createNode(),r=(this.expectKeyword("continue"),null);return 3!==this.lookahead.type||this.hasLineTerminator||(t="$"+(r=e=this.parseVariableIdentifier()).name,Object.prototype.hasOwnProperty.call(this.context.labelSet,t))||this.throwError(d.Messages.UnknownLabel,e.name),this.consumeSemicolon(),null!==r||this.context.inIteration||this.throwError(d.Messages.IllegalContinue),this.finalize(n,new m.ContinueStatement(r))},Parser.prototype.parseBreakStatement=function(){var e,t,n=this.createNode(),r=(this.expectKeyword("break"),null);return 3!==this.lookahead.type||this.hasLineTerminator||(t="$"+(e=this.parseVariableIdentifier()).name,Object.prototype.hasOwnProperty.call(this.context.labelSet,t)||this.throwError(d.Messages.UnknownLabel,e.name),r=e),this.consumeSemicolon(),null!==r||this.context.inIteration||this.context.inSwitch||this.throwError(d.Messages.IllegalBreak),this.finalize(n,new m.BreakStatement(r))},Parser.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(d.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&2!==this.lookahead.type||8===this.lookahead.type||10===this.lookahead.type?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(e,new m.ReturnStatement(t))},Parser.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(d.Messages.StrictModeWith);var e=this.createNode(),t=(this.expectKeyword("with"),this.expect("("),this.parseExpression()),n=!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),this.parseStatement());return this.finalize(e,new m.WithStatement(t,n))},Parser.prototype.parseSwitchCase=function(){var e=this.createNode(),t=this.matchKeyword("default")?(this.nextToken(),null):(this.expectKeyword("case"),this.parseExpression());this.expect(":");for(var n=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)n.push(this.parseStatementListItem());return this.finalize(e,new m.SwitchCase(t,n))},Parser.prototype.parseSwitchStatement=function(){var e=this.createNode(),t=(this.expectKeyword("switch"),this.expect("("),this.parseExpression()),n=(this.expect(")"),this.context.inSwitch),r=[],i=!(this.context.inSwitch=!0);for(this.expect("{");;){if(this.match("}"))break;var s=this.parseSwitchCase();null===s.test&&(i&&this.throwError(d.Messages.MultipleDefaultsInSwitch),i=!0),r.push(s)}return this.expect("}"),this.context.inSwitch=n,this.finalize(e,new m.SwitchStatement(t,r))},Parser.prototype.parseLabelledStatement=function(){var e,t,n,r,i=this.createNode(),s=this.parseExpression(),a=s.type===p.Syntax.Identifier&&this.match(":")?(this.nextToken(),t="$"+(e=s).name,Object.prototype.hasOwnProperty.call(this.context.labelSet,t)&&this.throwError(d.Messages.Redeclaration,"Label",e.name),r=void(this.context.labelSet[t]=!0),r=this.matchKeyword("class")?(this.tolerateUnexpectedToken(this.lookahead),this.parseClassDeclaration()):this.matchKeyword("function")?(a=this.lookahead,n=this.parseFunctionDeclaration(),this.context.strict?this.tolerateUnexpectedToken(a,d.Messages.StrictFunction):n.generator&&this.tolerateUnexpectedToken(a,d.Messages.GeneratorInLegacyContext),n):this.parseStatement(),delete this.context.labelSet[t],new m.LabeledStatement(e,r)):(this.consumeSemicolon(),new m.ExpressionStatement(s));return this.finalize(i,a)},Parser.prototype.parseThrowStatement=function(){var e=this.createNode(),t=(this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(d.Messages.NewlineAfterThrow),this.parseExpression());return this.consumeSemicolon(),this.finalize(e,new m.ThrowStatement(t))},Parser.prototype.parseCatchClause=function(){for(var e=this.createNode(),t=(this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead),[]),n=this.parsePattern(t),r={},i=0;i<t.length;i++){var s="$"+t[i].value;Object.prototype.hasOwnProperty.call(r,s)&&this.tolerateError(d.Messages.DuplicateBinding,t[i].value),r[s]=!0}this.context.strict&&n.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(d.Messages.StrictCatchVariable),this.expect(")");var a=this.parseBlock();return this.finalize(e,new m.CatchClause(n,a))},Parser.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},Parser.prototype.parseTryStatement=function(){var e=this.createNode(),t=(this.expectKeyword("try"),this.parseBlock()),n=this.matchKeyword("catch")?this.parseCatchClause():null,r=this.matchKeyword("finally")?this.parseFinallyClause():null;return n||r||this.throwError(d.Messages.NoCatchOrFinally),this.finalize(e,new m.TryStatement(t,n,r))},Parser.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new m.DebuggerStatement)},Parser.prototype.parseStatement=function(){switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:t=this.parseExpressionStatement();break;case 7:var e=this.lookahead.value,t="{"===e?this.parseBlock():"("!==e&&";"===e?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:t=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":t=this.parseBreakStatement();break;case"continue":t=this.parseContinueStatement();break;case"debugger":t=this.parseDebuggerStatement();break;case"do":t=this.parseDoWhileStatement();break;case"for":t=this.parseForStatement();break;case"function":t=this.parseFunctionDeclaration();break;case"if":t=this.parseIfStatement();break;case"return":t=this.parseReturnStatement();break;case"switch":t=this.parseSwitchStatement();break;case"throw":t=this.parseThrowStatement();break;case"try":t=this.parseTryStatement();break;case"var":t=this.parseVariableStatement();break;case"while":t=this.parseWhileStatement();break;case"with":t=this.parseWithStatement();break;default:t=this.parseExpressionStatement()}break;default:t=this.throwUnexpectedToken(this.lookahead)}return t},Parser.prototype.parseFunctionSourceElements=function(){var e=this.createNode(),t=(this.expect("{"),this.parseDirectivePrologues()),n=this.context.labelSet,r=this.context.inIteration,i=this.context.inSwitch,s=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=n,this.context.inIteration=r,this.context.inSwitch=i,this.context.inFunctionBody=s,this.finalize(e,new m.BlockStatement(t))},Parser.prototype.validateParam=function(e,t,n){var r="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=t,e.message=d.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=d.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(n)?(e.firstRestricted=t,e.message=d.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=d.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=d.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,r,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[r]=!0},Parser.prototype.parseRestElement=function(e){var t=this.createNode(),e=(this.expect("..."),this.parsePattern(e));return this.match("=")&&this.throwError(d.Messages.DefaultRestParameter),this.match(")")||this.throwError(d.Messages.ParameterAfterRestParameter),this.finalize(t,new m.RestElement(e))},Parser.prototype.parseFormalParameter=function(e){for(var t=[],n=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),r=0;r<t.length;r++)this.validateParam(e,t[r],t[r].value);e.simple=e.simple&&n instanceof m.Identifier,e.params.push(n)},Parser.prototype.parseFormalParameters=function(e){var t={simple:!0,params:[],firstRestricted:e};if(this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},Parser.prototype.matchAsyncFunction=function(){var e,t,n=this.matchContextualKeyword("async");return n&&(e=this.scanner.saveState(),this.scanner.scanComments(),t=this.scanner.lex(),this.scanner.restoreState(e),n=e.lineNumber===t.lineNumber&&4===t.type&&"function"===t.value),n},Parser.prototype.parseFunctionDeclaration=function(e){var t,n=this.createNode(),r=this.matchContextualKeyword("async"),i=(r&&this.nextToken(),this.expectKeyword("function"),!r&&this.match("*")),s=(i&&this.nextToken(),null),a=null,e=(e&&this.match("(")||(e=this.lookahead,s=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(e.value)&&this.tolerateUnexpectedToken(e,d.Messages.StrictFunctionName):this.scanner.isRestrictedWord(e.value)?(a=e,t=d.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(e.value)&&(a=e,t=d.Messages.StrictReservedWord)),this.context.await),o=this.context.allowYield,u=(this.context.await=r,this.context.allowYield=!i,this.parseFormalParameters(a)),l=u.params,c=u.stricted,a=u.firstRestricted,h=(u.message&&(t=u.message),this.context.strict),p=this.context.allowStrictDirective,u=(this.context.allowStrictDirective=u.simple,this.parseFunctionSourceElements());return this.context.strict&&a&&this.throwUnexpectedToken(a,t),this.context.strict&&c&&this.tolerateUnexpectedToken(c,t),this.context.strict=h,this.context.allowStrictDirective=p,this.context.await=e,this.context.allowYield=o,r?this.finalize(n,new m.AsyncFunctionDeclaration(s,l,u)):this.finalize(n,new m.FunctionDeclaration(s,l,u,i))},Parser.prototype.parseFunctionExpression=function(){var e,t=this.createNode(),n=this.matchContextualKeyword("async"),r=(n&&this.nextToken(),this.expectKeyword("function"),!n&&this.match("*")),i=(r&&this.nextToken(),null),s=this.context.await,a=this.context.allowYield,o=(this.context.await=n,this.context.allowYield=!r,this.match("(")||(o=this.lookahead,i=this.context.strict||r||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(o.value)&&this.tolerateUnexpectedToken(o,d.Messages.StrictFunctionName):this.scanner.isRestrictedWord(o.value)?(c=o,e=d.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(o.value)&&(c=o,e=d.Messages.StrictReservedWord)),this.parseFormalParameters(c)),u=o.params,l=o.stricted,c=o.firstRestricted,h=(o.message&&(e=o.message),this.context.strict),p=this.context.allowStrictDirective,o=(this.context.allowStrictDirective=o.simple,this.parseFunctionSourceElements());return this.context.strict&&c&&this.throwUnexpectedToken(c,e),this.context.strict&&l&&this.tolerateUnexpectedToken(l,e),this.context.strict=h,this.context.allowStrictDirective=p,this.context.await=s,this.context.allowYield=a,n?this.finalize(t,new m.AsyncFunctionExpression(i,u,o)):this.finalize(t,new m.FunctionExpression(i,u,o,r))},Parser.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),n=this.parseExpression(),e=n.type===p.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,e?new m.Directive(n,e):new m.ExpressionStatement(n))},Parser.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var n=this.lookahead;if(8!==n.type)break;var r=this.parseDirective(),r=(t.push(r),r.directive);if("string"!=typeof r)break;"use strict"===r?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,d.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(n,d.Messages.IllegalLanguageModeDirective)):!e&&n.octal&&(e=n)}return t},Parser.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},Parser.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield,n=(this.context.allowYield=!0,this.parseFormalParameters()),r=(0<n.params.length&&this.tolerateError(d.Messages.BadGetterArity),this.parsePropertyMethod(n));return this.context.allowYield=t,this.finalize(e,new m.FunctionExpression(null,n.params,r,!1))},Parser.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield,n=(this.context.allowYield=!0,this.parseFormalParameters()),r=(1!==n.params.length?this.tolerateError(d.Messages.BadSetterArity):n.params[0]instanceof m.RestElement&&this.tolerateError(d.Messages.BadSetterRestParameter),this.parsePropertyMethod(n));return this.context.allowYield=t,this.finalize(e,new m.FunctionExpression(null,n.params,r,!1))},Parser.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield,n=(this.context.allowYield=!0,this.parseFormalParameters()),r=(this.context.allowYield=!1,this.parsePropertyMethod(n));return this.context.allowYield=t,this.finalize(e,new m.FunctionExpression(null,n.params,r,!0))},Parser.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},Parser.prototype.parseYieldExpression=function(){var e,t=this.createNode(),n=(this.expectKeyword("yield"),null),r=!1;return this.hasLineTerminator||(e=this.context.allowYield,this.context.allowYield=!1,(r=this.match("*"))?(this.nextToken(),n=this.parseAssignmentExpression()):this.isStartOfExpression()&&(n=this.parseAssignmentExpression()),this.context.allowYield=e),this.finalize(t,new m.YieldExpression(n,r))},Parser.prototype.parseClassElement=function(e){var t=this.lookahead,n=this.createNode(),r="",i=null,s=null,a=!1,o=!1,u=!1,l=!1,c=(this.match("*")?this.nextToken():(a=this.match("["),"static"===(i=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,u=!0,a=this.match("["),this.match("*")?this.nextToken():i=this.parseObjectPropertyKey()),3!==t.type||this.hasLineTerminator||"async"!==t.value||":"!==(c=this.lookahead.value)&&"("!==c&&"*"!==c&&(l=!0,t=this.lookahead,i=this.parseObjectPropertyKey(),3===t.type)&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,d.Messages.ConstructorIsAsync)),this.qualifiedPropertyName(this.lookahead));return 3===t.type?"get"===t.value&&c?(r="get",a=this.match("["),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,s=this.parseGetterMethod()):"set"===t.value&&c&&(r="set",a=this.match("["),i=this.parseObjectPropertyKey(),s=this.parseSetterMethod()):7===t.type&&"*"===t.value&&c&&(r="init",a=this.match("["),i=this.parseObjectPropertyKey(),s=this.parseGeneratorMethod(),o=!0),!r&&i&&this.match("(")&&(r="init",s=l?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),o=!0),r||this.throwUnexpectedToken(this.lookahead),"init"===r&&(r="method"),a||(u&&this.isPropertyKey(i,"prototype")&&this.throwUnexpectedToken(t,d.Messages.StaticPrototype),!u&&this.isPropertyKey(i,"constructor")&&(("method"!==r||!o||s&&s.generator)&&this.throwUnexpectedToken(t,d.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,d.Messages.DuplicateConstructor):e.value=!0,r="constructor")),this.finalize(n,new m.MethodDefinition(i,a,s,r,u))},Parser.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},Parser.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new m.ClassBody(t))},Parser.prototype.parseClassDeclaration=function(e){var t=this.createNode(),n=this.context.strict,e=(this.context.strict=!0,this.expectKeyword("class"),e&&3!==this.lookahead.type?null:this.parseVariableIdentifier()),r=null,i=(this.matchKeyword("extends")&&(this.nextToken(),r=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall)),this.parseClassBody());return this.context.strict=n,this.finalize(t,new m.ClassDeclaration(e,r,i))},Parser.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict,n=(this.context.strict=!0,this.expectKeyword("class"),3===this.lookahead.type?this.parseVariableIdentifier():null),r=null,i=(this.matchKeyword("extends")&&(this.nextToken(),r=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall)),this.parseClassBody());return this.context.strict=t,this.finalize(e,new m.ClassExpression(n,r,i))},Parser.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new m.Module(t))},Parser.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new m.Script(t))},Parser.prototype.parseModuleSpecifier=function(){var e=this.createNode(),t=(8!==this.lookahead.type&&this.throwError(d.Messages.InvalidModuleSpecifier),this.nextToken()),n=this.getTokenRaw(t);return this.finalize(e,new m.Literal(t.value,n))},Parser.prototype.parseImportSpecifier=function(){var e,t,n=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(n,new m.ImportSpecifier(t,e))},Parser.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},Parser.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new m.ImportDefaultSpecifier(t))},Parser.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode(),t=(this.expect("*"),this.matchContextualKeyword("as")||this.throwError(d.Messages.NoAsAfterImportNamespace),this.nextToken(),this.parseIdentifierName());return this.finalize(e,new m.ImportNamespaceSpecifier(t))},Parser.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(d.Messages.IllegalImportDeclaration);var e=this.createNode(),t=(this.expectKeyword("import"),[]),n=(8===this.lookahead.type||(this.match("{")?t=t.concat(this.parseNamedImports()):this.match("*")?t.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(t.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?t.push(this.parseImportNamespaceSpecifier()):this.match("{")?t=t.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),this.matchContextualKeyword("from")||(n=this.lookahead.value?d.Messages.UnexpectedToken:d.Messages.MissingFromClause,this.throwError(n,this.lookahead.value)),this.nextToken()),this.parseModuleSpecifier());return this.consumeSemicolon(),this.finalize(e,new m.ImportDeclaration(t,n))},Parser.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),n=t;return this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseIdentifierName()),this.finalize(e,new m.ExportSpecifier(t,n))},Parser.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(d.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))this.nextToken(),e=(this.matchKeyword("function")?r=this.parseFunctionDeclaration(!0):this.matchKeyword("class")?r=this.parseClassDeclaration(!0):this.matchContextualKeyword("async")?r=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression():(this.matchContextualKeyword("from")&&this.throwError(d.Messages.UnexpectedToken,this.lookahead.value),r=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon()),this.finalize(t,new m.ExportDefaultDeclaration(r)));else if(this.match("*")){this.nextToken(),this.matchContextualKeyword("from")||(i=this.lookahead.value?d.Messages.UnexpectedToken:d.Messages.MissingFromClause,this.throwError(i,this.lookahead.value)),this.nextToken();var n=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new m.ExportAllDeclaration(n))}else if(4===this.lookahead.type){var r=void 0;switch(this.lookahead.value){case"let":case"const":r=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":r=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new m.ExportNamedDeclaration(r,[],null))}else if(this.matchAsyncFunction()){r=this.parseFunctionDeclaration();e=this.finalize(t,new m.ExportNamedDeclaration(r,[],null))}else{var i,s=[],n=null,a=!1;for(this.expect("{");!this.match("}");)a=a||this.matchKeyword("default"),s.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),n=this.parseModuleSpecifier(),this.consumeSemicolon()):a?(i=this.lookahead.value?d.Messages.UnexpectedToken:d.Messages.MissingFromClause,this.throwError(i,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new m.ExportNamedDeclaration(null,s,n))}return e},t.Parser=Parser},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function assert(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";function ErrorHandler(){this.errors=[],this.tolerant=!1}Object.defineProperty(t,"__esModule",{value:!0}),ErrorHandler.prototype.recordError=function(e){this.errors.push(e)},ErrorHandler.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},ErrorHandler.prototype.constructError=function(t,n){t=new Error(t);try{throw t}catch(e){Object.create&&Object.defineProperty&&(t=Object.create(e),Object.defineProperty(t,"column",{value:n}))}return t},ErrorHandler.prototype.createError=function(e,t,n,r){n=this.constructError("Line "+t+": "+r,n);return n.index=e,n.lineNumber=t,n.description=r,n},ErrorHandler.prototype.throwError=function(e,t,n,r){throw this.createError(e,t,n,r)},ErrorHandler.prototype.tolerateError=function(e,t,n,r){e=this.createError(e,t,n,r);if(!this.tolerant)throw e;this.recordError(e)},t.ErrorHandler=ErrorHandler},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),l=n(4),c=n(11);function hexValue(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function octalValue(e){return"01234567".indexOf(e)}function Scanner(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=0<e.length?1:0,this.lineStart=0,this.curlyStack=[]}Scanner.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},Scanner.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},Scanner.prototype.eof=function(){return this.index>=this.length},Scanner.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=c.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},Scanner.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=c.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},Scanner.prototype.skipSingleLineComment=function(e){var t,n,r=[];for(this.trackComment&&(r=[],t=this.index-e,n={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i,s=this.source.charCodeAt(this.index);if(++this.index,l.Character.isLineTerminator(s))return this.trackComment&&(i={multiLine:!(n.end={line:this.lineNumber,column:this.index-this.lineStart-1}),slice:[t+e,this.index-1],range:[t,this.index-1],loc:n},r.push(i)),13===s&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,r}return this.trackComment&&(i={multiLine:!(n.end={line:this.lineNumber,column:this.index-this.lineStart}),slice:[t+e,this.index],range:[t,this.index],loc:n},r.push(i)),r},Scanner.prototype.skipMultiLineComment=function(){var e,t,n=[];for(this.trackComment&&(n=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var r,i=this.source.charCodeAt(this.index);if(l.Character.isLineTerminator(i))13===i&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===i&&47===this.source.charCodeAt(this.index+1))return this.index+=2,this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},r={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t},n.push(r)),n;++this.index}}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},r={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},n.push(r)),this.tolerateUnexpectedToken(),n},Scanner.prototype.scanComments=function(){this.trackComment&&(e=[]);for(var e,t=0===this.index;!this.eof();){var n=this.source.charCodeAt(this.index);if(l.Character.isWhiteSpace(n))++this.index;else if(l.Character.isLineTerminator(n))++this.index,13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===n)if(47===(n=this.source.charCodeAt(this.index+1))){this.index+=2;var r=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(r)),t=!0}else{if(42!==n)break;this.index+=2;r=this.skipMultiLineComment();this.trackComment&&(e=e.concat(r))}else{if(t&&45===n){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3;r=this.skipSingleLineComment(3)}else{if(60!==n||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4;r=this.skipSingleLineComment(4)}this.trackComment&&(e=e.concat(r))}}return e},Scanner.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},Scanner.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},Scanner.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},Scanner.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},Scanner.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);return t=55296<=t&&t<=56319&&56320<=(e=this.source.charCodeAt(e+1))&&e<=57343?1024*(t-55296)+e-56320+65536:t},Scanner.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,n=0,r=0;r<t;++r){if(this.eof()||!l.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;n=16*n+hexValue(this.source[this.index++])}return String.fromCharCode(n)},Scanner.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],l.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+hexValue(e);return(1114111<t||"}"!==e)&&this.throwUnexpectedToken(),l.Character.fromCodePoint(t)},Scanner.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(55296<=t&&t<57343)return this.index=e,this.getComplexIdentifier();if(!l.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},Scanner.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),n=l.Character.fromCodePoint(t);for(this.index+=n.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&l.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),n=e);!this.eof()&&(t=this.codePointAt(this.index),l.Character.isIdentifierPart(t));)n+=e=l.Character.fromCodePoint(t),this.index+=e.length,92===t&&(n=n.substr(0,n.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&l.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),n+=e);return n},Scanner.prototype.octalToDecimal=function(e){var t="0"!==e,n=octalValue(e);return{code:n=!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=8*n+octalValue(this.source[this.index++]),0<="0123".indexOf(e))&&!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index))?8*n+octalValue(this.source[this.index++]):n,octal:t}},Scanner.prototype.scanIdentifier=function(){var e,t=this.index,n=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier(),r=1===n.length?3:this.isKeyword(n)?4:"null"===n?5:"true"===n||"false"===n?1:3;return 3!==r&&t+n.length!==this.index&&(e=this.index,this.index=t,this.tolerateUnexpectedToken(c.Messages.InvalidEscapedReservedWord),this.index=e),{type:r,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},Scanner.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],0<="<>=!+-*%&|^/".indexOf(t)&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&l.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),l.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanBinaryLiteral=function(e){for(var t,n="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)n+=this.source[this.index++];return 0===n.length&&this.throwUnexpectedToken(),!this.eof()&&(t=this.source.charCodeAt(this.index),l.Character.isIdentifierStart(t)||l.Character.isDecimalDigit(t))&&this.throwUnexpectedToken(),{type:6,value:parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanOctalLiteral=function(e,t){var n="",r=!1;for(l.Character.isOctalDigit(e.charCodeAt(0))?(r=!0,n="0"+this.source[this.index++]):++this.index;!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];return r||0!==n.length||this.throwUnexpectedToken(),(l.Character.isIdentifierStart(this.source.charCodeAt(this.index))||l.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(n,8),octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},Scanner.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!l.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},Scanner.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e],n=(o.assert(l.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point"),"");if("."!==t){if(n=this.source[this.index++],t=this.source[this.index],"0"===n){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&l.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(n+=this.source[this.index++];l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(n+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(n+=this.source[this.index++]),l.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];else this.throwUnexpectedToken();return l.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanStringLiteral=function(){for(var e=this.index,t=this.source[e],n=(o.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index,!1),r="";!this.eof();){var i,s=this.source[this.index++];if(s===t){t="";break}if("\\"===s)if((s=this.source[this.index++])&&l.Character.isLineTerminator(s.charCodeAt(0)))++this.lineNumber,"\r"===s&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(s){case"u":"{"===this.source[this.index]?(++this.index,r+=this.scanUnicodeCodePointEscape()):(null===(a=this.scanHexEscape(s))&&this.throwUnexpectedToken(),r+=a);break;case"x":var a=this.scanHexEscape(s);null===a&&this.throwUnexpectedToken(c.Messages.InvalidHexEscapeSequence),r+=a;break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;case"8":case"9":r+=s,this.tolerateUnexpectedToken();break;default:s&&l.Character.isOctalDigit(s.charCodeAt(0))?(n=(i=this.octalToDecimal(s)).octal||n,r+=String.fromCharCode(i.code)):r+=s}else{if(l.Character.isLineTerminator(s.charCodeAt(0)))break;r+=s}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:r,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.scanTemplate=function(){var e="",t=!1,n=this.index,r="`"===this.source[n],i=!1,s=2;for(++this.index;!this.eof();){var a,o=this.source[this.index++];if("`"===o){s=1,t=i=!0;break}if("$"===o){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=o}else if("\\"===o)if(o=this.source[this.index++],l.Character.isLineTerminator(o.charCodeAt(0)))++this.lineNumber,"\r"===o&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(o){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":"{"===this.source[this.index]?(++this.index,e+=this.scanUnicodeCodePointEscape()):(a=this.index,null!==(u=this.scanHexEscape(o))?e+=u:(this.index=a,e+=o));break;case"x":var u=this.scanHexEscape(o);null===u&&this.throwUnexpectedToken(c.Messages.InvalidHexEscapeSequence),e+=u;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===o?(l.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(c.Messages.TemplateOctalLiteral),e+="\0"):l.Character.isOctalDigit(o.charCodeAt(0))?this.throwUnexpectedToken(c.Messages.TemplateOctalLiteral):e+=o}else l.Character.isLineTerminator(o.charCodeAt(0))?(++this.lineNumber,"\r"===o&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=o}return t||this.throwUnexpectedToken(),r||this.curlyStack.pop(),{type:10,value:this.source.slice(n+1,this.index-s),cooked:e,head:r,tail:i,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}},Scanner.prototype.testRegExp=function(e,t){var n=e,r=this;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,n){t=parseInt(t||n,16);return 1114111<t&&r.throwUnexpectedToken(c.Messages.InvalidRegExp),t<=65535?String.fromCharCode(t):"￿"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"￿"));try{RegExp(n)}catch(e){this.throwUnexpectedToken(c.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},Scanner.prototype.scanRegExpBody=function(){for(var e=this.source[this.index],t=(o.assert("/"===e,"Regular expression literal must start with a slash"),this.source[this.index++]),n=!1,r=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],l.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(c.Messages.UnterminatedRegExp),t+=e;else if(l.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(c.Messages.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||this.throwUnexpectedToken(c.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},Scanner.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!l.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t,0;else{if("u"===(t=this.source[this.index])){++this.index;var n=this.index,t=this.scanHexEscape("u");if(null!==t)for(e+=t,0;n<this.index;++n)this.source[n];else this.index=n,e+="u",0}else 0;this.tolerateUnexpectedToken()}}return e},Scanner.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),n=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:n,regex:this.testRegExp(t,n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},Scanner.prototype.lex=function(){var e;return this.eof()?{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index}:(e=this.source.charCodeAt(this.index),l.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?l.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():l.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=e&&e<57343&&l.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator())},t.Scanner=Scanner},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=n(12),o=n(13),s=(Reader.prototype.beforeFunctionExpression=function(e){return 0<=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)},Reader.prototype.isRegexStart=function(){var e,t=this.values[this.values.length-1],n=null!==t;switch(t){case"this":case"]":n=!1;break;case")":var r=this.values[this.paren-1],n="if"===r||"while"===r||"for"===r||"with"===r;break;case"}":n=!1,"function"===this.values[this.curly-3]?n=!!(e=this.values[this.curly-4])&&!this.beforeFunctionExpression(e):"function"===this.values[this.curly-4]&&(n=!(e=this.values[this.curly-5])||!this.beforeFunctionExpression(e))}return n},Reader.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},Reader);function Reader(){this.values=[],this.curly=this.paren=-1}function Tokenizer(e,t){this.errorHandler=new r.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new i.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new s}Tokenizer.prototype.errors=function(){return this.errorHandler.errors},Tokenizer.prototype.getNextToken=function(){if(0===this.buffer.length){var e,t,n,r=this.scanner.scanComments();if(this.scanner.trackComment)for(var i=0;i<r.length;++i){var s=r[i],a=this.scanner.source.slice(s.slice[0],s.slice[1]),a={type:s.multiLine?"BlockComment":"LineComment",value:a};this.trackRange&&(a.range=s.range),this.trackLoc&&(a.loc=s.loc),this.buffer.push(a)}this.scanner.eof()||(t=void 0,this.trackLoc&&(t={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}}),n="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex(),this.reader.push(n),e={type:o.TokenName[n.type],value:this.scanner.source.slice(n.start,n.end)},this.trackRange&&(e.range=[n.start,n.end]),this.trackLoc&&(t.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},e.loc=t),9===n.type&&(t=n.pattern,n=n.flags,e.regex={pattern:t,flags:n}),this.buffer.push(e))}return this.buffer.shift()},t.Tokenizer=Tokenizer}],r={},__webpack_require__.m=n,__webpack_require__.c=r,__webpack_require__.p="",__webpack_require__(0);function __webpack_require__(e){var t;return(r[e]||(t=r[e]={exports:{},id:e,loaded:!1},n[e].call(t.exports,t,t.exports,__webpack_require__),t.loaded=!0,t)).exports}var n,r})},{}],56:[function(t,e,l){!function(){"use strict";var s,a,r,o,e,n,u,i;function NameGenerator(e,t){this._scope=e,this._functionName="",!t.distinguishFunctionExpressionScope&&this._scope.upper&&this._scope.upper.functionExpressionScope&&(this._functionName=this._scope.upper.block.id.name)}function Label(e,t){this.node=e,this.upper=t,this.users=[],this.names=new i,this.name=null}function LabelScope(e){this.map=new i,this.upper=e,this.label=null,this.labels=[]}s=t("escope"),a=t("estraverse"),r=t("esutils"),o=t("./utility"),i=t("./map"),e=t("../package.json").version,u=a.Syntax,n=function assert(e,t){if(!e)throw new Error(t)},-1===e.indexOf("-dev",e.length-4)&&(n=function(){}),NameGenerator.prototype.passAsUnique=function passAsUnique(e){var t,n;if(this._functionName===e)return!1;if(r.keyword.isKeywordES5(e,!0)||r.keyword.isRestrictedWord(e))return!1;if(this._scope.taints.has(e))return!1;for(t=0,n=this._scope.through.length;t<n;++t)if(this._scope.through[t].identifier.name===e)return!1;return!0},NameGenerator.prototype.generateName=function generateName(e){for(;e=o.generateNextName(e),!this.passAsUnique(e););return e},Label.prototype.mangle=function(){for(var e,t,n="9",r=this.upper;r;r=r.upper)null!==r.name&&this.names.set(r.name,!0);for(;n=o.generateNextName(n),this.names.has(n););for(this.name=n,r=this.upper;r;r=r.upper)r.names.set(n,!0);for(this.node.label.name=n,e=0,t=this.users.length;e<t;++e)this.users[e].label.name=n},LabelScope.prototype.register=function register(e){n(e.type===u.LabeledStatement,"node should be LabeledStatement"),this.label=new Label(e,this.label),this.labels.push(this.label),e=e.label.name,n(!this.map.has(e),"duplicate label is found"),this.map.set(e,this.label)},LabelScope.prototype.unregister=function unregister(e){var t;e.type===u.LabeledStatement&&(e=e.label.name,t=this.map.get(e),this.map.delete(e),this.label=t.upper)},LabelScope.prototype.resolve=function resolve(e){var t;e.label&&(t=e.label.name,n(this.map.has(t),"unresolved label"),this.map.get(t).users.push(e))},LabelScope.prototype.close=function close(){var e,t;for(this.labels.sort(function(e,t){return t.users.length-e.users.length}),e=0,t=this.labels.length;e<t;++e)this.labels[e].mangle();return this.upper},l.mangle=function mangle(e,t){for(var n,e=null==(t=null==t?{destructive:!0}:t).destructive||t.destructive?e:o.deepCopy(e),r=0,i=(n=s.analyze(e,{directive:!0})).scopes.length;r<i;++r)!function run(e,t){var n,r,i,s,a,o,u=new NameGenerator(e,t);if(e.isStatic())for(o="9",e.variables.sort(function(e,t){return e.tainted?1:t.tainted?-1:t.identifiers.length+t.references.length-(e.identifiers.length+e.references.length)}),n=0,r=e.variables.length;n<r;++n)if(!(a=e.variables[n]).tainted&&0!==a.identifiers.length){for(o=u.generateName(o),i=0,s=a.identifiers.length;i<s;++i)a.identifiers[i].name=o;for(i=0,s=a.references.length;i<s;++i)a.references[i].identifier.name=o}}(n.scopes[r],t);return function mangleLabels(e){var t;return a.traverse(e,{enter:function(e){if(s.Scope.isVariableScopeRequired(e))t=new LabelScope(t);else switch(e.type){case u.LabeledStatement:t.register(e);break;case u.BreakStatement:case u.ContinueStatement:t.resolve(e)}},leave:function(e){t.unregister(e),s.Scope.isVariableScopeRequired(e)&&(t=t.close())}}),e}(e)},l.version=e,l.generateNextName=o.generateNextName}()},{"../package.json":61,"./map":57,"./utility":58,escope:10,estraverse:59,esutils:66}],57:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{dup:17}],58:[function(e,t,s){!function(){"use strict";var i,r,n;function zeroSequence(e){var t=n[e];return void 0===t&&(t=function stringRepeat(e,t){var n="";for(t|=0;0<t;t>>>=1,e+=e)1&t&&(n+=e);return n}("0",e),n[e]=t),t}i=(i=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},n=[],r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$".split(""),s.generateNextName=function generateNextName(e){var t,n=e.length-1;do{if(t=e.charAt(n),(t=r.indexOf(t))!==r.length-1)return e.substring(0,n)+r[t+1]+zeroSequence(e.length-(n+1))}while(0<=--n);return"a"+zeroSequence(e.length)},s.deepCopy=function deepCopy(e){return function deepCopyInternal(e,t){var n,r;for(n in e)0!==n.lastIndexOf("__",0)&&e.hasOwnProperty(n)&&("object"==typeof(r=e[n])&&null!==r&&(r=r instanceof RegExp?new RegExp(r):deepCopyInternal(r,i(r)?[]:{})),t[n]=r);return t}(e,i(e)?[]:{})}}()},{}],59:[function(t,e,n){!function clone(e){"use strict";var n,m,u,r,i,g,y,v,C;function deepCopy(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?deepCopy(n):n);return r}function F(){}function Reference(e,t){this.parent=e,this.key=t}function Element(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function Controller(){}function isNode(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function isProperty(e,t){return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function traverse(e,t){return(new Controller).traverse(e,t)}function extendCommentRange(t,e){var n=function upperBound(e,t){for(var n,r,i=e.length,s=0;i;)t(e[r=s+(n=i>>>1)])?i=n:(s=r+1,i-=1+n);return s}(e,function search(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],n!==e.length&&(t.extendedRange[1]=e[n].range[0]),0<=--n&&(t.extendedRange[0]=e[n].range[1]),t}return m=(m=Array.isArray)||function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.create||function(e){return F.prototype=e,new F},g=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={Break:y={},Skip:v={},Remove:C={}},Reference.prototype.replace=function replace(e){this.parent[this.key]=e},Reference.prototype.remove=function remove(){return m(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},Controller.prototype.path=function path(){var e,t,n,r,i;function addToPath(e,t){if(m(t))for(n=0,r=t.length;n<r;++n)e.push(t[n]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)addToPath(i,this.__leavelist[e].path);return addToPath(i,this.__current.path),i},Controller.prototype.type=function(){return this.current().type||this.__current.wrap},Controller.prototype.parents=function parents(){for(var e=[],t=1,n=this.__leavelist.length;t<n;++t)e.push(this.__leavelist[t].node);return e},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(e,t){var n=void 0,r=this.__current;return this.__current=t,this.__state=null,e&&(n=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=r,n},Controller.prototype.notify=function notify(e){this.__state=e},Controller.prototype.skip=function(){this.notify(v)},Controller.prototype.break=function(){this.notify(y)},Controller.prototype.remove=function(){this.notify(C)},Controller.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=r,t.keys&&(this.__keys=function extend(e,t){for(var n,r=g(t),i=0,s=r.length;i<s;i+=1)e[n=r[i]]=t[n];return e}(i(this.__keys),t.keys))},Controller.prototype.traverse=function traverse(e,t){var n,r,i,s,a,o,u,l,c,h,p,d;for(this.__initialize(e,t),d={},n=this.__worklist,r=this.__leavelist,n.push(new Element(e,null,null,null)),r.push(new Element(null,null,null,null));n.length;)if((i=n.pop())===d){if(i=r.pop(),o=this.__execute(t.leave,i),this.__state===y||o===y)return}else if(i.node){if(o=this.__execute(t.enter,i),this.__state===y||o===y)return;if(n.push(d),r.push(i),this.__state!==v&&o!==v){if(a=(s=i.node).type||i.wrap,!(h=this.__keys[a])){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=g(s)}for(l=h.length;0<=--l;)if(p=s[u=h[l]])if(m(p)){for(c=p.length;0<=--c;)if(p[c]){if(isProperty(a,h[l]))i=new Element(p[c],[u,c],"Property",null);else{if(!isNode(p[c]))continue;i=new Element(p[c],[u,c],null,null)}n.push(i)}}else isNode(p)&&n.push(new Element(p,u,null,null))}}},Controller.prototype.replace=function replace(e,t){function removeElem(e){var t,n,r,i;if(e.ref.remove())for(n=e.ref.key,i=e.ref.parent,t=s.length;t--;)if((r=s[t]).ref&&r.ref.parent===i){if(r.ref.key<n)break;--r.ref.key}}var s,n,r,i,a,o,u,l,c,h,p,d,f;for(this.__initialize(e,t),p={},s=this.__worklist,n=this.__leavelist,o=new Element(e,null,null,new Reference(d={root:e},"root")),s.push(o),n.push(o);s.length;)if((o=s.pop())===p){if(o=n.pop(),void 0!==(a=this.__execute(t.leave,o))&&a!==y&&a!==v&&a!==C&&o.ref.replace(a),this.__state!==C&&a!==C||removeElem(o),this.__state===y||a===y)return d.root}else{if(void 0!==(a=this.__execute(t.enter,o))&&a!==y&&a!==v&&a!==C&&(o.ref.replace(a),o.node=a),this.__state!==C&&a!==C||(removeElem(o),o.node=null),this.__state===y||a===y)return d.root;if((r=o.node)&&(s.push(p),n.push(o),this.__state!==v)&&a!==v){if(i=r.type||o.wrap,!(c=this.__keys[i])){if(!this.__fallback)throw new Error("Unknown node type "+i+".");c=g(r)}for(u=c.length;0<=--u;)if(h=r[f=c[u]])if(m(h)){for(l=h.length;0<=--l;)if(h[l]){if(isProperty(i,c[u]))o=new Element(h[l],[f,l],"Property",new Reference(h,l));else{if(!isNode(h[l]))continue;o=new Element(h[l],[f,l],null,new Reference(h,l))}s.push(o)}}else isNode(h)&&s.push(new Element(h,f,null,new Reference(r,f)))}}return d.root},e.version=t("./package.json").version,e.Syntax=n,e.traverse=traverse,e.replace=function replace(e,t){return(new Controller).replace(e,t)},e.attachComments=function attachComments(e,t,n){var r,i,s,a,o=[];if(!e.range)throw new Error("attachComments needs range information");if(n.length){for(s=0,i=t.length;s<i;s+=1)o.push(extendCommentRange(deepCopy(t[s]),n));a=0,traverse(e,{enter:function(e){for(var t;a<o.length&&!((t=o[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}}),a=0,traverse(e,{leave:function(e){for(var t;a<o.length&&(t=o[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}})}else if(t.length){for(s=0,i=t.length;s<i;s+=1)(r=deepCopy(t[s])).extendedRange=[0,e.range[0]],o.push(r);e.leadingComments=o}return e},e.VisitorKeys=r,e.VisitorOption=u,e.Controller=Controller,e.cloneEnvironment=function(){return clone({})},e}(n)},{"./package.json":60}],60:[function(e,t,n){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.1.1",engines:{node:">=0.10.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"}}},{}],61:[function(e,t,n){t.exports={name:"esshorten",description:"Shorten (mangle) names in JavaScript code",main:"lib/esshorten.js",version:"1.1.1",engines:{node:">=0.6.0"},directories:{lib:"./lib"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/esshorten.git"},dependencies:{estraverse:"~4.1.1",escope:"~1.0.1",esutils:"~2.0.2"},devDependencies:{chai:"*","commonjs-everywhere":"~0.9.7","jshint-stylish":"~2.0.1","gulp-mocha":"~2.1.3","gulp-jshint":"~1.11.2",gulp:"~3.9.0","coffee-script":"~1.10.0"},licenses:[{type:"BSD",url:"http://github.com/estools/esshorten/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis",lint:"gulp lint","unit-test":"gulp test"}}},{}],62:[function(e,t,n){!function clone(e){"use strict";var n,u,r,m,g,y;function deepCopy(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?deepCopy(n):n);return r}function Reference(e,t){this.parent=e,this.key=t}function Element(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function Controller(){}function isNode(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function isProperty(e,t){return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function candidateExistsInLeaveList(e,t){for(var n=e.length-1;0<=n;--n)if(e[n].node===t)return 1}function traverse(e,t){return(new Controller).traverse(e,t)}function extendCommentRange(t,e){var n=function upperBound(e,t){for(var n,r,i=e.length,s=0;i;)t(e[r=s+(n=i>>>1)])?i=n:(s=r+1,i-=1+n);return s}(e,function search(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],n!==e.length&&(t.extendedRange[1]=e[n].range[0]),0<=--n&&(t.extendedRange[0]=e[n].range[1]),t}return n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={Break:m={},Skip:g={},Remove:y={}},Reference.prototype.replace=function replace(e){this.parent[this.key]=e},Reference.prototype.remove=function remove(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},Controller.prototype.path=function path(){var e,t,n,r,i;function addToPath(e,t){if(Array.isArray(t))for(n=0,r=t.length;n<r;++n)e.push(t[n]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)addToPath(i,this.__leavelist[e].path);return addToPath(i,this.__current.path),i},Controller.prototype.type=function(){return this.current().type||this.__current.wrap},Controller.prototype.parents=function parents(){for(var e=[],t=1,n=this.__leavelist.length;t<n;++t)e.push(this.__leavelist[t].node);return e},Controller.prototype.current=function current(){return this.__current.node},Controller.prototype.__execute=function __execute(e,t){var n=void 0,r=this.__current;return this.__current=t,this.__state=null,e&&(n=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=r,n},Controller.prototype.notify=function notify(e){this.__state=e},Controller.prototype.skip=function(){this.notify(g)},Controller.prototype.break=function(){this.notify(m)},Controller.prototype.remove=function(){this.notify(y)},Controller.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===t.fallback?this.__fallback=Object.keys:"function"==typeof t.fallback&&(this.__fallback=t.fallback),this.__keys=r,t.keys&&(this.__keys=Object.assign(Object.create(this.__keys),t.keys))},Controller.prototype.traverse=function traverse(e,t){var n,r,i,s,a,o,u,l,c,h,p,d;for(this.__initialize(e,t),d={},n=this.__worklist,r=this.__leavelist,n.push(new Element(e,null,null,null)),r.push(new Element(null,null,null,null));n.length;)if((i=n.pop())===d){if(i=r.pop(),o=this.__execute(t.leave,i),this.__state===m||o===m)return}else if(i.node){if(o=this.__execute(t.enter,i),this.__state===m||o===m)return;if(n.push(d),r.push(i),this.__state!==g&&o!==g){if(a=(s=i.node).type||i.wrap,!(h=this.__keys[a])){if(!this.__fallback)throw new Error("Unknown node type "+a+".");h=this.__fallback(s)}for(l=h.length;0<=--l;)if(p=s[u=h[l]])if(Array.isArray(p)){for(c=p.length;0<=--c;)if(p[c]&&!candidateExistsInLeaveList(r,p[c])){if(isProperty(a,h[l]))i=new Element(p[c],[u,c],"Property",null);else{if(!isNode(p[c]))continue;i=new Element(p[c],[u,c],null,null)}n.push(i)}}else!isNode(p)||candidateExistsInLeaveList(r,p)||n.push(new Element(p,u,null,null))}}},Controller.prototype.replace=function replace(e,t){var s,n,r,i,a,o,u,l,c,h,p,d,f;function removeElem(e){var t,n,r,i;if(e.ref.remove())for(n=e.ref.key,i=e.ref.parent,t=s.length;t--;)if((r=s[t]).ref&&r.ref.parent===i){if(r.ref.key<n)break;--r.ref.key}}for(this.__initialize(e,t),p={},s=this.__worklist,n=this.__leavelist,o=new Element(e,null,null,new Reference(d={root:e},"root")),s.push(o),n.push(o);s.length;)if((o=s.pop())===p){if(o=n.pop(),void 0!==(a=this.__execute(t.leave,o))&&a!==m&&a!==g&&a!==y&&o.ref.replace(a),this.__state!==y&&a!==y||removeElem(o),this.__state===m||a===m)return d.root}else{if(void 0!==(a=this.__execute(t.enter,o))&&a!==m&&a!==g&&a!==y&&(o.ref.replace(a),o.node=a),this.__state!==y&&a!==y||(removeElem(o),o.node=null),this.__state===m||a===m)return d.root;if((r=o.node)&&(s.push(p),n.push(o),this.__state!==g)&&a!==g){if(i=r.type||o.wrap,!(c=this.__keys[i])){if(!this.__fallback)throw new Error("Unknown node type "+i+".");c=this.__fallback(r)}for(u=c.length;0<=--u;)if(h=r[f=c[u]])if(Array.isArray(h)){for(l=h.length;0<=--l;)if(h[l]){if(isProperty(i,c[u]))o=new Element(h[l],[f,l],"Property",new Reference(h,l));else{if(!isNode(h[l]))continue;o=new Element(h[l],[f,l],null,new Reference(h,l))}s.push(o)}}else isNode(h)&&s.push(new Element(h,f,null,new Reference(r,f)))}}return d.root},e.Syntax=n,e.traverse=traverse,e.replace=function replace(e,t){return(new Controller).replace(e,t)},e.attachComments=function attachComments(e,t,n){var r,i,s,a,o=[];if(!e.range)throw new Error("attachComments needs range information");if(n.length){for(s=0,i=t.length;s<i;s+=1)o.push(extendCommentRange(deepCopy(t[s]),n));a=0,traverse(e,{enter:function(e){for(var t;a<o.length&&!((t=o[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}}),a=0,traverse(e,{leave:function(e){for(var t;a<o.length&&(t=o[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),o.splice(a,1)):a+=1;return a===o.length?u.Break:o[a].extendedRange[0]>e.range[1]?u.Skip:void 0}})}else if(t.length){for(s=0,i=t.length;s<i;s+=1)(r=deepCopy(t[s])).extendedRange=[0,e.range[0]],o.push(r);e.leadingComments=o}return e},e.VisitorKeys=r,e.VisitorOption=u,e.Controller=Controller,e.cloneEnvironment=function(){return clone({})},e}(n)},{}],63:[function(e,t,n){!function(){"use strict";function isStatement(e){if(null!=e)switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function trailingStatement(e){switch(e.type){case"IfStatement":return null!=e.alternate?e.alternate:e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}t.exports={isExpression:function isExpression(e){if(null!=e)switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1},isStatement:isStatement,isIterationStatement:function isIterationStatement(e){if(null!=e)switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1},isSourceElement:function isSourceElement(e){return isStatement(e)||null!=e&&"FunctionDeclaration"===e.type},isProblematicIfStatement:function isProblematicIfStatement(e){var t;if("IfStatement"===e.type&&null!=e.alternate){t=e.consequent;do{if("IfStatement"===t.type&&null==t.alternate)return!0}while(t=trailingStatement(t))}return!1},trailingStatement:trailingStatement}}()},{}],64:[function(e,a,t){!function(){"use strict";var t,n,r,i,s,e;function fromCodePoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(Math.floor((e-65536)/1024)+55296)+String.fromCharCode((e-65536)%1024+56320)}for(n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],i=new Array(128),e=0;e<128;++e)i[e]=97<=e&&e<=122||65<=e&&e<=90||36===e||95===e;for(s=new Array(128),e=0;e<128;++e)s[e]=97<=e&&e<=122||65<=e&&e<=90||48<=e&&e<=57||36===e||95===e;a.exports={isDecimalDigit:function isDecimalDigit(e){return 48<=e&&e<=57},isHexDigit:function isHexDigit(e){return 48<=e&&e<=57||97<=e&&e<=102||65<=e&&e<=70},isOctalDigit:function isOctalDigit(e){return 48<=e&&e<=55},isWhiteSpace:function isWhiteSpace(e){return 32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=r.indexOf(e)},isLineTerminator:function isLineTerminator(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStartES5:function isIdentifierStartES5(e){return e<128?i[e]:n.NonAsciiIdentifierStart.test(fromCodePoint(e))},isIdentifierPartES5:function isIdentifierPartES5(e){return e<128?s[e]:n.NonAsciiIdentifierPart.test(fromCodePoint(e))},isIdentifierStartES6:function isIdentifierStartES6(e){return e<128?i[e]:t.NonAsciiIdentifierStart.test(fromCodePoint(e))},isIdentifierPartES6:function isIdentifierPartES6(e){return e<128?s[e]:t.NonAsciiIdentifierPart.test(fromCodePoint(e))}}}()},{}],65:[function(e,t,n){!function(){"use strict";var a=e("./code");function isKeywordES5(e,t){return!(!t&&"yield"===e)&&isKeywordES6(e,t)}function isKeywordES6(e,t){if(t&&function isStrictModeReservedWordES6(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return 1;default:return}}(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function isReservedWordES5(e,t){return"null"===e||"true"===e||"false"===e||isKeywordES5(e,t)}function isReservedWordES6(e,t){return"null"===e||"true"===e||"false"===e||isKeywordES6(e,t)}function isIdentifierNameES5(e){var t,n,r;if(0===e.length)return!1;if(r=e.charCodeAt(0),!a.isIdentifierStartES5(r))return!1;for(t=1,n=e.length;t<n;++t)if(r=e.charCodeAt(t),!a.isIdentifierPartES5(r))return!1;return!0}function isIdentifierNameES6(e){var t,n,r,i,s;if(0===e.length)return!1;for(s=a.isIdentifierStartES6,t=0,n=e.length;t<n;++t){if(55296<=(r=e.charCodeAt(t))&&r<=56319){if(n<=++t)return!1;if(!(56320<=(i=e.charCodeAt(t))&&i<=57343))return!1;r=function decodeUtf16(e,t){return 1024*(e-55296)+(t-56320)+65536}(r,i)}if(!s(r))return!1;s=a.isIdentifierPartES6}return!0}t.exports={isKeywordES5:isKeywordES5,isKeywordES6:isKeywordES6,isReservedWordES5:isReservedWordES5,isReservedWordES6:isReservedWordES6,isRestrictedWord:function isRestrictedWord(e){return"eval"===e||"arguments"===e},isIdentifierNameES5:isIdentifierNameES5,isIdentifierNameES6:isIdentifierNameES6,isIdentifierES5:function isIdentifierES5(e,t){return isIdentifierNameES5(e)&&!isReservedWordES5(e,t)},isIdentifierES6:function isIdentifierES6(e,t){return isIdentifierNameES6(e)&&!isReservedWordES6(e,t)}}}()},{"./code":64}],66:[function(e,t,n){!function(){"use strict";n.ast=e("./ast"),n.code=e("./code"),n.keyword=e("./keyword")}()},{"./ast":63,"./code":64,"./keyword":65}],67:[function(e,t,n){var s=e("./util"),a=Object.prototype.hasOwnProperty,o="undefined"!=typeof Map;function ArraySet(){this._array=[],this._set=o?new Map:Object.create(null)}ArraySet.fromArray=function ArraySet_fromArray(e,t){for(var n=new ArraySet,r=0,i=e.length;r<i;r++)n.add(e[r],t);return n},ArraySet.prototype.size=function ArraySet_size(){return o?this._set.size:Object.getOwnPropertyNames(this._set).length},ArraySet.prototype.add=function ArraySet_add(e,t){var n=o?e:s.toSetString(e),r=o?this.has(e):a.call(this._set,n),i=this._array.length;r&&!t||this._array.push(e),r||(o?this._set.set(e,i):this._set[n]=i)},ArraySet.prototype.has=function ArraySet_has(e){return o?this._set.has(e):(e=s.toSetString(e),a.call(this._set,e))},ArraySet.prototype.indexOf=function ArraySet_indexOf(e){if(o){var t=this._set.get(e);if(0<=t)return t}else{t=s.toSetString(e);if(a.call(this._set,t))return this._set[t]}throw new Error('"'+e+'" is not in the set.')},ArraySet.prototype.at=function ArraySet_at(e){if(0<=e&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()},n.ArraySet=ArraySet},{"./util":76}],68:[function(e,t,n){var u=e("./base64");n.encode=function base64VLQ_encode(e){for(var t,n="",r=function toVLQSigned(e){return e<0?1+(-e<<1):e<<1}(e);t=31&r,0<(r>>>=5)&&(t|=32),n+=u.encode(t),0<r;);return n},n.decode=function base64VLQ_decode(e,t,n){var r,i,s=e.length,a=0,o=0;do{if(s<=t)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(i=u.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1))}while(r=!!(32&i),a+=(i&=31)<<o,o+=5,r);n.value=function fromVLQSigned(e){var t=e>>1;return 1==(1&e)?-t:t}(a),n.rest=t}},{"./base64":69}],69:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},n.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],70:[function(e,t,u){u.GREATEST_LOWER_BOUND=1,u.LEAST_UPPER_BOUND=2,u.search=function search(e,t,n,r){if(0===t.length)return-1;var i=function recursiveSearch(e,t,n,r,i,s){var a=Math.floor((t-e)/2)+e,o=i(n,r[a],!0);return 0===o?a:0<o?1<t-a?recursiveSearch(a,t,n,r,i,s):s==u.LEAST_UPPER_BOUND?t<r.length?t:-1:a:1<a-e?recursiveSearch(e,a,n,r,i,s):s==u.LEAST_UPPER_BOUND?a:e<0?-1:e}(-1,t.length,e,t,n,r||u.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;0<=i-1&&0===n(t[i],t[i-1],!0);)--i;return i}},{}],71:[function(e,t,n){var a=e("./util");function MappingList(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(e,t){this._array.forEach(e,t)},MappingList.prototype.add=function MappingList_add(e){!function generatedPositionAfter(e,t){var n=e.generatedLine,r=t.generatedLine,i=e.generatedColumn,s=t.generatedColumn;return n<r||r==n&&i<=s||a.compareByGeneratedPositionsInflated(e,t)<=0}(this._last,e)?this._sorted=!1:this._last=e,this._array.push(e)},MappingList.prototype.toArray=function MappingList_toArray(){return this._sorted||(this._array.sort(a.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},n.MappingList=MappingList},{"./util":76}],72:[function(e,t,n){function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function doQuickSort(e,t,n,r){if(n<r){for(var i=n-1,s=(swap(e,function randomIntInRange(e,t){return Math.round(e+Math.random()*(t-e))}(n,r),r),e[r]),a=n;a<r;a++)t(e[a],s)<=0&&swap(e,i+=1,a);swap(e,i+1,a);var o=i+1;doQuickSort(e,t,n,o-1),doQuickSort(e,t,o+1,r)}}n.quickSort=function(e,t){doQuickSort(e,t,0,e.length-1)}},{}],73:[function(e,t,n){var v=e("./util"),u=e("./binary-search"),p=e("./array-set").ArraySet,C=e("./base64-vlq"),D=e("./quick-sort").quickSort;function SourceMapConsumer(e,t){var n=e;return new(null!=(n="string"==typeof e?v.parseSourceMapInput(e):n).sections?IndexedSourceMapConsumer:BasicSourceMapConsumer)(n,t)}function BasicSourceMapConsumer(e,t){var n=e,e=("string"==typeof e&&(n=v.parseSourceMapInput(e)),v.getArg(n,"version")),r=v.getArg(n,"sources"),i=v.getArg(n,"names",[]),s=v.getArg(n,"sourceRoot",null),a=v.getArg(n,"sourcesContent",null),o=v.getArg(n,"mappings"),n=v.getArg(n,"file",null);if(e!=this._version)throw new Error("Unsupported version: "+e);s=s&&v.normalize(s),r=r.map(String).map(v.normalize).map(function(e){return s&&v.isAbsolute(s)&&v.isAbsolute(e)?v.relative(s,e):e}),this._names=p.fromArray(i.map(String),!0),this._sources=p.fromArray(r,!0),this._absoluteSources=this._sources.toArray().map(function(e){return v.computeSourceURL(s,e,t)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=o,this._sourceMapURL=t,this.file=n}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(e,i){var t=e,e=("string"==typeof e&&(t=v.parseSourceMapInput(e)),v.getArg(t,"version")),t=v.getArg(t,"sections");if(e!=this._version)throw new Error("Unsupported version: "+e);this._sources=new p,this._names=new p;var s={line:-1,column:0};this._sections=t.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=v.getArg(e,"offset"),n=v.getArg(t,"line"),r=v.getArg(t,"column");if(n<s.line||n===s.line&&r<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:n+1,generatedColumn:r+1},consumer:new SourceMapConsumer(v.getArg(e,"map"),i)}})}SourceMapConsumer.fromSourceMap=function(e,t){return BasicSourceMapConsumer.fromSourceMap(e,t)},SourceMapConsumer.prototype._version=3,SourceMapConsumer.prototype.__generatedMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),SourceMapConsumer.prototype.__originalMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),SourceMapConsumer.prototype._charIsMappingSeparator=function SourceMapConsumer_charIsMappingSeparator(e,t){e=e.charAt(t);return";"===e||","===e},SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(e,t){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(e,t,n){var r,t=t||null;switch(n||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:r=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;r.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:v.computeSourceURL(i,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,t)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(e){var t=v.getArg(e,"line"),n={source:v.getArg(e,"source"),originalLine:t,originalColumn:v.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var r=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(0<=i){var s=this._originalMappings[i];if(void 0===e.column)for(var a=s.originalLine;s&&s.originalLine===a;)r.push({line:v.getArg(s,"generatedLine",null),column:v.getArg(s,"generatedColumn",null),lastColumn:v.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i];else for(var o=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==o;)r.push({line:v.getArg(s,"generatedLine",null),column:v.getArg(s,"generatedColumn",null),lastColumn:v.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i]}return r},n.SourceMapConsumer=SourceMapConsumer,(BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).consumer=SourceMapConsumer,BasicSourceMapConsumer.prototype._findSourceIndex=function(e){var t,n=e;if(null!=this.sourceRoot&&(n=v.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},BasicSourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(e,t){for(var n=Object.create(BasicSourceMapConsumer.prototype),r=n._names=p.fromArray(e._names.toArray(),!0),i=n._sources=p.fromArray(e._sources.toArray(),!0),s=(n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map(function(e){return v.computeSourceURL(n.sourceRoot,e,t)}),e._mappings.toArray().slice()),a=n.__generatedMappings=[],o=n.__originalMappings=[],u=0,l=s.length;u<l;u++){var c=s[u],h=new Mapping;h.generatedLine=c.generatedLine,h.generatedColumn=c.generatedColumn,c.source&&(h.source=i.indexOf(c.source),h.originalLine=c.originalLine,h.originalColumn=c.originalColumn,c.name&&(h.name=r.indexOf(c.name)),o.push(h)),a.push(h)}return D(n.__originalMappings,v.compareByOriginalPositions),n},BasicSourceMapConsumer.prototype._version=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),BasicSourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(e,t){for(var n,r,i,s,a=1,o=0,u=0,l=0,c=0,h=0,p=e.length,d=0,f={},m={},g=[],y=[];d<p;)if(";"===e.charAt(d))a++,d++,o=0;else if(","===e.charAt(d))d++;else{for((n=new Mapping).generatedLine=a,s=d;s<p&&!this._charIsMappingSeparator(e,s);s++);if(i=f[r=e.slice(d,s)])d+=r.length;else{for(i=[];d<s;)C.decode(e,d,m),d=m.rest,i.push(m.value);if(2===i.length)throw new Error("Found a source, but no line and column");if(3===i.length)throw new Error("Found a source and line, but no column");f[r]=i}n.generatedColumn=o+i[0],o=n.generatedColumn,1<i.length&&(n.source=c+i[1],c+=i[1],n.originalLine=u+i[2],u=n.originalLine,n.originalLine+=1,n.originalColumn=l+i[3],l=n.originalColumn,4<i.length)&&(n.name=h+i[4],h+=i[4]),y.push(n),"number"==typeof n.originalLine&&g.push(n)}D(y,v.compareByGeneratedPositionsDeflated),this.__generatedMappings=y,D(g,v.compareByOriginalPositions),this.__originalMappings=g},BasicSourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(e,t,n,r,i,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return u.search(e,t,i,s)},BasicSourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},BasicSourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},e=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",v.compareByGeneratedPositionsDeflated,v.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=e){var n,e=this._generatedMappings[e];if(e.generatedLine===t.generatedLine)return null!==(t=v.getArg(e,"source",null))&&(t=this._sources.at(t),t=v.computeSourceURL(this.sourceRoot,t,this._sourceMapURL)),null!==(n=v.getArg(e,"name",null))&&(n=this._names.at(n)),{source:t,line:v.getArg(e,"originalLine",null),column:v.getArg(e,"originalColumn",null),name:n}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function BasicSourceMapConsumer_hasContentsOfAllSources(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},BasicSourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(0<=n)return this.sourcesContent[n];var r,n=e;if(null!=this.sourceRoot&&(n=v.relative(this.sourceRoot,n)),null!=this.sourceRoot&&(r=v.urlParse(this.sourceRoot))){e=n.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!r.path||"/"==r.path)&&this._sources.has("/"+n))return this.sourcesContent[this._sources.indexOf("/"+n)]}if(t)return null;throw new Error('"'+n+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(e){var t=v.getArg(e,"source"),t=this._findSourceIndex(t);if(!(t<0)){t={source:t,originalLine:v.getArg(e,"line"),originalColumn:v.getArg(e,"column")},e=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,v.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=e){e=this._originalMappings[e];if(e.source===t.source)return{line:v.getArg(e,"generatedLine",null),column:v.getArg(e,"generatedColumn",null),lastColumn:v.getArg(e,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=BasicSourceMapConsumer,(IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype._version=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function IndexedSourceMapConsumer_originalPositionFor(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},n=u.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[n];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function IndexedSourceMapConsumer_hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},IndexedSourceMapConsumer.prototype.sourceContentFor=function IndexedSourceMapConsumer_sourceContentFor(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function IndexedSourceMapConsumer_generatedPositionFor(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer._findSourceIndex(v.getArg(e,"source"))){var r=n.consumer.generatedPositionFor(e);if(r)return{line:r.line+(n.generatedOffset.generatedLine-1),column:r.column+(n.generatedOffset.generatedLine===r.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._parseMappings=function IndexedSourceMapConsumer_parseMappings(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var r=this._sections[n],i=r.consumer._generatedMappings,s=0;s<i.length;s++){var a=i[s],o=r.consumer._sources.at(a.source),o=v.computeSourceURL(r.consumer.sourceRoot,o,this._sourceMapURL),u=(this._sources.add(o),o=this._sources.indexOf(o),null),o=(a.name&&(u=r.consumer._names.at(a.name),this._names.add(u),u=this._names.indexOf(u)),{source:o,generatedLine:a.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(r.generatedOffset.generatedLine===a.generatedLine?r.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:u});this.__generatedMappings.push(o),"number"==typeof o.originalLine&&this.__originalMappings.push(o)}D(this.__generatedMappings,v.compareByGeneratedPositionsDeflated),D(this.__originalMappings,v.compareByOriginalPositions)},n.IndexedSourceMapConsumer=IndexedSourceMapConsumer},{"./array-set":67,"./base64-vlq":68,"./binary-search":70,"./quick-sort":72,"./util":76}],74:[function(e,t,n){var d=e("./base64-vlq"),f=e("./util"),u=e("./array-set").ArraySet,r=e("./mapping-list").MappingList;function SourceMapGenerator(e){this._file=f.getArg(e=e||{},"file",null),this._sourceRoot=f.getArg(e,"sourceRoot",null),this._skipValidation=f.getArg(e,"skipValidation",!1),this._sources=new u,this._names=new u,this._mappings=new r,this._sourcesContents=null}SourceMapGenerator.prototype._version=3,SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(n){var r=n.sourceRoot,i=new SourceMapGenerator({file:n.file,sourceRoot:r});return n.eachMapping(function(e){var t={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(t.source=e.source,null!=r&&(t.source=f.relative(r,t.source)),t.original={line:e.originalLine,column:e.originalColumn},null!=e.name)&&(t.name=e.name),i.addMapping(t)}),n.sources.forEach(function(e){var t=e,t=(null!==r&&(t=f.relative(r,e)),i._sources.has(t)||i._sources.add(t),n.sourceContentFor(e));null!=t&&i.setSourceContent(e,t)}),i},SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(e){var t=f.getArg(e,"generated"),n=f.getArg(e,"original",null),r=f.getArg(e,"source",null),e=f.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,e),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=e&&(e=String(e),this._names.has(e)||this._names.add(e)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:e})},SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(e,t){null!=this._sourceRoot&&(e=f.relative(this._sourceRoot,e)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[f.toSetString(e)]=t):this._sourcesContents&&(delete this._sourcesContents[f.toSetString(e)],0===Object.keys(this._sourcesContents).length)&&(this._sourcesContents=null)},SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(n,e,r){var i=e;if(null==e){if(null==n.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=n.file}var s=this._sourceRoot,a=(null!=s&&(i=f.relative(s,i)),new u),o=new u;this._mappings.unsortedForEach(function(e){e.source===i&&null!=e.originalLine&&null!=(t=n.originalPositionFor({line:e.originalLine,column:e.originalColumn})).source&&(e.source=t.source,null!=r&&(e.source=f.join(r,e.source)),null!=s&&(e.source=f.relative(s,e.source)),e.originalLine=t.line,e.originalColumn=t.column,null!=t.name)&&(e.name=t.name);var t=e.source,t=(null==t||a.has(t)||a.add(t),e.name);null==t||o.has(t)||o.add(t)},this),this._sources=a,this._names=o,n.sources.forEach(function(e){var t=n.sourceContentFor(e);null!=t&&(null!=r&&(e=f.join(r,e)),null!=s&&(e=f.relative(s,e)),this.setSourceContent(e,t))},this)},SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&0<e.line&&0<=e.column&&0<t.line&&0<=t.column&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){for(var e,t,n,r=0,i=1,s=0,a=0,o=0,u=0,l="",c=this._mappings.toArray(),h=0,p=c.length;h<p;h++){if(e="",(t=c[h]).generatedLine!==i)for(r=0;t.generatedLine!==i;)e+=";",i++;else if(0<h){if(!f.compareByGeneratedPositionsInflated(t,c[h-1]))continue;e+=","}e+=d.encode(t.generatedColumn-r),r=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=d.encode(n-u),u=n,e+=d.encode(t.originalLine-1-a),a=t.originalLine-1,e+=d.encode(t.originalColumn-s),s=t.originalColumn,null!=t.name)&&(n=this._names.indexOf(t.name),e+=d.encode(n-o),o=n),l+=e}return l},SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=f.relative(t,e));e=f.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,e)?this._sourcesContents[e]:null},this)},SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this.toJSON())},n.SourceMapGenerator=SourceMapGenerator},{"./array-set":67,"./base64-vlq":68,"./mapping-list":71,"./util":76}],75:[function(e,t,n){var r=e("./source-map-generator").SourceMapGenerator,c=e("./util"),h=/(\r?\n)/,s="$$$isSourceNode$$$";function SourceNode(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[s]=!0,null!=r&&this.add(r)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(e,n,r){function c6a(){return getNextLine()+(getNextLine()||"");function getNextLine(){return a<s.length?s[a++]:void 0}}var i=new SourceNode,s=e.split(h),a=0,o=1,u=0,l=null;return n.eachMapping(function(e){if(null!==l){var t;if(!(o<e.generatedLine))return t=(n=s[a]||"").substr(0,e.generatedColumn-u),s[a]=n.substr(e.generatedColumn-u),u=e.generatedColumn,addMappingWithCode(l,t),void(l=e);addMappingWithCode(l,c6a()),o++,u=0}for(;o<e.generatedLine;)i.add(c6a()),o++;var n;u<e.generatedColumn&&(n=s[a]||"",i.add(n.substr(0,e.generatedColumn)),s[a]=n.substr(e.generatedColumn),u=e.generatedColumn),l=e},this),a<s.length&&(l&&addMappingWithCode(l,c6a()),i.add(s.splice(a).join(""))),n.sources.forEach(function(e){var t=n.sourceContentFor(e);null!=t&&(null!=r&&(e=c.join(r,e)),i.setSourceContent(e,t))}),i;function addMappingWithCode(e,t){var n;null===e||void 0===e.source?i.add(t):(n=r?c.join(r,e.source):e.source,i.add(new SourceNode(e.originalLine,e.originalColumn,n,t,e.name)))}},SourceNode.prototype.add=function SourceNode_add(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},SourceNode.prototype.prepend=function SourceNode_prepend(e){if(Array.isArray(e))for(var t=e.length-1;0<=t;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},SourceNode.prototype.walk=function SourceNode_walk(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function SourceNode_join(e){var t,n,r=this.children.length;if(0<r){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},SourceNode.prototype.replaceRight=function SourceNode_replaceRight(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(e,t){this.sourceContents[c.toSetString(e)]=t},SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);for(var r=Object.keys(this.sourceContents),t=0,n=r.length;t<n;t++)e(c.fromSetString(r[t]),this.sourceContents[r[t]])},SourceNode.prototype.toString=function SourceNode_toString(){var t="";return this.walk(function(e){t+=e}),t},SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(e){var i={code:"",line:1,column:0},s=new r(e),a=!1,o=null,u=null,l=null,c=null;return this.walk(function(e,t){i.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(o===t.source&&u===t.line&&l===t.column&&c===t.name||s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:i.line,column:i.column},name:t.name}),o=t.source,u=t.line,l=t.column,c=t.name,a=!0):a&&(s.addMapping({generated:{line:i.line,column:i.column}}),o=null,a=!1);for(var n=0,r=e.length;n<r;n++)10===e.charCodeAt(n)?(i.line++,i.column=0,n+1===r?(o=null,a=!1):a&&s.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:i.line,column:i.column},name:t.name})):i.column++}),this.walkSourceContents(function(e,t){s.setSourceContent(e,t)}),{code:i.code,map:s}},n.SourceNode=SourceNode},{"./source-map-generator":74,"./util":76}],76:[function(e,t,o){o.getArg=function getArg(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,i=/^data:.+\,.+$/;function urlParse(e){e=e.match(n);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function urlGenerate(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function normalize(e){var t=e,n=urlParse(e);if(n){if(!n.path)return e;t=n.path}for(var r,e=o.isAbsolute(t),i=t.split(/\/+/),s=0,a=i.length-1;0<=a;a--)"."===(r=i[a])?i.splice(a,1):".."===r?s++:0<s&&(""===r?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return""===(t=i.join("/"))&&(t=e?"/":"."),n?(n.path=t,urlGenerate(n)):t}function join(e,t){""===e&&(e=".");var n=urlParse(t=""===t?".":t),r=urlParse(e);return r&&(e=r.path||"/"),n&&!n.scheme?(r&&(n.scheme=r.scheme),urlGenerate(n)):n||t.match(i)?t:!r||r.host||r.path?(n="/"===t.charAt(0)?t:normalize(e.replace(/\/+$/,"")+"/"+t),r?(r.path=n,urlGenerate(r)):n):(r.host=t,urlGenerate(r))}o.urlParse=urlParse,o.urlGenerate=urlGenerate,o.normalize=normalize,o.join=join,o.isAbsolute=function(e){return"/"===e.charAt(0)||n.test(e)},o.relative=function relative(e,t){e=(e=""===e?".":e).replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var r=!("__proto__"in Object.create(null));function identity(e){return e}function isProtoString(e){if(e){var t=e.length;if(!(t<9)&&95===e.charCodeAt(t-1)&&95===e.charCodeAt(t-2)&&111===e.charCodeAt(t-3)&&116===e.charCodeAt(t-4)&&111===e.charCodeAt(t-5)&&114===e.charCodeAt(t-6)&&112===e.charCodeAt(t-7)&&95===e.charCodeAt(t-8)&&95===e.charCodeAt(t-9)){for(var n=t-10;0<=n;n--)if(36!==e.charCodeAt(n))return;return 1}}}function strcmp(e,t){return e===t?0:null===e||null!==t&&t<e?1:-1}o.toSetString=r?identity:function toSetString(e){return isProtoString(e)?"$"+e:e},o.fromSetString=r?identity:function fromSetString(e){return isProtoString(e)?e.slice(1):e},o.compareByOriginalPositions=function compareByOriginalPositions(e,t,n){var r=strcmp(e.source,t.source);return 0!==r||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)||n||0!=(r=e.generatedColumn-t.generatedColumn)||0!=(r=e.generatedLine-t.generatedLine)?r:strcmp(e.name,t.name)},o.compareByGeneratedPositionsDeflated=function compareByGeneratedPositionsDeflated(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!=r||0!=(r=e.generatedColumn-t.generatedColumn)||n||0!==(r=strcmp(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:strcmp(e.name,t.name)},o.compareByGeneratedPositionsInflated=function compareByGeneratedPositionsInflated(e,t){var n=e.generatedLine-t.generatedLine;return 0!=n||0!=(n=e.generatedColumn-t.generatedColumn)||0!==(n=strcmp(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:strcmp(e.name,t.name)},o.parseSourceMapInput=function parseSourceMapInput(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},o.computeSourceURL=function computeSourceURL(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){e=urlParse(n);if(!e)throw new Error("sourceMapURL could not be parsed");e.path&&0<=(n=e.path.lastIndexOf("/"))&&(e.path=e.path.substring(0,n+1)),t=join(urlGenerate(e),t)}return normalize(t)}},{}],77:[function(e,t,n){n.SourceMapGenerator=e("./lib/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=e("./lib/source-map-consumer").SourceMapConsumer,n.SourceNode=e("./lib/source-node").SourceNode},{"./lib/source-map-consumer":73,"./lib/source-map-generator":74,"./lib/source-node":75}],78:[function(e,t,n){const r=e("../JSC/jsc.js")["JSC"];t.exports.build=async function build(t,e){const n=new r(e=>t.readFile(e));return n.include("/std.js"),t.ls("/.R/")?.forEach?.(e=>{e.isFile()&&n.include("/.R/"+e.name)}),n.process(),function buildHTML(e,[t,n]){return`<!doctype html>
<html>
<head>
<style>
html, body, canvas {
width: 100%;
height: 100%;
position: absolute;
overflow: hidden;
margin: 0;
border: 0;
padding: 0;
left: 0;
right: 0;
top: 0;
bottom: 0;
}
canvas {
margin: auto;
image-rendering: pixelated;
}
</style>
<script src="assets.js"></script>
<script src="browser.js?nc=3"></script>
<script>
${e}
</script>
</head>
<body>
<canvas id=canvas width=${t} height=${n}></canvas>
</body>
</html>`}(n.write("js"),e)}},{"../JSC/jsc.js":6}],79:[function(e,t,n){const r=e("./dom.js")["dom"];t.exports.Console=class Console{maxLines=1e3;#prevLine={text:null,count:0,el:null};onAppend;#tweens=0;#interval;constructor(t){this.el=r("div",{className:"console"}),"string"==typeof t&&(t=((e,t)=>t[e]).bind(this,t)),window.addEventListener("message",e=>{e=t(e.data);if(Array.isArray(e)){let t=this.el.scrollTop;for(var n of e)this.append(n);setTimeout(e=>this.el.scrollTop=t,0),this.tween(),this.onAppend&&this.onAppend()}})}tween(){this.#tweens=30,this.#interval||(this.#interval=setInterval(e=>{this.el.scrollTop=(13*this.el.scrollTop+this.el.scrollHeight)/14,this.#tweens--,this.#tweens<=0&&(clearInterval(this.#interval),this.#interval=0)},1e3/this.#tweens))}append(e){e=(e=Array.isArray(e)?e.join(" "):e)+"";if(e===this.#prevLine.text)this.#prevLine.count++,this.#prevLine.el.classList.add("repeat"),this.#prevLine.el.setAttribute("repeat",this.#prevLine.count);else{for(;this.el.children.length>=this.maxLines;)this.el.children[0].remove();this.#prevLine.text=e,this.#prevLine.count=1,this.#prevLine.el=r(this.el,"pre",{className:"line",textContent:e,attr:{time:(new Date).toLocaleString()}})}}}},{"./dom.js":93}],80:[function(e,t,n){const r=e("./esptool.js");e=e("./Flasher.js").Flasher;class ESPBoyFlasher extends e{stub;async disconnect(){this.stub&&(await this.stub.disconnect(),await this.stub.port.close(),this.stub=void 0)}async connect(){if(!this.stub){var e=await r.connect({log:this.log,debug:this.log,error:this.log});try{await e.initialize(),this.log("Connected to "+e.chipName),this.stub=await e.runStub(),this.stub.addEventListener("disconnect",()=>{this.stub=!1})}finally{e.disconnect()}}}async upload(e){this.stub||(await this.showConnectPopup(),await this.connect()),this.stub&&(await this.stub.flashData(e,(e,t)=>{postMessage({build:["Uploading: "+Math.floor(e/t*100)+"%"]},"*")},0),await this.disconnect())}}t.exports.upload=async function(e){var t=new ESPBoyFlasher;try{await t.upload(e)}finally{t.disconnect()}}},{"./Flasher.js":81,"./esptool.js":94}],81:[function(e,t,n){const i=e("./dom.js")["dom"];t.exports.Flasher=class Flasher{constructor(){}log(...e){postMessage({log:[e]},"*")}async showConnectPopup(){return new Promise((t,n)=>{const r=i(document.body,{style:{position:"absolute",width:"100%",height:"100%",margin:0,padding:0}},[["div",{style:{position:"absolute",width:"210px",height:"100px",margin:"auto",padding:"18px",boxSizing:"border-box",left:0,right:0,top:0,bottom:0,background:"#333",borderRadius:"10px",border:"1px solid #555"}},[["h1",{textContent:"Ready!",style:{textAlign:"center",fontFamily:'Menlo, Monaco, "Courier New", monospace',color:"white"}}],["div",[["button",{textContent:"Cancel",onclick:e=>{r.remove(),n()}}],["button",{textContent:"Flash",onclick:e=>{r.remove(),t()}}]]]]]])})}}},{"./dom.js":93}],82:[function(e,t,n){"use strict";const{dom:a,index:r}=e("./dom.js"),s=e("./Model.js")["Model"],i=e("./TreeListNode.js")["TreeListNode"],o=e("./TabContainer.js")["TabContainer"],u=e("./Preview.js")["Preview"],l=e("./ProjectControls.js")["ProjectControls"],c=e("./Console.js")["Console"],h=e("./pngfs.js")["PNGFS"],p=e("./stdlib.js")["stdlib"],d=e("./example.js")["loadExample"];var f=e("./ESPBoy.js"),m=e("./SAMD.js");const g=e("./Browser.js"),y=e("./PreBuild.js")["PreBuild"],v=e("./ImageEditor.js")["ImageEditor"],C={espboy:f,meta:m};t.exports.IDE=class IDE{el;parent;model;#view=null;#tabContainer=null;#consoleContainer=null;#fs=null;#projectModel=null;#editors={};#treeNodes={};#preview=null;#booted=!1;constructor(e,t,n){this.el=e,this.parent=t,(this.model=n).watch("state",e=>this.changeState(e)),n.watch("windowSize",e=>this.resize()),n.watch("runSize",e=>this.run(e))}resize(){if(!this.el.classList.contains("hidden"))for(var e in this.boot(),this.#editors)this.#editors[e]?.editor?.layout?.()}async changeState(e){this.el.classList.toggle("hidden",e!=this.constructor.name),await this.closeProject(),e==this.constructor.name&&(this.resize(),this.openProject()),this.run(null)}async closeProject(){this.#fs=null,this.#projectModel=null,[...Object.values(this.#editors)].forEach(({shortPath:e})=>this.#tabContainer.close(e))}async openProject(){var e="project-"+this.model.get("projectId");let t=this.model.get(e,null),n=this.model.get(e+"-fs",null);t||(await(t=new s).useStorage(e),this.model.set(e,t),t.onBeforeSave=e=>{t.set("fs",n.toJSON())}),n=n||new h(t.get("fs",null)),this.#projectModel=t,window.projectFS=n,this.#fs=n,this.#fs.onDirty=e=>t.dirty(),0==this.#fs.ls().length&&d(this.#fs),this.emitStd(this.model.get("platform")),this.refreshTree();var e=t.get("activeFile","/source/main.js"),r=t.get("openFileList",[]),i=[...r];r.length=0,i.forEach(e=>this.openFile(e)),this.openFile(e)}boot(){this.#booted||(this.#booted=!0,this.setupMonaco(),this.#view=r(this.el,{},this),this.model.watch("platform",e=>this.emitStd(e)),this.model.watch("projectName",e=>{e!=this.model.get("previewProject","")&&this.model.set("previewHTML","")}))}setupPreview(e){return this.#preview=new u(e,this,this.model),!1}setupConsoleContainer(e){const t=new o(e);this.#consoleContainer=t;e=new c("log"),e.onAppend=e=>t.activate("debug"),t.add("debug",e.el),t.activate("debug"),e=new c("build");return e.onAppend=e=>t.activate("compilation"),e.maxLines=1,t.add("compilation",e.el),!1}setupTabContainer(e){return this.#tabContainer=new o(e),this.#tabContainer.onClose=this.onCloseEditor.bind(this),this.#tabContainer.onActivate=this.onActivateFile.bind(this),!1}setupProjectControls(e){return new l(e,this.model),!1}setupMonaco(){monaco.languages.typescript.javascriptDefaults.setEagerModelSync(!0),monaco.languages.typescript.javascriptDefaults.setCompilerOptions({target:monaco.languages.typescript.ScriptTarget.ES6,allowNonTsExtensions:!0,noLib:!0,allowJs:!0});var e="ts:filename/stdlib.d.ts";monaco.languages.typescript.javascriptDefaults.addExtraLib(p,e),monaco.editor.createModel(p,"typescript",monaco.Uri.parse(e))}refreshTree(){var e,t=document.querySelector("#treelist");for(this.#treeNodes={};t.childNodes.length;)t.removeChild(t.childNodes[0]);for(e of this.#fs.ls("/"))t.appendChild(new i(e,"/",this.openFile.bind(this),this.#treeNodes).dom)}cancelEvent(e){e.stopPropagation(),e.preventDefault()}dropFile(e){e.stopPropagation(),e.preventDefault();var t=e.target.closest(".treenode.Directory");if(t){let r=null;for(var n in this.#treeNodes)if(this.#treeNodes[n].dom==t){r=n;break}if(r){var i=e.dataTransfer?.files;if(i?.length){let n=i.length;for(let e=0;e<i.length;++e){var s=i[e],a=new FileReader;a.onload=loadFile.bind(this,a,s),/\.js$/i.test(s.name)?a.readAsText(s):a.readAsDataURL(s)}function loadFile(e,t){this.#fs.writeFile(r+"/"+t.name,e.result),--n||this.refreshTree()}}}}}editorFactories={js(e,n,r){const i=monaco.editor.create(e,{value:r,language:"javascript",theme:"vs-dark"});return i.onDidChangeModelContent(e=>{var t=i.getValue();t!=r&&(r=t,this.#fs.writeFile(n,r))}),i},meta:"js",json:"js",raw(e,t,n){},png(e,t,n){return new v(e,t,n,this.#fs)}};openFile(t){var n=t.split("/").pop();if(this.#tabContainer.activate(n))this.#projectModel.set("activeFile",t);else{var r=this.#fs.readFile(t);if(!1!==r){var i=a("div",{style:{width:"100%",height:"100%",position:"absolute"}}),s={node:i,shortPath:n,path:t,editor:null};this.#editors[t]=s,this.#projectModel.get("openFileList",[]).push(t),this.#projectModel.dirty("openFileList"),this.#tabContainer.add(n,i),this.#tabContainer.activate(n);let e=(n.match(/\.([^./]+)$/i)?.[1]+"").toLowerCase();for(;"string"==typeof e;)e=this.editorFactories[e];e=e||this.editorFactories.raw,s.editor=e.call(this,i,t,r)}}}getEditor(e){for(var t in this.#editors){t=this.#editors[t];if(t.node==e)return t}return null}getActiveTreeNode(){for(var e in this.#treeNodes)if(this.#treeNodes[e].isActive())return this.#treeNodes[e]}onActivateFile(e){if(this.#projectModel){var t,n=this.getEditor(e)?.path;for(t in this.#editors[n]?.editor?.layout?.(),this.#projectModel.set("activeFile",n),this.#treeNodes)this.#treeNodes[t].setActive(t==n)}}onCloseEditor(e){for(var t in this.#editors){var{node:n,editor:r}=this.#editors[t];if(n==e){r.dispose&&r.dispose(),delete this.#editors[t],this.#projectModel&&((n=this.#projectModel.get("openFileList",[])).splice(n.indexOf("path"),1),this.#projectModel.dirty("openFileList"));break}}return!0}emitStd(e){this.#fs&&e&&(this.#fs?.writeFile("/std.js",e=`// Autogenerated file - DO NOT EDIT!
"set platform ${e}";
"addSysCall setScreenMode setFPS setPen setFont setLED setTexture";
"addSysCall setMirrored setFlipped setTransparent";
"addSysCall getWidth getHeight";
"addSysCall clear image text rect";
"push globals UP DOWN LEFT RIGHT A B C D";
"registerBuiltinResource fontMini fontTIC806x6 fontZXSpec fontAdventurer fontDonut fontDragon fontC64 fntC64UIGfx fontMonkey fontKarateka fontKoubit fontRunes fontTight fontTiny";
"include /source/main.js"
`),this.#editors["/std.js"]?.editor.setValue(e))}deleteFile(){var e=this.getActiveTreeNode();if(confirm(`Are you sure you want to delete ${e.path}?`)&&this.#fs.rm(e.path)){for(var t in this.#editors)(t==e.path||t.startsWith(e.path+"/"))&&(t=this.#editors[t])&&this.#tabContainer.close(t.shortPath);this.refreshTree()}}createFile(){var e,t,n,r=this.#fs,i=prompt("File Name:");i&&(t=(e=this.getActiveTreeNode()).path.split("/"),e.isDirectory()||t.pop(),t.push(i),e=t.join("/"),r.lookup(e)?alert(`File ${i} already exists.`):([t,n]=e.split("/").pop().split("."),t&&n?(n="js"!==n.toLowerCase()?"":`// ${i}

class ${t} {
    constructor() {
    }

    update(time) {
    }

    render() {
    }
}

`,r.writeFile(e,n)?(this.refreshTree(),this.openFile(e)):alert(`Could not write file ${i}.`)):alert("Invalid file name: "+i)))}createDir(){var e,t,n=this.#fs,r=prompt("Directory Name:");r&&(t=(e=this.getActiveTreeNode()).path.split("/"),e.isDirectory()||t.pop(),t.push(r),t=t.join("/"),n.mkdir(t)||alert(`Could not create directory ${r}.`),this.refreshTree(),e.isFile())&&this.openFile(e.path)}async run(e){if(this.#fs)if(e)try{var t=await y(this.#fs),n=await g.build(t,e);this.model.set("previewProject",this.model.get("projectName")),this.model.set("previewHTML",n)}catch(e){console.log(e),e&&"object"==typeof e?(t=e.description||e.error||e.message||e+"",postMessage({build:[t]},"*")):"string"==typeof e&&postMessage({build:[e]},"*")}else this.model.set("previewProject",""),this.model.set("previewHTML","")}async export(){this.#preview.setExportVisibility(!1);try{postMessage({build:["Building"]},"*");var t=await y(this.#fs),n=(await g.build(t,[0,0]),this.parent.remote);let e=this.#projectModel.get("RPIN");e||(e=await n.requestKey(),this.#projectModel.set("RPIN",e));var r,i,s,a,o=await n.requestBuild(e,{fs:t.toJSON()});if(!o||"object"!=typeof o)throw console.log(o),"Unexpected error";if(o.error)throw o;o.url&&(r=o.url,i=C[this.model.get("platform")],navigator.serial?"application/octet-stream"==(s=await fetch(r)).headers.get("content-type")?i.upload(await s.arrayBuffer()):(a=await s.text(),console.error(a)):location.href=r)}catch(e){console.log(e),e&&"object"==typeof e?(e.description&&postMessage({build:[e.description]},"*"),e.error&&postMessage({build:[e.error]},"*")):"string"==typeof e&&postMessage({build:[e]},"*")}finally{this.#preview.setExportVisibility(!0)}}}},{"./Browser.js":78,"./Console.js":79,"./ESPBoy.js":80,"./ImageEditor.js":83,"./Model.js":84,"./PreBuild.js":85,"./Preview.js":86,"./ProjectControls.js":87,"./SAMD.js":89,"./TabContainer.js":91,"./TreeListNode.js":92,"./dom.js":93,"./example.js":95,"./pngfs.js":108,"./stdlib.js":109}],83:[function(e,t,n){const{dom:f,index:i}=e("./dom.js"),{convertToU8:o,palette:u}=e("./PreBuild.js");t.exports.ImageEditor=class ImageEditor{#fs;#dom;path;metadata;img;canvas;ctx;imgData;forceRedraw;selectedTID;tilesetPath;tilesetMeta;tilesetImg;constructor(e,t,n,r){this.path=t;try{this.metadata=JSON.parse(r.readFile(t+".meta"))}catch(e){}this.metadata&&"object"==typeof this.metadata||(this.metadata={mode:"image"}),this.metadata.image&&"object"==typeof this.metadata.image||(this.metadata.image={}),this.metadata.tilemap&&"object"==typeof this.metadata.tilemap||(this.metadata.tilemap={tileset:""}),this.metadata.tileset&&"object"==typeof this.metadata.tileset||(this.metadata.tileset={tilewidth:8,tileheight:8}),this.#fs=r,this.#dom=i(f("div",e,{className:"imageEditor"},[["div",{id:"imgcontainer"},[["canvas",{id:"canvas",src:n,onload:this.onload.bind(this)}],["img",{id:"img",src:n,onload:this.onload.bind(this)}]]],["div",{id:"sidebar"},[["select",{id:"mode",onchange:this.changeMeta.bind(this)},[["option",{value:"image",textContent:"image"}],["option",{value:"tilemap",textContent:"tilemap"}],["option",{value:"tileset",textContent:"tileset"}]]],[{id:"imageSidebar"},[[{className:"row"},[["span",{textContent:"Width:"}],["span",{id:"imgwidth"}]]],[{className:"row"},[["span",{textContent:"Height:"}],["span",{id:"imgheight"}]]]]],[{id:"tilemapSidebar"},[[{className:"row"},[["span",{textContent:"Tile Set:"}],["select",{id:"tileset",onchange:this.changeMeta.bind(this)},this.getTilesets().map(e=>["option",{value:e,textContent:e.replace(/.*\/|\..*/g,"")}])],["button",{id:"refresh",onclick:this.refreshTileSets.bind(this),textContent:"⟳"}]]]]],[{id:"tilesetSidebar"},[[{className:"row"},[["span",{textContent:"Tile Width:"}],["input",{id:"tilewidth",type:"number",min:"8",max:"256",onchange:this.changeMeta.bind(this),value:0|this.metadata.tileset.tilewidth||8}]]],[{className:"row"},[["span",{textContent:"Tile Height:"}],["input",{id:"tileheight",type:"number",min:"8",max:"256",onchange:this.changeMeta.bind(this),value:0|this.metadata.tileset.tileheight||8}]]]]]]]]),{},this),this.#dom.tileset.value=this.metadata.tilemap.tileset,this.#dom.mode.value=this.metadata.mode}refreshTileSets(){for(var e,t=this.#dom.tileset,n=t.value;t.children.length;)t.children[0].remove();for(e of this.getTilesets())f(t,"option",{value:e,textContent:e.replace(/.*\/|\..*/g,"")});t.value=n,this.tilesetData=null,this.layout()}onload(){this.layout()}initCanvas(e,t,n){var r;return!(!e||!t||((r=this.#dom.canvas).width==e&&r.height==t||(r.width=e,r.height=t,this.imgData=null),this.ctx||(this.ctx=r.getContext("2d")),this.imgData)||(n&&this.ctx.drawImage(n,0,0),this.imgData=this.ctx.getImageData(0,0,e,t),0))}layout(){var e=this.metadata.mode,t=this.#dom.imageEditor[0];t.classList.toggle("image","image"==e),t.classList.toggle("tilemap","tilemap"==e),t.classList.toggle("tileset","tileset"==e),"image"==e&&this.layoutImage(),"tilemap"==e&&this.layoutTilemap(),"tileset"==e&&this.layoutTileset()}autozoom(){var e=this.#dom.img,t=this.#dom.canvas,n=e.parentElement,r=.85*Math.min(n.clientWidth/e.naturalWidth,n.clientHeight/e.naturalHeight),i=e.naturalWidth*r|0,r=e.naturalHeight*r|0;t.style.width=e.style.width=i+"px",t.style.height=e.style.height=r+"px",t.style.left=e.style.left=(n.clientWidth/2-i/2|0)+"px",t.style.top=e.style.top=(n.clientHeight/2-r/2|0)+"px"}layoutImage(){this.autozoom();var r=this.#dom.img;if(this.#dom.imgwidth.textContent=r.naturalWidth,this.#dom.imgheight.textContent=r.naturalHeight,this.initCanvas(r.naturalWidth,r.naturalHeight,r)){var i=o(this.imgData),s=this.imgData.data;let n=0;for(let t=0;t<r.naturalHeight;++t)for(let e=0;e<r.naturalWidth;++e){var a=u[i[t+1][e]];s[n++]=a[0],s[n++]=a[1],s[n++]=a[2],s[n++]=255}this.ctx.putImageData(this.imgData,0,0)}}getTilesets(){var e=this.#fs;let t=[],r=[];return function recurse(e,t){r.push(e.name);if(!1!==t(e)&&e.isDirectory())for(var n of Object.values(e.node.children))recurse(n,t);r.pop()}(e.root,e=>{if(!e.isFile())return"."!=e.name[0];if("meta"==e.extension)try{"tileset"==JSON.parse(e.node.data).mode&&t.push(r.join("/"))}catch(e){}return!1}),t}tilesetDimensions(){var e=0|this.tilesetData.tileset.tilewidth||8,t=0|this.tilesetData.tileset.tileheight||8;return{tilewidth:e,tileheight:t,tilesPerRow:this.tilesetImg.naturalWidth/e|0||1,tilesPerCol:this.tilesetImg.naturalWidth/t|0||1}}async layoutTilemap(){this.autozoom();let e=this.forceRedraw;if(this.forceRedraw=!1,this.tilesetPath!=this.metadata.tilemap.tileset&&(this.tilesetData=null,this.tilesetImg=null),this.tilesetData||(this.tilesetData=JSON.parse(this.#fs.readFile(this.metadata.tilemap.tileset)),this.tilesetPath=this.metadata.tilemap.tileset,e=!0),!this.tilesetImg){e=!0;var t=this.metadata.tilemap.tileset.replace(/\.meta$/gi,"");let n=this.#fs.readFile(t);await new Promise((e,t)=>{this.tilesetImg=f("img",{src:n,onload:e,onerror:t})})}if(e){var{tilewidth:i,tileheight:s,tilesPerRow:a,tilesPerCol:o}=this.tilesetDimensions(),t=this.#dom.img;this.initCanvas(t.naturalWidth,t.naturalHeight,t);const d=this.#dom.canvas;d.width=t.naturalWidth*i,d.height=t.naturalHeight*s;let e=0;var u={};for(let r=0;r<this.imgData.height;++r)for(let n=0;n<this.imgData.width;++n){let t=0;t=this.imgData.data[e++],t=(t=((t<<=8)|this.imgData.data[e++])<<8)|this.imgData.data[e++];var l=this.imgData.data[e++];if(!(l<128)){t=t.toString(16);let e=this.metadata.tilemap["#"+t];e&&"object"==typeof e||(this.metadata.tilemap["#"+t]=e={});var c,l=(u[t]=e).id;void 0!==l&&(c=(l|=0)%a,o<=(l=l/a|0)?e.id=0:this.ctx.drawImage(this.tilesetImg,c*i,l*s,i,s,n*i,r*i,i,s))}}var n,r=this.#dom.tilemapSidebar.querySelectorAll(".assign");for(let e=0;e<r.length;++e)r[e].remove();for(n in u){var h=f(this.#dom.tilemapSidebar,{className:"row assign"},[[{style:{backgroundColor:"#"+"0".repeat(6-n.length)+n,width:"32px",flexGrow:0}}],["canvas",{width:i,height:s,flexGrow:0,onclick:this.changeTileId.bind(this,n,u[n])}],["input",{type:"number",value:0|u[n].info,style:{flexGrow:1},onchange:this.changeTileInfo.bind(this,n,u[n])}]]),p=u[n].id;const d=h.querySelector("canvas");d.getContext("2d").drawImage(this.tilesetImg,p%a*i,(p/a|0)*s,i,s,0,0,i,s)}}}changeTileId(e,r){if(this.tilesetImg){const{tilewidth:o,tileheight:u,tilesPerRow:l,tilesPerCol:c}=this.tilesetDimensions(),h=[];var t=this.#dom.imageEditor[0],n=this.tilesetImg.naturalWidth/this.tilesetImg.naturalHeight,i=.9*t.clientHeight|0,n=i*n|0;const p=f(t,{className:"overlay",onclick:e=>{e.target==p&&p.remove()}},[[{className:"popup",style:{height:i+"px",width:n+"px"}}]]);var s=p.querySelector(".popup");for(let t=0;t<c;++t)for(let e=0;e<l;++e){var a=f("canvas",{width:o,height:u,className:"tile",onclick:setTID.bind(this,e,t)},s);a.getContext("2d").drawImage(this.tilesetImg,e*o,t*u,o,u,0,0,o,u),h.push(a)}function setTID(e,t){const n=t*l+e;h.forEach((e,t)=>{e.classList.toggle("selected",t==n)}),n!=r.id&&(r.id=n,this.forceRedraw=!0,this.changeMeta())}setTID.call(this,r.id%l,r.id/l|0)}}changeTileInfo(e,t,n){t.info=0|n.target.value,this.dirty()}layoutTileset(){this.autozoom();var e=this.#dom,t=e.img.naturalWidth,e=e.img.naturalHeight,n=this.metadata.tileset.tilewidth||8,r=this.metadata.tileset.tileheight||8;if(this.initCanvas(t/n,e/r)){let n=0;var i=this.imgData.data;for(let t=0;t<this.imgData.height;++t)for(let e=0;e<this.imgData.width;++e){var s=e+t&1?170:119;i[n++]=s,i[n++]=s,i[n++]=s,i[n++]=255}this.ctx.putImageData(this.imgData,0,0)}}changeMeta(){var e=this.#dom,t=e.img.naturalWidth,n=e.img.naturalHeight;let r=0|e.tilewidth.value||8,i=0|e.tileheight.value||8;var s=Math.round(t/r)||1,a=Math.round(n/i)||1;t/s|0!=r&&(e.tilewidth.value=r=t/s|0),n/a|0!=i&&(e.tileheight.value=i=n/a|0),this.metadata={mode:e.mode.value,image:{},tilemap:Object.assign(this.metadata.tilemap,{tileset:e.tileset.value}),tileset:Object.assign(this.metadata.tileset,{tilewidth:r,tileheight:i})},this.dirty(),this.layout()}dirty(){this.#fs.writeFile(this.path+".meta",JSON.stringify(this.metadata,0,4))}}},{"./PreBuild.js":85,"./dom.js":93}],84:[function(e,t,n){const r=e("localforage");r.config({name:"model"});t.exports.Model=class Model{#storageId;#data;#timeout;#dirtyCount=0;onBeforeSave;onAfterSave;constructor(){this.#data={}}dirty(e){let t=this.#data[e];if(t&&t.listeners.forEach(e=>e(t.value)),this.#storageId){if(0<this.#timeout){if(this.#dirtyCount++,100<this.#dirtyCount)return;clearTimeout(this.#timeout),this.#timeout=0}else if(-1==this.#timeout)return;this.#timeout=setTimeout(e=>{this.#timeout=-1,console.log("Saving",this.#storageId),this.onBeforeSave?.(),clearTimeout(this.#timeout),this.#timeout=0,this.#dirtyCount=0,r.setItem(this.#storageId,this.toJSON()),this.onAfterSave?.()},1e3)}}toJSON(){var e,t={};for(e in this.#data){var n=this.#data[e].value;n&&"object"==typeof n&&n.constructor!=Object&&n.constructor!=Array||(t[e]=n)}return t}async useStorage(e){this.#storageId=null;var t=await r.getItem(e);if(t)for(var n in t)this.set(n,t[n]);this.#storageId=e}async destroy(e){(e||this.#storageId)&&await r.removeItem(e||this.#storageId)}init(t){var n=[];for(const r in t){const i=t[r];let e=this.#data[r];e&&"value"in e||(e?(e.value=i,n.push(...e.listeners.map(e=>e.bind(null,i)))):e=this.#data[r]={value:i,listeners:[]})}n.forEach(e=>e())}set(e,t){let n=this.#data[e];n?(n.value!=t||t&&"object"==typeof t)&&(n.value=t,this.dirty(e)):n=this.#data[e]={value:t,listeners:[]}}get(e,t){var n=this.#data[e];return n?n.value:(void 0!==t&&this.set(e,t),t)}watch(t,n){if("object"==typeof t){var e,r=[];for(e in t){var i=t[e];if(!Array.isArray(i)&&-1==r.indexOf(i))for(let e=0;e<i.attributes.length;++e){var s,a=i.attributes[e],o=a.name.split("-");2==o.length&&(s={text:"textContent",html:"innerHTML"}[o[1]]||o[1],"read"!=o[0]&&"readwrite"!=o[0]||this.watch(a.value,read.bind(this,i,s)),"write"!=o[0]&&"readwrite"!=o[0]||i.addEventListener("change",write.bind(this,i,s,a.value)),"for"==o[0]&&"each"==o[1])&&this.watch(a.value,foreach.bind(this,i,i.innerHTML))}}function foreach(e,t,n){if(Array.isArray(n)){var r=[];for(const i of n)r.push(t.replace(/\$\{([^}]+)\}/g,(e,t)=>i[t]));e.innerHTML=r.join("")}}function read(e,t,n){e[t]=n,console.log("updating ",e,"prop",t,"with val",n)}function write(e,t,n){this.set(n,e[t])}}else{let e=this.#data[t];e?e.listeners.push(n):e=this.#data[t]={listeners:[n]},n(e.value)}}}},{localforage:106}],85:[function(e,t,n){const i=e("./pngfs.js")["PNGFS"],l=e("./dom.js")["dom"],E=[[255,0,255],[0,0,0],[255,255,255],[90,165,90],[90,129,164],[164,161,90],[164,105,90],[164,97,148],[90,165,139],[115,97,164],[115,141,115],[65,190,65],[189,186,65],[115,190,65],[65,76,189],[189,85,65],[189,68,164],[189,141,65],[65,186,189],[189,68,123],[156,68,189],[65,190,115],[106,68,189],[41,214,41],[41,133,213],[213,210,41],[41,52,213],[213,64,41],[213,44,197],[172,214,41],[213,44,90],[41,214,156],[41,210,213],[82,44,213],[213,113,41],[90,214,41],[41,214,90],[213,161,41],[131,44,213],[222,36,156],[32,97,222],[123,230,24],[230,28,57],[189,28,230],[230,28,230],[24,170,230],[24,230,123],[8,250,8],[8,133,246],[246,238,8],[8,250,49],[8,20,246],[246,40,8],[189,250,8],[246,194,8],[57,250,8],[246,149,8],[8,250,164],[8,242,246],[65,12,246],[246,105,8],[246,12,139],[8,250,205],[8,64,246],[156,12,246],[246,12,180],[246,12,90],[115,12,246],[8,202,246],[57,101,57],[57,80,98],[98,101,57],[98,60,57],[98,56,98],[41,40,115],[41,117,90],[24,133,24],[24,80,131],[131,129,24],[65,133,24],[131,36,24],[131,24,115],[131,89,24],[24,133,131],[131,24,74],[90,24,131],[16,20,139],[16,141,74],[98,145,8],[0,157,0],[156,149,0],[156,20,0],[156,0,139],[156,0,41],[0,153,156],[156,0,98],[156,60,0],[41,157,0],[106,0,156],[0,157,41],[0,64,156],[0,109,156],[156,105,0],[49,0,156],[180,214,180],[180,182,213],[213,186,180],[222,222,172],[222,170,222],[172,222,222],[156,234,156],[230,161,156],[156,157,238],[197,242,148],[148,242,197],[139,198,246],[246,246,139],[246,145,238],[246,206,139],[139,250,246],[246,145,197],[205,145,246],[131,186,131],[131,161,189],[189,186,131],[189,141,131],[189,137,172],[115,121,205],[115,206,172],[189,117,205],[156,165,156],[98,226,98],[98,161,222],[222,218,98],[148,226,98],[222,113,98],[222,174,98],[98,222,222],[222,101,180],[222,101,222],[98,226,139],[222,101,139],[148,101,222],[90,97,230],[82,238,180],[189,85,238],[74,250,74],[246,242,74],[246,93,74],[246,72,213],[205,250,74],[246,72,115],[74,246,246],[115,72,246],[246,145,74],[123,250,74],[246,72,164],[74,129,246],[74,198,246],[246,194,74],[156,129,189],[32,60,32],[57,32,57],[8,80,8],[8,48,82],[82,76,8],[82,20,8],[8,80,57],[24,12,82],[82,8,74],[49,93,0],[74,133,74],[74,101,131],[131,129,74],[131,80,74],[131,72,123],[148,153,49],[98,153,49],[57,52,148],[49,153,106],[98,109,98],[172,28,65],[74,174,24],[148,28,172],[24,174,131],[123,174,24],[74,28,172],[41,105,164],[164,40,139],[164,113,41],[41,161,164],[41,161,49],[164,68,41],[180,178,16],[16,28,180],[16,182,82],[16,190,16],[189,36,16],[189,16,156],[16,186,189],[189,85,16],[189,133,16],[98,202,0],[205,0,49],[205,0,123],[8,0,205],[49,0,205],[57,202,0],[164,0,205],[0,64,205],[0,202,148],[123,0,205],[0,141,205],[205,4,0],[148,202,0],[156,48,98],[115,48,156],[205,0,189],[0,206,57],[213,234,213],[238,214,238],[246,250,197],[197,202,246],[246,206,197],[197,250,246],[8,105,106],[106,12,41],[0,117,49],[41,0,115],[115,0,0],[131,250,131],[246,137,131],[180,250,115],[115,133,246],[131,109,131],[0,242,90],[246,0,16],[74,113,197],[0,157,106],[0,101,197],[49,250,213],[156,60,238],[65,52,246],[148,198,197],[172,121,246],[98,250,0],[106,105,0],[156,250,32],[16,20,32],[49,48,0],[49,0,8],[197,210,0],[0,40,0],[57,250,123],[222,64,246],[222,72,0]];function convertToU8(t,e){var r=0|(e=e||{bpp:8,header:1,isTransparent:1}).transparent,n=0|e.header?[[t.width<256?t.width:0,t.height<256?t.height:0]]:[],i=0|e.bpp||Math.log(E.length)/Math.log(2)|0;let s=0,a=t.data;var o=8/i,u=[],l=0|e.paloffset,c=Math.min(E.length,l+(1<<i));let h=e.isTransparent;if(void 0===h)for(s=3;!h&&s<a.length;s+=4)h=a[s]<128;else h|=0;e.isTransparent=h;let p=void(s=0),d=0;for(let e=0;e<t.height;++e){u=[];for(let e=0;e<t.width;++e){let t=0,n=Number.POSITIVE_INFINITY;var f=0|a[s++],m=0|a[s++],g=0|a[s++],y=0|a[s++];if(16==i){var v=f>>3<<11|m>>2<<5|g>>3;u.push(255&v,v>>8)}else if(1==i)t=h?128<y:128<(f+m+g)/3,u[e>>3|0]=(u[e>>3]||0)+(t<<7-(7&e));else{var C,D,v=(f<<16)+(m<<8)+g;if(128<y||!h)if(v===p)t=d;else{for(let e=l;e<c;++e)h&&e==r||(D=(f-(C=0|(D=E[e])[0]))*(f-C)+(m-(C=0|D[1]))*(m-C)+(g-(C=0|D[2]))*(g-C))<n&&(t=e,n=D);p=v,d=t}else t=r;y=(o-1-e%o)*i;u[e/o|0]=(u[e/o|0]||0)+(t-l<<y)}}n.push(u)}return n}t.exports.PreBuild=async function prebuild(n){let r=[],u;return function recurse(e,t){if(!1===t(e))return;if(!e.isDirectory())return;for(var n of Object.values(e.node.children))recurse(n,t)}(n.root,e=>{var t;return e.isFile()?("jpg"!=(t=e.extension)&&"png"!=t||function init(){u||(u=new i(n.toJSON())).mkdir("/.R");return r}().push(async function convertImage(o,e){return new Promise((s,t)=>{const a=new Image;a.onload=e=>{var t,n=l("canvas",{width:a.width,height:a.height}).getContext("2d"),n=(n.drawImage(a,0,0),n.getImageData(0,0,a.width,a.height));let r="";for(t of convertToU8(n,{bpp:8,header:1,isTransparent:1}))for(var i of t)r+=i.toString(16).padStart(2,"0");n=`/.R/${o.split(".")[0]}.raw`;u.writeFile(n,r),s()},a.onerror=e=>{t("Could not load image "+o)},a.src=e})}.call(this,e.name,e.node.data)),!1):"."!=e.name[0]}),r.length?(await Promise.all(r),u):n},t.exports.palette=E,t.exports.convertToU8=convertToU8},{"./dom.js":93,"./pngfs.js":108}],86:[function(e,t,n){"use strict";const r=e("./dom.js")["index"];t.exports.Preview=class Preview{constructor(e,t,n){this.view=r(e,{},this),this.model=n,this.parent=t,n.watch(this.view),n.watch("platform",e=>this.resize()),n.watch("previewHTML",e=>this.showHTML(e)),this.resize()}getPlatformSize(){return{pokitto:[220,176],blit:[320,240],espboy:[128,128],meta:[160,128]}[this.model.get("platform")]}setExportVisibility(e){this.view.export.classList.toggle("hidden",!e)}resize(){var e,t,n=this.view.screencontainer,r=this.getPlatformSize(),i=this.view.zoom.value;r?([r,e]=r,(t=this.view.screencontainer.querySelector("iframe"))&&(t.style.width=r*i+"px",t.style.height=e*i+"px"),n.style.display="block",n.style.height=e*i+"px",n.style["min-width"]=r*i+"px",n.parentElement.style["min-width"]=r*i+"px"):n.display="none"}showHTML(e){this.view.screen.remove(),this.view.screencontainer.innerHTML=this.view.screen.outerHTML;var t=this.view.screencontainer.querySelector("iframe");t.src="about:blank",e&&(t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close(),t.focus()),this.resize(),this.view.run.textContent=e?"Stop":"Run"}toggleRun(){this.model.set("runSize",this.model.get("previewHTML")?null:this.getPlatformSize())}export(){this.parent.export()}}},{"./dom.js":93}],87:[function(e,t,n){const r=e("./dom.js")["index"];t.exports.ProjectControls=class ProjectControls{constructor(e,t){this.el=e,this.view=r(e,{},this),(this.model=t).watch(this.view)}goToTOP(){this.model.set("state","TOP")}}},{"./dom.js":93}],88:[function(e,t,n){"use strict";var r=e("firebase/app"),i=e("firebase/database");t.exports.Remote=class Remote{#db;#listen;constructor(){}async requestKey(){return(0,i.push)((0,i.child)((0,i.ref)(this.#db),"project")).key}async saveProject(e,t){await(0,i.set)((0,i.ref)(this.#db,"project/"+e),t)}async loadProject(e){e=await(0,i.get)((0,i.ref)(this.#db,"project/"+e));return e.exists()?e.val():void 0}async requestBuild(r,e){return await(0,i.update)((0,i.ref)(this.#db),{["/project/"+r]:e,["/request/"+r]:"build",["/build/"+r]:null}),new Promise((t,e)=>{const n=(0,i.ref)(this.#db,"/build/"+r);(0,i.onValue)(n,e=>{e.exists()&&((0,i.off)(n),t(e.val()))})})}boot(){var e=(0,r.initializeApp)({apiKey:"AIzaSyDsjCMDUl0e50zO_L_g7gWJyfLENuMv2a8",authDomain:"microjs-7d00a.firebaseapp.com",projectId:"microjs-7d00a",storageBucket:"microjs-7d00a.appspot.com",messagingSenderId:"850079858570",appId:"1:850079858570:web:f71216680a1a6c624c1273",databaseURL:"https://microjs-7d00a-default-rtdb.europe-west1.firebasedatabase.app"});this.#db=(0,i.getDatabase)(e)}}},{"firebase/app":102,"firebase/database":103}],89:[function(e,t,n){e=e("./Flasher.js");class SAMDFlasher extends e.Flasher{port;samba;device;async connect(){this.port&&this.disconnect();var e=await navigator.serial.requestPort({}),t=e.getInfo();this.log(t.usbVendorId,t.usbProductId),await e.open({baudRate:1200}),this.port=e}disconnect(){this.port&&(this.port.close(),this.port=null)}async upload(e){this.port||(await this.showConnectPopup(),await this.connect()),this.samba=new SamBA(serialPort,{logger:{log:this.log,debug:this.log,error:this.log},debug:!0}),await(samba=this.samba).connect(1e3);var t=new Device(samba);await t.create(),this.device=t,await this.flashImage(e,8192),await this.device.reset()}async flashImage(e,t){if(!this.device)throw"No device";if(!this.samba)throw"No samba";if(!this.device.flash)throw"No device.flash";new Flasher(this.samba,this.device.flash,this.observer)}}t.exports.upload=async function(e){var t=new SAMDFlasher;try{await t.upload(e)}finally{t.disconnect()}}},{"./Flasher.js":81}],90:[function(e,t,n){const r=e("./dom.js")["index"];t.exports.TOP=class TOP{#el;#view;#parent;#model;constructor(e,t,n){this.#el=e,this.#view=r(e,{},this),this.#parent=t,(this.#model=n).watch(this.#view),n.watch("state",e=>this.changeState(e))}changeState(e){this.#el.classList.toggle("hidden",e!=this.constructor.name)}clickProject(e){e.target!=e.currentTarget&&this[e.target.getAttribute("bind-click")]?.(e)}checkName(){var e=this.#view.newprojectname.value,t=e.trim().replace(/[^a-zA-Z 0-9]+/,"").substr(0,18);return e!=t&&(this.#view.newprojectname.value=t),t}newProject(){var t=this.checkName(),n=this.#view.newprojectname;if(0==t.length)n.focus(),n.placeholder="Enter Your Project's name here.";else{var r,i=this.#model.get("projectList",[]);let e=0;for(r of i)if(e<=(0|r.id)&&(e=1+(0|r.id)),r.name.toLowerCase()==t.toLowerCase())return n.focus(),n.placeholder="Name already taken by another project.",void(n.value="");var s={id:e,name:t};i.push(s),this.#model.set("projectId",s.id),this.#model.set("projectName",s.name),this.#model.set("state","IDE"),this.#model.set("projectList",i)}}findProject(e){e:for(const t of this.#model.get("projectList",[])){for(const n in e)if(e[n]!=t[n])continue e;return t}}openProject(e){e=this.findProject({id:e.target.getAttribute("project-id")});this.#model.set("projectId",e.id),this.#model.set("projectName",e.name),this.#model.set("state","IDE")}deleteProject(){var e=this.findProject({id:event.target.getAttribute("project-id")}),t=this.#model.get("projectList",[]),n=t.indexOf(e),t=(t.splice(n,1),this.#model.dirty("projectList"),e.id),n="project-"+t;let r=this.#model.get(n,null);(r=r||new Model).destroy(n),this.#model.set(n,null)}}},{"./dom.js":93}],91:[function(e,t,n){const r=e("./dom.js")["dom"];t.exports.TabContainer=class TabContainer{constructor(e){this.onClose=null,this.onActivate=null,this.tabs={},this.node=e,this.tabset=r(e,{className:"tabset"}),this.container=r(e,{className:"tabcontainer"})}close(r){const i=this.tabs[r];if(i&&(!this.onClose||!1!==this.onClose(i.contents))){let e=null,t=null,n=null;for(var s in this.tabs){const i=this.tabs[s]["tab"];if(-1==i.className.indexOf("inactive"))e=s;else if(e){if(!n){n=s;break}}else t=s}e==r&&(t?this.activate(t):n&&this.activate(n)),i.tab.remove(),i.contents.remove(),delete this.tabs[r]}}active(){for(var e in this.tabs){var{tab:t,contents:n}=this.tabs[e];if(-1==t.className.indexOf("inactive"))return{name:e,contents:n}}}add(t,e){var n=[];this.onClose&&n.push(r("span",{className:"tabclose",textContent:"x",onclick:this.close.bind(this,t)})),this.tabs[t]={tab:r(this.tabset,{textContent:t,className:"tab inactive",onclick:e=>{this.activate(t)}},n),contents:e}}activate(e){var t,n=this.tabs[e];if(!n)return!1;for(;this.container.lastChild;)this.container.removeChild(this.container.lastChild);for(t in this.container.appendChild(n.contents),this.tabs)this.tabs[t].tab.className="tab "+(t==e?"active":"inactive");return this.onActivate&&this.onActivate(n.contents),!0}}},{"./dom.js":93}],92:[function(e,t,n){const a=e("./dom.js")["dom"];t.exports.TreeListNode=class TreeListNode{constructor(t,n,r,i){this.path=n+t.name,this.entry=t,i[this.path]=this;var e=n.split("/").length-2,e="&nbsp;".repeat(2*e),s=Object.values(t.node.children||{}).sort((e,t)=>e.node.children&&!t.node.children||e.name>t.name);this.dom=a("div",{className:"treenode "+this.entry.node.constructor.name,onclick:e=>{e.stopPropagation(),e.preventDefault(),r(n+t.name)}},[["div",{innerHTML:e+t.name,className:"filelabel"}],...s.map(e=>new TreeListNode(e,this.path+"/",r,i).dom)])}setActive(e){this.dom.classList.toggle("active",!!e)}isActive(){return this.dom.classList.contains("active")}isFile(){return this.entry.isFile()}isDirectory(){return this.entry.isDirectory()}}},{"./dom.js":93}],93:[function(e,t,n){t.exports.dom=function dom(...e){let t="div",n=null,r=null,i=null;for(var s of e)void 0!==s&&("string"==typeof s?t=s:s&&s instanceof Element?n=s:s&&Array.isArray(s)?i=s:s&&"object"==typeof s&&(r=s));let a=document.createElement(t);if(n&&n.appendChild(a),r){if(r.style&&(Object.assign(a.style,r.style),delete(r=Object.assign({},r)).style),r.attr){for(var o in r.attr)a.setAttribute(o,r.attr[o]);delete r.attr}Object.assign(a,r)}return i&&i.forEach(e=>{e&&(Array.isArray(e)?dom(a,...e):e instanceof Element&&a.appendChild(e))}),a},t.exports.index=function index(n,r={},i=null){n.className&&(Array.isArray(r[n.className])?r[n.className].push(n):r[n.className]=[n]),n.id&&(r[n.id]=n);let t=!0;if(i){var s=i.constructor.name.toLowerCase();for(let e=0;e<n.attributes.length;++e){var a,o=n.attributes[e].name,u=n.attributes[e].value;2!=(o=o.split("-")).length||"index"!=o[0]&&"bind"!=o[0]||"index"==o[0]&&o[1]!=s||("function"!=typeof(a=i[u])?console.warn(`No method ${u} in ${i.constructor.name}.`,n):"index"==o[0]?t=!1!==a.call(i,n):"bind"==o[0]&&n.addEventListener(o[1],i[u].bind(i)))}}if(t)for(let e=0,t=n.children.length;e<t;++e)index(n.children[e],r,i);return r}},{}],94:[function(s,j,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=e.ESPLoader=e.CHIP_FAMILY_ESP8266=e.CHIP_FAMILY_ESP32S3=e.CHIP_FAMILY_ESP32S2=e.CHIP_FAMILY_ESP32H2=e.CHIP_FAMILY_ESP32C6=e.CHIP_FAMILY_ESP32C3=e.CHIP_FAMILY_ESP32=void 0;const U=t=>{var n=[];for(let e=0;e<t.length;e++){var r=t.charCodeAt(e);r<=255&&n.push(r)}return n},a=e=>"["+e.map(e=>v(e)).join(", ")+"]",v=(e,t=2)=>{e=e.toString(16).toUpperCase();return e.startsWith("-")?"-0x"+e.substring(1).padStart(t,"0"):"0x"+e.padStart(t,"0")},q=t=>new Promise(e=>setTimeout(e,t)),W={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB",25:"32MB",26:"64MB"},z=U(" UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU"),l=12882,c=12883,h=12995,V={4293968129:{name:"ESP8266",family:33382},15736195:{name:"ESP32",family:50},1990:{name:"ESP32-S2",family:l},9:{name:"ESP32-S3",family:c},3942662454:{name:"ESP32-S3(beta2)",family:c},1763790959:{name:"ESP32-C3",family:h},456216687:{name:"ESP32-C3",family:h},3391540258:{name:"ESP32-H2",family:12914},228687983:{name:"ESP32-C6(beta)",family:12998}},G=(e,t)=>{e=Math.floor(e*(t/486));return e<3e3?3e3:e},J=e=>{switch(e){case 50:return{regBase:1072963584,baseFuse:1073061888,macFuse:1073061888,usrOffs:28,usr1Offs:32,usr2Offs:36,mosiDlenOffs:40,misoDlenOffs:44,w0Offs:128,uartDateReg:1610612856,flashOffs:4096};case l:return{regBase:1061167104,baseFuse:1061265408,macFuse:1061265476,usrOffs:24,usr1Offs:28,usr2Offs:32,mosiDlenOffs:36,misoDlenOffs:40,w0Offs:88,uartDateReg:1610612856,flashOffs:4096};case c:return{regBase:1610620928,usrOffs:24,baseFuse:1610641408,macFuse:1610641476,usr1Offs:28,usr2Offs:32,mosiDlenOffs:36,misoDlenOffs:40,w0Offs:88,uartDateReg:1610612864,flashOffs:0};case 33382:return{regBase:1610613248,usrOffs:28,baseFuse:1072693328,macFuse:1072693328,usr1Offs:32,usr2Offs:36,mosiDlenOffs:-1,misoDlenOffs:-1,w0Offs:64,uartDateReg:1610612856,flashOffs:0};case h:return{regBase:1610620928,baseFuse:1610647552,macFuse:1610647620,usrOffs:24,usr1Offs:28,usr2Offs:32,mosiDlenOffs:36,misoDlenOffs:40,w0Offs:88,uartDateReg:1610612860,flashOffs:0};default:return{regBase:-1,baseFuse:-1,macFuse:-1,usrOffs:-1,usr1Offs:-1,usr2Offs:-1,mosiDlenOffs:-1,misoDlenOffs:-1,w0Offs:-1,uartDateReg:-1,flashOffs:-1}}};e.CHIP_FAMILY_ESP32H2=12914,e.CHIP_FAMILY_ESP32C6=12998,e.CHIP_FAMILY_ESP32C3=h,e.CHIP_FAMILY_ESP32S3=c,e.CHIP_FAMILY_ESP32S2=l,e.CHIP_FAMILY_ESP32=50,e.CHIP_FAMILY_ESP8266=33382;class w extends Error{constructor(e){super(e),this.name="SlipReadError"}}const H=async e=>{let t;return 50==e?t=await import("./esp32-273074c1.js"):e==l?t=await import("./esp32s2-f8cf1215.js"):e==c?t=await import("./esp32s3-b0a5f517.js"):33382==e?t=await import("./esp8266-b7fae3a7.js"):e==h&&(t=await import("./esp32c3-8f007052.js")),{...t,text:U(atob(t.text)),data:U(atob(t.data))}};function p(e){let t=e.length;for(;0<=--t;)e[t]=0}const K=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),X=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),$=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576),f=(p(d),new Array(60)),o=(p(f),new Array(512)),u=(p(o),new Array(256)),Y=(p(u),new Array(29)),Z=(p(Y),new Array(30));function A(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let ee,te,ne;function B(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}p(Z);const re=e=>e<256?o[e]:o[256+(e>>>7)],i=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},m=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,i(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},g=(e,t,n)=>{m(e,n[2*t],n[2*t+1])},ie=(e,t)=>{let n=0;for(;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1},se=(e,t,n)=>{var r=new Array(16);let i,s,a=0;for(i=1;i<=15;i++)a=a+n[i-1]<<1,r[i]=a;for(s=0;s<=t;s++){var o=e[2*s+1];0!==o&&(e[2*s]=ie(r[o]++,o))}},ae=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},oe=e=>{8<e.bi_valid?i(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},le=(e,t,n,r)=>{var i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},ce=(e,t,n)=>{var r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&le(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!le(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},he=(e,t,n)=>{let r,i,s,a,o=0;if(0!==e.sym_next)for(;r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],0==r?g(e,i,t):(s=u[i],g(e,s+256+1,t),0!==(a=K[s])&&(i-=Y[s],m(e,i,a)),r--,s=re(r),g(e,s,n),0!==(a=X[s])&&(r-=Z[s],m(e,r,a))),o<e.sym_next;);g(e,256,t)},pe=(o,u)=>{var e=u.dyn_tree,t=u.stat_desc.static_tree,n=u.stat_desc.has_stree,r=u.stat_desc.elems;let i,s,a,l=-1;for(o.heap_len=0,o.heap_max=573,i=0;i<r;i++)0!==e[2*i]?(o.heap[++o.heap_len]=l=i,o.depth[i]=0):e[2*i+1]=0;for(;o.heap_len<2;)e[2*(a=o.heap[++o.heap_len]=l<2?++l:0)]=1,o.depth[a]=0,o.opt_len--,n&&(o.static_len-=t[2*a+1]);for(u.max_code=l,i=o.heap_len>>1;1<=i;i--)ce(o,e,i);for(a=r;i=o.heap[1],o.heap[1]=o.heap[o.heap_len--],ce(o,e,1),s=o.heap[1],o.heap[--o.heap_max]=i,o.heap[--o.heap_max]=s,e[2*a]=e[2*i]+e[2*s],o.depth[a]=(o.depth[i]>=o.depth[s]?o.depth[i]:o.depth[s])+1,e[2*i+1]=e[2*s+1]=a,o.heap[1]=a++,ce(o,e,1),2<=o.heap_len;);o.heap[--o.heap_max]=o.heap[1];{var c=o,h=u.dyn_tree,p=u.max_code,d=u.stat_desc.static_tree,f=u.stat_desc.has_stree,m=u.stat_desc.extra_bits,g=u.stat_desc.extra_base,y=u.stat_desc.max_length;let e,t,n,r,i,s,a=0;for(r=0;r<=15;r++)c.bl_count[r]=0;for(h[2*c.heap[c.heap_max]+1]=0,e=c.heap_max+1;e<573;e++)t=c.heap[e],(r=h[2*h[2*t+1]+1]+1)>y&&(r=y,a++),h[2*t+1]=r,t>p||(c.bl_count[r]++,i=0,t>=g&&(i=m[t-g]),s=h[2*t],c.opt_len+=s*(r+i),f&&(c.static_len+=s*(d[2*t+1]+i)));if(0!==a){do{for(r=y-1;0===c.bl_count[r];)r--}while(c.bl_count[r]--,c.bl_count[r+1]+=2,c.bl_count[y]--,0<(a-=2));for(r=y;0!==r;r--)for(t=c.bl_count[r];0!==t;)p<(n=c.heap[--e])||(h[2*n+1]!==r&&(c.opt_len+=(r-h[2*n+1])*h[2*n],h[2*n+1]=r),t--)}}se(e,l,o.bl_count)},de=(e,t,n)=>{let r,i,s=-1,a=t[1],o=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++o<u&&i===a||(o<l?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=i,l=0===a?(u=138,3):i===a?(u=6,3):(u=7,4))},fe=(e,t,n)=>{let r,i,s=-1,a=t[1],o=0,u=7,l=4;for(0===a&&(u=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++o<u&&i===a)){if(o<l)for(;g(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==s&&(g(e,i,e.bl_tree),o--),g(e,16,e.bl_tree),m(e,o-3,2)):o<=10?(g(e,17,e.bl_tree),m(e,o-3,3)):(g(e,18,e.bl_tree),m(e,o-11,7));o=0,s=i,l=0===a?(u=138,3):i===a?(u=6,3):(u=7,4)}};let me=!1;const ye=(e,t,n,r)=>{m(e,0+(r?1:0),3),oe(e),i(e,n),i(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var ve={_tr_init:e=>{if(!me){{let e,t,n,r,i;var s=new Array(16);for(n=0,r=0;r<28;r++)for(Y[r]=n,e=0;e<1<<K[r];e++)u[n++]=r;for(u[n-1]=r,i=0,r=0;r<16;r++)for(Z[r]=i,e=0;e<1<<X[r];e++)o[i++]=r;for(i>>=7;r<30;r++)for(Z[r]=i<<7,e=0;e<1<<X[r]-7;e++)o[256+i++]=r;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)d[2*e+1]=8,e++,s[8]++;for(;e<=255;)d[2*e+1]=9,e++,s[9]++;for(;e<=279;)d[2*e+1]=7,e++,s[7]++;for(;e<=287;)d[2*e+1]=8,e++,s[8]++;for(se(d,287,s),e=0;e<30;e++)f[2*e+1]=5,f[2*e]=ie(e,5);ee=new A(d,K,257,286,15),te=new A(f,X,0,30,15),ne=new A(new Array(0),$,0,19,7)}me=!0}e.l_desc=new B(e.dyn_ltree,ee),e.d_desc=new B(e.dyn_dtree,te),e.bl_desc=new B(e.bl_tree,ne),e.bi_buf=0,e.bi_valid=0,ae(e)},_tr_stored_block:ye,_tr_flush_block:(t,n,r,e)=>{let i,s,a=0;if(0<t.level?(2===t.strm.data_type&&(t.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(t)),pe(t,t.l_desc),pe(t,t.d_desc),a=(e=>{let t;for(de(e,e.dyn_ltree,e.l_desc.max_code),de(e,e.dyn_dtree,e.d_desc.max_code),pe(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*Q[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==n)ye(t,n,r,e);else if(4===t.strategy||s===i)m(t,2+(e?1:0),3),he(t,d,f);else{m(t,4+(e?1:0),3);{var o=t,u=(n=t.l_desc.max_code+1,r=t.d_desc.max_code+1,a+1);let e;for(m(o,n-257,5),m(o,r-1,5),m(o,u-4,4),e=0;e<u;e++)m(o,o.bl_tree[2*Q[e]+1],3);fe(o,o.dyn_ltree,n-1),fe(o,o.dyn_dtree,r-1)}he(t,t.dyn_ltree,t.dyn_dtree)}ae(t),e&&oe(t)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(u[n]+256+1)]++,e.dyn_dtree[2*re(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{m(e,2,3),g(e,256,d),16===(e=e).bi_valid?(i(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},Ce=(e,t,n,r)=>{let i=65535&e|0,s=e>>>16&65535|0,a=0;for(;0!==n;){for(n-=a=2e3<n?2e3:n;i=i+t[r++]|0,s=s+i|0,--a;);i%=65521,s%=65521}return i|s<<16|0};const De=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var y=(t,n,e,r)=>{var i=De,s=r+e;t^=-1;for(let e=r;e<s;e++)t=t>>>8^i[255&(t^n[e])];return-1^t},Ee={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},t={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:_e,_tr_stored_block:Se,_tr_flush_block:xe,_tr_tally:C,_tr_align:be}=ve,{Z_NO_FLUSH:D,Z_PARTIAL_FLUSH:we,Z_FULL_FLUSH:Ae,Z_FINISH:E,Z_BLOCK:Fe,Z_OK:_,Z_STREAM_END:ke,Z_STREAM_ERROR:S,Z_DATA_ERROR:Te,Z_BUF_ERROR:Be,Z_DEFAULT_COMPRESSION:Ie,Z_FILTERED:Pe,Z_HUFFMAN_ONLY:Ne,Z_RLE:Re,Z_FIXED:Le,Z_UNKNOWN:Me,Z_DEFLATED:Oe}=t,x=(e,t)=>(e.msg=Ee[t],t),je=e=>2*e-(4<e?9:0),b=e=>{let t=e.length;for(;0<=--t;)e[t]=0},Ue=e=>{let t,n,r,i=e.w_size;for(t=e.hash_size,r=t;n=e.head[--r],e.head[r]=n>=i?n-i:0,--t;);for(t=i,r=t;n=e.prev[--r],e.prev[r]=n>=i?n-i:0,--t;);};let F=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const k=e=>{var t=e.state;let n=t.pending;0!==(n=n>e.avail_out?e.avail_out:n)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending)&&(t.pending_out=0)},T=(e,t)=>{xe(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,k(e.strm)},I=(e,t)=>{e.pending_buf[e.pending++]=t},P=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},qe=(e,t,n,r)=>{let i=e.avail_in;return 0===(i=i>r?r:i)?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Ce(e.adler,t,i,n):2===e.state.wrap&&(e.adler=y(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},We=(e,t)=>{let n,r,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match;var u=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,c=e.w_mask,h=e.prev,p=e.strstart+258;let d=l[s+a-1],f=l[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(n=t)+a]===f&&l[n+a-1]===d&&l[n]===l[s]&&l[++n]===l[s+1]){for(s+=2,n++;l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<p;);if(r=258-(p-s),s=p-258,r>a){if(e.match_start=t,(a=r)>=o)break;d=l[s+a-1],f=l[s+a]}}}while((t=h[t&c])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead},N=e=>{var t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Ue(e),r+=t),0===e.strm.avail_in)break;if(n=qe(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,3<=e.lookahead+e.insert)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=F(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=F(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},ze=(e,t)=>{let n,r,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,o=e.strm.avail_in;for(;n=65535,i=e.bi_valid+42>>3,!(e.strm.avail_out<i||(i=e.strm.avail_out-i,r=e.strstart-e.block_start,(n=(n=n>r+e.strm.avail_in?r+e.strm.avail_in:n)>i?i:n)<s&&(0===n&&t!==E||t===D||n!==r+e.strm.avail_in))||(a=t===E&&n===r+e.strm.avail_in?1:0,Se(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,k(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(qe(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n),0!==a)););return(o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart)&&(e.insert=e.strstart),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==D&&t!==E&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart)&&(e.insert=e.strstart),(i=i>e.strm.avail_in?e.strm.avail_in:i)&&(qe(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=65535<e.pending_buf_size-i?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,((r=e.strstart-e.block_start)>=s||(r||t===E)&&t!==D&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,a=t===E&&0===e.strm.avail_in&&n===r?1:0,Se(e,e.block_start,n,a),e.block_start+=n,k(e.strm)),a?3:1)},Ve=(e,t)=>{let n,r;for(;;){if(e.lookahead<262){if(N(e),e.lookahead<262&&t===D)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=We(e,n)),3<=e.match_length)if(r=C(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=F(e,e.ins_h,e.window[e.strstart+1]);else r=C(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(T(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===E?(T(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(T(e,!1),0===e.strm.avail_out)?1:2},n=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<262){if(N(e),e.lookahead<262&&t===D)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=We(e,n),e.match_length<=5)&&(e.strategy===Pe||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2),3<=e.prev_length&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,r=C(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=F(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(T(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=C(e,0,e.window[e.strstart-1]))&&T(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=C(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===E?(T(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(T(e,!1),0===e.strm.avail_out)?1:2};function Pt(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const R=[new Pt(0,0,0,0,ze),new Pt(4,4,8,4,Ve),new Pt(4,5,16,8,Ve),new Pt(4,6,32,32,Ve),new Pt(4,4,16,16,n),new Pt(8,16,32,32,n),new Pt(8,16,128,128,n),new Pt(8,32,128,256,n),new Pt(32,128,258,1024,n),new Pt(32,258,258,4096,n)];function $t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Oe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),b(this.dyn_ltree),b(this.dyn_dtree),b(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),b(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),b(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const L=e=>{var t;return!e||!(t=e.state)||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},Ge=e=>{if(L(e))return x(e,S);e.total_in=e.total_out=0,e.data_type=Me;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,_e(t),_},Je=e=>{var t=Ge(e);return t===_&&((e=e.state).window_size=2*e.w_size,b(e.head),e.max_lazy_match=R[e.level].max_lazy,e.good_match=R[e.level].good_length,e.nice_match=R[e.level].nice_length,e.max_chain_length=R[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t},He=(e,t,n,r,i,s)=>{if(!e)return S;let a=1;if(t===Ie&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),i<1||9<i||n!==Oe||r<8||15<r||t<0||9<t||s<0||s>Le||8===r&&1!==a)return x(e,S);8===r&&(r=9);var o=new $t;return(e.state=o).strm=e,o.status=42,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=s,o.method=n,Je(e)};var Ke=He,Xe=(Je,Ge,(e,t)=>L(e)||2!==e.state.wrap?S:(e.state.gzhead=t,_)),$e=(n,e)=>{if(L(n)||e>Fe||e<0)return n?x(n,S):S;var r=n.state;if(!n.output||0!==n.avail_in&&!n.input||666===r.status&&e!==E)return x(n,0===n.avail_out?Be:S);var i=r.last_flush;if(r.last_flush=e,0!==r.pending){if(k(n),0===n.avail_out)return r.last_flush=-1,_}else if(0===n.avail_in&&je(e)<=je(i)&&e!==E)return x(n,Be);if(666===r.status&&0!==n.avail_in)return x(n,Be);if(42===r.status&&0===r.wrap&&(r.status=113),42===r.status){let e=Oe+(r.w_bits-8<<4)<<8,t;if(t=r.strategy>=Ne||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=t<<6,0!==r.strstart&&(e|=32),e+=31-e%31,P(r,e),0!==r.strstart&&(P(r,n.adler>>>16),P(r,65535&n.adler)),n.adler=1,r.status=113,k(n),0!==r.pending)return r.last_flush=-1,_}if(57===r.status)if(n.adler=0,I(r,31),I(r,139),I(r,8),r.gzhead)I(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),I(r,255&r.gzhead.time),I(r,r.gzhead.time>>8&255),I(r,r.gzhead.time>>16&255),I(r,r.gzhead.time>>24&255),I(r,9===r.level?2:r.strategy>=Ne||r.level<2?4:0),I(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(I(r,255&r.gzhead.extra.length),I(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(n.adler=y(n.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(I(r,0),I(r,0),I(r,0),I(r,0),I(r,0),I(r,9===r.level?2:r.strategy>=Ne||r.level<2?4:0),I(r,3),r.status=113,k(n),0!==r.pending)return r.last_flush=-1,_;if(69===r.status){if(r.gzhead.extra){let e=r.pending,t=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+t>r.pending_buf_size;){var s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>e&&(n.adler=y(n.adler,r.pending_buf,r.pending-e,e)),r.gzindex+=s,k(n),0!==r.pending)return r.last_flush=-1,_;e=0,t-=s}i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+t),r.pending),r.pending+=t,r.gzhead.hcrc&&r.pending>e&&(n.adler=y(n.adler,r.pending_buf,r.pending-e,e)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let e,t=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>t&&(n.adler=y(n.adler,r.pending_buf,r.pending-t,t)),k(n),0!==r.pending)return r.last_flush=-1,_;t=0}}while(e=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,I(r,e),0!=e);r.gzhead.hcrc&&r.pending>t&&(n.adler=y(n.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let e,t=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>t&&(n.adler=y(n.adler,r.pending_buf,r.pending-t,t)),k(n),0!==r.pending)return r.last_flush=-1,_;t=0}}while(e=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,I(r,e),0!=e);r.gzhead.hcrc&&r.pending>t&&(n.adler=y(n.adler,r.pending_buf,r.pending-t,t))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(k(n),0!==r.pending))return r.last_flush=-1,_;I(r,255&n.adler),I(r,n.adler>>8&255),n.adler=0}if(r.status=113,k(n),0!==r.pending)return r.last_flush=-1,_}if(0!==n.avail_in||0!==r.lookahead||e!==D&&666!==r.status){i=0===r.level?ze(r,e):r.strategy===Ne?((e,t)=>{for(var n;;){if(0===e.lookahead&&(N(e),0===e.lookahead)){if(t===D)return 1;break}if(e.match_length=0,n=C(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(T(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===E?(T(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(T(e,!1),0===e.strm.avail_out)?1:2})(r,e):r.strategy===Re?((e,t)=>{let n,r,i,s;for(var a=e.window;;){if(e.lookahead<=258){if(N(e),e.lookahead<=258&&t===D)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(i=e.strstart-1,(r=a[i])===a[++i])&&r===a[++i]&&r===a[++i]){for(s=e.strstart+258;r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s;);e.match_length=258-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(n=C(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=C(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(T(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===E?(T(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(T(e,!1),0===e.strm.avail_out)?1:2})(r,e):R[r.level].func(r,e);if(3!==i&&4!==i||(r.status=666),1===i||3===i)return 0===n.avail_out&&(r.last_flush=-1),_;if(2===i&&(e===we?be(r):e!==Fe&&(Se(r,0,0,!1),e===Ae)&&(b(r.head),0===r.lookahead)&&(r.strstart=0,r.block_start=0,r.insert=0),k(n),0===n.avail_out))return r.last_flush=-1,_}return e!==E||!(r.wrap<=0)&&(2===r.wrap?(I(r,255&n.adler),I(r,n.adler>>8&255),I(r,n.adler>>16&255),I(r,n.adler>>24&255),I(r,255&n.total_in),I(r,n.total_in>>8&255),I(r,n.total_in>>16&255),I(r,n.total_in>>24&255)):(P(r,n.adler>>>16),P(r,65535&n.adler)),k(n),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending)?_:ke},Qe=e=>{var t;return L(e)?S:(t=e.state.status,e.state=null,113===t?x(e,Te):_)},Ye=(e,t)=>{let n=t.length;if(L(e))return S;var r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return S;1===i&&(e.adler=Ce(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(0===i&&(b(r.head),r.strstart=0,r.block_start=0,r.insert=0),(s=new Uint8Array(r.w_size)).set(t.subarray(n-r.w_size,n),0),t=s,n=r.w_size);var s=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,N(r);3<=r.lookahead;){let e=r.strstart,t=r.lookahead-2;for(;r.ins_h=F(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++,--t;);r.strstart=e,r.lookahead=2,N(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=o,e.avail_in=s,r.wrap=i,_};const et=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function tra(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)et(n,t)&&(e[t]=n[t])}}return e}var tt=r=>{let n=0;for(let e=0,t=r.length;e<t;e++)n+=r[e].length;var i=new Uint8Array(n);for(let e=0,t=0,n=r.length;e<n;e++){var s=r[e];i.set(s,t),t+=s.length}return i};let nt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(U){nt=!1}const rt=new Uint8Array(256);for(let e=0;e<256;e++)rt[e]=252<=e?6:248<=e?5:240<=e?4:224<=e?3:192<=e?2:1;rt[254]=rt[254]=1;function Ara(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var it=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,s,a=e.length,o=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t};const st=Object.prototype.toString,{Z_NO_FLUSH:at,Z_SYNC_FLUSH:ot,Z_FULL_FLUSH:ut,Z_FINISH:lt,Z_OK:ct,Z_STREAM_END:ht,Z_DEFAULT_COMPRESSION:pt,Z_DEFAULT_STRATEGY:dt,Z_DEFLATED:ft}=t;function ue(e){this.options=tra({level:pt,method:ft,chunkSize:16384,windowBits:15,memLevel:8,strategy:dt},e||{});e=this.options;if(e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ara,this.strm.avail_out=0,(t=Ke(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy))!==ct)throw new Error(Ee[t]);if(e.header&&Xe(this.strm,e.header),e.dictionary){var t,e="string"==typeof e.dictionary?it(e.dictionary):"[object ArrayBuffer]"===st.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if((t=Ye(this.strm,e))!==ct)throw new Error(Ee[t]);this._dict_set=!0}}function ge(e,t){t=new ue(t);if(t.push(e,!0),t.err)throw t.msg||Ee[t.err];return t.result}ue.prototype.push=function(e,t){var n,r,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?lt:at,"string"==typeof e?i.input=it(e):"[object ArrayBuffer]"===st.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(r===ot||r===ut)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if($e(i,r)===ht)return 0<i.next_out&&this.onData(i.output.subarray(0,i.next_out)),n=Qe(this.strm),this.onEnd(n),this.ended=!0,n===ct;if(0!==i.avail_out){if(0<r&&0<i.next_out)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},ue.prototype.onData=function(e){this.chunks.push(e)},ue.prototype.onEnd=function(e){e===ct&&(this.result=tt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};ve={Deflate:ue,deflate:ge,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ge(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ge(e,t)},constants:t};new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const{Z_OK:mt,Z_STREAM_ERROR:gt}=t;function Ze(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const yt=e=>{var t;return!e||!(t=e.state)||t.strm!==e||t.mode<16180||16211<t.mode?1:0},vt=e=>{var t;return yt(e)?gt:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mt)},Ct=e=>{var t;return yt(e)?gt:((t=e.state).wsize=0,t.whave=0,t.wnext=0,vt(e))},Dt=(e,t)=>{let n;var r;return yt(e)||(r=e.state,t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?gt:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Ct(e))},Et=(e,t)=>{var n;return e?(n=new Ze,(e.state=n).strm=e,n.window=null,n.mode=16180,(n=Dt(e,t))!==mt&&(e.state=null),n):gt};Ct,Dt,vt,Et;Object.prototype.toString;var t=ve["deflate"],_t=t;const M={b:{u:DataView.prototype.getInt8,p:DataView.prototype.setInt8,bytes:1},B:{u:DataView.prototype.getUint8,p:DataView.prototype.setUint8,bytes:1},h:{u:DataView.prototype.getInt16,p:DataView.prototype.setInt16,bytes:2},H:{u:DataView.prototype.getUint16,p:DataView.prototype.setUint16,bytes:2},i:{u:DataView.prototype.getInt32,p:DataView.prototype.setInt32,bytes:4},I:{u:DataView.prototype.getUint32,p:DataView.prototype.setUint32,bytes:4},q:{u:DataView.prototype.getInt64,p:DataView.prototype.setInt64,bytes:8},Q:{u:DataView.prototype.getUint64,p:DataView.prototype.setUint64,bytes:8}},O=(t,...n)=>{let i=0;if(t.replace(/[<>]/,"").length!=n.length)throw"Pack format to Argument count mismatch";let s=[],a=!0;for(let e=0;e<t.length;e++)"<"==t[e]?a=!0:">"==t[e]?a=!1:(function r(e,t){if(!(e in M))throw"Unhandled character '"+e+"' in pack format";var n=M[e].bytes,i=new DataView(new ArrayBuffer(n));M[e].p.bind(i)(0,t,a);for(let e=0;e<n;e++)s.push(i.getUint8(e))}(t[e],n[i]),i++);return s},St=(e,i)=>{let s=0,a=[],o=!0;for(var t of e)"<"==t?o=!0:">"==t?o=!1:function r(e){if(!(e in M))throw"Unhandled character '"+e+"' in unpack format";var t=M[e].bytes,n=new DataView(new ArrayBuffer(t));for(let e=0;e<t;e++)n.setUint8(e,255&i[s+e]);e=M[e].u.bind(n);a.push(e(0,o)),s+=t}(t);return a};class ca extends EventTarget{constructor(e,t,n){super(),this.port=e,this.logger=t,this._parent=n,this.chipName=null,this._efuses=new Array(4).fill(0),this._flashsize=4194304,this.debug=!1,this.IS_STUB=!1,this.connected=!0,this.flashSize=null}get _inputBuffer(){return this._parent?this._parent._inputBuffer:this.__inputBuffer}async initialize(){await this.hardReset(!0),this._parent||(this.__inputBuffer=[],this.readLoop()),await this.sync();var e=await this.readRegister(1073745920),t=V[e>>>0];if(void 0===t)throw new Error(`Unknown Chip: Hex: ${v(e>>>0,8).toLowerCase()} Number: `+e);this.chipName=t.name,this.chipFamily=t.family;var n=J(this.getChipFamily()).macFuse;for(let e=0;e<4;e++)this._efuses[e]=await this.readRegister(n+4*e);this.logger.log("Chip type "+this.chipName)}async readLoop(){this.debug&&this.logger.debug("Starting read loop"),this._reader=this.port.readable.getReader();try{for(;;){var{value:e,done:t}=await this._reader.read();if(t){this._reader.releaseLock();break}e&&0!==e.length&&this._inputBuffer.push(...Array.from(e))}}catch(e){console.error("Read loop got disconnected")}this.connected=!1,this.dispatchEvent(new Event("disconnect")),this.logger.debug("Finished read loop")}async hardReset(e=!1){this.logger.log("Try hard reset."),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!0}),await this.port.setSignals({dataTerminalReady:e,requestToSend:!1}),await new Promise(e=>setTimeout(e,1e3))}macAddr(){let e,t=new Array(6).fill(0),n=this._efuses[0],r=this._efuses[1],i=this._efuses[2],s=this._efuses[3];if(33382==this.chipFamily){if(0!=s)e=[s>>16&255,s>>8&255,255&s];else if(0==(r>>16&255))e=[24,254,52];else{if(1!=(r>>16&255))throw new Error("Couldnt determine OUI");e=[172,208,116]}t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=r>>8&255,t[4]=255&r,t[5]=n>>24&255}else if(50==this.chipFamily)t[0]=i>>8&255,t[1]=255&i,t[2]=r>>24&255,t[3]=r>>16&255,t[4]=r>>8&255,t[5]=255&r;else{if(this.chipFamily!=l&&this.chipFamily!=c&&this.chipFamily!=h)throw new Error("Unknown chip family");t[0]=r>>8&255,t[1]=255&r,t[2]=n>>24&255,t[3]=n>>16&255,t[4]=n>>8&255,t[5]=255&n}return t}async readRegister(e){this.debug&&this.logger.debug("Reading from Register "+v(e,8));var e=O("<I",e),[e,,]=(await this.sendCommand(10,e),await this.getResponse(10));return e}async checkCommand(e,t,n=0,r=3e3){r=Math.min(r,12e5),await this.sendCommand(e,t,n);let[i,s]=await this.getResponse(e,r);if(null===s)throw new Error("Didn't get enough status bytes");let a=0;if(this.IS_STUB||33382==this.chipFamily?a=2:[50,l,c,h].includes(this.chipFamily)?a=4:[2,4].includes(s.length)&&(a=s.length),s.length<a)throw new Error("Didn't get enough status bytes");t=s.slice(-a,s.length);if(s=s.slice(0,-a),this.debug&&(this.logger.debug("status",t),this.logger.debug("value",i),this.logger.debug("data",s)),1==t[0])throw 5==t[1]?new Error("Invalid (unsupported) command "+v(e)):new Error("Command failure error code "+v(t[1]));return[i,s]}async sendCommand(n,r,i=0){var e=(()=>{let e=[192];for(var t of[...O("<BBHI",0,n,r.length,i),...r])219==t?e=e.concat([219,221]):192==t?e=e.concat([219,220]):e.push(t);return e.push(192),e})();this.debug&&this.logger.debug(`Writing ${e.length} byte${1==e.length?"":"s"}:`,e),await this.writeToStream(e)}async readPacket(e){let t=null,n=!1,r=[];for(;;){var i,s=Date.now();for(r=[];Date.now()-s<e;){if(0<this._inputBuffer.length){r.push(this._inputBuffer.shift());break}await q(10)}if(0==r.length)throw new w("Timed out waiting for packet "+(null===t?"header":"content"));this.debug&&this.logger.debug("Read "+r.length+" bytes: "+a(r));for(i of r)if(null===t){if(192!=i)throw this.debug&&(this.logger.debug("Read invalid data: "+a(r)),this.logger.debug("Remaining data in serial buffer: "+a(this._inputBuffer))),new w("Invalid head of packet ("+v(i)+")");t=[]}else if(n)if(n=!1,220==i)t.push(192);else{if(221!=i)throw this.debug&&(this.logger.debug("Read invalid data: "+a(r)),this.logger.debug("Remaining data in serial buffer: "+a(this._inputBuffer))),new w("Invalid SLIP escape (0xdb, "+v(i)+")");t.push(219)}else if(219==i)n=!0;else{if(192==i)return this.debug&&this.logger.debug("Received full packet: "+a(t)),t;t.push(i)}}throw new w("Invalid state")}async getResponse(t,n=3e3){for(let e=0;e<100;e++){var r=await this.readPacket(n);if(!(r.length<8)){var[i,s,,a]=St("<BBHI",r.slice(0,8));if(1==i){i=r.slice(8);if(null==t||s==t)return[a,i];if(0!=i[0]&&5==i[1])throw this._inputBuffer.length=0,new Error("Invalid (unsupported) command "+v(t))}}}throw"Response doesn't match request"}checksum(e,t=239){for(var n of e)t^=n;return t}async setBaudrate(t){if(33382==this.chipFamily)throw new Error("Changing baud rate is not supported on the ESP8266");this.logger.log("Attempting to change baud rate to "+t+"...");try{var e=O("<II",t,this.IS_STUB?115200:0);await this.checkCommand(15,e)}catch(e){throw console.error(e),new Error(`Unable to change the baud rate to ${t}: No response from set baud rate command.`)}this._parent?await this._parent.reconfigurePort(t):await this.reconfigurePort(t)}async reconfigurePort(e){var t;try{await(null==(t=this._reader)?void 0:t.cancel()),await this.port.close(),await this.port.open({baudRate:e}),this.readLoop(),this.logger.log("Changed baud rate to "+e)}catch(t){throw console.error(t),new Error(`Unable to change the baud rate to ${e}: `+t)}}async sync(){for(let e=0;e<5;e++){if(this._inputBuffer.length=0,await this._sync())return await q(100),!0;await q(100)}throw new Error("Couldn't sync to ESP. Try resetting.")}async _sync(){await this.sendCommand(8,z);for(let e=0;e<8;e++)try{var[,t]=await this.getResponse(8,100);if(1<t.length&&0==t[0]&&0==t[1])return!0}catch(e){}return!1}getFlashWriteSize(){return this.IS_STUB?16384:1024}async flashData(e,t,n=0,r=!1){var i,s,a;8<=e.byteLength&&(i=(a=Array.from(new Uint8Array(e,0,4)))[0],s=a[2],a=a[3],this.logger.log(`Image header, Magic=${v(i)}, FlashMode=${v(s)}, FlashSizeFreq=`+v(a)));let o,u=e.byteLength,l=0,c=3e3,h=(r?(o=_t(new Uint8Array(e),{level:9}).buffer,l=o.byteLength,this.logger.log(`Writing data with filesize: ${u}. Compressed Size: `+l),c=await this.flashDeflBegin(u,l,n)):(this.logger.log("Writing data with filesize: "+u),o=e,await this.flashBegin(u,n)),[]),p=0,d=0,f=0,m=Date.now(),g=this.getFlashWriteSize(),y=r?l:u;for(;0<y-f;)this.debug&&this.logger.log(`Writing at ${v(n+p*g,8)} `),y-f>=g?h=Array.from(new Uint8Array(o,f,g)):(h=Array.from(new Uint8Array(o,f,y-f)),r||(h=h.concat(new Array(g-h.length).fill(255)))),r?await this.flashDeflBlock(h,p,c):await this.flashBlock(h,p),p+=1,d+=r?Math.round(h.length*u/l):h.length,f+=g,t(Math.min(d,u),u);this.logger.log("Took "+(Date.now()-m)+"ms to write "+y+" bytes"),this.IS_STUB&&(await this.flashBegin(0,0),r?await this.flashDeflFinish():await this.flashFinish())}async flashBlock(e,t,n=3e3){await this.checkCommand(3,O("<IIII",e.length,t,0,0).concat(e),this.checksum(e),n)}async flashDeflBlock(e,t,n=3e3){await this.checkCommand(17,O("<IIII",e.length,t,0,0).concat(e),this.checksum(e),n)}async flashBegin(e=0,t=0,n=!1){let r,i,s=this.getFlashWriteSize();!this.IS_STUB&&[50,l,c,h].includes(this.chipFamily)&&await this.checkCommand(13,new Array(8).fill(0));var a,o=Math.floor((e+s-1)/s),u=(r=33382==this.chipFamily?this.getEraseSize(t,e):e,a=this.IS_STUB?3e3:G(3e4,e),Date.now());return i=O("<IIII",r,o,s,t),50!=this.chipFamily&&this.chipFamily!=l&&this.chipFamily!=c&&this.chipFamily!=h||(i=i.concat(O("<I",n?1:0))),this.logger.log("Erase size "+r+", blocks "+o+", block size "+v(s,4)+", offset "+v(t,4)+", encrypted "+(n?"yes":"no")),await this.checkCommand(2,i,0,a),0==e||this.IS_STUB||this.logger.log("Took "+(Date.now()-u)+"ms to erase "+o+" bytes"),o}async flashDeflBegin(e=0,t=0,n=0,r){let i,s=this.getFlashWriteSize(),a=Math.floor((t+s-1)/s),o=Math.floor((e+s-1)/s),u=0,l=0;return l=this.IS_STUB?(u=e,G(3e4,u)):(u=o*s,3e3),i=O("<IIII",u,a,s,n),await this.checkCommand(16,i,0,l),l}async flashFinish(){var e=O("<I",1);await this.checkCommand(4,e)}async flashDeflFinish(){var e=O("<I",1);await this.checkCommand(18,e)}getBootloaderOffset(){return J(this.getChipFamily()).flashOffs}async flashId(){return this.runSpiFlashCommand(159,[],24)}getChipFamily(){return(this._parent||this).chipFamily}async writeRegister(e,t,n=4294967295,r=0,i=0){e=O("<IIII",e,t,n,r);0<i&&e.concat(O("<IIII",J(this.getChipFamily()).uartDateReg,0,0,i)),await this.checkCommand(9,e)}async setDataLengths(e,t,n){var r,i;-1!=e.mosiDlenOffs?(i=e.regBase+e.mosiDlenOffs,r=e.regBase+e.misoDlenOffs,0<t&&await this.writeRegister(i,t-1),0<n&&await this.writeRegister(r,n-1)):(i=e.regBase+e.usr1Offs,await this.writeRegister(i,(0==n?0:n-1)<<8|(0==t?0:t-1)<<17))}async waitDone(t,n){for(let e=0;e<10;e++)if(0==(await this.readRegister(t)&n))return;throw Error("SPI command did not complete in time")}async runSpiFlashCommand(e,n,t=0){var r=J(this.getChipFamily()),i=r.regBase,s=i,a=i+r.usrOffs,o=i+r.usr2Offs,i=i+r.w0Offs;if(32<t)throw new Error("Reading more than 32 bits back from a SPI flash operation is unsupported");if(64<n.length)throw new Error("Writing more than 64 bytes of data with one SPI command is unsupported");let u=8*n.length,l=await this.readRegister(a),c=await this.readRegister(o),h=1<<31;if(0<t&&(h|=268435456),0<u&&(h|=134217728),await this.setDataLengths(r,u,t),await this.writeRegister(a,h),await this.writeRegister(o,7<<28|e),0==u)await this.writeRegister(i,0);else{n.concat(new Array(n.length%4).fill(0));let e=St("I".repeat(Math.floor(n.length/4)),n),t=i;this.logger.debug("Words Length: "+e.length);for(const n of e)this.logger.debug(`Writing word ${v(n)} to register offset `+v(t)),await this.writeRegister(t,n),t+=4}await this.writeRegister(s,1<<18),await this.waitDone(s,1<<18);r=await this.readRegister(i);return await this.writeRegister(a,l),await this.writeRegister(o,c),r}async detectFlashSize(){this.logger.log("Detecting Flash Size");var e=await this.flashId(),t=255&e,n=e>>16&255;this.logger.log("FlashId: "+v(e)),this.logger.log("Flash Manufacturer: "+t.toString(16)),this.logger.log("Flash Device: "+(e>>8&255).toString(16)+n.toString(16)),this.flashSize=W[n],this.logger.log("Auto-detected Flash size: "+this.flashSize)}getEraseSize(e,t){let n=Math.floor((t+4096-1)/4096),r=16-Math.floor(e/4096)%16;return n<2*(r=n<r?n:r)?Math.floor((n+1)/2*4096):4096*(n-r)}async memBegin(e,t,n,r){return this.checkCommand(5,O("<IIII",e,t,n,r))}async memBlock(e,t){return this.checkCommand(7,O("<IIII",e.length,t,0,0).concat(e),this.checksum(e))}async memFinish(e=0){var t=this.IS_STUB?3e3:500,e=O("<II",0==e?1:0,e);return this.checkCommand(6,e,0,t)}async runStub(){var n,r=await H(this.chipFamily);this.logger.log("Uploading stub...");for(n of["text","data"])if(Object.keys(r).includes(n)){var i,e=r[n+"_start"],s=r[n].length,t=Math.floor((s+2048-1)/2048);await this.memBegin(s,t,2048,e);for(i of Array(t).keys()){let e=2048*i,t=2048+e;t>s&&(t=s),await this.memBlock(r[n].slice(e,t),i)}}this.logger.log("Running stub..."),await this.memFinish(r.entry);var a=await this.readPacket(500);if("OHAI"!=(a=String.fromCharCode(...a)))throw new Error("Failed to start stub. Unexpected response: "+a);this.logger.log("Stub is now running...");a=new ua(this.port,this.logger,this);return await a.detectFlashSize(),a}async writeToStream(e){var t=this.port.writable.getWriter();await t.write(new Uint8Array(e));try{t.releaseLock()}catch(e){console.error("Ignoring release lock error",e)}}async disconnect(){this._parent?await this._parent.disconnect():(await this.port.writable.getWriter().close(),await new Promise(e=>{this._reader||e(void 0),this.addEventListener("disconnect",e,{once:!0}),this._reader.cancel()}),this.connected=!1)}}class ua extends(e.ESPLoader=ca){constructor(){super(...arguments),this.IS_STUB=!0}async memBegin(e,t,n,r){var i,s,a=await H(this.chipFamily),o=r,u=r+e;console.log(o,u),console.log(a.data_start,a.data.length,a.text_start,a.text.length);for([i,s]of[[a.data_start,a.data_start+a.data.length],[a.text_start,a.text_start+a.text.length]])if(o<s&&u>i)throw new Error("Software loader is resident at "+v(i,8)+"-"+v(s,8)+". Can't load binary at overlapping address range "+v(o,8)+"-"+v(u,8)+". Try changing the binary loading address.")}async eraseFlash(){await this.checkCommand(208,[],0,6e5)}}e.connect=async e=>{var t=await navigator.serial.requestPort();return e.log("Connecting..."),await t.open({baudRate:115200}),e.log("Connected successfully."),new ca(t,e)}},{}],95:[function(e,t,n){t.exports.loadExample=function loadExample(e){e.mkdir("/images"),e.writeFile("/images/wheel.png","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAOpJREFUOI1jZMAN/qPxGbEpwirIwMDwf5uJE4qA15l9WNVjMwBDMz5D0A3AqRmXIcgGENSMzRAmonTgASzoAp7LvsLZ26O4GRgYGBjUfHzgYre2bEFRj+KCyKxPqIad3svgeXoviliWcjhWA/7zzzNhYGBgYBA48henc12uQ1ykED6TgQGaThiRNSODD4mnUfiKEbMw1DxYmY4ZBjBQduwiTpcgA4pjAZYOsHojTX0OAwMDA8PqSScx5B6sTGdgYGBghLmA8WPSGaJthWlGdgEMoLgEZig01DE0YzOAgQE1GzPiEWNgYGBgAABEAkFa5rPi7QAAAABJRU5ErkJggg=="),e.mkdir("/sounds"),e.mkdir("/source"),e.writeFile("/source/main.js",`
const bgColor = setPen(0, 0, 0);
const txtColor = setPen(64, 128, 255);

let screenWidth, screenHeight;

class Wheel {
    init() {
        this.x = screenWidth/2;
        this.y = screenHeight/2;
        this.speedX = rand(-3, 3);
        this.speedY = rand(-3, 3);
        this.color = 0;
    }

    update() {
        if (A)
            this.color++;
        if (B)
            this.color = 0;

        this.x += this.speedX;
        this.y += this.speedY;

        let bounce = false;
        while (!this.speedX || (this.x > screenWidth && this.speedX > 0) || (this.x < 0 && this.speedX < 0)) {
            this.speedX = rand(-5, 5);
            bounce = true;
        }
        while (!this.speedY || (this.y > screenHeight && this.speedY > 0) || (this.y < 0 && this.speedY < 0)) {
            this.speedY = rand(-5, 5);
            bounce = true;
        }
        if (bounce)
            debug("Bounce");
    }

    render() {
        setMirrored(this.speedX < 0);
        setFlipped(this.speedY < 0);
        setPen(this.color);
        image(R.wheel, this.x, this.y);
    }
}

const wheel = new Wheel();

function init() {
    screenWidth = getWidth();
    screenHeight = getHeight();
    wheel.init();
}

function update(time) {
    wheel.update();
}

function render() {
    setPen(bgColor);
    clear();
    wheel.render();
    setPen(txtColor);
    text("Hello world!", 5, 5);
}
`)}},{}],96:[function(e,t,n){const r=e("./dom.js")["index"];var i=e("./Model.js")["Model"];const s=e("./Remote.js")["Remote"],a=e("./IDE.js")["IDE"],o=e("./TOP.js")["TOP"];window.main=new class Main{#view;#ide;#top;#model=new i;#remote;constructor(){addEventListener("DOMContentLoaded",this.loaded.bind(this)),addEventListener("resize",this.resize.bind(this))}get remote(){return this.#remote||(this.#remote=new s,this.#remote.boot()),this.#remote}setupIDE(e){return this.#ide=new a(e,this,this.#model),!1}setupTOP(e){return this.#top=new o(e,this,this.#model),!1}loaded(){window.monaco?this.boot():setTimeout(this.loaded.bind(this),1e3)}resize(){this.#model.set("windowSize",[window.clientWidth,window.clientHeight])}async boot(){await this.#model.useStorage("main"),this.#model.init({windowSize:[0,0],state:"TOP",platform:"espboy",projectId:null,projectName:null,projectList:[{id:1,name:"Bats"}]}),this.#view=r(document.body,{},this)}}},{"./IDE.js":82,"./Model.js":84,"./Remote.js":88,"./TOP.js":90,"./dom.js":93}],97:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"FirebaseError",{enumerable:!0,get:function(){return o.FirebaseError}}),n._DEFAULT_ENTRY_NAME=n.SDK_VERSION=void 0,n._addComponent=_addComponent,n._addOrOverwriteComponent=function _addOrOverwriteComponent(e,t){e.container.addOrOverwriteComponent(t)},n._apps=void 0,n._clearComponents=function _clearComponents(){p.clear()},n._components=void 0,n._getProvider=_getProvider,n._registerComponent=_registerComponent,n._removeServiceInstance=function _removeServiceInstance(e,t,n=l){_getProvider(e,t).clearInstance(n)},n.deleteApp=async function deleteApp(e){var t=e.name;h.has(t)&&(h.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)},n.getApp=function getApp(e=l){var t=h.get(e);if(!t&&e===l)return initializeApp();if(t)return t;throw d.create("no-app",{appName:e})},n.getApps=function getApps(){return Array.from(h.values())},n.initializeApp=initializeApp,n.onLog=function onLog(e,t){if(null!==e&&"function"!=typeof e)throw d.create("invalid-log-argument");(0,r.setUserLogHandler)(e,t)},n.registerVersion=registerVersion,n.setLogLevel=function setLogLevel(e){(0,r.setLogLevel)(e)};var a=e("@firebase/component"),r=e("@firebase/logger"),o=e("@firebase/util"),i=e("idb");class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{return function isVersionServiceProvider(e){e=e.getComponent();return"VERSION"===(null==e?void 0:e.type)}(e)?(e=e.getImmediate()).library+"/"+e.version:null}).filter(e=>e).join(" ")}}const s="@firebase/app",u=new r.Logger("@firebase/app");const l="[DEFAULT]",c=(n._DEFAULT_ENTRY_NAME=l,{"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"}),h=new Map,p=(n._apps=h,new Map);function _addComponent(t,n){try{t.container.addComponent(n)}catch(e){u.debug(`Component ${n.name} failed to register with FirebaseApp `+t.name,e)}}function _registerComponent(e){var t=e.name;if(p.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const n of h.values())_addComponent(n,e);return!0}function _getProvider(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}n._components=p;const d=new o.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class FirebaseAppImpl{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new a.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw d.create("app-deleted",{appName:this._name})}}function initializeApp(e,t={}){let n=e;if("object"!=typeof t){const r=t;t={name:r}}e=Object.assign({name:l,automaticDataCollectionEnabled:!1},t);const r=e.name;if("string"!=typeof r||!r)throw d.create("bad-app-name",{appName:String(r)});if(!(n=n||(0,o.getDefaultAppConfig)()))throw d.create("no-options");t=h.get(r);if(t){if((0,o.deepEqual)(n,t.options)&&(0,o.deepEqual)(e,t.config))return t;throw d.create("duplicate-app",{appName:r})}var i=new a.ComponentContainer(r);for(const s of p.values())i.addComponent(s);t=new FirebaseAppImpl(n,e,i);return h.set(r,t),t}function registerVersion(e,t,n){let r=null!=(i=c[e])?i:e;n&&(r+="-"+n);var i=r.match(/\s|\//),e=t.match(/\s|\//);i||e?(n=[`Unable to register library "${r}" with version "${t}":`],i&&n.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&e&&n.push("and"),e&&n.push(`version name "${t}" contains illegal characters (whitespace or "/")`),u.warn(n.join(" "))):_registerComponent(new a.Component(r+"-version",()=>({library:r,version:t}),"VERSION"))}n.SDK_VERSION="9.14.0";const f="firebase-heartbeat-database",m=1,g="firebase-heartbeat-store";let y=null;function getDbPromise(){return y=y||(0,i.openDB)(f,m,{upgrade:(e,t)=>{0===t&&e.createObjectStore(g)}}).catch(e=>{throw d.create("idb-open",{originalErrorMessage:e.message})})}async function writeHeartbeatsToIndexedDB(t,n){try{var e=(await getDbPromise()).transaction(g,"readwrite");return await e.objectStore(g).put(n,computeKey(t)),e.done}catch(e){e instanceof o.FirebaseError?u.warn(e.message):(t=d.create("idb-set",{originalErrorMessage:null==(n=e)?void 0:n.message}),u.warn(t.message))}}function computeKey(e){return e.name+"!"+e.options.appId}class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;e=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(e),this._heartbeatsCachePromise=this._storage.read().then(e=>this._heartbeatsCache=e)}async triggerHeartbeat(){var e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString();const t=getUTCDateString();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{e=new Date(e.date).valueOf();return Date.now()-e<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e,t,n;return null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length?"":(e=getUTCDateString(),{heartbeatsToSend:n,unsentEntries:t}=function extractHeartbeatsForHeader(e,t=1024){var n=[];let r=e.slice();for(const s of e){var i=n.find(e=>e.agent===s.agent);if(i){if(i.dates.push(s.date),countBytes(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),countBytes(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),n=(0,o.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:n})),this._heartbeatsCache.lastSentHeartbeatDate=e,0<t.length?(this._heartbeatsCache.heartbeats=t,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n)}}function getUTCDateString(){return(new Date).toISOString().substring(0,10)}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.isIndexedDBAvailable)()&&(0,o.validateIndexedDBOpenable)().then(()=>!0).catch(()=>!1)}async read(){return await this._canUseIndexedDBPromise&&await async function readHeartbeatsFromIndexedDB(t){try{return(await getDbPromise()).transaction(g).objectStore(g).get(computeKey(t))}catch(e){e instanceof o.FirebaseError?u.warn(e.message):(t=d.create("idb-get",{originalErrorMessage:null==(t=e)?void 0:t.message}),u.warn(t.message))}}(this.app)||{heartbeats:[]}}async overwrite(e){var t,n;if(await this._canUseIndexedDBPromise)return n=await this.read(),writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}async add(e){var t,n;if(await this._canUseIndexedDBPromise)return n=await this.read(),writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}function countBytes(e){return(0,o.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}!function registerCoreComponents(e){_registerComponent(new a.Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new a.Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(s,"0.8.4",e),registerVersion(s,"0.8.4","esm2017"),registerVersion("fire-js","")}("")},{"@firebase/component":98,"@firebase/logger":100,"@firebase/util":101,idb:104}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Provider=n.ComponentContainer=n.Component=void 0;var r=e("@firebase/util");n.Component=class Component{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const i="[DEFAULT]";class Provider{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){e=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(e)){var t=new r.Deferred;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{var n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(e){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),t=null!=(t=null==t?void 0:t.optional)&&t;if(!this.isInitialized(e)&&!this.shouldAutoInitialize()){if(t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:e})}catch(e){if(t)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function isComponentEager(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(e){}for(var[t,n]of this.instancesDeferred.entries()){t=this.normalizeInstanceIdentifier(t);try{var r=this.getOrInitializeService({instanceIdentifier:t});n.resolve(r)}catch(e){}}}}clearInstance(e=i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){var e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=i){return this.instances.has(e)}getOptions(e=i){return this.instancesOptions.get(e)||{}}initialize(e={}){var{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(this.name+`(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);var r,i,s=this.getOrInitializeService({instanceIdentifier:n,options:t});for([r,i]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(r)&&i.resolve(s);return s}onInit(e,t){t=this.normalizeInstanceIdentifier(t);const n=null!=(r=this.onInitCallbacks.get(t))?r:new Set;n.add(e),this.onInitCallbacks.set(t,n);var r=this.instances.get(t);return r&&e(r,t),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){var n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:function normalizeIdentifierForFactory(e){return e===i?void 0:e}(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=i){return!this.component||this.component.multipleInstances?e:i}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}n.Provider=Provider;n.ComponentContainer=class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with `+this.name);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){var t;return this.providers.has(e)?this.providers.get(e):(t=new Provider(e,this),this.providers.set(e,t),t)}getProviders(){return Array.from(this.providers.values())}}},{"@firebase/util":101}],99:[function(Pe,e,Ne){!function(Ie){!function(){"use strict";Object.defineProperty(Ne,"__esModule",{value:!0}),Ne._TEST_ACCESS_hijackHash=Ne._TEST_ACCESS_forceRestClient=Ne._ReferenceImpl=Ne._QueryParams=Ne._QueryImpl=Ne.TransactionResult=Ne.QueryConstraint=Ne.OnDisconnect=Ne.Database=Ne.DataSnapshot=void 0,Ne._repoManagerDatabaseFromApp=repoManagerDatabaseFromApp,Ne._setSDKVersion=setSDKVersion,Ne._validateWritablePath=Ne._validatePathString=void 0,Ne.child=child,Ne.connectDatabaseEmulator=connectDatabaseEmulator,Ne.enableLogging=function enableLogging(e,t){x(e,t)},Ne.endAt=function endAt(e,t){return De("endAt","key",t,!0),new QueryEndAtConstraint(e,t)},Ne.endBefore=function endBefore(e,t){return De("endBefore","key",t,!0),new QueryEndBeforeConstraint(e,t)},Ne.equalTo=function equalTo(e,t){return De("equalTo","key",t,!0),new QueryEqualToValueConstraint(e,t)},Ne.forceLongPolling=function forceLongPolling(){checkTransportInit(),WebSocketConnection.forceDisallow(),BrowserPollConnection.forceAllow()},Ne.forceWebSockets=function forceWebSockets(){checkTransportInit(),BrowserPollConnection.forceDisallow()},Ne.get=function get(t){t=(0,d.getModularInstance)(t);var e=new CallbackContext(()=>{}),e=new ValueEventRegistration(e);return function repoGetValue(r,i,s){var e=function syncTreeGetServerValue(e,t){const n=t._path;let r=null,i=(e.syncPointTree_.foreachOnPath(n,(e,t)=>{e=newRelativePath(e,n);r=r||syncPointGetCompleteServerCache(t,e)}),e.syncPointTree_.get(n));i?r=r||syncPointGetCompleteServerCache(i,new Path("")):(i=new SyncPoint,e.syncPointTree_=e.syncPointTree_.set(n,i));var s=null!=r,a=s?new CacheNode(r,!0,!1):null,e=writeTreeChildWrites(e.pendingWriteTree_,t._path),t=syncPointGetView(i,t,e,s?a.getNode():ChildrenNode.EMPTY_NODE,s);return function viewGetCompleteNode(e){return viewCacheGetCompleteEventSnap(e.viewCache_)}(t)}(r.serverSyncTree_,i);return null==e?r.server_.get(i).then(e=>{var t,e=nodeFromJSON(e).withIndex(i._queryParams.getIndex());syncTreeAddEventRegistration(r.serverSyncTree_,i,s,!0);let n;return n=i._queryParams.loadsAllData()?syncTreeApplyServerOverwrite(r.serverSyncTree_,i._path,e):(t=syncTreeTagForQuery(r.serverSyncTree_,i),syncTreeApplyTaggedQueryOverwrite(r.serverSyncTree_,i._path,e,t)),eventQueueRaiseEventsForChangedPath(r.eventQueue_,i._path,n),syncTreeRemoveEventRegistration(r.serverSyncTree_,i,s,null,!0),e},e=>(repoLog(r,"get for query "+(0,d.stringify)(i)+" failed: "+e),Promise.reject(new Error(e)))):Promise.resolve(e)}(t._repo,t,e).then(e=>new DataSnapshot(e,new ReferenceImpl(t._repo,t._path),t._queryParams.getIndex()))},Ne.getDatabase=function getDatabase(e=(0,n.getApp)(),t){e=(0,n._getProvider)(e,"database").getImmediate({identifier:t}),t=(0,d.getDefaultEmulatorHostnameAndPort)("database");t&&connectDatabaseEmulator(e,...t);return e},Ne.goOffline=function goOffline(e){(e=(0,d.getModularInstance)(e))._checkNotDeleted("goOffline"),repoInterrupt(e._repo)},Ne.goOnline=function goOnline(e){(e=(0,d.getModularInstance)(e))._checkNotDeleted("goOnline"),function repoResume(e){e.persistentConnection_&&e.persistentConnection_.resume(xe)}(e._repo)},Ne.increment=function increment(e){return{".sv":{increment:e}}},Ne.limitToFirst=function limitToFirst(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new QueryLimitToFirstConstraint(e)},Ne.limitToLast=function limitToLast(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QueryLimitToLastConstraint(e)},Ne.off=function off(e,t,n){let r=null;n=n?new CallbackContext(n):null;"value"===t?r=new ValueEventRegistration(n):t&&(r=new ChildEventRegistration(t,n));repoRemoveEventCallbackForQuery(e._repo,e,r)},Ne.onChildAdded=function onChildAdded(e,t,n,r){return addEventListener(e,"child_added",t,n,r)},Ne.onChildChanged=function onChildChanged(e,t,n,r){return addEventListener(e,"child_changed",t,n,r)},Ne.onChildMoved=function onChildMoved(e,t,n,r){return addEventListener(e,"child_moved",t,n,r)},Ne.onChildRemoved=function onChildRemoved(e,t,n,r){return addEventListener(e,"child_removed",t,n,r)},Ne.onDisconnect=function onDisconnect(e){return e=(0,d.getModularInstance)(e),new OnDisconnect(e._repo,e._path)},Ne.onValue=onValue,Ne.orderByChild=function orderByChild(e){{if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.')}return Ee("orderByChild","path",e,!1),new QueryOrderByChildConstraint(e)},Ne.orderByKey=function orderByKey(){return new QueryOrderByKeyConstraint},Ne.orderByPriority=function orderByPriority(){return new QueryOrderByPriorityConstraint},Ne.orderByValue=function orderByValue(){return new QueryOrderByValueConstraint},Ne.push=function push(e,t){e=(0,d.getModularInstance)(e),m("push",e._path),u("push",t,e._path,!0);const n=repoServerTime(e._repo),r=te(n),i=child(e,r),s=child(e,r);let a;a=null!=t?set(s,t).then(()=>s):Promise.resolve(s);return i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i},Ne.query=function query(e,...t){let n=(0,d.getModularInstance)(e);for(const r of t)n=r._apply(n);return n},Ne.ref=ref,Ne.refFromURL=function refFromURL(e,t){(e=(0,d.getModularInstance)(e))._checkNotDeleted("refFromURL");var t=we(t,e._repo.repoInfo_.nodeAdmin),n=(Se("refFromURL",t),t.repoInfo);e._repo.repoInfo_.isCustomHost()||n.host===e._repo.repoInfo_.host||c("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+e._repo.repoInfo_.host+")");return ref(e,t.path.toString())},Ne.remove=function remove(e){return m("remove",e._path),set(e,null)},Ne.runTransaction=function runTransaction(r,e,t){if(r=(0,d.getModularInstance)(r),m("Reference.transaction",r._path),".length"===r.key||".keys"===r.key)throw"Reference.transaction failed: "+r.key+" is a read-only object.";const n=null==(t=null==t?void 0:t.applyLocally)||t,i=new d.Deferred,s=onValue(r,()=>{});return function repoStartTransaction(t,n,r,i,s,a){repoLog(t,"transaction on "+n);r={path:n,update:r,onComplete:i,status:null,order:D(),applyLocally:a,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},i=repoGetLatestState(t,n,void 0),r.currentInputSnapshot=i,a=r.update(i.val());if(void 0===a)r.unwatcher(),r.currentOutputSnapshotRaw=null,r.currentOutputSnapshotResolved=null,r.onComplete&&r.onComplete(null,!1,r.currentInputSnapshot);else{ye("transaction failed: Data returned ",a,r.path),r.status=0;var s=treeSubTree(t.transactionQueueTree_,n),o=s.node.value||[];o.push(r),treeSetValue(s,o);let e;"object"==typeof a&&null!==a&&(0,d.contains)(a,".priority")?(e=(0,d.safeGet)(a,".priority"),(0,d.assert)(ge(e),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):(s=syncTreeCalcCompleteEventCache(t.serverSyncTree_,n)||ChildrenNode.EMPTY_NODE,e=s.getPriority().val());o=repoGenerateServerValues(t),s=nodeFromJSON(a,e),a=ce(s,i,o),i=(r.currentOutputSnapshotRaw=s,r.currentOutputSnapshotResolved=a,r.currentWriteId=t.nextWriteId_++,syncTreeApplyUserOverwrite(t.serverSyncTree_,n,a,r.currentWriteId,r.applyLocally));eventQueueRaiseEventsForChangedPath(t.eventQueue_,n,i),repoSendReadyTransactions(t,t.transactionQueueTree_)}}(r._repo,r._path,e,(e,t,n)=>{e?i.reject(e):(e=new DataSnapshot(n,new ReferenceImpl(r._repo,r._path),o),i.resolve(new TransactionResult(t,e)))},s,n),i.promise},Ne.serverTimestamp=function serverTimestamp(){return Be},Ne.set=set,Ne.setPriority=function setPriority(e,t){e=(0,d.getModularInstance)(e),m("setPriority",e._path),Ce("setPriority",t,!1);var n=new d.Deferred;return repoSetWithPriority(e._repo,pathChild(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise},Ne.setWithPriority=function setWithPriority(e,t,n){if(m("setWithPriority",e._path),u("setWithPriority",t,e._path,!1),Ce("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new d.Deferred;return repoSetWithPriority(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise},Ne.startAfter=function startAfter(e,t){return De("startAfter","key",t,!0),new QueryStartAfterConstraint(e,t)},Ne.startAt=function startAt(e=null,t){return De("startAt","key",t,!0),new QueryStartAtConstraint(e,t)},Ne.update=function update(e,t){ve("update",t,e._path,!1);var n=new d.Deferred;return function repoUpdate(i,s,e,a){repoLog(i,"update",{path:s.toString(),value:e});let n=!0;const r=repoGenerateServerValues(i),o={};if(each(e,(e,t)=>{n=!1,o[e]=le(pathChild(s,e),nodeFromJSON(t),i.serverSyncTree_,r)}),n)h("update() called with empty data.  Don't do anything."),repoCallOnCompleteCallback(0,a,"ok",void 0);else{const u=i.nextWriteId_++;var t=function syncTreeApplyUserMerge(e,t,n,r){!function writeTreeAddMerge(e,t,n,r){(0,d.assert)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=compoundWriteAddWrites(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);r=ImmutableTree.fromObject(n);return syncTreeApplyOperationToSyncPoints_(e,new Merge(newOperationSourceUser(),t,r))}(i.serverSyncTree_,s,o,u);eventQueueQueueEvents(i.eventQueue_,t),i.server_.merge(s.toString(),e,(e,t)=>{var n="ok"===e,n=(n||f("update at "+s+" failed: "+e),syncTreeAckUserWrite(i.serverSyncTree_,u,!n)),r=0<n.length?repoRerunTransactions(i,s):s;eventQueueRaiseEventsForChangedPath(i.eventQueue_,r,n),repoCallOnCompleteCallback(0,a,e,t)}),each(e,e=>{e=repoAbortTransactions(i,pathChild(s,e));repoRerunTransactions(i,e)}),eventQueueRaiseEventsForChangedPath(i.eventQueue_,s,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise};var n=Pe("@firebase/app"),t=Pe("@firebase/component"),d=Pe("@firebase/util"),r=Pe("@firebase/logger");const i="@firebase/database";let g="";function setSDKVersion(e){g=e}class DOMStorageWrapper{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,d.stringify)(t))}get(e){e=this.domStorage_.getItem(this.prefixedName_(e));return null==e?null:(0,d.jsonEval)(e)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,d.contains)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}function iKa(e){try{var t;if("undefined"!=typeof window&&void 0!==window[e])return(t=window[e]).setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new DOMStorageWrapper(t)}catch(e){}return new MemoryStorage}var l,e;function nKa(e){var e=(0,d.stringToByteArray)(e),t=new d.Sha1,e=(t.update(e),t.digest());return d.base64.encodeByteArray(e)}const y=iKa("localStorage"),v=iKa("sessionStorage"),C=new r.Logger("@firebase/database"),D=function(){let e=1;return function(){return e++}}(),E=function(...t){let n="";for(let e=0;e<t.length;e++){var r=t[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=E.apply(null,r):n+="object"==typeof r?(0,d.stringify)(r):r,n+=" "}return n};let _=null,S=!0;function tKa(t){return function(...e){h(t,...e)}}function uKa(...e){e="FIREBASE INTERNAL ERROR: "+E(...e),C.error(e)}function DKa(e,t){return e===t?0:e<t?-1:1}function EKa(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,d.stringify)(t))}function FKa(t){if("object"!=typeof t||null===t)return(0,d.stringify)(t);var n=[];for(const e in t)n.push(e);n.sort();let r="{";for(let e=0;e<n.length;e++)0!==e&&(r+=","),r=(r=r+(0,d.stringify)(n[e])+":")+FKa(t[n[e]]);return r+="}"}function GKa(t,n){var r=t.length;if(r<=n)return[t];var i=[];for(let e=0;e<r;e+=n)e+n>r?i.push(t.substring(e,r)):i.push(t.substring(e,e+n));return i}const x=function(e,t){(0,d.assert)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(C.logLevel=r.LogLevel.VERBOSE,_=C.log.bind(C),t&&v.set("logging_enabled",!0)):"function"==typeof e?_=e:(_=null,v.remove("logging_enabled"))},h=function(...e){!0===S&&(S=!1,null===_)&&!0===v.get("logging_enabled")&&x(!0),_&&(e=E.apply(null,e),_(e))},c=function(...e){e="FIREBASE FATAL ERROR: "+E(...e);throw C.error(e),new Error(e)},f=function(...e){e="FIREBASE WARNING: "+E(...e);C.warn(e)},b=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},s="[MIN_NAME]",a="[MAX_NAME]",w=function(e,t){var n,r;return e===t?0:e===s||t===a?-1:t===s||e===a?1:(n=T(e),r=T(t),null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null===r&&e<t?-1:1)};function each(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}function HKa(e){(0,d.assert)(!b(e),"Invalid JSON number");let t,n,r,i,s;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,e=Math.abs(e),r=e>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(e/Math.pow(2,-1074))));var a=[];for(s=52;s;--s)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();var o=a.join("");let u="";for(s=0;s<64;s+=8){let e=parseInt(o.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()}function QKa(e,t){return"number"==typeof(e=setTimeout(e,t))&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e}const A=new RegExp("^-?(0*)\\d{1,10}$"),F=-2147483648,k=2147483647,T=function(e){if(A.test(e)){e=Number(e);if(e>=F&&e<=k)return e}return null},B=function(e){try{e()}catch(t){setTimeout(()=>{var e=t.stack||"";throw f("Exception was thrown by user callback.",e),t},Math.floor(0))}};class AppCheckTokenProvider{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null!=t&&t.get().then(e=>this.appCheck=e)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((e,t)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(e,t):e(null)},0)})}addTokenChangeListener(t){var e;null!=(e=this.appCheckProvider)&&e.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){f(`Provided AppCheck credentials for the app named "${this.appName_}" `+"are invalid. This usually indicates your app was not initialized correctly.")}}class FirebaseAuthTokenProvider{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(e=>e&&"auth/token-not-initialized"===e.code?(h("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,t)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(e,t):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',f(e)}}class EmulatorTokenProvider{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";const I=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,P="long_polling";class RepoInfo{constructor(e,t,n,r,i=!1,s="",a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=y.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost())&&y.set("host:"+this._host,this.internalHost)}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return e+this.host+"/"+t}}function repoInfoConnectionURL(e,t,n){(0,d.assert)("string"==typeof t,"typeof type must == string"),(0,d.assert)("object"==typeof n,"typeof params must == object");let r;if("websocket"===t)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==P)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}!function repoInfoNeedsQueryParam(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}(e)||(n.ns=e.namespace);const i=[];return each(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class StatsCollection{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,d.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,d.deepCopy)(this.counters_)}}const N={},R={};function statsManagerGetCollection(e){e=e.toString();return N[e]||(N[e]=new StatsCollection),N[e]}class PacketReceiver{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<n.length;++e)n[e]&&B(()=>{this.onMessage_(n[e])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class BrowserPollConnection{constructor(e,t,n,r,i,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tKa(e),this.stats_=statsManagerGetCollection(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),repoInfoConnectionURL(t,P,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new PacketReceiver(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4));var n=()=>{var e;this.isClosed_||(this.scriptTagHolder=new FirebaseIFrameScriptHolder((...e)=>{var[t,n,r,,,]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{var[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn),(e={start:"t"}).ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&I.test(location.hostname)&&(e.r="f"),e=this.urlFn(e),this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,()=>{}))};if((0,d.isNodeSdk)()||"complete"===document.readyState)n();else{let e=!1;const r=function(){document.body?e||(e=!0,n()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return!((0,d.isNodeSdk)()||!BrowserPollConnection.forceAllow_&&(BrowserPollConnection.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){var e=(0,d.stringify)(e),e=(this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length),(0,d.base64Encode)(e)),t=GKa(e,1840);for(let e=0;e<t.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,t.length,t[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){var n;(0,d.isNodeSdk)()||(this.myDisconnFrame=document.createElement("iframe"),(n={dframe:"t"}).id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame))}incrementIncomingBytes_(e){e=(0,d.stringify)(e).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class FirebaseIFrameScriptHolder{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,d.isNodeSdk)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=D(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let e="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(r=document.domain,e='<script>document.domain="'+r+'";<\/script>');i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){h("frame writing exception"),e.stack&&h(e.stack),h(e)}}}static createIFrame_(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||h("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var n={},n=(n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial,this.urlFn(n));let e="",t=0;for(;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift();e=e+"&seg"+t+"="+r.seg+"&ts"+t+"="+r.ts+"&d"+t+"="+r.d,t++}return n+=e,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,n){(0,d.isNodeSdk)()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(this.sendNewPolls){const t=this.myIFrame.doc.createElement("script");t.type="text/javascript",t.async=!0,t.src=e,t.onload=t.onreadystatechange=function(){var e=t.readyState;e&&"loaded"!==e&&"complete"!==e||(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),n())},t.onerror=()=>{h("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(t)}}catch(e){}},Math.floor(1))}}let L=null;"undefined"!=typeof MozWebSocket?L=MozWebSocket:"undefined"!=typeof WebSocket&&(L=WebSocket);class WebSocketConnection{constructor(e,t,n,r,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tKa(this.connId),this.stats_=statsManagerGetCollection(t),this.connURL=WebSocketConnection.connectionURL_(t,s,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){var s={v:"5"};return!(0,d.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&I.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s.ac=r),i&&(s.p=i),repoInfoConnectionURL(e,"websocket",s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,y.set("previous_websocket_failure",!0);try{let e;var n,r,i;(0,d.isNodeSdk)()&&(n=this.nodeAdmin?"AdminNode":"Node",e={headers:{"User-Agent":`Firebase/5/${g}/${Ie.platform}/`+n,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken),r=Ie.env,i=0===this.connURL.indexOf("wss://")?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy)&&(e.proxy={origin:i}),this.mySock=new L(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");e=e.message||e.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let e=!1;var t;return!(e="undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4?!0:e)&&null!==L&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return y.isInMemoryStorage||!0===y.get("previous_websocket_failure")}markConnectionHealthy(){y.remove("previous_websocket_failure")}appendFrame_(e){this.frames.push(e),this.frames.length===this.totalFrames&&(e=this.frames.join(""),e=(this.frames=null,d.jsonEval)(e),this.onMessage(e))}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,d.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){null!==this.mySock&&(e=e.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(e):null!==(e=this.extractFrameCount_(e))&&this.appendFrame_(e))}send(e){this.resetKeepAlive();var e=(0,d.stringify)(e),t=(this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length),GKa(e,16384));1<t.length&&this.sendString_(String(t.length));for(let e=0;e<t.length;e++)this.sendString_(t[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2,WebSocketConnection.healthyTimeout=3e4;class TransportManager{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){var t=WebSocketConnection&&WebSocketConnection.isAvailable();let n=t&&!WebSocketConnection.previouslyFailed();if(e.webSocketOnly&&(t||f("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[WebSocketConnection];else{var r=this.transports_=[];for(const i of TransportManager.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return 1<this.transports_.length?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;class Connection{constructor(e,t,n,r,i,s,a,o,u,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tKa("c:"+this.id+":"),this.transportManager_=new TransportManager(t),this.log_("Connection created"),this.start_()}start_(){var e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=QKa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&102400<this.conn_.bytesReceived?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&10240<this.conn_.bytesSent?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(e)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){"t"in e&&("a"===(e=e.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))}onSecondaryMessageReceived_(e){var t=EKa("t",e),e=EKa("d",e);if("c"===t)this.onSecondaryControl_(e);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(e)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){var t=EKa("t",e),e=EKa("d",e);"c"===t?this.onControl_(e):"d"===t&&this.onDataMessage_(e)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){var t=EKa("t",e);if("d"in e){e=e.d;if("h"===t)this.onHandshake_(e);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(e):"r"===t?this.onReset_(e):"e"===t?uKa("Server Error: "+e):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uKa("Unknown control packet command: "+t)}}onHandshake_(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&f("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var e=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,t),QKa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):QKa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(y.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_)&&(this.onDisconnect_(),this.onDisconnect_=null)}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ServerActions{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class EventEmitter{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,d.assert)(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){var n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});e=this.getInitialEvent(e);e&&t.apply(n,e)}off(e,t,n){this.validateEventType_(e);var r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context))return void r.splice(e,1)}validateEventType_(t){(0,d.assert)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class OnlineMonitor extends EventEmitter{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,d.isMobileCordova)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(e){return(0,d.assert)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const M=32,O=768;class Path{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)0<this.pieces_[e].length&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function pathGetFront(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function pathGetLength(e){return e.pieces_.length-e.pieceNum_}function pathPopFront(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Path(e.pieces_,t)}function pathGetBack(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function pathSlice(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function pathParent(t){if(t.pieceNum_>=t.pieces_.length)return null;var n=[];for(let e=t.pieceNum_;e<t.pieces_.length-1;e++)n.push(t.pieces_[e]);return new Path(n,0)}function pathChild(t,n){var r=[];for(let e=t.pieceNum_;e<t.pieces_.length;e++)r.push(t.pieces_[e]);if(n instanceof Path)for(let e=n.pieceNum_;e<n.pieces_.length;e++)r.push(n.pieces_[e]);else{var i=n.split("/");for(let e=0;e<i.length;e++)0<i[e].length&&r.push(i[e])}return new Path(r,0)}function pathIsEmpty(e){return e.pieceNum_>=e.pieces_.length}function newRelativePath(e,t){var n=pathGetFront(e),r=pathGetFront(t);if(null===n)return t;if(n===r)return newRelativePath(pathPopFront(e),pathPopFront(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function pathCompare(e,t){var n=pathSlice(e,0),r=pathSlice(t,0);for(let e=0;e<n.length&&e<r.length;e++){var i=w(n[e],r[e]);if(0!==i)return i}return n.length===r.length?0:n.length<r.length?-1:1}function pathEquals(n,r){if(pathGetLength(n)!==pathGetLength(r))return!1;for(let e=n.pieceNum_,t=r.pieceNum_;e<=n.pieces_.length;e++,t++)if(n.pieces_[e]!==r.pieces_[t])return!1;return!0}function pathContains(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(pathGetLength(e)>pathGetLength(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class ValidationPath{constructor(e,t){this.errorPrefix_=t,this.parts_=pathSlice(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=(0,d.stringLength)(this.parts_[e]);validationPathCheckValid(this)}}function validationPathCheckValid(e){if(e.byteLength_>O)throw new Error(e.errorPrefix_+"has a key path longer than "+O+" bytes ("+e.byteLength_+").");if(e.parts_.length>M)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+M+") or object contains a cycle "+validationPathToErrorString(e))}function validationPathToErrorString(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class VisibilityMonitor extends EventEmitter{constructor(){super(["visible"]);let t,e;"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{var e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(e){return(0,d.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]}}class PersistentConnection extends ServerActions{constructor(e,t,n,r,i,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=tKa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!(0,d.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){var r=++this.requestNumber_,e={r:r,a:e,b:t};this.log_((0,d.stringify)(e)),(0,d.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const n=new d.Deferred;e={p:e._path.toString(),q:e._queryObject},this.outstandingGets_.push({action:"g",request:e,onComplete:e=>{var t=e.d;"ok"===e.s?n.resolve(t):n.reject(t)}}),this.outstandingGetCount_++,e=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(e),n.promise}listen(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,s=e._path.toString(),r=(this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,d.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,d.assert)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId."),{onComplete:r,hashFn:t,query:e,tag:n});this.listens.get(s).set(i,r),this.connected_&&this.sendListen_(r)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,e=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(e)})}sendListen_(i){const s=i.query,a=s._path.toString(),o=s._queryIdentifier;this.log_("Listen on "+a+" for "+o);var e={p:a};i.tag&&(e.q=s._queryObject,e.t=i.tag),e.h=i.hashFn(),this.sendRequest("q",e,e=>{var t=e.d,n=e.s,r=(PersistentConnection.warnOnListenWarnings_(t,s),this.listens.get(a)&&this.listens.get(a).get(o));r===i&&(this.log_("listen response",e),"ok"!==n&&this.removeListen_(a,o),i.onComplete)&&i.onComplete(n,t)})}static warnOnListenWarnings_(e,t){e&&"object"==typeof e&&(0,d.contains)(e,"w")&&(e=(0,d.safeGet)(e,"w"),Array.isArray(e))&&~e.indexOf("no_index")&&(e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',t=t._path.toString(),f("Using an unspecified index. Your data will be downloaded and "+`filtered on the client. Consider adding ${e} at `+t+" to your security rules for better performance."))}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,d.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_;var e=(0,d.isValidFormat)(n)?"auth":"gauth",t={cred:n};null===this.authOverride_?t.noauth=!0:"object"==typeof this.authOverride_&&(t.authvar=this.authOverride_),this.sendRequest(e,t,e=>{var t=e.s,e=e.d||"error";this.authToken_===n&&("ok"===t?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(t,e))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{var t=e.s,e=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,e)})}unlisten(e,t){var n=e._path.toString(),r=e._queryIdentifier,i=(this.log_("Unlisten called for "+n+" "+r),(0,d.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r));i&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);t={p:e};r&&(t.q=n,t.t=r),this.sendRequest("n",t)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){t={p:t,d:n};this.log_("onDisconnect "+e,t),this.sendRequest(e,t,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();n={p:t,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:e,request:n,onComplete:r}),this.outstandingPutCount_++,i=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(i):this.log_("Buffering put: "+t)}sendPut_(t){const n=this.outstandingPuts_[t].action;var e=this.outstandingPuts_[t].request;const r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,e,e=>{this.log_(n+" response",e),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(e.s,e.d)})}reportStats(e){this.connected_&&(this.log_("reportStats",e={c:e}),this.sendRequest("s",e,e=>{"ok"!==e.s&&(e=e.d,this.log_("reportStats","Error sending stats: "+e))}))}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,d.stringify)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):uKa("Unrecognized action received from server: "+(0,d.stringify)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,d.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){var e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),e=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-e),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this);const c=this.onRealtimeDisconnect_.bind(this);var i=this.id+":"+PersistentConnection.nextConnectionId_++,s=this.lastSessionId;let t=!1,n=null;var a=function(){n?n.close():(t=!0,c())},o=(this.realtime_={close:a,sendRequest:function(e){(0,d.assert)(n,"sendRequest call when we're not connected not allowed."),n.sendRequest(e)}},this.forceTokenRefresh_);this.forceTokenRefresh_=!1;try{var[u,l]=await Promise.all([this.authTokenProvider_.getToken(o),this.appCheckTokenProvider_.getToken(o)]);t?h("getToken() completed but was canceled"):(h("getToken() completed. Creating connection."),this.authToken_=u&&u.accessToken,this.appCheckToken_=l&&l.token,n=new Connection(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,c,e=>{f(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},s))}catch(e){this.log_("Failed to get token: "+e),t||(this.repoInfo_.nodeAdmin&&f(e),a())}}}interrupt(e){h("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){h("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,d.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){e-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>FKa(e)).join("$"):"default";t=this.removeListen_(e,n);t&&t.onComplete&&t.onComplete("permission_denied")}removeListen_(e,t){var n,e=new Path(e).toString();let r;return this.listens.has(e)?(n=this.listens.get(e),r=n.get(t),n.delete(t),0===n.size&&this.listens.delete(e)):r=void 0,r}onAuthRevoked_(e,t){h("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){h("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,3<=this.invalidAppCheckTokenCount_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){var e={};let t="js";e["sdk."+(t=(0,d.isNodeSdk)()?this.repoInfo_.nodeAdmin?"admin_node":"node":t)+"."+g.replace(/\./g,"-")]=1,(0,d.isMobileCordova)()?e["framework.cordova"]=1:(0,d.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){var e=OnlineMonitor.getInstance().currentlyOnline();return(0,d.isEmpty)(this.interruptReasons_)&&e}}PersistentConnection.nextPersistentConnectionId_=0,PersistentConnection.nextConnectionId_=0;class NamedNode{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new NamedNode(e,t)}}class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){e=new NamedNode(s,e),t=new NamedNode(s,t);return 0!==this.compare(e,t)}minPost(){return NamedNode.MIN}}let j;class KeyIndex extends Index{static get __EMPTY_NODE(){return j}static set __EMPTY_NODE(e){j=e}compare(e,t){return w(e.name,t.name)}isDefinedOn(e){throw(0,d.assertionError)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(a,j)}makePost(e,t){return(0,d.assert)("string"==typeof e,"KeyIndex indexValue must always be a string."),new NamedNode(e,j)}toString(){return".key"}}const p=new KeyIndex;class SortedMapIterator{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e=this.nodeStack_.pop(),t;if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return 0<this.nodeStack_.length}peek(){var e;return 0===this.nodeStack_.length?null:(e=this.nodeStack_[this.nodeStack_.length-1],this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value})}}class LLRBNode{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:LLRBNode.RED,this.left=null!=r?r:SortedMap.EMPTY_NODE,this.right=null!=i?i:SortedMap.EMPTY_NODE}copy(e,t,n,r,i){return new LLRBNode(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;var i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let e=this;return(e=(e=e.left.isRed_()||e.left.left.isRed_()?e:e.moveRedLeft_()).copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}remove(e,t){let n,r;if(t(e,(n=this).key)<0)n=(n=n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()?n:n.moveRedLeft_()).copy(null,null,null,n.left.remove(e,t),null);else{if(0===t(e,(n=(n=n.left.isRed_()?n.rotateRight_():n).right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()?n:n.moveRedRight_()).key)){if(n.right.isEmpty())return SortedMap.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e=(e=(e=e.right.isRed_()&&!e.left.isRed_()?e.rotateLeft_():e).left.isRed_()&&e.left.left.isRed_()?e.rotateRight_():e).left.isRed_()&&e.right.isRed_()?e.colorFlip_():e}moveRedLeft_(){let e=this.colorFlip_();return e=e.right.left.isRed_()?(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_():e}moveRedRight_(){let e=this.colorFlip_();return e=e.left.left.isRed_()?(e=e.rotateRight_()).colorFlip_():e}rotateLeft_(){var e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){var e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}LLRBNode.RED=!0,LLRBNode.BLACK=!1;class SortedMap{constructor(e,t=SortedMap.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new SortedMap(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(e){var t;let n=this.root_;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:0<t&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:0<t&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new SortedMapIterator(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new SortedMapIterator(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new SortedMapIterator(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new SortedMapIterator(this.root_,null,this.comparator_,!0,e)}}function NAME_ONLY_COMPARATOR(e,t){return w(e.name,t.name)}function NAME_COMPARATOR(e,t){return w(e,t)}SortedMap.EMPTY_NODE=new class LLRBEmptyNode{copy(e,t,n,r,i){return this}insert(e,t,n){return new LLRBNode(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};let U;function WLa(e){return"number"==typeof e?"number:"+HKa(e):"string:"+e}function XLa(e){var t;e.isLeafNode()?(t=e.val(),(0,d.assert)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,d.contains)(t,".sv"),"Priority must be a string or number.")):(0,d.assert)(e===U||e.isEmpty(),"priority of unexpected type."),(0,d.assert)(e===U||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}let q;class LeafNode{constructor(e,t=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,(this.lazyHash_=null,d.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),XLa(this.priorityNode_)}static set __childrenNodeConstructor(e){q=e}static get __childrenNodeConstructor(){return q}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new LeafNode(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pathIsEmpty(e)?this:".priority"===pathGetFront(e)?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){var n=pathGetFront(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,d.assert)(".priority"!==n||1===pathGetLength(e),".priority must be the last token in a path"),this.updateImmediateChild(n,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+WLa(this.priorityNode_.val())+":");var t=typeof this.value_;e=(e+=t+":")+("number"==t?HKa(this.value_):this.value_),this.lazyHash_=nKa(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof LeafNode.__childrenNodeConstructor?-1:((0,d.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){var t=typeof e.value_,n=typeof this.value_,r=LeafNode.VALUE_TYPE_ORDER.indexOf(t),i=LeafNode.VALUE_TYPE_ORDER.indexOf(n);return(0,d.assert)(0<=r,"Unknown leaf type: "+t),(0,d.assert)(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];let W,z;const o=new class PriorityIndex extends Index{compare(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),n=n.compareTo(r);return 0===n?w(e.name,t.name):n}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(a,new LeafNode("[PRIORITY-POST]",z))}makePost(e,t){e=W(e);return new NamedNode(t,new LeafNode("[PRIORITY-POST]",e))}toString(){return".priority"}},V=Math.log(2);class Base12Num{constructor(e){this.count=(t=e+1,parseInt(Math.log(t)/V,10)),this.current_=this.count-1,t=this.count;var t=parseInt(Array(t+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}function bMa(o,e,u,t){o.sort(e);const l=function(e,t){var n=t-e;let r,i;return 0==n?null:1==n?(r=o[e],i=u?u(r):r,new LLRBNode(i,r.node,LLRBNode.BLACK,null,null)):(n=parseInt(n/2,10)+e,e=l(e,n),t=l(n+1,t),r=o[n],i=u?u(r):r,new LLRBNode(i,r.node,LLRBNode.BLACK,e,t))};var n=function(t){let i=null,s=null,a=o.length;function E$a(e,t){var n=a-e,r=a,e=(a-=e,l(1+n,r)),r=o[n],n=u?u(r):r,n=new LLRBNode(n,r.node,t,null,e);i=(i?i.left=n:s=n,n)}for(let e=0;e<t.count;++e){var n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?E$a(r,LLRBNode.BLACK):(E$a(r,LLRBNode.BLACK),E$a(r,LLRBNode.RED))}return s}(new Base12Num(o.length));return new SortedMap(t||e,n)}let G;const J={};class IndexMap{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,d.assert)((J,o),"ChildrenNode.ts has not been loaded"),G=G||new IndexMap({".priority":J},{".priority":o})}get(e){var t=(0,d.safeGet)(this.indexes_,e);if(t)return t instanceof SortedMap?t:null;throw new Error("No index defined for "+e)}hasIndex(e){return(0,d.contains)(this.indexSet_,e.toString())}addIndex(e,t){(0,d.assert)(e!==p,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var n=[];let r=!1;var i=t.getIterator(NamedNode.Wrap);let s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();let a;a=r?bMa(n,e.getCompare()):J;var t=e.toString(),o=Object.assign({},this.indexSet_),u=(o[t]=e,Object.assign({},this.indexes_));return u[t]=a,new IndexMap(u,o)}addToIndexes(a,o){var e=(0,d.map)(this.indexes_,(t,n)=>{var r=(0,d.safeGet)(this.indexSet_,n);if((0,d.assert)(r,"Missing index implementation for "+n),t===J){if(r.isDefinedOn(a.node)){var i=[],s=o.getIterator(NamedNode.Wrap);let e=s.getNext();for(;e;)e.name!==a.name&&i.push(e),e=s.getNext();return i.push(a),bMa(i,r.getCompare())}return J}{n=o.get(a.name);let e=t;return(e=n?e.remove(new NamedNode(a.name,n)):e).insert(a,a.node)}});return new IndexMap(e,this.indexSet_)}removeFromIndexes(n,r){var e=(0,d.map)(this.indexes_,e=>{var t;return e!==J&&(t=r.get(n.name))?e.remove(new NamedNode(n.name,t)):e});return new IndexMap(e,this.indexSet_)}}let H;class ChildrenNode{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&XLa(this.priorityNode_),this.children_.isEmpty()&&(0,d.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return H=H||new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default)}isLeafNode(){return!1}getPriority(){return this.priorityNode_||H}updatePriority(e){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,e,this.indexMap_)}getImmediateChild(e){return".priority"===e?this.getPriority():null===(e=this.children_.get(e))?H:e}getChild(e){var t=pathGetFront(e);return null===t?this:this.getImmediateChild(t).getChild(pathPopFront(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(n,r){if((0,d.assert)(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{var i=new NamedNode(n,r);let e,t;t=r.isEmpty()?(e=this.children_.remove(n),this.indexMap_.removeFromIndexes(i,this.children_)):(e=this.children_.insert(n,r),this.indexMap_.addToIndexes(i,this.children_));n=e.isEmpty()?H:this.priorityNode_;return new ChildrenNode(e,n,t)}}updateChild(e,t){var n=pathGetFront(e);return null===n?t:((0,d.assert)(".priority"!==pathGetFront(e)||1===pathGetLength(e),".priority must be the last token in a path"),e=this.getImmediateChild(n).updateChild(pathPopFront(e),t),this.updateImmediateChild(n,e))}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,a=!0;if(this.forEachChild(o,(e,t)=>{r[e]=t.val(n),i++,a&&ChildrenNode.INTEGER_REGEXP_.test(e)?s=Math.max(s,Number(e)):a=!1}),!n&&a&&s<2*i){var e=[];for(const t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+WLa(this.getPriority().val())+":"),this.forEachChild(o,(e,t)=>{t=t.hash();""!==t&&(n+=":"+e+":"+t)}),this.lazyHash_=""===n?"":nKa(n)}return this.lazyHash_}getPredecessorChildName(e,t,n){var n=this.resolveIndex_(n);return n?(n=n.getPredecessorKey(new NamedNode(e,t)))?n.name:null:this.children_.getPredecessorKey(e)}getFirstChildName(e){var e=this.resolveIndex_(e);return e?(e=e.minKey())&&e.name:this.children_.minKey()}getFirstChild(e){e=this.getFirstChildName(e);return e?new NamedNode(e,this.children_.get(e)):null}getLastChildName(e){var e=this.resolveIndex_(e);return e?(e=e.maxKey())&&e.name:this.children_.maxKey()}getLastChild(e){e=this.getLastChildName(e);return e?new NamedNode(e,this.children_.get(e)):null}forEachChild(e,t){e=this.resolveIndex_(e);return e?e.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(t,n){var e=this.resolveIndex_(n);if(e)return e.getIteratorFrom(t,e=>e);{var r=this.children_.getIteratorFrom(t.name,NamedNode.Wrap);let e=r.peek();for(;null!=e&&n.compare(e,t)<0;)r.getNext(),e=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(t,n){var e=this.resolveIndex_(n);if(e)return e.getReverseIteratorFrom(t,e=>e);{var r=this.children_.getReverseIteratorFrom(t.name,NamedNode.Wrap);let e=r.peek();for(;null!=e&&0<n.compare(e,t);)r.getNext(),e=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===K?-1:0}withIndex(e){return e===p||this.indexMap_.hasIndex(e)?this:(e=this.indexMap_.addIndex(e,this.children_),new ChildrenNode(this.children_,this.priorityNode_,e))}isIndexed(e){return e===p||this.indexMap_.hasIndex(e)}equals(n){if(n===this)return!0;if(!n.isLeafNode())if(this.getPriority().equals(n.getPriority())){if(this.children_.count()!==n.children_.count())return!1;{var r=this.getIterator(o),i=n.getIterator(o);let e=r.getNext(),t=i.getNext();for(;e&&t;){if(e.name!==t.name||!e.node.equals(t.node))return!1;e=r.getNext(),t=i.getNext()}return null===e&&null===t}}return!1}resolveIndex_(e){return e===p?null:this.indexMap_.get(e.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const K=new MaxNode,X=(Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(s,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(a,K)}}),KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE,LeafNode.__childrenNodeConstructor=ChildrenNode,!function setMaxNode$1(e){U=e}(K),!function setMaxNode(e){z=e}(K),!0);function nodeFromJSON(r,e=null){if(null===r)return ChildrenNode.EMPTY_NODE;var t,i;if("object"==typeof r&&".priority"in r&&(e=r[".priority"]),(0,d.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"!=typeof(r="object"==typeof r&&".value"in r&&null!==r[".value"]?r[".value"]:r)||".sv"in r)return t=r,new LeafNode(t,nodeFromJSON(e));if(r instanceof Array||!X){let n=ChildrenNode.EMPTY_NODE;return each(r,(e,t)=>{!(0,d.contains)(r,e)||"."===e.substring(0,1)||!(t=nodeFromJSON(t)).isLeafNode()&&t.isEmpty()||(n=n.updateImmediateChild(e,t))}),n.updatePriority(nodeFromJSON(e))}{const s=[];let n=!1;return each(r,(e,t)=>{"."===e.substring(0,1)||(t=nodeFromJSON(t)).isEmpty()||(n=n||!t.getPriority().isEmpty(),s.push(new NamedNode(e,t)))}),0===s.length?ChildrenNode.EMPTY_NODE:(t=bMa(s,NAME_ONLY_COMPARATOR,e=>e.name,NAME_COMPARATOR),n?(i=bMa(s,o.getCompare()),new ChildrenNode(t,nodeFromJSON(e),new IndexMap({".priority":i},{".priority":o}))):new ChildrenNode(t,nodeFromJSON(e),IndexMap.Default))}}!function setNodeFromJSON(e){W=e}(nodeFromJSON);class PathIndex extends Index{constructor(e){super(),this.indexPath_=e,(0,d.assert)(!pathIsEmpty(e)&&".priority"!==pathGetFront(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),n=n.compareTo(r);return 0===n?w(e.name,t.name):n}makePost(e,t){e=nodeFromJSON(e),e=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,e);return new NamedNode(t,e)}maxPost(){var e=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,K);return new NamedNode(a,e)}toString(){return pathSlice(this.indexPath_,0).join("/")}}function nMa(t){if(t===""+k)return Y;var e=T(t);if(null!=e)return""+(e+1);var n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t.charAt(e);if(n.length<ee)return n.push(Y),n.join("");let r=n.length-1;for(;0<=r&&n[r]===Z;)r--;return-1===r?a:(e=n[r],e=Q.charAt(Q.indexOf(e)+1),n[r]=e,n.slice(0,r+1).join(""))}function oMa(t){if(t===""+F)return s;var e=T(t);if(null!=e)return""+(e-1);var n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t.charAt(e);return n[n.length-1]===Y?1===n.length?""+k:(delete n[n.length-1],n.join("")):(n[n.length-1]=Q.charAt(Q.indexOf(n[n.length-1])-1),n.join("")+Z.repeat(ee-n.length))}const $=new class ValueIndex extends Index{compare(e,t){var n=e.node.compareTo(t.node);return 0===n?w(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(e,t){e=nodeFromJSON(e);return new NamedNode(t,e)}toString(){return".value"}},Q="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Y="-",Z="z",ee=786,te=function(){let s=0;const a=[];return function(e){var t=e===s;s=e;let n;var r=new Array(8);for(n=7;0<=n;n--)r[n]=Q.charAt(e%64),e=Math.floor(e/64);(0,d.assert)(0===e,"Cannot push at time == 0");let i=r.join("");if(t){for(n=11;0<=n&&63===a[n];n--)a[n]=0;a[n]++}else for(n=0;n<12;n++)a[n]=Math.floor(64*Math.random());for(n=0;n<12;n++)i+=Q.charAt(a[n]);return(0,d.assert)(20===i.length,"nextPushId: Length should be 20."),i}}();function changeValue(e){return{type:"value",snapshotNode:e}}function changeChildAdded(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function changeChildRemoved(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function changeChildChanged(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class IndexedFilter{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){(0,d.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()||(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(changeChildRemoved(t,a)):(0,d.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(changeChildAdded(t,n)):s.trackChildChange(changeChildChanged(t,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(o,(e,t)=>{n.hasChild(e)||i.trackChildChange(changeChildRemoved(e,t))}),n.isLeafNode()||n.forEachChild(o,(e,t)=>{var n;r.hasChild(e)?(n=r.getImmediateChild(e)).equals(t)||i.trackChildChange(changeChildChanged(e,t,n)):i.trackChildChange(changeChildAdded(e,t))})),n.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ChildrenNode.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class RangedFilter{constructor(e){this.indexedFilter_=new IndexedFilter(e.getIndex()),this.index_=e.getIndex(),this.startPost_=RangedFilter.getStartPost_(e),this.endPost_=RangedFilter.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,r,i,s){return this.matches(new NamedNode(t,n))||(n=ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){let r=(t=t.isLeafNode()?ChildrenNode.EMPTY_NODE:t).withIndex(this.index_);r=r.updatePriority(ChildrenNode.EMPTY_NODE);const i=this;return t.forEachChild(o,(e,t)=>{i.matches(new NamedNode(e,t))||(r=r.updateImmediateChild(e,ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){var t;return e.hasStart()?(t=e.getIndexStartName(),e.getIndex().makePost(e.getIndexStartValue(),t)):e.getIndex().minPost()}static getEndPost_(e){var t;return e.hasEnd()?(t=e.getIndexEndName(),e.getIndex().makePost(e.getIndexEndValue(),t)):e.getIndex().maxPost()}}class LimitedFilter{constructor(e){this.rangedFilter_=new RangedFilter(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new NamedNode(t,n))||(n=ChildrenNode.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,a,t){let o;if(a.isLeafNode()||a.isEmpty())o=ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){o=ChildrenNode.EMPTY_NODE.withIndex(this.index_);let t,n=(t=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_),0);for(;t.hasNext()&&n<this.limit_;){var r=t.getNext();let e;if(!(e=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),r)<=0:this.index_.compare(r,this.rangedFilter_.getEndPost())<=0))break;o=o.updateImmediateChild(r.name,r.node),n++}}else{o=(o=a.withIndex(this.index_)).updatePriority(ChildrenNode.EMPTY_NODE);let e,t,n,r;if(this.reverse_){r=o.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),t=this.rangedFilter_.getStartPost();const l=this.index_.getCompare();n=(e,t)=>l(t,e)}else r=o.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),t=this.rangedFilter_.getEndPost(),n=this.index_.getCompare();let i=0,s=!1;for(;r.hasNext();){var u=r.getNext();(s=!s&&n(e,u)<=0?!0:s)&&i<this.limit_&&n(u,t)<=0?i++:o=o.updateImmediateChild(u.name,ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,t)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const p=this.index_.getCompare();s=(e,t)=>p(t,e)}else s=this.index_.getCompare();var a=e,o=((0,d.assert)(a.numChildren()===this.limit_,""),new NamedNode(t,n)),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(o);if(a.hasChild(t)){var c=a.getImmediateChild(t);let e=r.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=e&&(e.name===t||a.hasChild(e.name));)e=r.getChildAfterChild(this.index_,e,this.reverse_);var h=null==e?1:s(e,o);return l&&!n.isEmpty()&&0<=h?(null!=i&&i.trackChildChange(changeChildChanged(t,n,c)),a.updateImmediateChild(t,n)):(null!=i&&i.trackChildChange(changeChildRemoved(t,c)),h=a.updateImmediateChild(t,ChildrenNode.EMPTY_NODE),null!=e&&this.rangedFilter_.matches(e)?(null!=i&&i.trackChildChange(changeChildAdded(e.name,e.node)),h.updateImmediateChild(e.name,e.node)):h)}return!n.isEmpty()&&l&&0<=s(u,o)?(null!=i&&(i.trackChildChange(changeChildRemoved(u.name,u.node)),i.trackChildChange(changeChildAdded(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(u.name,ChildrenNode.EMPTY_NODE)):e}}class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=o}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,d.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,d.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:s}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,d.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,d.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:a}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,d.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===o}copy(){var e=new QueryParams;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function queryParamsStartAt(e,t,n){e=e.copy();return e.startSet_=!0,e.indexStartValue_=t=void 0===t?null:t,null!=n?(e.startNameSet_=!0,e.indexStartName_=n):(e.startNameSet_=!1,e.indexStartName_=""),e}function queryParamsEndAt(e,t,n){e=e.copy();return e.endSet_=!0,e.indexEndValue_=t=void 0===t?null:t,void 0!==n?(e.endNameSet_=!0,e.indexEndName_=n):(e.endNameSet_=!1,e.indexEndName_=""),e}function queryParamsOrderBy(e,t){e=e.copy();return e.index_=t,e}function queryParamsToRestQueryStringParameters(t){var n={};if(!t.isDefault()){let e;e=t.index_===o?"$priority":t.index_===$?"$value":t.index_===p?"$key":((0,d.assert)(t.index_ instanceof PathIndex,"Unrecognized index type!"),t.index_.toString()),n.orderBy=(0,d.stringify)(e),t.startSet_&&(n.startAt=(0,d.stringify)(t.indexStartValue_),t.startNameSet_)&&(n.startAt+=","+(0,d.stringify)(t.indexStartName_)),t.endSet_&&(n.endAt=(0,d.stringify)(t.indexEndValue_),t.endNameSet_)&&(n.endAt+=","+(0,d.stringify)(t.indexEndName_)),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)}return n}function queryParamsGetQueryObject(t){var n={};if(t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_)&&(n.sn=t.indexStartName_),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_)&&(n.en=t.indexEndName_),t.limitSet_){n.l=t.limit_;let e=t.viewFrom_;""===e&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e}return t.index_!==o&&(n.i=t.index_.toString()),n}Ne._QueryParams=QueryParams;class ReadonlyRestClient extends ServerActions{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=tKa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,d.assert)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString(),a=(this.log_("Listen called for "+s+" "+e._queryIdentifier),ReadonlyRestClient.getListenId_(e,r)),o={};this.listens_[a]=o;e=queryParamsToRestQueryStringParameters(e._queryParams);this.restRequest_(s+".json",e,(t,e)=>{let n=e;if(null===(t=404===t?n=null:t)&&this.onDataUpdate_(s,n,!1,r),(0,d.safeGet)(this.listens_,a)===o){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(e,null)}})}unlisten(e,t){e=ReadonlyRestClient.getListenId_(e,t);delete this.listens_[e]}get(e){var t=queryParamsToRestQueryStringParameters(e._queryParams);const r=e._path.toString(),i=new d.Deferred;return this.restRequest_(r+".json",t,(e,t)=>{let n=t;null===(e=404===e?n=null:e)?(this.onDataUpdate_(r,n,!1,null),i.resolve(n)):i.reject(new Error(n))}),i.promise}refreshAuthToken(e){}restRequest_(i,s={},a){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([e,t])=>{e&&e.accessToken&&(s.auth=e.accessToken),t&&t.token&&(s.ac=t.token);const n=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,d.querystring)(s),r=(this.log_("Sending REST request for "+n),new XMLHttpRequest);r.onreadystatechange=()=>{if(a&&4===r.readyState){this.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);let e=null;if(200<=r.status&&r.status<300){try{e=(0,d.jsonEval)(r.responseText)}catch(e){f("Failed to parse JSON response for "+n+": "+r.responseText)}a(null,e)}else 401!==r.status&&404!==r.status&&f("Got unsuccessful REST response for "+n+" Status: "+r.status),a(r.status);a=null}},r.open("GET",n,!0),r.send()})}}class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(e,t,n){var r;pathIsEmpty(t)?(e.value=n,e.children.clear()):null!==e.value?e.value=e.value.updateChild(t,n):(r=pathGetFront(t),e.children.has(r)||e.children.set(r,newSparseSnapshotTree()),sparseSnapshotTreeRemember(e.children.get(r),t=pathPopFront(t),n))}function sparseSnapshotTreeForEachTree(e,n,r){null!==e.value?r(n,e.value):function sparseSnapshotTreeForEachChild(e,n){e.children.forEach((e,t)=>{n(t,e)})}(e,(e,t)=>{sparseSnapshotTreeForEachTree(t,new Path(n.toString()+"/"+e),r)})}class StatsListener{constructor(e){this.collection_=e,this.last_=null}get(){var e=this.collection_.get();const n=Object.assign({},e);return this.last_&&each(this.last_,(e,t)=>{n[e]=n[e]-t}),this.last_=e,n}}class StatsReporter{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new StatsListener(e);t=1e4+2e4*Math.random();QKa(this.reportStats_.bind(this),Math.floor(t))}reportStats_(){var e=this.statsListener_.get();const n={};let r=!1;each(e,(e,t)=>{0<t&&(0,d.contains)(this.statsToReport_,e)&&(n[e]=t,r=!0)}),r&&this.server_.reportStats(n),QKa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(e=l=l||{})[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class AckUserWrite{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=l.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(e){var t;return pathIsEmpty(this.path)?null!=this.affectedTree.value?((0,d.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this):(t=this.affectedTree.subtree(new Path(e)),new AckUserWrite(new Path(""),t,this.revert)):((0,d.assert)(pathGetFront(this.path)===e,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert))}}class ListenComplete{constructor(e,t){this.source=e,this.path=t,this.type=l.LISTEN_COMPLETE}operationForChild(e){return pathIsEmpty(this.path)?new ListenComplete(this.source,new Path("")):new ListenComplete(this.source,pathPopFront(this.path))}}class Overwrite{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=l.OVERWRITE}operationForChild(e){return pathIsEmpty(this.path)?new Overwrite(this.source,new Path(""),this.snap.getImmediateChild(e)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}class Merge{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=l.MERGE}operationForChild(e){var t;return pathIsEmpty(this.path)?(t=this.children.subtree(new Path(e))).isEmpty()?null:t.value?new Overwrite(this.source,new Path(""),t.value):new Merge(this.source,new Path(""),t):((0,d.assert)(pathGetFront(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children))}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class CacheNode{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){return pathIsEmpty(e)?this.isFullyInitialized()&&!this.filtered_:(e=pathGetFront(e),this.isCompleteForChild(e))}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class EventGenerator{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function eventGeneratorGenerateEventsForChanges(t,e,n,r){var i=[];const s=[];return e.forEach(e=>{"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&s.push(function changeChildMoved(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}(e.childName,e.snapshotNode))}),eventGeneratorGenerateEventsForType(t,i,"child_removed",e,r,n),eventGeneratorGenerateEventsForType(t,i,"child_added",e,r,n),eventGeneratorGenerateEventsForType(t,i,"child_moved",s,r,n),eventGeneratorGenerateEventsForType(t,i,"child_changed",e,r,n),eventGeneratorGenerateEventsForType(t,i,"value",e,r,n),i}function eventGeneratorGenerateEventsForType(r,i,t,e,s,a){e=e.filter(e=>e.type===t);e.sort((e,t)=>function eventGeneratorCompareChanges(e,t,n){if(null==t.childName||null==n.childName)throw(0,d.assertionError)("Should only compare child_ events.");t=new NamedNode(t.childName,t.snapshotNode),n=new NamedNode(n.childName,n.snapshotNode);return e.index_.compare(t,n)}(r,e,t)),e.forEach(t=>{const n=function eventGeneratorMaterializeSingleChange(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(r,t,a);s.forEach(e=>{e.respondsTo(t.type)&&i.push(e.createEvent(n,r.query_))})})}function newViewCache(e,t){return{eventCache:e,serverCache:t}}function viewCacheUpdateEventSnap(e,t,n,r){return newViewCache(new CacheNode(t,n,r),e.serverCache)}function viewCacheUpdateServerSnap(e,t,n,r){return newViewCache(e.eventCache,new CacheNode(t,n,r))}function viewCacheGetCompleteEventSnap(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let ne;class ImmutableTree{constructor(e,t=ne=ne||new SortedMap(DKa)){this.value=e,this.children=t}static fromObject(e){let n=new ImmutableTree(null);return each(e,(e,t)=>{n=n.set(new Path(e),t)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){var n,r;return null!=this.value&&t(this.value)?{path:new Path(""),value:this.value}:!pathIsEmpty(e)&&(n=pathGetFront(e),null!==(r=this.children.get(n)))&&null!=(r=r.findRootMostMatchingPathAndValue(pathPopFront(e),t))?{path:pathChild(new Path(n),r.path),value:r.value}:null}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){var t;return pathIsEmpty(e)?this:(t=pathGetFront(e),null!==(t=this.children.get(t))?t.subtree(pathPopFront(e)):new ImmutableTree(null))}set(e,t){var n;return pathIsEmpty(e)?new ImmutableTree(t,this.children):(n=pathGetFront(e),e=(this.children.get(n)||new ImmutableTree(null)).set(pathPopFront(e),t),t=this.children.insert(n,e),new ImmutableTree(this.value,t))}remove(t){if(pathIsEmpty(t))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);var n=pathGetFront(t),r=this.children.get(n);if(r){r=r.remove(pathPopFront(t));let e;return e=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&e.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,e)}return this}get(e){var t;return pathIsEmpty(e)?this.value:(t=pathGetFront(e),(t=this.children.get(t))?t.get(pathPopFront(e)):null)}setTree(t,n){if(pathIsEmpty(t))return n;{var r=pathGetFront(t),t=(this.children.get(r)||new ImmutableTree(null)).setTree(pathPopFront(t),n);let e;return e=t.isEmpty()?this.children.remove(r):this.children.insert(r,t),new ImmutableTree(this.value,e)}}fold(e){return this.fold_(new Path(""),e)}fold_(n,r){const i={};return this.children.inorderTraversal((e,t)=>{i[e]=t.fold_(pathChild(n,e),r)}),r(n,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,new Path(""),t)}findOnPath_(e,t,n){var r,i=!!this.value&&n(t,this.value);return i||(!pathIsEmpty(e)&&(i=pathGetFront(e),r=this.children.get(i))?r.findOnPath_(pathPopFront(e),pathChild(t,i),n):null)}foreachOnPath(e,t){return this.foreachOnPath_(e,new Path(""),t)}foreachOnPath_(e,t,n){var r,i;return pathIsEmpty(e)?this:(this.value&&n(t,this.value),r=pathGetFront(e),(i=this.children.get(r))?i.foreachOnPath_(pathPopFront(e),pathChild(t,r),n):new ImmutableTree(null))}foreach(e){this.foreach_(new Path(""),e)}foreach_(n,r){this.children.inorderTraversal((e,t)=>{t.foreach_(pathChild(n,e),r)}),this.value&&r(n,this.value)}foreachChild(n){this.children.inorderTraversal((e,t)=>{t.value&&n(e,t.value)})}}class CompoundWrite{constructor(e){this.writeTree_=e}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(t,n,r){if(pathIsEmpty(n))return new CompoundWrite(new ImmutableTree(r));var i=t.writeTree_.findRootMostValueAndPath(n);if(null==i)return s=new ImmutableTree(r),s=t.writeTree_.setTree(n,s),new CompoundWrite(s);{var s=i.path;let e=i.value;i=newRelativePath(s,n);return e=e.updateChild(i,r),new CompoundWrite(t.writeTree_.set(s,e))}}function compoundWriteAddWrites(e,n,t){let r=e;return each(t,(e,t)=>{r=compoundWriteAddWrite(r,pathChild(n,e),t)}),r}function compoundWriteRemoveWrite(e,t){return pathIsEmpty(t)?CompoundWrite.empty():(e=e.writeTree_.setTree(t,new ImmutableTree(null)),new CompoundWrite(e))}function compoundWriteHasCompleteWrite(e,t){return null!=compoundWriteGetCompleteNode(e,t)}function compoundWriteGetCompleteNode(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(newRelativePath(n.path,t)):null}function compoundWriteGetCompleteChildren(e){const n=[];var t=e.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(o,(e,t)=>{n.push(new NamedNode(e,t))}):e.writeTree_.children.inorderTraversal((e,t)=>{null!=t.value&&n.push(new NamedNode(e,t.value))}),n}function compoundWriteChildCompoundWrite(e,t){var n;return pathIsEmpty(t)?e:null!=(n=compoundWriteGetCompleteNode(e,t))?new CompoundWrite(new ImmutableTree(n)):new CompoundWrite(e.writeTree_.subtree(t))}function compoundWriteApply(e,t){return function applySubtreeWrite(r,e,i){{if(null!=e.value)return i.updateChild(r,e.value);{let n=null;return e.children.inorderTraversal((e,t)=>{".priority"===e?((0,d.assert)(null!==t.value,"Priority writes must always be leaf nodes"),n=t.value):i=applySubtreeWrite(pathChild(r,e),t,i)}),i=i.getChild(r).isEmpty()||null===n?i:i.updateChild(pathChild(r,".priority"),n)}}}(new Path(""),e.writeTree_,t)}function writeTreeChildWrites(e,t){return newWriteTreeRef(t,e)}function writeTreeRemoveWrite(t,n){var e=t.allWrites.findIndex(e=>e.writeId===n);(0,d.assert)(0<=e,"removeWrite called with nonexistent writeId.");const r=t.allWrites[e];t.allWrites.splice(e,1);let i=r.visible,s=!1,a=t.allWrites.length-1;for(;i&&0<=a;){var o=t.allWrites[a];o.visible&&(a>=e&&function writeTreeRecordContainsPath_(e,t){{if(e.snap)return pathContains(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&pathContains(pathChild(e.path,n),t))return 1}}(o,r.path)?i=!1:pathContains(r.path,o.path)&&(s=!0)),a--}return!!i&&(s?function writeTreeResetTree_(e){e.visibleWrites=writeTreeLayerTree_(e.allWrites,writeTreeDefaultFilter_,new Path("")),0<e.allWrites.length?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(t):r.snap?t.visibleWrites=compoundWriteRemoveWrite(t.visibleWrites,r.path):each(r.children,e=>{t.visibleWrites=compoundWriteRemoveWrite(t.visibleWrites,pathChild(r.path,e))}),!0)}function writeTreeDefaultFilter_(e){return e.visible}function writeTreeLayerTree_(t,n,r){let i=CompoundWrite.empty();for(let e=0;e<t.length;++e){var s=t[e];if(n(s)){var a=s.path;let e;if(s.snap)pathContains(r,a)?(e=newRelativePath(r,a),i=compoundWriteAddWrite(i,e,s.snap)):pathContains(a,r)&&(e=newRelativePath(a,r),i=compoundWriteAddWrite(i,new Path(""),s.snap.getChild(e)));else{if(!s.children)throw(0,d.assertionError)("WriteRecord should have .snap or .children");pathContains(r,a)?(e=newRelativePath(r,a),i=compoundWriteAddWrites(i,e,s.children)):pathContains(a,r)&&(pathIsEmpty(e=newRelativePath(a,r))?i=compoundWriteAddWrites(i,new Path(""),s.children):(a=(0,d.safeGet)(s.children,pathGetFront(e)))&&(s=a.getChild(pathPopFront(e)),i=compoundWriteAddWrite(i,new Path(""),s)))}}}return i}function writeTreeCalcCompleteEventCache(e,t,n,r,i){var s;return r||i?(s=compoundWriteChildCompoundWrite(e.visibleWrites,t),!i&&s.writeTree_.isEmpty()?n:i||null!=n||compoundWriteHasCompleteWrite(s,new Path(""))?compoundWriteApply(writeTreeLayerTree_(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(pathContains(e.path,t)||pathContains(t,e.path))},t),n||ChildrenNode.EMPTY_NODE):null):null!=(s=compoundWriteGetCompleteNode(e.visibleWrites,t))?s:(s=compoundWriteChildCompoundWrite(e.visibleWrites,t)).writeTree_.isEmpty()?n:null!=n||compoundWriteHasCompleteWrite(s,new Path(""))?compoundWriteApply(s,n||ChildrenNode.EMPTY_NODE):null}function writeTreeRefCalcCompleteEventCache(e,t,n,r){return writeTreeCalcCompleteEventCache(e.writeTree,e.treePath,t,n,r)}function writeTreeRefCalcCompleteEventChildren(e,t){return function writeTreeCalcCompleteEventChildren(e,t,n){let r=ChildrenNode.EMPTY_NODE;var i=compoundWriteGetCompleteNode(e.visibleWrites,t);if(i)i.isLeafNode()||i.forEachChild(o,(e,t)=>{r=r.updateImmediateChild(e,t)});else if(n){const s=compoundWriteChildCompoundWrite(e.visibleWrites,t);n.forEachChild(o,(e,t)=>{t=compoundWriteApply(compoundWriteChildCompoundWrite(s,new Path(e)),t);r=r.updateImmediateChild(e,t)}),compoundWriteGetCompleteChildren(s).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)})}else compoundWriteGetCompleteChildren(compoundWriteChildCompoundWrite(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)});return r}(e.writeTree,e.treePath,t)}function writeTreeRefCalcEventCacheAfterServerOverwrite(e,t,n,r){return function writeTreeCalcEventCacheAfterServerOverwrite(e,t,n,r,i){return(0,d.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist"),r=pathChild(t,n),compoundWriteHasCompleteWrite(e.visibleWrites,r)?null:(t=compoundWriteChildCompoundWrite(e.visibleWrites,r)).writeTree_.isEmpty()?i.getChild(n):compoundWriteApply(t,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function writeTreeRefShadowingWrite(e,t){return function writeTreeShadowingWrite(e,t){return compoundWriteGetCompleteNode(e.visibleWrites,t)}(e.writeTree,pathChild(e.treePath,t))}function writeTreeRefCalcIndexedSlice(e,t,n,r,i,s){return function writeTreeCalcIndexedSlice(e,t,n,r,i,s,a){let o;if(e=compoundWriteChildCompoundWrite(e.visibleWrites,t),null!=(t=compoundWriteGetCompleteNode(e,new Path(""))))o=t;else{if(null==n)return[];o=compoundWriteApply(e,n)}if((o=o.withIndex(a)).isEmpty()||o.isLeafNode())return[];{var u=[],l=a.getCompare(),c=s?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let e=c.getNext();for(;e&&u.length<i;)0!==l(e,r)&&u.push(e),e=c.getNext();return u}}(e.writeTree,e.treePath,t,n,r,i,s)}function writeTreeRefCalcCompleteChild(e,t,n){return function writeTreeCalcCompleteChild(e,t,n,r){var t=pathChild(t,n),i=compoundWriteGetCompleteNode(e.visibleWrites,t);return null!=i?i:r.isCompleteForChild(n)?compoundWriteApply(compoundWriteChildCompoundWrite(e.visibleWrites,t),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function writeTreeRefChild(e,t){return newWriteTreeRef(pathChild(e.treePath,t),e.writeTree)}function newWriteTreeRef(e,t){return{treePath:e,writeTree:t}}class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(e){var t=e.type,n=e.childName,r=((0,d.assert)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,d.assert)(".priority"!==n,"Only non-priority child changes can be tracked."),this.changeMap.get(n));if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,changeChildChanged(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,changeChildRemoved(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,changeChildAdded(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,d.assertionError)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,changeChildChanged(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const re=new class NoCompleteChildSource_{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class WriteTreeCompleteChildSource{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){var t=this.viewCache_.eventCache;return t.isCompleteForChild(e)?t.getNode().getImmediateChild(e):(t=null!=this.optCompleteServerCache_?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache,writeTreeRefCalcCompleteChild(this.writes_,e,t))}getChildAfterChild(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),r=writeTreeRefCalcIndexedSlice(this.writes_,r,t,1,n,e);return 0===r.length?null:r[0]}}function viewProcessorApplyOperation(e,t,n,r,i){var s=new ChildChangeAccumulator;let a,o;if(n.type===l.OVERWRITE){var u=n;a=u.source.fromUser?viewProcessorApplyUserOverwrite(e,t,u.path,u.snap,r,i,s):((0,d.assert)(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!pathIsEmpty(u.path),viewProcessorApplyServerOverwrite(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===l.MERGE){u=n;a=u.source.fromUser?function viewProcessorApplyUserMerge(n,r,i,e,s,a,o){let u=r;return e.foreach((e,t)=>{e=pathChild(i,e);viewProcessorCacheHasChild(r,pathGetFront(e))&&(u=viewProcessorApplyUserOverwrite(n,u,e,t,s,a,o))}),e.foreach((e,t)=>{e=pathChild(i,e);viewProcessorCacheHasChild(r,pathGetFront(e))||(u=viewProcessorApplyUserOverwrite(n,u,e,t,s,a,o))}),u}(e,t,u.path,u.children,r,i,s):((0,d.assert)(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered(),viewProcessorApplyServerMerge(e,t,u.path,u.children,r,i,o,s))}else if(n.type===l.ACK_USER_WRITE){u=n;a=u.revert?function viewProcessorRevertUserWrite(n,r,i,s,a,o){let u;{if(null!=writeTreeRefShadowingWrite(s,i))return r;{var a=new WriteTreeCompleteChildSource(s,r,a),l=r.eventCache.getNode();let t;if(pathIsEmpty(i)||".priority"===pathGetFront(i)){let e;e=e=r.serverCache.isFullyInitialized()?writeTreeRefCalcCompleteEventCache(s,viewCacheGetCompleteServerSnap(r)):(c=r.serverCache.getNode(),(0,d.assert)(c instanceof ChildrenNode,"serverChildren would be complete if leaf node"),writeTreeRefCalcCompleteEventChildren(s,c)),t=n.filter.updateFullNode(l,e,o)}else{var c=pathGetFront(i);let e=writeTreeRefCalcCompleteChild(s,c,r.serverCache);null==e&&r.serverCache.isCompleteForChild(c)&&(e=l.getImmediateChild(c)),(t=null!=e?n.filter.updateChild(l,c,e,pathPopFront(i),a,o):r.eventCache.getNode().hasChild(c)?n.filter.updateChild(l,c,ChildrenNode.EMPTY_NODE,pathPopFront(i),a,o):l).isEmpty()&&r.serverCache.isFullyInitialized()&&(u=writeTreeRefCalcCompleteEventCache(s,viewCacheGetCompleteServerSnap(r))).isLeafNode()&&(t=n.filter.updateFullNode(t,u,o))}return u=r.serverCache.isFullyInitialized()||null!=writeTreeRefShadowingWrite(s,new Path("")),viewCacheUpdateEventSnap(r,t,u,n.filter.filtersNodes())}}}(e,t,u.path,r,i,s):function viewProcessorAckUserWrite(e,t,i,n,s,a,o){if(null!=writeTreeRefShadowingWrite(s,i))return t;const u=t.serverCache.isFiltered(),l=t.serverCache;{if(null!=n.value){if(pathIsEmpty(i)&&l.isFullyInitialized()||l.isCompleteForPath(i))return viewProcessorApplyServerOverwrite(e,t,i,l.getNode().getChild(i),s,a,u,o);if(pathIsEmpty(i)){let n=new ImmutableTree(null);return l.getNode().forEachChild(p,(e,t)=>{n=n.set(new Path(e),t)}),viewProcessorApplyServerMerge(e,t,i,n,s,a,u,o)}return t}{let r=new ImmutableTree(null);return n.foreach((e,t)=>{var n=pathChild(i,e);l.isCompleteForPath(n)&&(r=r.set(e,l.getNode().getChild(n)))}),viewProcessorApplyServerMerge(e,t,i,r,s,a,u,o)}}}(e,t,u.path,u.affectedTree,r,i,s)}else{if(n.type!==l.LISTEN_COMPLETE)throw(0,d.assertionError)("Unknown operation type: "+n.type);a=function viewProcessorListenComplete(e,t,n,r,i){var s=t.serverCache,t=viewCacheUpdateServerSnap(t,s.getNode(),s.isFullyInitialized()||pathIsEmpty(n),s.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(e,t,n,r,re,i)}(e,t,n.path,r,s)}u=s.getChanges();return function viewProcessorMaybeAddValueEvent(e,t,n){var r=t.eventCache;{var i,s;r.isFullyInitialized()&&(i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=viewCacheGetCompleteEventSnap(e),0<n.length||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(changeValue(viewCacheGetCompleteEventSnap(t)))}}(t,a,u),{viewCache:a,changes:u}}function viewProcessorGenerateEventCacheAfterServerEvent(r,i,s,a,o,u){var l=i.eventCache;if(null!=writeTreeRefShadowingWrite(a,s))return i;{let t,n;if(pathIsEmpty(s))(0,d.assert)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t=i.serverCache.isFiltered()?(c=writeTreeRefCalcCompleteEventChildren(a,(c=viewCacheGetCompleteServerSnap(i))instanceof ChildrenNode?c:ChildrenNode.EMPTY_NODE),r.filter.updateFullNode(i.eventCache.getNode(),c,u)):(c=writeTreeRefCalcCompleteEventCache(a,viewCacheGetCompleteServerSnap(i)),r.filter.updateFullNode(i.eventCache.getNode(),c,u));else{var c=pathGetFront(s);if(".priority"===c){(0,d.assert)(1===pathGetLength(s),"Can't have a priority with additional path components");var h=l.getNode(),p=writeTreeRefCalcEventCacheAfterServerOverwrite(a,s,h,n=i.serverCache.getNode());t=null!=p?r.filter.updatePriority(h,p):l.getNode()}else{h=pathPopFront(s);let e;e=l.isCompleteForChild(c)?(n=i.serverCache.getNode(),null!=(p=writeTreeRefCalcEventCacheAfterServerOverwrite(a,s,l.getNode(),n))?l.getNode().getImmediateChild(c).updateChild(h,p):l.getNode().getImmediateChild(c)):writeTreeRefCalcCompleteChild(a,c,i.serverCache),t=null!=e?r.filter.updateChild(l.getNode(),c,e,h,o,u):l.getNode()}}return viewCacheUpdateEventSnap(i,t,l.isFullyInitialized()||pathIsEmpty(s),r.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(e,t,n,r,i,s,a,o){var u=t.serverCache;let l;a=a?e.filter:e.filter.getIndexedFilter();if(pathIsEmpty(n))l=a.updateFullNode(u.getNode(),r,null);else if(a.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(n,r);l=a.updateFullNode(u.getNode(),c,null)}else{c=pathGetFront(n);if(!u.isCompleteForPath(n)&&1<pathGetLength(n))return t;var h=pathPopFront(n),r=u.getNode().getImmediateChild(c).updateChild(h,r);l=".priority"===c?a.updatePriority(u.getNode(),r):a.updateChild(u.getNode(),c,r,h,re,null)}c=viewCacheUpdateServerSnap(t,l,u.isFullyInitialized()||pathIsEmpty(n),a.filtersNodes());return viewProcessorGenerateEventCacheAfterServerEvent(e,c,n,i,new WriteTreeCompleteChildSource(i,c,s),o)}function viewProcessorApplyUserOverwrite(t,n,r,i,s,a,o){var u=n.eventCache;let l,e;s=new WriteTreeCompleteChildSource(s,n,a);if(pathIsEmpty(r))e=t.filter.updateFullNode(n.eventCache.getNode(),i,o),l=viewCacheUpdateEventSnap(n,e,!0,t.filter.filtersNodes());else{a=pathGetFront(r);if(".priority"===a)e=t.filter.updatePriority(n.eventCache.getNode(),i),l=viewCacheUpdateEventSnap(n,e,u.isFullyInitialized(),u.isFiltered());else{var c,r=pathPopFront(r),h=u.getNode().getImmediateChild(a);let e;e=pathIsEmpty(r)?i:null!=(c=s.getCompleteChild(a))?".priority"===pathGetBack(r)&&c.getChild(pathParent(r)).isEmpty()?c:c.updateChild(r,i):ChildrenNode.EMPTY_NODE,l=h.equals(e)?n:viewCacheUpdateEventSnap(n,t.filter.updateChild(u.getNode(),a,e,r,s,o),u.isFullyInitialized(),t.filter.filtersNodes())}}return l}function viewProcessorCacheHasChild(e,t){return e.eventCache.isCompleteForChild(t)}function viewProcessorApplyMerge(e,n,t){return t.foreach((e,t)=>{n=n.updateChild(e,t)}),n}function viewProcessorApplyServerMerge(r,i,e,t,s,a,o,u){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let l=i,n;n=pathIsEmpty(e)?t:new ImmutableTree(null).setTree(e,t);const c=i.serverCache.getNode();return n.children.inorderTraversal((e,t)=>{c.hasChild(e)&&(t=viewProcessorApplyMerge(0,i.serverCache.getNode().getImmediateChild(e),t),l=viewProcessorApplyServerOverwrite(r,l,new Path(e),t,s,a,o,u))}),n.children.inorderTraversal((e,t)=>{var n=!i.serverCache.isCompleteForChild(e)&&null===t.value;c.hasChild(e)||n||(n=viewProcessorApplyMerge(0,i.serverCache.getNode().getImmediateChild(e),t),l=viewProcessorApplyServerOverwrite(r,l,new Path(e),n,s,a,o,u))}),l}class View{constructor(e,t){this.query_=e,this.eventRegistrations_=[];var e=this.query_._queryParams,n=new IndexedFilter(e.getIndex()),e=function queryParamsGetNodeFilter(e){return e.loadsAllData()?new IndexedFilter(e.getIndex()):new(e.hasLimit()?LimitedFilter:RangedFilter)(e)}(e),r=(this.processor_=function newViewProcessor(e){return{filter:e}}(e),t.serverCache),t=t.eventCache,i=n.updateFullNode(ChildrenNode.EMPTY_NODE,r.getNode(),null),s=e.updateFullNode(ChildrenNode.EMPTY_NODE,t.getNode(),null),i=new CacheNode(i,r.isFullyInitialized(),n.filtersNodes()),r=new CacheNode(s,t.isFullyInitialized(),e.filtersNodes());this.viewCache_=newViewCache(r,i),this.eventGenerator_=new EventGenerator(this.query_)}get query(){return this.query_}}function viewIsEmpty(e){return 0===e.eventRegistrations_.length}function viewRemoveEventRegistration(n,r,t){const i=[];if(t){(0,d.assert)(null==r,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(e=>{e=e.createCancelEvent(t,a);e&&i.push(e)})}if(r){let t=[];for(let e=0;e<n.eventRegistrations_.length;++e){var s=n.eventRegistrations_[e];if(s.matches(r)){if(r.hasAnyCallback()){t=t.concat(n.eventRegistrations_.slice(e+1));break}}else t.push(s)}n.eventRegistrations_=t}else n.eventRegistrations_=[];return i}function viewApplyOperation(e,t,n,r){t.type===l.MERGE&&null!==t.source.queryId&&((0,d.assert)(viewCacheGetCompleteServerSnap(e.viewCache_),"We should always have a full cache before handling merges"),(0,d.assert)(viewCacheGetCompleteEventSnap(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,t=viewProcessorApplyOperation(e.processor_,i,t,n,r);return function viewProcessorAssertIndexed(e,t){(0,d.assert)(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,d.assert)(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,t.viewCache),(0,d.assert)(t.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=t.viewCache,viewGenerateEventsForChanges_(e,t.changes,t.viewCache.eventCache.getNode(),null)}function viewGenerateEventsForChanges_(e,t,n,r){r=r?[r]:e.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(e.eventGenerator_,t,n,r)}let ie;class SyncPoint{constructor(){this.views=new Map}}function syncPointApplyOperation(t,n,r,i){var e=n.source.queryId;if(null!==e)return e=t.views.get(e),(0,d.assert)(null!=e,"SyncTree gave us an op for an invalid query."),viewApplyOperation(e,n,r,i);{let e=[];for(const s of t.views.values())e=e.concat(viewApplyOperation(s,n,r,i));return e}}function syncPointGetView(e,n,r,i,s){var a=n._queryIdentifier,e=e.views.get(a);if(e)return e;{let e=writeTreeRefCalcCompleteEventCache(r,s?i:null),t=!1;t=!!e||(e=i instanceof ChildrenNode?writeTreeRefCalcCompleteEventChildren(r,i):ChildrenNode.EMPTY_NODE,!1);a=newViewCache(new CacheNode(e,t,!1),new CacheNode(i,s,!1));return new View(n,a)}}function syncPointAddEventRegistration(e,t,n,r,i,s){r=syncPointGetView(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,r),function viewAddEventRegistration(e,t){e.eventRegistrations_.push(t)}(r,n),function viewGetInitialEvents(e,t){var n=e.viewCache_.eventCache;const r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(o,(e,t)=>{r.push(changeChildAdded(e,t))}),n.isFullyInitialized()&&r.push(changeValue(n.getNode())),viewGenerateEventsForChanges_(e,r,n.getNode(),t)}(r,n)}function syncPointRemoveEventRegistration(e,t,n,r){var i=t._queryIdentifier,s=[];let a=[];var o=syncPointHasCompleteView(e);if("default"===i)for(var[u,l]of e.views.entries())a=a.concat(viewRemoveEventRegistration(l,n,r)),viewIsEmpty(l)&&(e.views.delete(u),l.query._queryParams.loadsAllData()||s.push(l.query));else{var c=e.views.get(i);c&&(a=a.concat(viewRemoveEventRegistration(c,n,r)),viewIsEmpty(c))&&(e.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query))}return o&&!syncPointHasCompleteView(e)&&s.push(new(function syncPointGetReferenceConstructor(){return(0,d.assert)(ie,"Reference.ts has not been loaded"),ie}())(t._repo,t._path)),{removed:s,events:a}}function syncPointGetQueryViews(e){var t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function syncPointGetCompleteServerCache(e,t){let n=null;for(const r of e.views.values())n=n||function viewGetCompleteServerCache(e,t){var n=viewCacheGetCompleteServerSnap(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!pathIsEmpty(t)&&!n.getImmediateChild(pathGetFront(t)).isEmpty())?n.getChild(t):null}(r,t);return n}function syncPointViewForQuery(e,t){return t._queryParams.loadsAllData()?syncPointGetCompleteView(e):(t=t._queryIdentifier,e.views.get(t))}function syncPointViewExistsForQuery(e,t){return null!=syncPointViewForQuery(e,t)}function syncPointHasCompleteView(e){return null!=syncPointGetCompleteView(e)}function syncPointGetCompleteView(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let se;let ae=1;class SyncTree{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(e,t,n,r,i){return function writeTreeAddOverwrite(e,t,n,r,i){(0,d.assert)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),e.allWrites.push({path:t,snap:n,writeId:r,visible:i=void 0===i?!0:i}),i&&(e.visibleWrites=compoundWriteAddWrite(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?syncTreeApplyOperationToSyncPoints_(e,new Overwrite(newOperationSourceUser(),t,n)):[]}function syncTreeAckUserWrite(e,t,n=!1){var r=function writeTreeGetWrite(t,n){for(let e=0;e<t.allWrites.length;e++){var r=t.allWrites[e];if(r.writeId===n)return r}return null}(e.pendingWriteTree_,t);if(writeTreeRemoveWrite(e.pendingWriteTree_,t)){let t=new ImmutableTree(null);return null!=r.snap?t=t.set(new Path(""),!0):each(r.children,e=>{t=t.set(new Path(e),!0)}),syncTreeApplyOperationToSyncPoints_(e,new AckUserWrite(r.path,t,n))}return[]}function syncTreeApplyServerOverwrite(e,t,n){return syncTreeApplyOperationToSyncPoints_(e,new Overwrite(newOperationSourceServer(),t,n))}function syncTreeRemoveEventRegistration(n,e,t,r,i=!1){var s=e._path,a=n.syncPointTree_.get(s);let o=[];if(a&&("default"===e._queryIdentifier||syncPointViewExistsForQuery(a,e))){t=syncPointRemoveEventRegistration(a,e,t,r),a=(!function syncPointIsEmpty(e){return 0===e.views.size}(a)||(n.syncPointTree_=n.syncPointTree_.remove(s)),t.removed);if(o=t.events,!i){t=-1!==a.findIndex(e=>e._queryParams.loadsAllData()),i=n.syncPointTree_.findOnPath(s,(e,t)=>syncPointHasCompleteView(t));if(t&&!i){s=n.syncPointTree_.subtree(s);if(!s.isEmpty()){var u=function syncTreeCollectDistinctViewsForSubTree_(e){return e.fold((e,t,r)=>{if(t&&syncPointHasCompleteView(t))return[syncPointGetCompleteView(t)];{let n=[];return t&&(n=syncPointGetQueryViews(t)),each(r,(e,t)=>{n=n.concat(t)}),n}})}(s);for(let e=0;e<u.length;++e){var l=u[e],c=l.query,l=syncTreeCreateListenerForView_(n,l);n.listenProvider_.startListening(syncTreeQueryForListening_(c),syncTreeTagForQuery(n,c),l.hashFn,l.onComplete)}}}!i&&0<a.length&&!r&&(t?n.listenProvider_.stopListening(syncTreeQueryForListening_(e),null):a.forEach(e=>{var t=n.queryToTagMap.get(syncTreeMakeQueryKey_(e));n.listenProvider_.stopListening(syncTreeQueryForListening_(e),t)}))}!function syncTreeRemoveTags_(t,n){for(let e=0;e<n.length;++e){var r,i=n[e];i._queryParams.loadsAllData()||(i=syncTreeMakeQueryKey_(i),r=t.queryToTagMap.get(i),t.queryToTagMap.delete(i),t.tagToQueryMap.delete(r))}}(n,a)}return o}function syncTreeApplyTaggedQueryOverwrite(e,t,n,r){var i,r=syncTreeQueryKeyForTag_(e,r);return null!=r?(i=(r=syncTreeParseQueryKey_(r)).path,r=r.queryId,t=newRelativePath(i,t),syncTreeApplyTaggedOperation_(e,i,new Overwrite(newOperationSourceServerTaggedQuery(r),t,n))):[]}function syncTreeAddEventRegistration(e,t,n,r=!1){const i=t._path;let s=null,a=!1,o=(e.syncPointTree_.foreachOnPath(i,(e,t)=>{e=newRelativePath(e,i);s=s||syncPointGetCompleteServerCache(t,e),a=a||syncPointHasCompleteView(t)}),e.syncPointTree_.get(i));o?(a=a||syncPointHasCompleteView(o),s=s||syncPointGetCompleteServerCache(o,new Path(""))):(o=new SyncPoint,e.syncPointTree_=e.syncPointTree_.set(i,o));let u;null!=s?u=!0:(u=!1,s=ChildrenNode.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((e,t)=>{t=syncPointGetCompleteServerCache(t,new Path(""));t&&(s=s.updateImmediateChild(e,t))}));var l,c=syncPointViewExistsForQuery(o,t),h=(c||t._queryParams.loadsAllData()||(l=syncTreeMakeQueryKey_(t),(0,d.assert)(!e.queryToTagMap.has(l),"View does not exist, but we have a tag"),h=function syncTreeGetNextQueryTag_(){return ae++}(),e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)),writeTreeChildWrites(e.pendingWriteTree_,i));let p=syncPointAddEventRegistration(o,t,n,h,s,u);return c||a||r||(l=syncPointViewForQuery(o,t),p=p.concat(function syncTreeSetupListener_(t,e,n){var r=e._path,i=syncTreeTagForQuery(t,e),n=syncTreeCreateListenerForView_(t,n),e=t.listenProvider_.startListening(syncTreeQueryForListening_(e),i,n.hashFn,n.onComplete),n=t.syncPointTree_.subtree(r);if(i)(0,d.assert)(!syncPointHasCompleteView(n.value),"If we're adding a query, it shouldn't be shadowed");else{var s=n.fold((e,t,r)=>{if(!pathIsEmpty(e)&&t&&syncPointHasCompleteView(t))return[syncPointGetCompleteView(t).query];{let n=[];return t&&(n=n.concat(syncPointGetQueryViews(t).map(e=>e.query))),each(r,(e,t)=>{n=n.concat(t)}),n}});for(let e=0;e<s.length;++e){var a=s[e];t.listenProvider_.stopListening(syncTreeQueryForListening_(a),syncTreeTagForQuery(t,a))}}return e}(e,t,l))),p}function syncTreeCalcCompleteEventCache(e,n,t){var r=e.pendingWriteTree_,e=e.syncPointTree_.findOnPath(n,(e,t)=>{t=syncPointGetCompleteServerCache(t,newRelativePath(e,n));if(t)return t});return writeTreeCalcCompleteEventCache(r,n,e,t,!0)}function syncTreeApplyOperationToSyncPoints_(e,t){return function syncTreeApplyOperationHelper_(t,n,r,i){{if(pathIsEmpty(t.path))return syncTreeApplyOperationDescendantsHelper_(t,n,r,i);{const s=n.get(new Path(""));null==r&&null!=s&&(r=syncPointGetCompleteServerCache(s,new Path("")));let e=[];const a=pathGetFront(t.path),o=t.operationForChild(a),u=n.children.get(a);if(u&&o){const l=r?r.getImmediateChild(a):null,c=writeTreeRefChild(i,a);e=e.concat(syncTreeApplyOperationHelper_(o,u,l,c))}return e=s?e.concat(syncPointApplyOperation(s,t,i,r)):e}}}(t,e.syncPointTree_,null,writeTreeChildWrites(e.pendingWriteTree_,new Path("")))}function syncTreeApplyOperationDescendantsHelper_(i,e,s,a){var t=e.get(new Path(""));null==s&&null!=t&&(s=syncPointGetCompleteServerCache(t,new Path("")));let o=[];return e.children.inorderTraversal((e,t)=>{var n=s?s.getImmediateChild(e):null,r=writeTreeRefChild(a,e),e=i.operationForChild(e);e&&(o=o.concat(syncTreeApplyOperationDescendantsHelper_(e,t,n,r)))}),o=t?o.concat(syncPointApplyOperation(t,i,a,s)):o}function syncTreeCreateListenerForView_(t,e){const n=e.query,r=syncTreeTagForQuery(t,n);return{hashFn:()=>{return(function viewGetServerCache(e){return e.viewCache_.serverCache.getNode()}(e)||ChildrenNode.EMPTY_NODE).hash()},onComplete:e=>{return"ok"===e?r?function syncTreeApplyTaggedListenComplete(e,t,n){var r;return(n=syncTreeQueryKeyForTag_(e,n))?(r=(n=syncTreeParseQueryKey_(n)).path,n=n.queryId,t=newRelativePath(r,t),syncTreeApplyTaggedOperation_(e,r,new ListenComplete(newOperationSourceServerTaggedQuery(n),t))):[]}(t,n._path,r):function syncTreeApplyListenComplete(e,t){return syncTreeApplyOperationToSyncPoints_(e,new ListenComplete(newOperationSourceServer(),t))}(t,n._path):(e=function errorForServerCode(e,t){let n="Unknown Error";return"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable"),(t=new Error(e+" at "+t._path.toString()+": "+n)).code=e.toUpperCase(),t}(e,n),syncTreeRemoveEventRegistration(t,n,null,e))}}}function syncTreeTagForQuery(e,t){t=syncTreeMakeQueryKey_(t);return e.queryToTagMap.get(t)}function syncTreeMakeQueryKey_(e){return e._path.toString()+"$"+e._queryIdentifier}function syncTreeQueryKeyForTag_(e,t){return e.tagToQueryMap.get(t)}function syncTreeParseQueryKey_(e){var t=e.indexOf("$");return(0,d.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Path(e.substr(0,t))}}function syncTreeApplyTaggedOperation_(e,t,n){var r=e.syncPointTree_.get(t),e=((0,d.assert)(r,"Missing sync point for query tag that we're tracking"),writeTreeChildWrites(e.pendingWriteTree_,t));return syncPointApplyOperation(r,n,e,null)}function syncTreeQueryForListening_(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(function syncTreeGetReferenceConstructor(){return(0,d.assert)(se,"Reference.ts has not been loaded"),se}())(e._repo,e._path):e}class ExistingValueProvider{constructor(e){this.node_=e}getImmediateChild(e){e=this.node_.getImmediateChild(e);return new ExistingValueProvider(e)}node(){return this.node_}}class DeferredValueProvider{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){e=pathChild(this.path_,e);return new DeferredValueProvider(this.syncTree_,e)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}function zMa(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}function AMa(e,t,n){return e&&"object"==typeof e?((0,d.assert)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?oe(e[".sv"],t,n):"object"==typeof e[".sv"]?ue(e[".sv"],t):void(0,d.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e}const oe=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,d.assert)(!1,"Unexpected server value: "+e)},ue=function(e,t,n){e.hasOwnProperty("increment")||(0,d.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var e=e.increment,t=("number"!=typeof e&&(0,d.assert)(!1,"Unexpected increment value: "+e),t.node());return(0,d.assert)(null!=t,"Expected ChildrenNode.EMPTY_NODE for nulls"),!t.isLeafNode()||"number"!=typeof(t=t.getValue())?e:t+e},le=function(e,t,n,r){return resolveDeferredValue(t,new DeferredValueProvider(n,e),r)},ce=function(e,t,n){return resolveDeferredValue(e,new ExistingValueProvider(t),n)};function resolveDeferredValue(e,r,i){var t,n,s=e.getPriority().val(),s=AMa(s,r.getImmediateChild(".priority"),i);let a;return e.isLeafNode()?(n=e,(t=AMa(n.getValue(),r,i))!==n.getValue()||s!==n.getPriority().val()?new LeafNode(t,nodeFromJSON(s)):e):(n=e,s!==(a=n).getPriority().val()&&(a=a.updatePriority(new LeafNode(s))),n.forEachChild(o,(e,t)=>{var n=resolveDeferredValue(t,r.getImmediateChild(e),i);n!==t&&(a=a.updateImmediateChild(e,n))}),a)}class Tree{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function treeSubTree(e,t){let n=t instanceof Path?t:new Path(t),r=e,i=pathGetFront(n);for(;null!==i;){var s=(0,d.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new Tree(i,r,s),n=pathPopFront(n),i=pathGetFront(n)}return r}function treeSetValue(e,t){e.node.value=t,treeUpdateParents(e)}function treeHasChildren(e){return 0<e.node.childCount}function treeForEachChild(n,r){each(n.node.children,(e,t)=>{r(new Tree(e,n,t))})}function treeGetPath(e){return new Path(null===e.parent?e.name:treeGetPath(e.parent)+"/"+e.name)}function treeUpdateParents(e){null!==e.parent&&!function treeUpdateChild(e,t,n){var r=function treeIsEmpty(e){return void 0===e.node.value&&!treeHasChildren(e)}(n),i=(0,d.contains)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,treeUpdateParents(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,treeUpdateParents(e))}(e.parent,e.name,e)}const he=/[\[\].#$\/\u0000-\u001F\u007F]/,pe=/[\[\].#$\u0000-\u001F\u007F]/,de=10485760,fe=function(e){return"string"==typeof e&&0!==e.length&&!he.test(e)},me=function(e){return"string"==typeof e&&0!==e.length&&!pe.test(e)},ge=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!b(e)||e&&"object"==typeof e&&(0,d.contains)(e,".sv")},u=function(e,t,n,r){r&&void 0===t||ye((0,d.errorPrefix)(e,"value"),t,n)},ye=function(i,e,t){const s=t instanceof Path?new ValidationPath(t,i):t;if(void 0===e)throw new Error(i+"contains undefined "+validationPathToErrorString(s));if("function"==typeof e)throw new Error(i+"contains a function "+validationPathToErrorString(s)+" with contents = "+e.toString());if(b(e))throw new Error(i+"contains "+e.toString()+" "+validationPathToErrorString(s));if("string"==typeof e&&e.length>de/3&&(0,d.stringLength)(e)>de)throw new Error(i+"contains a string greater than "+de+" utf8 bytes "+validationPathToErrorString(s)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let n=!1,r=!1;if(each(e,(e,t)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!fe(e)))throw new Error(i+" contains an invalid key ("+e+") "+validationPathToErrorString(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function validationPathPush(e,t){0<e.parts_.length&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,d.stringLength)(t),validationPathCheckValid(e)}(s,e),ye(i,t,s),function validationPathPop(e){var t=e.parts_.pop();e.byteLength_-=(0,d.stringLength)(t),0<e.parts_.length&&--e.byteLength_}(s)}),n&&r)throw new Error(i+' contains ".value" child '+validationPathToErrorString(s)+" in addition to actual children.")}},ve=function(e,t,n,r){if(!r||void 0!==t){const o=(0,d.errorPrefix)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const u=[];each(t,(e,t)=>{e=new Path(e);if(ye(o,t,pathChild(n,e)),".priority"===pathGetBack(e)&&!ge(t))throw new Error(o+"contains an invalid value for '"+e.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(e)});{var i=o;var s=u;let e,t;for(e=0;e<s.length;e++){var a=pathSlice(t=s[e]);for(let e=0;e<a.length;e++)if((".priority"!==a[e]||e!==a.length-1)&&!fe(a[e]))throw new Error(i+"contains an invalid key ("+a[e]+") in path "+t.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}s.sort(pathCompare);let n=null;for(e=0;e<s.length;e++){if(t=s[e],null!==n&&pathContains(n,t))throw new Error(i+"contains a path "+n.toString()+" that is ancestor of another path "+t.toString());n=t}}}},Ce=function(e,t,n){if(!n||void 0!==t){if(b(t))throw new Error((0,d.errorPrefix)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ge(t))throw new Error((0,d.errorPrefix)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},De=function(e,t,n,r){if(!(r&&void 0===n||fe(n)))throw new Error((0,d.errorPrefix)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ee=function(e,t,n,r){if(!(r&&void 0===n||me(n)))throw new Error((0,d.errorPrefix)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_e=(Ne._validatePathString=Ee,function(e,t,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),Ee(e,t,n,r)}),m=function(e,t){if(".info"===pathGetFront(t))throw new Error(e+" failed = Can't modify data under /.info/")},Se=(Ne._validateWritablePath=m,function(e,t){var n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!fe(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&(t=(t=n)&&t.replace(/^\/*\.info(\/|$)/,"/"),!me(t)))throw new Error((0,d.errorPrefix)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')});class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(t,n){let r=null;for(let e=0;e<n.length;e++){var i=n[e],s=i.getPath();null===r||pathEquals(s,r.path)||(t.eventLists_.push(r),r=null),(r=null===r?{events:[],path:s}:r).events.push(i)}r&&t.eventLists_.push(r)}function eventQueueRaiseEventsAtPath(e,t,n){eventQueueQueueEvents(e,n),eventQueueRaiseQueuedEventsMatchingPredicate(e,e=>pathEquals(e,t))}function eventQueueRaiseEventsForChangedPath(e,t,n){eventQueueQueueEvents(e,n),eventQueueRaiseQueuedEventsMatchingPredicate(e,e=>pathContains(e,t)||pathContains(t,e))}function eventQueueRaiseQueuedEventsMatchingPredicate(t,n){t.recursionDepth_++;let r=!0;for(let e=0;e<t.eventLists_.length;e++){var i=t.eventLists_[e];i&&(n(i.path)?(function eventListRaise(t){for(let e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),_&&h("event: "+r.toString()),B(n))}}(t.eventLists_[e]),t.eventLists_[e]=null):r=!1)}r&&(t.eventLists_=[]),t.recursionDepth_--}const xe="repo_interrupt",be=25;class Repo{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(a,e,t){if(a.stats_=statsManagerGetCollection(a.repoInfo_),a.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))a.server_=new ReadonlyRestClient(a.repoInfo_,(e,t,n,r)=>{repoOnDataUpdate(a,e,t,n,r)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(a,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,d.stringify)(t)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}a.persistentConnection_=new PersistentConnection(a.repoInfo_,e,(e,t,n,r)=>{repoOnDataUpdate(a,e,t,n,r)},e=>{repoOnConnectStatus(a,e)},e=>{!function repoOnServerInfoUpdate(n,e){each(e,(e,t)=>{repoUpdateInfo(n,e,t)})}(a,e)},a.authTokenProvider_,a.appCheckProvider_,t),a.server_=a.persistentConnection_}a.authTokenProvider_.addTokenChangeListener(e=>{a.server_.refreshAuthToken(e)}),a.appCheckProvider_.addTokenChangeListener(e=>{a.server_.refreshAppCheckToken(e.token)}),a.statsReporter_=function statsManagerGetOrCreateReporter(e,t){return e=e.toString(),R[e]||(R[e]=t()),R[e]}(a.repoInfo_,()=>new StatsReporter(a.stats_,a.server_)),a.infoData_=new SnapshotHolder,a.infoSyncTree_=new SyncTree({startListening:(e,t,n,r)=>{let i=[];var s=a.infoData_.getNode(e._path);return s.isEmpty()||(i=syncTreeApplyServerOverwrite(a.infoSyncTree_,e._path,s),setTimeout(()=>{r("ok")},0)),i},stopListening:()=>{}}),repoUpdateInfo(a,"connected",!1),a.serverSyncTree_=new SyncTree({startListening:(n,e,t,r)=>(a.server_.listen(n,t,e,(e,t)=>{e=r(e,t);eventQueueRaiseEventsForChangedPath(a.eventQueue_,n._path,e)}),[]),stopListening:(e,t)=>{a.server_.unlisten(e,t)}})}function repoServerTime(e){e=e.infoData_.getNode(new Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function repoGenerateServerValues(e){return zMa({timestamp:repoServerTime(e)})}function repoOnDataUpdate(e,t,n,r,i){e.dataUpdateCount++;var s=new Path(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[],o=s;0<(a=i?r?(t=(0,d.map)(n,e=>nodeFromJSON(e)),function syncTreeApplyTaggedQueryMerge(e,t,n,r){var i;return(r=syncTreeQueryKeyForTag_(e,r))?(i=(r=syncTreeParseQueryKey_(r)).path,r=r.queryId,t=newRelativePath(i,t),n=ImmutableTree.fromObject(n),syncTreeApplyTaggedOperation_(e,i,new Merge(newOperationSourceServerTaggedQuery(r),t,n))):[]}(e.serverSyncTree_,s,t,i)):(t=nodeFromJSON(n),syncTreeApplyTaggedQueryOverwrite(e.serverSyncTree_,s,t,i)):r?(t=(0,d.map)(n,e=>nodeFromJSON(e)),function syncTreeApplyServerMerge(e,t,n){return n=ImmutableTree.fromObject(n),syncTreeApplyOperationToSyncPoints_(e,new Merge(newOperationSourceServer(),t,n))}(e.serverSyncTree_,s,t)):(i=nodeFromJSON(n),syncTreeApplyServerOverwrite(e.serverSyncTree_,s,i))).length&&(o=repoRerunTransactions(e,s)),eventQueueRaiseEventsForChangedPath(e.eventQueue_,o,a)}function repoOnConnectStatus(e,t){repoUpdateInfo(e,"connected",t),!1===t&&function repoRunOnDisconnectEvents(n){repoLog(n,"onDisconnectEvents");const r=repoGenerateServerValues(n),i=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(n.onDisconnect_,new Path(""),(e,t)=>{t=le(e,t,n.serverSyncTree_,r);sparseSnapshotTreeRemember(i,e,t)});let s=[];sparseSnapshotTreeForEachTree(i,new Path(""),(e,t)=>{s=s.concat(syncTreeApplyServerOverwrite(n.serverSyncTree_,e,t));t=repoAbortTransactions(n,e);repoRerunTransactions(n,t)}),n.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(n.eventQueue_,new Path(""),s)}(e)}function repoUpdateInfo(e,t,n){t=new Path("/.info/"+t),n=nodeFromJSON(n),e.infoData_.updateSnapshot(t,n),n=syncTreeApplyServerOverwrite(e.infoSyncTree_,t,n);eventQueueRaiseEventsForChangedPath(e.eventQueue_,t,n)}function repoSetWithPriority(r,i,e,t,s){repoLog(r,"set",{path:i.toString(),value:e,priority:t});var n=repoGenerateServerValues(r),e=nodeFromJSON(e,t),t=syncTreeCalcCompleteEventCache(r.serverSyncTree_,i),t=ce(e,t,n);const a=r.nextWriteId_++;n=syncTreeApplyUserOverwrite(r.serverSyncTree_,i,t,a,!0),eventQueueQueueEvents(r.eventQueue_,n),r.server_.put(i.toString(),e.val(!0),(e,t)=>{var n="ok"===e,n=(n||f("set at "+i+" failed: "+e),syncTreeAckUserWrite(r.serverSyncTree_,a,!n));eventQueueRaiseEventsForChangedPath(r.eventQueue_,i,n),repoCallOnCompleteCallback(0,s,e,t)}),t=repoAbortTransactions(r,i);repoRerunTransactions(r,t),eventQueueRaiseEventsForChangedPath(r.eventQueue_,t,[])}function repoOnDisconnectCancel(n,r,i){n.server_.onDisconnectCancel(r.toString(),(e,t)=>{"ok"===e&&!function sparseSnapshotTreeForget(n,e){var t;return pathIsEmpty(e)?(n.value=null,n.children.clear(),!0):null!==n.value?!n.value.isLeafNode()&&(t=n.value,n.value=null,t.forEachChild(o,(e,t)=>{sparseSnapshotTreeRemember(n,new Path(e),t)}),sparseSnapshotTreeForget(n,e)):!(0<n.children.size)||(t=pathGetFront(e),e=pathPopFront(e),n.children.has(t)&&sparseSnapshotTreeForget(n.children.get(t),e)&&n.children.delete(t),0===n.children.size)}(n.onDisconnect_,r),repoCallOnCompleteCallback(0,i,e,t)})}function repoOnDisconnectSet(n,r,e,i){const s=nodeFromJSON(e);n.server_.onDisconnectPut(r.toString(),s.val(!0),(e,t)=>{"ok"===e&&sparseSnapshotTreeRemember(n.onDisconnect_,r,s),repoCallOnCompleteCallback(0,i,e,t)})}function repoRemoveEventCallbackForQuery(e,t,n){let r;r=".info"===pathGetFront(t._path)?syncTreeRemoveEventRegistration(e.infoSyncTree_,t,n):syncTreeRemoveEventRegistration(e.serverSyncTree_,t,n),eventQueueRaiseEventsAtPath(e.eventQueue_,t._path,r)}function repoInterrupt(e){e.persistentConnection_&&e.persistentConnection_.interrupt(xe)}function repoLog(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),h(n,...t)}function repoCallOnCompleteCallback(e,r,i,s){r&&B(()=>{if("ok"===i)r(null);else{var t=(i||"error").toUpperCase();let e=t;s&&(e+=": "+s);var n=new Error(e);n.code=t,r(n)}})}function repoGetLatestState(e,t,n){return syncTreeCalcCompleteEventCache(e.serverSyncTree_,t,n)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(t,e=t.transactionQueueTree_){var n;e||repoPruneCompletedTransactionsBelowNode(t,e),e.node.value?(n=repoBuildTransactionQueue(t,e),(0,d.assert)(0<n.length,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function repoSendTransactionQueue(i,s,a){var e=a.map(e=>e.currentWriteId),e=repoGetLatestState(i,s,e);let t=e;e=e.hash();for(let e=0;e<a.length;e++){var n=a[e],r=((0,d.assert)(0===n.status,"tryToSendTransactionQueue_: items in queue should all be run."),n.status=1,n.retryCount++,newRelativePath(s,n.path));t=t.updateChild(r,n.currentOutputSnapshotRaw)}const o=t.val(!0),u=s;i.server_.put(u.toString(),o,t=>{repoLog(i,"transaction put response",{path:u.toString(),status:t});let n=[];if("ok"===t){var r=[];for(let e=0;e<a.length;e++)a[e].status=2,n=n.concat(syncTreeAckUserWrite(i.serverSyncTree_,a[e].currentWriteId)),a[e].onComplete&&r.push(()=>a[e].onComplete(null,!0,a[e].currentOutputSnapshotResolved)),a[e].unwatcher();repoPruneCompletedTransactionsBelowNode(i,treeSubTree(i.transactionQueueTree_,s)),repoSendReadyTransactions(i,i.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(i.eventQueue_,s,n);for(let e=0;e<r.length;e++)B(r[e])}else{if("datastale"===t)for(let e=0;e<a.length;e++)3===a[e].status?a[e].status=4:a[e].status=0;else{f("transaction at "+u.toString()+" failed: "+t);for(let e=0;e<a.length;e++)a[e].status=4,a[e].abortReason=t}repoRerunTransactions(i,s)}},e)}(t,treeGetPath(e),n)):treeHasChildren(e)&&treeForEachChild(e,e=>{repoSendReadyTransactions(t,e)})}function repoRerunTransactions(e,t){var t=repoGetAncestorTransactionNode(e,t),n=treeGetPath(t);return function repoRerunTransactionQueue(i,s,a){if(0!==s.length){var o=[];let r=[];var u=s.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let n=0;n<s.length;n++){var l=s[n],c=newRelativePath(a,l.path);let e=!1,t;if((0,d.assert)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)e=!0,t=l.abortReason,r=r.concat(syncTreeAckUserWrite(i.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=be)e=!0,t="maxretry",r=r.concat(syncTreeAckUserWrite(i.serverSyncTree_,l.currentWriteId,!0));else{var c=repoGetLatestState(i,l.path,u),h=(l.currentInputSnapshot=c,s[n].update(c.val()));if(void 0!==h){ye("transaction failed: Data returned ",h,l.path);let e=nodeFromJSON(h);"object"==typeof h&&null!=h&&(0,d.contains)(h,".priority")||(e=e.updatePriority(c.getPriority()));var h=l.currentWriteId,p=repoGenerateServerValues(i),c=ce(e,c,p);l.currentOutputSnapshotRaw=e,l.currentOutputSnapshotResolved=c,l.currentWriteId=i.nextWriteId_++,u.splice(u.indexOf(h),1),r=(r=r.concat(syncTreeApplyUserOverwrite(i.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally))).concat(syncTreeAckUserWrite(i.serverSyncTree_,h,!0))}else e=!0,t="nodata",r=r.concat(syncTreeAckUserWrite(i.serverSyncTree_,l.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(i.eventQueue_,a,r),r=[],e&&(s[n].status=2,function(e){setTimeout(e,Math.floor(0))}(s[n].unwatcher),s[n].onComplete)&&("nodata"===t?o.push(()=>s[n].onComplete(null,!1,s[n].currentInputSnapshot)):o.push(()=>s[n].onComplete(new Error(t),!1,null)))}repoPruneCompletedTransactionsBelowNode(i,i.transactionQueueTree_);for(let e=0;e<o.length;e++)B(o[e]);repoSendReadyTransactions(i,i.transactionQueueTree_)}}(e,repoBuildTransactionQueue(e,t),n),n}function repoGetAncestorTransactionNode(e,t){let n,r=e.transactionQueueTree_;for(n=pathGetFront(t);null!==n&&void 0===r.node.value;)r=treeSubTree(r,n),t=pathPopFront(t),n=pathGetFront(t);return r}function repoBuildTransactionQueue(e,t){var n=[];return function repoAggregateTransactionQueuesForNode(t,e,n){const r=e.node.value;if(r)for(let e=0;e<r.length;e++)n.push(r[e]);treeForEachChild(e,e=>{repoAggregateTransactionQueuesForNode(t,e,n)})}(e,t,n),n.sort((e,t)=>e.order-t.order),n}function repoPruneCompletedTransactionsBelowNode(t,e){var n=e.node.value;if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,treeSetValue(e,0<n.length?n:void 0)}treeForEachChild(e,e=>{repoPruneCompletedTransactionsBelowNode(t,e)})}function repoAbortTransactions(t,e){var n=treeGetPath(repoGetAncestorTransactionNode(t,e)),e=treeSubTree(t.transactionQueueTree_,e);return function treeForEachAncestor(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return;r=r.parent}}(e,e=>{repoAbortTransactionsOnNode(t,e)}),repoAbortTransactionsOnNode(t,e),function treeForEachDescendant(e,t,n,r){n&&!r&&t(e),treeForEachChild(e,e=>{treeForEachDescendant(e,t,!0,r)}),n&&r&&t(e)}(e,e=>{repoAbortTransactionsOnNode(t,e)}),n}function repoAbortTransactionsOnNode(r,e){var i=e.node.value;if(i){var s=[];let t=[],n=-1;for(let e=0;e<i.length;e++)3!==i[e].status&&(1===i[e].status?((0,d.assert)(n===e-1,"All SENT items should be at beginning of queue."),i[n=e].status=3,i[e].abortReason="set"):((0,d.assert)(0===i[e].status,"Unexpected transaction status in abort"),i[e].unwatcher(),t=t.concat(syncTreeAckUserWrite(r.serverSyncTree_,i[e].currentWriteId,!0)),i[e].onComplete&&s.push(i[e].onComplete.bind(null,new Error("set"),!1,null))));-1===n?treeSetValue(e,void 0):i.length=n+1,eventQueueRaiseEventsForChangedPath(r.eventQueue_,treeGetPath(e),t);for(let e=0;e<s.length;e++)B(s[e])}}const we=function(e,t){var e=Ae(e),n=e.namespace,r=("firebase.com"===e.domain&&c(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||c("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&f("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),"ws"===e.scheme||"wss"===e.scheme);return{repoInfo:new RepoInfo(e.host,e.secure,n,r,t,"",n!==e.subdomain),path:new Path(e.pathString)}},Ae=function(r){let i="",s="",a="",o="",u="",l=!0,c="https",h=443;if("string"==typeof r){let e=r.indexOf("//"),t=(0<=e&&(c=r.substring(0,e-1),r=r.substring(e+2)),r.indexOf("/")),n=(-1===t&&(t=r.length),r.indexOf("?"));-1===n&&(n=r.length),i=r.substring(0,Math.min(t,n)),t<n&&(o=function decodePath(e){let n="";var r=e.split("/");for(let t=0;t<r.length;t++)if(0<r[t].length){let e=r[t];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(e){}n+="/"+e}return n}(r.substring(t,n)));var r=function decodeQuery(e){var t,n={};for(const r of(e="?"===e.charAt(0)?e.substring(1):e).split("&"))0!==r.length&&(2===(t=r.split("=")).length?n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]):f(`Invalid query segment '${r}' in query '${e}'`));return n}(r.substring(Math.min(r.length,n))),p=(0<=(e=i.indexOf(":"))?(l="https"===c||"wss"===c,h=parseInt(i.substring(e+1),10)):e=i.length,i.slice(0,e));"localhost"===p.toLowerCase()?s="localhost":p.split(".").length<=2?s=p:(p=i.indexOf("."),a=i.substring(0,p).toLowerCase(),s=i.substring(p+1),u=a),"ns"in r&&(u=r.ns)}return{host:i,port:h,domain:s,subdomain:a,secure:l,scheme:c,pathString:o,namespace:u}};class DataEvent{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){var e=this.snapshot.ref;return("value"===this.eventType?e:e.parent)._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,d.stringify)(this.snapshot.exportVal())}}class CancelEvent{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class CallbackContext{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,d.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class OnDisconnect{constructor(e,t){this._repo=e,this._path=t}cancel(){var e=new d.Deferred;return repoOnDisconnectCancel(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){m("OnDisconnect.remove",this._path);var e=new d.Deferred;return repoOnDisconnectSet(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){m("OnDisconnect.set",this._path),u("OnDisconnect.set",e,this._path,!1);var t=new d.Deferred;return repoOnDisconnectSet(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){m("OnDisconnect.setWithPriority",this._path),u("OnDisconnect.setWithPriority",e,this._path,!1),Ce("OnDisconnect.setWithPriority",t,!1);var n=new d.Deferred;return function repoOnDisconnectSetWithPriority(n,r,e,t,i){const s=nodeFromJSON(e,t);n.server_.onDisconnectPut(r.toString(),s.val(!0),(e,t)=>{"ok"===e&&sparseSnapshotTreeRemember(n.onDisconnect_,r,s),repoCallOnCompleteCallback(0,i,e,t)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){m("OnDisconnect.update",this._path),ve("OnDisconnect.update",e,this._path,!1);var t=new d.Deferred;return function repoOnDisconnectUpdate(n,r,i,s){(0,d.isEmpty)(i)?(h("onDisconnect().update() called with empty data.  Don't do anything."),repoCallOnCompleteCallback(0,s,"ok",void 0)):n.server_.onDisconnectMerge(r.toString(),i,(e,t)=>{"ok"===e&&each(i,(e,t)=>{t=nodeFromJSON(t);sparseSnapshotTreeRemember(n.onDisconnect_,pathChild(r,e),t)}),repoCallOnCompleteCallback(0,s,e,t)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}Ne.OnDisconnect=OnDisconnect;class QueryImpl{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){var e=queryParamsGetQueryObject(this._queryParams),e=FKa(e);return"{}"===e?"default":e}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(e){var t,n;return(e=(0,d.getModularInstance)(e))instanceof QueryImpl&&(t=this._repo===e._repo,n=pathEquals(this._path,e._path),e=this._queryIdentifier===e._queryIdentifier,t)&&n&&e}toJSON(){return this.toString()}toString(){return this._repo.toString()+function pathToUrlEncodedString(t){let n="";for(let e=t.pieceNum_;e<t.pieces_.length;e++)""!==t.pieces_[e]&&(n+="/"+encodeURIComponent(String(t.pieces_[e])));return n||"/"}(this._path)}}function validateNoPreviousOrderByCall(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function validateQueryEndpoints(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===p){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==s)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==a)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===o){if(null!=t&&!ge(t)||null!=n&&!ge(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,d.assert)(e.getIndex()instanceof PathIndex||e.getIndex()===$,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function validateLimit(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ReferenceImpl extends(Ne._QueryImpl=QueryImpl){constructor(e,t){super(e,t,new QueryParams,!1)}get parent(){var e=pathParent(this._path);return null===e?null:new ReferenceImpl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}Ne._ReferenceImpl=ReferenceImpl;class DataSnapshot{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){var t=new Path(e),e=child(this.ref,e);return new DataSnapshot(this._node.getChild(t),e,o)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(e,t)=>n(new DataSnapshot(t,child(this.ref,e),o)))}hasChild(e){e=new Path(e);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ref(e,t){return(e=(0,d.getModularInstance)(e))._checkNotDeleted("ref"),void 0!==t?child(e._root,t):e._root}function child(e,t){return(null===pathGetFront((e=(0,d.getModularInstance)(e))._path)?_e:Ee)("child","path",t,!1),new ReferenceImpl(e._repo,pathChild(e._path,t))}function set(e,t){e=(0,d.getModularInstance)(e),m("set",e._path),u("set",t,e._path,!1);var n=new d.Deferred;return repoSetWithPriority(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}Ne.DataSnapshot=DataSnapshot;class ValueEventRegistration{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){var n=t._queryParams.getIndex();return new DataEvent("value",this,new DataSnapshot(e.snapshotNode,new ReferenceImpl(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CancelEvent(this,e,t):null}matches(e){return e instanceof ValueEventRegistration&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ChildEventRegistration{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){e="children_added"===e?"child_added":e;return this.eventType===("children_removed"===e?"child_removed":e)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CancelEvent(this,e,t):null}createEvent(e,t){(0,d.assert)(null!=e.childName,"Child events should have a childName.");var n=child(new ReferenceImpl(t._repo,t._path),e.childName),t=t._queryParams.getIndex();return new DataEvent(e.type,this,new DataSnapshot(e.snapshotNode,n,t),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ChildEventRegistration&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function addEventListener(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const o=t;r=(e,t)=>{repoRemoveEventCallbackForQuery(n._repo,n,a),o(e,t)};r.userCallback=t.userCallback,r.context=t.context,t=r}i=new CallbackContext(t,s||void 0);const a="value"===e?new ValueEventRegistration(i):new ChildEventRegistration(e,i);return function repoAddEventCallbackForQuery(e,t,n){let r;r=".info"===pathGetFront(t._path)?syncTreeAddEventRegistration(e.infoSyncTree_,t,n):syncTreeAddEventRegistration(e.serverSyncTree_,t,n),eventQueueRaiseEventsAtPath(e.eventQueue_,t._path,r)}(n._repo,n,a),()=>repoRemoveEventCallbackForQuery(n._repo,n,a)}function onValue(e,t,n,r){return addEventListener(e,"value",t,n,r)}class QueryConstraint{}class QueryEndAtConstraint extends(Ne.QueryConstraint=QueryConstraint){constructor(e,t){super(),this._value=e,this._key=t}_apply(e){u("endAt",this._value,e._path,!0);var t=queryParamsEndAt(e._queryParams,this._value,this._key);if(validateLimit(t),validateQueryEndpoints(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new QueryImpl(e._repo,e._path,t,e._orderByCalled)}}class QueryEndBeforeConstraint extends QueryConstraint{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){u("endBefore",this._value,e._path,!1);var t=function queryParamsEndBefore(e,t,n){let r,i;return(i=e.index_===p?queryParamsEndAt(e,t="string"==typeof t?oMa(t):t,n):queryParamsEndAt(e,t,r=null==n?s:oMa(n))).endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(validateLimit(t),validateQueryEndpoints(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new QueryImpl(e._repo,e._path,t,e._orderByCalled)}}class QueryStartAtConstraint extends QueryConstraint{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){u("startAt",this._value,e._path,!0);var t=queryParamsStartAt(e._queryParams,this._value,this._key);if(validateLimit(t),validateQueryEndpoints(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new QueryImpl(e._repo,e._path,t,e._orderByCalled)}}class QueryStartAfterConstraint extends QueryConstraint{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){u("startAfter",this._value,e._path,!1);var t=function queryParamsStartAfter(t,n,r){let i;if(t.index_===p)"string"==typeof n&&(n=nMa(n)),i=queryParamsStartAt(t,n,r);else{let e;e=null==r?a:nMa(r),i=queryParamsStartAt(t,n,e)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(validateLimit(t),validateQueryEndpoints(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new QueryImpl(e._repo,e._path,t,e._orderByCalled)}}class QueryLimitToFirstConstraint extends QueryConstraint{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new QueryImpl(e._repo,e._path,function queryParamsLimitToFirst(e,t){return(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(e._queryParams,this._limit),e._orderByCalled)}}class QueryLimitToLastConstraint extends QueryConstraint{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new QueryImpl(e._repo,e._path,function queryParamsLimitToLast(e,t){return(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(e._queryParams,this._limit),e._orderByCalled)}}class QueryOrderByChildConstraint extends QueryConstraint{constructor(e){super(),this._path=e}_apply(e){validateNoPreviousOrderByCall(e,"orderByChild");var t=new Path(this._path);if(pathIsEmpty(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");t=new PathIndex(t),t=queryParamsOrderBy(e._queryParams,t);return validateQueryEndpoints(t),new QueryImpl(e._repo,e._path,t,!0)}}class QueryOrderByKeyConstraint extends QueryConstraint{_apply(e){validateNoPreviousOrderByCall(e,"orderByKey");var t=queryParamsOrderBy(e._queryParams,p);return validateQueryEndpoints(t),new QueryImpl(e._repo,e._path,t,!0)}}class QueryOrderByPriorityConstraint extends QueryConstraint{_apply(e){validateNoPreviousOrderByCall(e,"orderByPriority");var t=queryParamsOrderBy(e._queryParams,o);return validateQueryEndpoints(t),new QueryImpl(e._repo,e._path,t,!0)}}class QueryOrderByValueConstraint extends QueryConstraint{_apply(e){validateNoPreviousOrderByCall(e,"orderByValue");var t=queryParamsOrderBy(e._queryParams,$);return validateQueryEndpoints(t),new QueryImpl(e._repo,e._path,t,!0)}}class QueryEqualToValueConstraint extends QueryConstraint{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(u("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new QueryEndAtConstraint(this._value,this._key)._apply(new QueryStartAtConstraint(this._value,this._key)._apply(e))}}!function syncPointSetReferenceConstructor(e){(0,d.assert)(!ie,"__referenceConstructor has already been defined"),ie=e}(ReferenceImpl),function syncTreeSetReferenceConstructor(e){(0,d.assert)(!se,"__referenceConstructor has already been defined"),se=e}(ReferenceImpl);const Fe="FIREBASE_DATABASE_EMULATOR_HOST",ke={};let Te=!1;function repoManagerDatabaseFromApp(e,t,n,r,i){let s=r||e.options.databaseURL,a=(void 0===s&&(e.options.projectId||c("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),h("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com"),we(s,i)),o=a.repoInfo,u,l=void 0;(l=void 0!==Ie&&Ie.env?Ie.env[Fe]:l)?(u=!0,s=`http://${l}?ns=`+o.namespace,a=we(s,i),o=a.repoInfo):u=!a.repoInfo.secure;r=i&&u?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(e.name,e.options,t),Se("Invalid Firebase Database URL",a),pathIsEmpty(a.path)||c("Database URL must point to the root of a Firebase Database (not including a child path)."),i=function repoManagerCreateRepo(e,t,n,r){let i=ke[t.name];i||(i={},ke[t.name]=i);t=i[e.toURLString()];t&&c("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return t=new Repo(e,Te,n,r),i[e.toURLString()]=t}(o,e,r,new AppCheckTokenProvider(e.name,n));return new Database(i,e)}class Database{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,new Path(""))),this._rootInternal}_delete(){return null!==this._rootInternal&&(function repoManagerDeleteRepo(e,t){var n=ke[t];n&&n[e.key]===e||c(`Database ${t}(${e.repoInfo_}) has already been deleted.`),repoInterrupt(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&c("Cannot call "+e+" on a deleted database.")}}function checkTransportInit(){TransportManager.IS_TRANSPORT_INITIALIZED&&f("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function connectDatabaseEmulator(e,t,n,r={}){(e=(0,d.getModularInstance)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&c("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal;let s=void 0;i.repoInfo_.nodeAdmin?(r.mockUserToken&&c('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new EmulatorTokenProvider(EmulatorTokenProvider.OWNER)):r.mockUserToken&&(r="string"==typeof r.mockUserToken?r.mockUserToken:(0,d.createMockUserToken)(r.mockUserToken,e.app.options.projectId),s=new EmulatorTokenProvider(r)),function repoManagerApplyEmulatorSettings(e,t,n,r){e.repoInfo_=new RepoInfo(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,s)}Ne.Database=Database;const Be={".sv":"timestamp"};class TransactionResult{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ne.TransactionResult=TransactionResult,PersistentConnection,PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},Connection;Ne._TEST_ACCESS_hijackHash=function(i){const s=PersistentConnection.prototype.put;return PersistentConnection.prototype.put=function(e,t,n,r){void 0!==r&&(r=i()),s.call(this,e,t,n,r)},function(){PersistentConnection.prototype.put=s}},RepoInfo;Ne._TEST_ACCESS_forceRestClient=function(e){!function repoManagerForceRestClient(e){Te=e}(e)},function registerDatabase(e){setSDKVersion(n.SDK_VERSION),(0,n._registerComponent)(new t.Component("database",(e,{instanceIdentifier:t})=>{return repoManagerDatabaseFromApp(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)},"PUBLIC").setMultipleInstances(!0)),(0,n.registerVersion)(i,"0.13.10",e),(0,n.registerVersion)(i,"0.13.10","esm2017")}()}.call(this)}.call(this,Pe("_process"))},{"@firebase/app":97,"@firebase/component":98,"@firebase/logger":100,"@firebase/util":101,_process:107}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Logger=n.LogLevel=void 0,n.setLogLevel=function setLogLevel(t){r.forEach(e=>{e.setLogLevel(t)})},n.setUserLogHandler=function setUserLogHandler(s,e){for(const t of r){let i=null;e&&e.level&&(i=o[e.level]),t.userLogHandler=null===s?null:(e,t,...n)=>{var r=n.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");t>=(null!==i&&void 0!==i?i:e.logLevel)&&s({level:a[t].toLowerCase(),message:r,args:n,type:e.name})}}};const r=[];var a,i;n.LogLevel=a,(i=a||(n.LogLevel=a={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";const o={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},s=a.INFO,u={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},l=(e,t,...n)=>{if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=u[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)}};n.Logger=class Logger{constructor(e){this.name=e,this._logLevel=s,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in a))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...e),this._logHandler(this,a.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...e),this._logHandler(this,a.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,a.INFO,...e),this._logHandler(this,a.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,a.WARN,...e),this._logHandler(this,a.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...e),this._logHandler(this,a.ERROR,...e)}}},{}],101:[function(e,t,g){!function(f,m){!function(){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.Sha1=g.RANDOM_FACTOR=g.MAX_VALUE_MILLIS=g.FirebaseError=g.ErrorFactory=g.Deferred=g.CONSTANTS=void 0,g.areCookiesEnabled=function areCookiesEnabled(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)},g.assertionError=g.assert=void 0,g.async=function async(t,n){return(...e)=>{Promise.resolve(!0).then(()=>{t(...e)}).catch(e=>{n&&n(e)})}},g.base64urlEncodeWithoutPadding=g.base64Encode=g.base64Decode=g.base64=void 0,g.calculateBackoffMillis=function calculateBackoffMillis(e,t=c,n=h){t*=Math.pow(n,e),n=Math.round(d*t*(Math.random()-.5)*2);return Math.min(p,t+n)},g.contains=function contains(e,t){return Object.prototype.hasOwnProperty.call(e,t)},g.createMockUserToken=function createMockUserToken(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var t=t||"demo-project",n=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");t=Object.assign({iss:"https://securetoken.google.com/"+t,aud:t,iat:n,exp:n+3600,auth_time:n,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(t)),""].join(".")},g.createSubscribe=function createSubscribe(e,t){e=new ObserverProxy(e,t);return e.subscribe.bind(e)},g.decode=void 0,g.deepCopy=function deepCopy(e){return deepExtend(void 0,e)},g.deepEqual=function deepEqual(e,t){if(e===t)return!0;const n=Object.keys(e);const r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],a=t[i];if(isObject(s)&&isObject(a)){if(!deepEqual(s,a))return!1}else if(s!==a)return!1}for(const o of r)if(!n.includes(o))return!1;return!0},g.deepExtend=deepExtend,g.errorPrefix=errorPrefix,g.extractQuerystring=function extractQuerystring(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,0<n?n:void 0)},g.getExperimentalSetting=g.getDefaultEmulatorHostnameAndPort=g.getDefaultEmulatorHost=g.getDefaultAppConfig=void 0,g.getGlobal=getGlobal,g.getModularInstance=function getModularInstance(e){return e&&e._delegate?e._delegate:e},g.getUA=getUA,g.isAdmin=void 0,g.isBrowser=function isBrowser(){return"object"==typeof self&&self.self===self},g.isBrowserExtension=function isBrowserExtension(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},g.isElectron=function isElectron(){return 0<=getUA().indexOf("Electron/")},g.isEmpty=function isEmpty(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},g.isIE=function isIE(){var e=getUA();return 0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/")},g.isIndexedDBAvailable=function isIndexedDBAvailable(){return"object"==typeof indexedDB},g.isMobileCordova=function isMobileCordova(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())},g.isNode=isNode,g.isNodeSdk=function isNodeSdk(){return!0===t.NODE_CLIENT||!0===t.NODE_ADMIN},g.isReactNative=function isReactNative(){return"object"==typeof navigator&&"ReactNative"===navigator.product},g.isSafari=function isSafari(){return!isNode()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},g.isUWP=function isUWP(){return 0<=getUA().indexOf("MSAppHost/")},g.issuedAtTime=g.isValidTimestamp=g.isValidFormat=void 0,g.jsonEval=jsonEval,g.map=function map(e,t,n){var r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},g.ordinal=function ordinal(e){return Number.isFinite(e)?e+function indicator(e){var t=(e=Math.abs(e))%100;if(10<=t&&t<=20)return"th";t=e%10;return 1!=t?2!=t?3!=t?"th":"rd":"nd":"st"}(e):""+e},g.promiseWithTimeout=function promiseWithTimeout(e,t=2e3){const n=new Deferred;return setTimeout(()=>n.reject("timeout!"),t),e.then(n.resolve,n.reject),n.promise},g.querystring=function querystring(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},g.querystringDecode=function querystringDecode(e){const n={},t=e.replace(/^\?/,"").split("&");return t.forEach(e=>{var t;e&&([e,t]=e.split("="),n[decodeURIComponent(e)]=decodeURIComponent(t))}),n},g.safeGet=function safeGet(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},g.stringToByteArray=g.stringLength=void 0,g.stringify=function stringify(e){return JSON.stringify(e)},g.validateArgCount=g.uuidv4=void 0,g.validateCallback=function validateCallback(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(errorPrefix(e,t)+"must be a valid function.")},g.validateContextObject=function validateContextObject(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(errorPrefix(e,t)+"must be a valid context object.")},g.validateIndexedDBOpenable=function validateIndexedDBOpenable(){return new Promise((t,n)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var e;n((null==(e=i.error)?void 0:e.message)||"")}}catch(e){n(e)}})};function Cy0(e,t){if(!e)throw n(t)}function Ey0(n){var r=[];let i=0;for(let t=0;t<n.length;t++){let e=n.charCodeAt(t);e<128?r[i++]=e:(e<2048?r[i++]=e>>6|192:(55296==(64512&e)&&t+1<n.length&&56320==(64512&n.charCodeAt(t+1))?(e=65536+((1023&e)<<10)+(1023&n.charCodeAt(++t)),r[i++]=e>>18|240,r[i++]=e>>12&63|128):r[i++]=e>>12|224,r[i++]=e>>6&63|128),r[i++]=63&e|128)}return r}function Hy0(e){return e=Ey0(e),r.encodeByteArray(e,!0)}function Jy0(e){try{return r.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}const t={NODE_CLIENT:!(g.validateNamespace=function validateNamespace(e,t,n){if((!n||t)&&"string"!=typeof t)throw new Error(errorPrefix(e,"namespace")+"must be a valid firebase namespace.")}),NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},n=(g.CONSTANTS=t,g.assert=Cy0,function(e){return new Error("Firebase Database ("+t.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)}),r=(g.assertionError=n,{byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();var i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let n=0;n<r.length;n+=3){var a=r[n],o=n+1<r.length,u=o?r[n+1]:0,l=n+2<r.length,c=l?r[n+2]:0;let e=(15&u)<<2|c>>6,t=63&c;l||(t=64,o)||(e=64),s.push(i[a>>2],i[(3&a)<<4|u>>4],i[e],i[t])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ey0(e),t)},decodeString(n,r){if(this.HAS_NATIVE_SUPPORT&&!r)return atob(n);{var i=this.decodeStringToByteArray(n,r);var s=[];let e=0,t=0;for(;e<i.length;){var a,o,u,l=i[e++];l<128?s[t++]=String.fromCharCode(l):191<l&&l<224?(a=i[e++],s[t++]=String.fromCharCode((31&l)<<6|63&a)):239<l&&l<365?(a=((7&l)<<18|(63&i[e++])<<12|(63&i[e++])<<6|63&i[e++])-65536,s[t++]=String.fromCharCode(55296+(a>>10)),s[t++]=String.fromCharCode(56320+(1023&a))):(o=i[e++],u=i[e++],s[t++]=String.fromCharCode((15&l)<<12|(63&o)<<6|63&u))}return s.join("");return}},decodeStringToByteArray(t,e){this.init_();var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){var i=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0,a=++e<t.length?n[t.charAt(e)]:64,o=++e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==s||null==a||null==o)throw Error();r.push(i<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==o)&&r.push(a<<6&192|o)}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}}),i=(g.base64=r,g.base64Encode=Hy0,function(e){return Hy0(e).replace(/\./g,"")});g.base64urlEncodeWithoutPadding=i;function deepExtend(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&function isValidKey(e){return"__proto__"!==e}(n)&&(e[n]=deepExtend(e[n],t[n]));return e}function getUA(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function isNode(){try{return"[object process]"===Object.prototype.toString.call(m.process)}catch(e){return!1}}function getGlobal(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==m)return m;throw new Error("Unable to locate global object.")}g.base64Decode=Jy0;const e=()=>getGlobal().__FIREBASE_DEFAULTS__,s=()=>{var e;return void 0!==f&&void 0!==f.env&&(e=f.env.__FIREBASE_DEFAULTS__)?JSON.parse(e):void 0},a=()=>{if("undefined"!=typeof document){let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&Jy0(e[1]);return t&&JSON.parse(t)}},o=()=>{try{return e()||s()||a()}catch(e){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: "+e)}},u=e=>{var t;return null==(t=null==(t=o())?void 0:t.emulatorHosts)?void 0:t[e]};g.getDefaultEmulatorHost=u;g.getDefaultEmulatorHostnameAndPort=e=>{e=u(e);if(e){var t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);var n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]}},g.getDefaultAppConfig=()=>{var e;return null==(e=o())?void 0:e.config};g.getExperimentalSetting=e=>{var t;return null==(t=o())?void 0:t["_"+e]};class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(n){return(e,t)=>{e?this.reject(e):this.resolve(t),"function"==typeof n&&(this.promise.catch(()=>{}),1===n.length?n(e):n(e,t))}}}g.Deferred=Deferred;class FirebaseError extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}g.FirebaseError=FirebaseError;class ErrorFactory{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){var t=t[0]||{},n=this.service+"/"+e,e=this.errors[e],e=e?function replaceTemplate(e,r){return e.replace(l,(e,t)=>{var n=r[t];return null!=n?String(n):`<${t}?>`})}(e,t):"Error",e=this.serviceName+`: ${e} (${n}).`;return new FirebaseError(n,e,t)}}g.ErrorFactory=ErrorFactory;const l=/\{\$([^}]+)}/g;function jsonEval(e){return JSON.parse(e)}function Uy0(e){let t={},n={},r={},i="";try{var s=e.split(".");t=jsonEval(Jy0(s[0])||""),n=jsonEval(Jy0(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}}g.decode=Uy0;g.isValidTimestamp=function(e){var e=Uy0(e).claims,t=Math.floor((new Date).getTime()/1e3);let n=0,r=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?n=e.nbf:e.hasOwnProperty("iat")&&(n=e.iat),r=e.hasOwnProperty("exp")?e.exp:n+86400),!!t&&!!n&&!!r&&t>=n&&t<=r},g.issuedAtTime=function(e){e=Uy0(e).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},g.isValidFormat=function(e){e=Uy0(e).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")};function isObject(e){return null!==e&&"object"==typeof e}g.isAdmin=function(e){e=Uy0(e).claims;return"object"==typeof e&&!0===e.admin};g.Sha1=class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n=n||0;var r=this.W_;if("string"==typeof t)for(let e=0;e<16;e++)r[e]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let e=0;e<16;e++)r[e]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let e=16;e<80;e++){var i=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=4294967295&(i<<1|i>>>31)}let s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],u=this.chain_[3],l=this.chain_[4],c,h;for(let e=0;e<80;e++){h=e<40?e<20?(c=u^a&(o^u),1518500249):(c=a^o^u,1859775393):e<60?(c=a&o|u&(a|o),2400959708):(c=a^o^u,3395469782);var p=(s<<5|s>>>27)+c+l+h+r[e]&4294967295;l=u,u=o,o=4294967295&(a<<30|a>>>2),a=s,s=p}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(n,r){if(null!=n){var i=(r=void 0===r?n.length:r)-this.blockSize;let e=0;var s=this.buf_;let t=this.inbuf_;for(;e<r;){if(0===t)for(;e<=i;)this.compress_(n,e),e+=this.blockSize;if("string"==typeof n){for(;e<r;)if(s[t]=n.charCodeAt(e),++t,++e,t===this.blockSize){this.compress_(s),t=0;break}}else for(;e<r;)if(s[t]=n[e],++t,++e,t===this.blockSize){this.compress_(s),t=0;break}}this.inbuf_=t,this.total_+=r}}digest(){var n=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;56<=e;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let t=0;t<5;t++)for(let e=24;0<=e;e-=8)n[r]=this.chain_[t]>>e&255,++r;return n}};class ObserverProxy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function implementsAnyMethods(e,t){if("object"==typeof e&&null!==e)for(const n of t)if(n in e&&"function"==typeof e[n])return 1;return}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=noop),void 0===r.error&&(r.error=noop),void 0===r.complete&&(r.complete=noop);e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),e}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount)&&void 0!==this.onNoObservers&&this.onNoObservers(this)}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function noop(){}function errorPrefix(e,t){return e+` failed: ${t} argument `}g.validateArgCount=function(e,t,n,r){let i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw t=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".",new Error(t)};g.stringToByteArray=function(n){var r,i,s=[];let a=0;for(let t=0;t<n.length;t++){let e=n.charCodeAt(t);55296<=e&&e<=56319&&(r=e-55296,t++,Cy0(t<n.length,"Surrogate pair missing trail surrogate."),i=n.charCodeAt(t)-56320,e=65536+(r<<10)+i),e<128?s[a++]=e:(e<2048?s[a++]=e>>6|192:(e<65536?s[a++]=e>>12|224:(s[a++]=e>>18|240,s[a++]=e>>12&63|128),s[a++]=e>>6&63|128),s[a++]=63&e|128)}return s},g.stringLength=function(t){let n=0;for(let e=0;e<t.length;e++){var r=t.charCodeAt(e);r<128?n++:r<2048?n+=2:55296<=r&&r<=56319?(n+=4,e++):n+=3}return n};g.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})};const c=1e3,h=2,p=144e5,d=(g.MAX_VALUE_MILLIS=p,.5);g.RANDOM_FACTOR=d}.call(this)}.call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:107}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("@firebase/app");Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});(0,r.registerVersion)("firebase","9.14.0","app")},{"@firebase/app":97}],103:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("@firebase/database");Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})})},{"@firebase/database":99}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.deleteDB=function deleteDB(e,{blocked:t}={}){e=indexedDB.deleteDatabase(e);t&&e.addEventListener("blocked",()=>t());return(0,u.w)(e).then(()=>{})},n.openDB=function openDB(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=(0,u.w)(a);r&&a.addEventListener("upgradeneeded",e=>{r((0,u.w)(a.result),e.oldVersion,e.newVersion,(0,u.w)(a.transaction))});n&&a.addEventListener("blocked",()=>n());return o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),o},Object.defineProperty(n,"unwrap",{enumerable:!0,get:function(){return u.u}}),Object.defineProperty(n,"wrap",{enumerable:!0,get:function(){return u.w}});var u=e("./wrap-idb-value.js");const a=["get","getKey","getAll","getAllKeys","count"],o=["put","add","delete","clear"],l=new Map;function getMethod(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(l.get(t))return l.get(t);const r=t.replace(/FromIndex$/,""),i=t!==r,s=o.includes(r);return r in(i?IDBIndex:IDBObjectStore).prototype&&(s||a.includes(r))?(e=async function(e,...t){e=this.transaction(e,s?"readwrite":"readonly");let n=e.store;return i&&(n=n.index(t.shift())),(await Promise.all([n[r](...t),s&&e.done]))[0]},l.set(t,e),e):void 0}}(0,u.r)(r=>({...r,get:(e,t,n)=>getMethod(e,t)||r.get(e,t,n),has:(e,t)=>!!getMethod(e,t)||r.has(e,t)}))},{"./wrap-idb-value.js":105}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.i=n.a=void 0,n.r=function replaceTraps(e){h=e(h)},n.u=void 0,n.w=wrap;const r=(t,e)=>e.some(e=>t instanceof e);n.i=r;let i,s;const a=new WeakMap,o=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap;n.a=c;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function wrapFunction(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function getCursorAdvanceMethods(){return s=s||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}().includes(n)?function(...e){return n.apply(p(this),e),wrap(a.get(this))}:function(...e){return wrap(n.apply(p(this),e))}:function(e,...t){t=n.call(p(this),e,...t);return u.set(t,e.sort?e.sort():[e]),wrap(t)}}function transformCachableValue(e){return"function"==typeof e?wrapFunction(e):(e instanceof IDBTransaction&&function cacheDonePromiseForTransaction(s){var e;o.has(s)||(e=new Promise((e,t)=>{const n=()=>{s.removeEventListener("complete",r),s.removeEventListener("error",i),s.removeEventListener("abort",i)},r=()=>{e(),n()},i=()=>{t(s.error||new DOMException("AbortError","AbortError")),n()};s.addEventListener("complete",r),s.addEventListener("error",i),s.addEventListener("abort",i)}),o.set(s,e))}(e),r(e,function getIdbProxyableTypes(){return i=i||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}())?new Proxy(e,h):e)}function wrap(e){var t;return e instanceof IDBRequest?function promisifyRequest(s){var e=new Promise((e,t)=>{const n=()=>{s.removeEventListener("success",r),s.removeEventListener("error",i)},r=()=>{e(wrap(s.result)),n()},i=()=>{t(s.error),n()};s.addEventListener("success",r),s.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&a.set(e,s)}).catch(()=>{}),c.set(e,s),e}(e):l.has(e)?l.get(e):((t=transformCachableValue(e))!==e&&(l.set(e,t),c.set(t,e)),t)}const p=e=>c.get(e);n.u=p},{}],106:[function(l,t,n){!function(r){!function(){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).localforage=e()}(function(){return function e(i,a,o){function s(n,t){if(!a[n]){if(!i[n]){var r="function"==typeof l&&l;if(!t&&r)return r(n,!0);if(u)return u(n,!0);t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}r=a[n]={exports:{}};i[n][0].call(r.exports,function(e){var t=i[n][1][e];return s(t||e)},r,r.exports,e,i,a,o)}return a[n].exports}for(var u="function"==typeof l&&l,t=0;t<o.length;t++)s(o[t]);return s}({1:[function(e,u,t){!function(t){"use strict";var e,n,r,i,s=t.MutationObserver||t.WebKitMutationObserver,a=s?(e=0,s=new s(nextTick),n=t.document.createTextNode(""),s.observe(n,{characterData:!0}),function(){n.data=e=++e%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){nextTick(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(nextTick,0)}:((r=new t.MessageChannel).port1.onmessage=nextTick,function(){r.port2.postMessage(0)}),o=[];function nextTick(){i=!0;for(var e,t,n=o.length;n;){for(t=o,o=[],e=-1;++e<n;)t[e]();n=o.length}i=!1}u.exports=function immediate(e){1!==o.push(e)||i||a()}}.call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var i=e(1);function INTERNAL(){}var u={},s=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function Promise(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==INTERNAL&&safelyResolveThenable(this,e)}function QueueItem(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function unwrap(t,n,r){i(function(){var e;try{e=n(r)}catch(e){return u.reject(t,e)}e===t?u.reject(t,new TypeError("Cannot resolve promise with itself")):u.resolve(t,e)})}function getThen(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function appyThen(){t.apply(e,arguments)}}function safelyResolveThenable(t,e){var n=!1;function onError(e){n||(n=!0,u.reject(t,e))}function onSuccess(e){n||(n=!0,u.resolve(t,e))}var r=tryCatch(function tryToUnwrap(){e(onSuccess,onError)});"error"===r.status&&onError(r.value)}function tryCatch(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=Promise).prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){var n;return"function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s?this:(n=new this.constructor(INTERNAL),this.state!==r?unwrap(n,this.state===a?e:t,this.outcome):this.queue.push(new QueueItem(n,e,t)),n)},QueueItem.prototype.callFulfilled=function(e){u.resolve(this.promise,e)},QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)},QueueItem.prototype.callRejected=function(e){u.reject(this.promise,e)},QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)},u.resolve=function(e,t){var n=tryCatch(getThen,t);if("error"===n.status)return u.reject(e,n.value);n=n.value;if(n)safelyResolveThenable(e,n);else{e.state=a,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callFulfilled(t)}return e},u.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},Promise.resolve=function resolve(e){if(e instanceof this)return e;return u.resolve(new this(INTERNAL),e)},Promise.reject=function reject(e){var t=new this(INTERNAL);return u.reject(t,e)},Promise.all=function all(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);var s=new Array(r),a=0,t=-1,o=new this(INTERNAL);for(;++t<r;)!function allResolver(e,t){n.resolve(e).then(function resolveFromAll(e){s[t]=e,++a!==r||i||(i=!0,u.resolve(o,s))},function(e){i||(i=!0,u.reject(o,e))})}(e[t],t);return o},Promise.race=function race(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=-1,s=new this(INTERNAL);for(;++i<n;)!function resolver(e){t.resolve(e).then(function(e){r||(r=!0,u.resolve(s,e))},function(e){r||(r=!0,u.reject(s,e))})}(e[i]);return s}},{1:1}],3:[function(t,e,n){!function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}.call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,y,v){"use strict";var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function getIDB(){try{return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}catch(e){}}();function createBlob(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function executeCallback(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function executeTwoCallbacks(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function normalizeKey(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function getCallback(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var a="local-forage-detect-blob-support",t=void 0,l={},D=Object.prototype.toString,n="readonly",h="readwrite";function _checkBlobSupport(e){return"boolean"==typeof t?c.resolve(t):function _checkBlobSupportWithoutCaching(r){return new c(function(n){var e=r.transaction(a,h),t=createBlob([""]);e.objectStore(a).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})}(e).then(function(e){return t=e})}function _deferReadiness(e){var e=l[e.name],n={};n.promise=new c(function(e,t){n.resolve=e,n.reject=t}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function _advanceReadiness(e){e=l[e.name].deferredOperations.pop();e&&(e.resolve(),e.promise)}function _rejectReadiness(e,t){e=l[e.name].deferredOperations.pop();if(e)return e.reject(t),e.promise}function _getConnection(i,s){return new c(function(t,n){if(l[i.name]=l[i.name]||createDbContext(),i.db){if(!s)return t(i.db);_deferReadiness(i),i.db.close()}var e=[i.name],r=(s&&e.push(i.version),o.open.apply(o,e));s&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(i.storeName),t.oldVersion<=1&&e.createObjectStore(a)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+i.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+i.storeName+'" already exists.')}}),r.onerror=function(e){e.preventDefault(),n(r.error)},r.onsuccess=function(){var e=r.result;e.onversionchange=function(e){e.target.close()},t(e),_advanceReadiness(i)}})}function _getOriginalConnection(e){return _getConnection(e,!1)}function _getUpgradedConnection(e){return _getConnection(e,!0)}function _isUpgradeNeeded(e,t){var n,r,i;return!e.db||(n=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,r=e.version>e.db.version,i&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(r||n)&&(n&&(i=e.db.version+1)>e.version&&(e.version=i),1))}function _decodeBlob(e){return createBlob([function _binStringToArrayBuffer(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function _isEncodedBlob(e){return e&&e.__local_forage_encoded_blob}function _fullyReady(e){var t=this,n=t._initReady().then(function(){var e=l[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return executeTwoCallbacks(n,e,e),n}function createTransaction(t,n,r,i){void 0===i&&(i=1);try{var e=t.db.transaction(t.storeName,n);r(null,e)}catch(e){if(0<i&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return c.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),_getUpgradedConnection(t)}).then(function(){return function _tryReconnect(n){_deferReadiness(n);for(var r=l[n.name],i=r.forages,e=0;e<i.length;e++){var t=i[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return n.db=null,_getOriginalConnection(n).then(function(e){return n.db=e,_isUpgradeNeeded(n)?_getUpgradedConnection(n):e}).then(function(e){n.db=r.db=e;for(var t=0;t<i.length;t++)i[t]._dbInfo.db=e}).catch(function(e){throw _rejectReadiness(n,e),e})}(t).then(function(){createTransaction(t,n,r,i-1)})}).catch(r);r(e)}}function createDbContext(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}e={_driver:"asyncStorage",_initStorage:function _initStorage(e){var r=this,i={db:null};if(e)for(var t in e)i[t]=e[t];var s=l[i.name],n=(s||(s=createDbContext(),l[i.name]=s),s.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=_fullyReady),[]);function ignoreErrors(){return c.resolve()}for(var a=0;a<s.forages.length;a++){var o=s.forages[a];o!==r&&n.push(o._initReady().catch(ignoreErrors))}var u=s.forages.slice(0);return c.all(n).then(function(){return i.db=s.db,_getOriginalConnection(i)}).then(function(e){return i.db=e,_isUpgradeNeeded(i,r._defaultConfig.version)?_getUpgradedConnection(i):e}).then(function(e){i.db=s.db=e,r._dbInfo=i;for(var t=0;t<u.length;t++){var n=u[t];n!==r&&(n._dbInfo.db=i.db,n._dbInfo.version=i.version)}})},_support:function isIndexedDBValid(){try{var e,t;return o&&o.open?(e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code"),(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange):!1}catch(e){return!1}}(),iterate:function iterate(a,e){var o=this,t=new c(function(i,s){o.ready().then(function(){createTransaction(o._dbInfo,n,function(e,t){if(e)return s(e);try{var n=t.objectStore(o._dbInfo.storeName).openCursor(),r=1;n.onsuccess=function(){var e,t=n.result;t?(_isEncodedBlob(e=t.value)&&(e=_decodeBlob(e)),void 0!==(e=a(e,t.key,r++))?i(e):t.continue()):i()},n.onerror=function(){s(n.error)}}catch(e){s(e)}})}).catch(s)});return executeCallback(t,e),t},getItem:function getItem(s,e){var a=this,t=(s=normalizeKey(s),new c(function(r,i){a.ready().then(function(){createTransaction(a._dbInfo,n,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).get(s);n.onsuccess=function(){var e=n.result;_isEncodedBlob(e=void 0===e?null:e)&&(e=_decodeBlob(e)),r(e)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)}));return executeCallback(t,e),t},setItem:function setItem(o,t,e){var u=this,n=(o=normalizeKey(o),new c(function(s,a){var e;u.ready().then(function(){return e=u._dbInfo,"[object Blob]"===D.call(t)?_checkBlobSupport(e.db).then(function(e){return e?t:function _encodeBlob(r){return new c(function(t,e){var n=new FileReader;n.onerror=e,n.onloadend=function(e){e=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:e,type:r.type})},n.readAsBinaryString(r)})}(t)}):t}).then(function(i){createTransaction(u._dbInfo,h,function(e,t){if(e)return a(e);try{var n=t.objectStore(u._dbInfo.storeName),r=(null===i&&(i=void 0),n.put(i,o));t.oncomplete=function(){s(i=void 0===i?null:i)},t.onabort=t.onerror=function(){var e=r.error||r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)}));return executeCallback(n,e),n},removeItem:function removeItem(s,e){var a=this,t=(s=normalizeKey(s),new c(function(r,i){a.ready().then(function(){createTransaction(a._dbInfo,h,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).delete(s);t.oncomplete=function(){r()},t.onerror=function(){i(n.error)},t.onabort=function(){var e=n.error||n.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)}));return executeCallback(t,e),t},clear:function clear(e){var s=this,t=new c(function(r,i){s.ready().then(function(){createTransaction(s._dbInfo,h,function(e,t){if(e)return i(e);try{var n=t.objectStore(s._dbInfo.storeName).clear();t.oncomplete=function(){r()},t.onabort=t.onerror=function(){var e=n.error||n.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return executeCallback(t,e),t},length:function length(e){var s=this,t=new c(function(r,i){s.ready().then(function(){createTransaction(s._dbInfo,n,function(e,t){if(e)return i(e);try{var n=t.objectStore(s._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return executeCallback(t,e),t},key:function key(o,e){var u=this,t=new c(function(s,a){o<0?s(null):u.ready().then(function(){createTransaction(u._dbInfo,n,function(e,t){if(e)return a(e);try{var n=t.objectStore(u._dbInfo.storeName),r=!1,i=n.openKeyCursor();i.onsuccess=function(){var e=i.result;e?0===o||r?s(e.key):(r=!0,e.advance(o)):s(null)},i.onerror=function(){a(i.error)}}catch(e){a(e)}})}).catch(a)});return executeCallback(t,e),t},keys:function keys(e){var a=this,t=new c(function(i,s){a.ready().then(function(){createTransaction(a._dbInfo,n,function(e,t){if(e)return s(e);try{var n=t.objectStore(a._dbInfo.storeName).openKeyCursor(),r=[];n.onsuccess=function(){var e=n.result;e?(r.push(e.key),e.continue()):i(r)},n.onerror=function(){s(n.error)}}catch(e){s(e)}})}).catch(s)});return executeCallback(t,e),t},dropInstance:function dropInstance(a,e){e=getCallback.apply(this,arguments);var t=this.config();return(a="function"!=typeof a&&a||{}).name||(a.name=a.name||t.name,a.storeName=a.storeName||t.storeName),executeCallback(t=a.name?(t=a.name===t.name&&this._dbInfo.db?c.resolve(this._dbInfo.db):_getOriginalConnection(a).then(function(e){var t=l[a.name],n=t.forages;t.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e}),a.storeName?t.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var i=e.version+1,r=(_deferReadiness(a),l[a.name]),s=r.forages;e.close();for(var t=0;t<s.length;t++){var n=s[t];n._dbInfo.db=null,n._dbInfo.version=i}return new c(function(t,n){var r=o.open(a.name,i);r.onerror=function(e){r.result.close(),n(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(a.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<s.length;t++){var n=s[t];n._dbInfo.db=e,_advanceReadiness(n._dbInfo)}}).catch(function(e){throw(_rejectReadiness(a,e)||c.resolve()).catch(function(){}),e})}}):t.then(function(e){_deferReadiness(a);var n=l[a.name],r=n.forages;e.close();for(var t=0;t<r.length;t++)r[t]._dbInfo.db=null;return new c(function(t,n){var r=o.deleteDatabase(a.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)_advanceReadiness(r[t]._dbInfo)}).catch(function(e){throw(_rejectReadiness(a,e)||c.resolve()).catch(function(){}),e})})):c.reject("Invalid arguments"),e),t}};var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=/^~~local_forage_type~([^~]+)~/,s="__lfsc__:",u=s.length,_=u+"arbf".length,S=Object.prototype.toString;function stringToBuffer(e){for(var t,n,r,i,s=.75*e.length,a=e.length,o=0,s=("="===e[e.length-1]&&(s--,"="===e[e.length-2])&&s--,new ArrayBuffer(s)),u=new Uint8Array(s),l=0;l<a;l+=4)t=p.indexOf(e[l]),n=p.indexOf(e[l+1]),r=p.indexOf(e[l+2]),i=p.indexOf(e[l+3]),u[o++]=t<<2|n>>4,u[o++]=(15&n)<<4|r>>2,u[o++]=(3&r)<<6|63&i;return s}function bufferToString(e){for(var t=new Uint8Array(e),n="",r=0;r<t.length;r+=3)n=(n=(n=(n+=p[t[r]>>2])+p[(3&t[r])<<4|t[r+1]>>4])+p[(15&t[r+1])<<2|t[r+2]>>6])+p[63&t[r+2]];return t.length%3==2?n=n.substring(0,n.length-1)+"=":t.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var d={serialize:function serialize(t,n){var e="";if(t&&(e=S.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===S.call(t.buffer))){var r,i=s;t instanceof ArrayBuffer?(r=t,i+="arbf"):(r=t.buffer,"[object Int8Array]"===e?i+="si08":"[object Uint8Array]"===e?i+="ui08":"[object Uint8ClampedArray]"===e?i+="uic8":"[object Int16Array]"===e?i+="si16":"[object Uint16Array]"===e?i+="ur16":"[object Int32Array]"===e?i+="si32":"[object Uint32Array]"===e?i+="ui32":"[object Float32Array]"===e?i+="fl32":"[object Float64Array]"===e?i+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(i+bufferToString(r))}else if("[object Blob]"===e){i=new FileReader;i.onload=function(){var e="~~local_forage_type~"+t.type+"~"+bufferToString(this.result);n(s+"blob"+e)},i.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),n(null,e)}},deserialize:function deserialize(e){if(e.substring(0,u)!==s)return JSON.parse(e);var t,n=e.substring(_),r=e.substring(u,_),i=("blob"===r&&E.test(n)&&(t=(e=n.match(E))[1],n=n.substring(e[0].length)),stringToBuffer(n));switch(r){case"arbf":return i;case"blob":return createBlob([i],{type:t});case"si08":return new Int8Array(i);case"ui08":return new Uint8Array(i);case"uic8":return new Uint8ClampedArray(i);case"si16":return new Int16Array(i);case"ur16":return new Uint16Array(i);case"si32":return new Int32Array(i);case"ui32":return new Uint32Array(i);case"fl32":return new Float32Array(i);case"fl64":return new Float64Array(i);default:throw new Error("Unkown type: "+r)}},stringToBuffer:stringToBuffer,bufferToString:bufferToString};function createDbTable(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function tryExecuteSql(e,r,i,s,a,o){e.executeSql(i,s,a,function(e,n){n.code===n.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(e,t){t.rows.length?o(e,n):createDbTable(e,r,function(){e.executeSql(i,s,a,o)},o)},o):o(e,n)},o)}function _setItem(a,e,o,u){var l=this,t=(a=normalizeKey(a),new c(function(i,s){l.ready().then(function(){var n=e=void 0===e?null:e,r=l._dbInfo;r.serializer.serialize(e,function(t,e){e?s(e):r.db.transaction(function(e){tryExecuteSql(e,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[a,t],function(){i(n)},function(e,t){s(t)})},function(e){e.code===e.QUOTA_ERR&&(0<u?i(_setItem.apply(l,[a,n,o,u-1])):s(e))})})}).catch(s)}));return executeCallback(t,o),t}var r={_driver:"webSQLStorage",_initStorage:function _initStorage$1(e){var r=this,i={db:null};if(e)for(var t in e)i[t]="string"!=typeof e[t]?e[t].toString():e[t];var n=new c(function(t,n){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(e){return n(e)}i.db.transaction(function(e){createDbTable(e,i,function(){r._dbInfo=i,t()},function(e,t){n(t)})},n)});return i.serializer=d,n},_support:function isWebSQLValid(){return"function"==typeof openDatabase}(),iterate:function iterate$1(l,e){var t=this,n=new c(function(u,n){t.ready().then(function(){var o=t._dbInfo;o.db.transaction(function(e){tryExecuteSql(e,o,"SELECT * FROM "+o.storeName,[],function(e,t){for(var n=t.rows,r=n.length,i=0;i<r;i++){var s=n.item(i),a=(a=s.value)&&o.serializer.deserialize(a);if(void 0!==(a=l(a,s.key,i+1)))return void u(a)}u()},function(e,t){n(t)})})}).catch(n)});return executeCallback(n,e),n},getItem:function getItem$1(t,e){var s=this,n=(t=normalizeKey(t),new c(function(r,i){s.ready().then(function(){var n=s._dbInfo;n.db.transaction(function(e){tryExecuteSql(e,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){t=(t=t.rows.length?t.rows.item(0).value:null)&&n.serializer.deserialize(t);r(t)},function(e,t){i(t)})})}).catch(i)}));return executeCallback(n,e),n},setItem:function setItem$1(e,t,n){return _setItem.apply(this,[e,t,n,1])},removeItem:function removeItem$1(i,e){var s=this,t=(i=normalizeKey(i),new c(function(n,r){s.ready().then(function(){var t=s._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[i],function(){n()},function(e,t){r(t)})})}).catch(r)}));return executeCallback(t,e),t},clear:function clear$1(e){var i=this,t=new c(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"DELETE FROM "+t.storeName,[],function(){n()},function(e,t){r(t)})})}).catch(r)});return executeCallback(t,e),t},length:function length$1(e){var i=this,t=new c(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){t=t.rows.item(0).c;n(t)},function(e,t){r(t)})})}).catch(r)});return executeCallback(t,e),t},key:function key$1(i,e){var s=this,t=new c(function(n,r){s.ready().then(function(){var t=s._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[i+1],function(e,t){t=t.rows.length?t.rows.item(0).key:null;n(t)},function(e,t){r(t)})})}).catch(r)});return executeCallback(t,e),t},keys:function keys$1(e){var r=this,t=new c(function(i,n){r.ready().then(function(){var t=r._dbInfo;t.db.transaction(function(e){tryExecuteSql(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).key);i(n)},function(e,t){n(t)})})}).catch(n)});return executeCallback(t,e),t},dropInstance:function dropInstance$1(n,e){e=getCallback.apply(this,arguments);var r=this.config(),i=((n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName),this),t=n.name?new c(function(e){var t=n.name===r.name?i._dbInfo.db:openDatabase(n.name,"","",0);n.storeName?e({db:t,storeNames:[n.storeName]}):e(function getAllStoreNames(s){return new c(function(i,n){s.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).name);i({db:s,storeNames:n})},function(e,t){n(t)})},function(e){n(e)})})}(t))}).then(function(a){return new c(function(i,s){a.db.transaction(function(r){for(var e=[],t=0,n=a.storeNames.length;t<n;t++)e.push(function dropTable(t){return new c(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){n(t)})})}(a.storeNames[t]));c.all(e).then(function(){i()}).catch(function(e){s(e)})},function(e){s(e)})})}):c.reject("Invalid arguments");return executeCallback(t,e),t}};function _getKeyPrefix(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function _isLocalStorageUsable(){return!function checkIfLocalStorageThrows(){var e="_localforage_support_test";try{localStorage.setItem(e,!0),localStorage.removeItem(e)}catch(e){return 1}}()||0<localStorage.length}var x={_driver:"localStorageWrapper",_initStorage:function _initStorage$2(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=_getKeyPrefix(e,this._defaultConfig),_isLocalStorageUsable()?((this._dbInfo=t).serializer=d,c.resolve()):c.reject()},_support:function isLocalStorageValid(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function iterate$2(u,e){var l=this,t=l.ready().then(function(){for(var e=l._dbInfo,t=e.keyPrefix,n=t.length,r=localStorage.length,i=1,s=0;s<r;s++){var a=localStorage.key(s);if(0===a.indexOf(t)){var o=(o=localStorage.getItem(a))&&e.serializer.deserialize(o);if(void 0!==(o=u(o,a.substring(n),i++)))return o}}});return executeCallback(t,e),t},getItem:function getItem$2(n,e){var r=this,t=(n=normalizeKey(n),r.ready().then(function(){var e=r._dbInfo,t=localStorage.getItem(e.keyPrefix+n);return t=t&&e.serializer.deserialize(t)}));return executeCallback(t,e),t},setItem:function setItem$2(a,e,t){var o=this,n=(a=normalizeKey(a),o.ready().then(function(){var s=e=void 0===e?null:e;return new c(function(n,r){var i=o._dbInfo;i.serializer.serialize(e,function(e,t){if(t)r(t);else try{localStorage.setItem(i.keyPrefix+a,e),n(s)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})}));return executeCallback(n,t),n},removeItem:function removeItem$2(t,e){var n=this,r=(t=normalizeKey(t),n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return executeCallback(r,e),r},clear:function clear$2(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return executeCallback(t,e),t},length:function length$2(e){var t=this.keys().then(function(e){return e.length});return executeCallback(t,e),t},key:function key$2(n,e){var r=this,t=r.ready().then(function(){var t,e=r._dbInfo;try{t=localStorage.key(n)}catch(e){t=null}return t=t&&t.substring(e.keyPrefix.length)});return executeCallback(t,e),t},keys:function keys$2(e){var s=this,t=s.ready().then(function(){for(var e=s._dbInfo,t=localStorage.length,n=[],r=0;r<t;r++){var i=localStorage.key(r);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n});return executeCallback(t,e),t},dropInstance:function dropInstance$2(t,e){e=getCallback.apply(this,arguments),(t="function"!=typeof t&&t||{}).name||(r=this.config(),t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n=this,r=t.name?new c(function(e){t.storeName?e(_getKeyPrefix(t,n._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):c.reject("Invalid arguments");return executeCallback(r,e),r}},b=function sameValue(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},w=function includes(e,t){for(var n=e.length,r=0;r<n;){if(b(e[r],t))return!0;r++}return!1},A=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},f={},F={},i={INDEXEDDB:e,WEBSQL:r,LOCALSTORAGE:x},e=[i.INDEXEDDB._driver,i.WEBSQL._driver,i.LOCALSTORAGE._driver],m=["dropInstance"],g=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(m),k={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function extend(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&(A(n[r])?e[r]=n[r].slice():e[r]=n[r])}return e}function LocalForage(e){for(var t in!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LocalForage),i){var n,r;i.hasOwnProperty(t)&&(r=(n=i[t])._driver,this[t]=r,f[r]||this.defineDriver(n))}this._defaultConfig=extend({},k),this._config=extend({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}LocalForage.prototype.config=function config(e){if("object"!==(void 0===e?"undefined":C(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},LocalForage.prototype.defineDriver=function defineDriver(l,e,t){var n=new c(function(t,n){try{var r=l._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(l._driver){for(var i=g.concat("_initStorage"),s=0,a=i.length;s<a;s++){var o=i[s];if((!w(m,o)||l[o])&&"function"!=typeof l[o])return void n(e)}(function configureMissingMethods(){for(var e=function methodNotImplementedFactory(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),e=c.reject(e);return executeCallback(e,arguments[arguments.length-1]),e}},t=0,n=m.length;t<n;t++){var r=m[t];l[r]||(l[r]=e(r))}})();var u=function setDriverSupport(e){f[r]&&console.info("Redefining LocalForage driver: "+r),f[r]=l,F[r]=e,t()};"_support"in l?l._support&&"function"==typeof l._support?l._support().then(u,n):u(!!l._support):u(!0)}else n(e)}catch(e){n(e)}});return executeTwoCallbacks(n,e,t),n},LocalForage.prototype.driver=function driver(){return this._driver||null},LocalForage.prototype.getDriver=function getDriver(e,t,n){e=f[e]?c.resolve(f[e]):c.reject(new Error("Driver not found."));return executeTwoCallbacks(e,t,n),e},LocalForage.prototype.getSerializer=function getSerializer(e){var t=c.resolve(d);return executeTwoCallbacks(t,e),t},LocalForage.prototype.ready=function ready(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return executeTwoCallbacks(n,e,e),n},LocalForage.prototype.setDriver=function setDriver(e,t,n){var i=this,r=(A(e)||(e=[e]),this._getSupportedDrivers(e));function setDriverToConfig(){i._config.driver=i.driver()}function extendSelfWithDriver(e){return i._extend(e),setDriverToConfig(),i._ready=i._initStorage(i._config),i._ready}function initDriver(r){return function(){var n=0;return function driverPromiseLoop(){for(;n<r.length;){var e=r[n];return n++,i._dbInfo=null,i._ready=null,i.getDriver(e).then(extendSelfWithDriver).catch(driverPromiseLoop)}setDriverToConfig();var t=new Error("No available storage method found.");return i._driverSet=c.reject(t),i._driverSet}()}}e=null!==this._driverSet?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=e.then(function(){var e=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,setDriverToConfig(),i._wrapLibraryMethodsWithReady(),i._initDriver=initDriver(r)})}).catch(function(){setDriverToConfig();var e=new Error("No available storage method found.");return i._driverSet=c.reject(e),i._driverSet}),executeTwoCallbacks(this._driverSet,t,n),this._driverSet},LocalForage.prototype.supports=function supports(e){return!!F[e]},LocalForage.prototype._extend=function _extend(e){extend(this,e)},LocalForage.prototype._getSupportedDrivers=function _getSupportedDrivers(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},LocalForage.prototype._wrapLibraryMethodsWithReady=function _wrapLibraryMethodsWithReady(){for(var e=0,t=g.length;e<t;e++)!function callWhenReady(t,n){t[n]=function(){var e=arguments;return t.ready().then(function(){return t[n].apply(t,e)})}}(this,g[e])},LocalForage.prototype.createInstance=function createInstance(e){return new LocalForage(e)};r=new LocalForage;y.exports=r},{3:3}]},{},[4])(4)})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],107:[function(e,t,n){var r,i,t=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){i=defaultClearTimeout}function runTimeout(t){if(r===setTimeout)return setTimeout(t,0);if((r===defaultSetTimout||!r)&&setTimeout)return(r=setTimeout)(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}var s,a=[],o=!1,u=-1;function cleanUpNextTick(){o&&s&&(o=!1,s.length?a=s.concat(a):u=-1,a.length)&&drainQueue()}function drainQueue(){if(!o){for(var e=runTimeout(cleanUpNextTick),t=(o=!0,a.length);t;){for(s=a,a=[];++u<t;)s&&s[u].run();u=-1,t=a.length}s=null,o=!1,!function runClearTimeout(t){if(i===clearTimeout)return clearTimeout(t);if((i===defaultClearTimeout||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new Item(e,t)),1!==a.length||o||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=noop,t.addListener=noop,t.once=noop,t.off=noop,t.removeListener=noop,t.removeAllListeners=noop,t.emit=noop,t.prependListener=noop,t.prependOnceListener=noop,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],108:[function(e,t,n){let c=1;class Node{constructor(e=c++){this.id=e}}class Directory extends Node{constructor(){super(),this.children={}}addChild(e){this.children[e.name]=e}unlink(e){this.children[e.name]==e&&delete this.children[e.name]}lookup(e){return this.children[e]}unserialize(t,e){e.forEach(e=>{e=t[e];this.children[e.name]=e})}serialize(e){var t,n=[];for(t in this.children){var r=this.children[t];n.push(r.id),r.serialize(e)}e[this.id]={Directory:[n]}}}class File extends Node{constructor(e=null){super(),this.data=e}serialize(e){e[this.id]={File:[this.data]}}}class Entry extends Node{constructor(e,t){super(),this.name=e,this.node=t}is(e){return this.node instanceof e}isFile(){return this.is(File)}isDirectory(){return this.is(Directory)}get extension(){return(this.name.match(/\.([^./]+)$/i)?.[1]||"").toLowerCase()}unserialize(e,t,n){this.name=t,this.node=e[n]}serialize(e){this.node.serialize(e),e[this.id]={Entry:[this.name,this.node.id]}}}t.exports.PNGFS=class PNGFS{#jsonCache;onDirty;constructor(e){this.root=new Entry("",new Directory),this.root.id="root",this.path=[this.root],this.version=1,e&&e.pngfs<=this.version?this.loadJSON(e):e&&this.loadImage(e)}dirty(){this.#jsonCache=null,this.onDirty?.()}loadJSON(e){var t,n,r,i,s={Entry:Entry,File:File,Directory:Directory},a={},o={};for(t in e)"pngfs"!=t&&(i=e[t],r=s[n=Object.keys(i)[0]],o[t]=i[n],a[(i=new r(...o[t])).id=t]=i,c<=t)&&(c=t+1);for(const l in a){var u=a[l];u.unserialize&&u.unserialize(a,...o[l])}this.root=a.root,this.path=[this.root]}toJSON(){var e;return this.#jsonCache||(e={pngfs:this.version},this.root.serialize(e),this.#jsonCache=e)}ls(e=""){var t=[...this.path],n=e.split("/");if(e&&n.length)for(""==n[0]&&(t.length=1,n.shift());n.length;){var r=n.shift();if("."!=r&&""!=r)if(".."==r){if(1==t.length)return!1;t.pop()}else{const i=t[t.length-1];r=i.node.lookup(r);if(!r||!r.is(Directory))return!1;t.push(r)}}const i=t[t.length-1];return Object.values(i.node.children)}cd(e){var t=e.split("/");if(t.length)for(""==t[0]&&(this.path.length=1,t.shift());t.length;){var n=t.shift();if("."!=n&&""!=n)if(".."==n){if(1==this.path.length)return!1;this.path.pop()}else{n=this.path[this.path.length-1].node.lookup(n);if(!n||!n.is(Directory))return!1;this.path.push(n)}}return!0}mkdir(e){var t=[...this.path],n=e.split("/");if(n.length)for(""==n[0]&&(t.length=1,n.shift());n.length;){var r=n.shift();if("."!=r&&""!=r)if(".."==r){if(1==t.length)return!1;t.pop()}else{var i=t[t.length-1],s=i.node.lookup(r);if(s){if(!s.is(Directory))return!1;t.push(s)}else{s=new Entry(r,new Directory);i.node.addChild(s),t.push(s),this.dirty()}}}return!0}link(e,t){var n=[...this.path],r=e.split("/");if(r.length)for(""==r[0]&&(n.length=1,r.shift());r.length;){var i=r.shift();if("."!=i&&""!=i)if(".."==i){if(1==n.length)return!1;n.pop()}else{var s=n[n.length-1];if(!r.length)return this.dirty(),s.node.addChild(new Entry(i,t));s=s.node.lookup(i);if(!s||!s.is(Directory))return!1;n.push(s)}}return!0}writeFile(e,t){var n=this.lookup(e)["child"];return n?!!n.is(File)&&(this.dirty(),n.node.data=t,!0):(this.link(e,new File(t)),!0)}readFile(e){var t=this.lookup(e)["child"];if(!t)throw`Could not read inexistant file ${e}.`;if(t.is(File))return t.node.data;throw`Could not read ${t.constructor.name} ${e} as file.`}rm(e){var{parent:e,child:t}=this.lookup(e);return!(!e||!t||(this.dirty(),e.node.unlink(t),0))}lookup(e){var t=[...this.path],n=e.split("/");if(n.length)for(""==n[0]&&(t.length=1,n.shift());n.length;){var r=n.shift();if("."!=r&&""!=r)if(".."==r){if(1==t.length)return!1;t.pop()}else{var i=t[t.length-1],r=i.node.lookup(r);if(!r)return!1;if(!n.length)return{parent:i,child:r};if(!r.is(Directory))return!1;t.push(r)}}return!0}cwd(){return this.path.map(e=>e.name).join("/")}loadImage(e){}}},{}],109:[function(e,t,n){t.exports.stdlib=`

/**
 * Prints messages into the console for debugging
 */
declare function debug(...args):void;

/**
 * Returns a floating-point value between 0 (inclusive) and 1 (exclusive)
 */
declare function rand():number;

/**
 * Returns an integer value between 0 (inclusive) and max (exclusive)
 */
declare function rand(max:number):number;

/**
 * Returns a floating-point value between min (inclusive) and max (exclusive)
 */
declare function rand(min:number, max:number):number;

/**
 * Returns an integer value between min (inclusive) and max (exclusive)
 */
declare function rand(min:number, max:number, ignored:any):number;

/**
 * Returns the absolute value of value
 */
declare function abs(value:number):number;

/**
 * Returns value rounded down to the nearest integer
 */
declare function floor(value:number):number;

/**
 * Returns value rounded to the nearest integer
 */
declare function round(value:number):number;

/**
 * Returns value rounded up to the nearest integer
 */
declare function ceil(value:number):number;

/**
 * Returns the square root of value
 */
declare function sqrt(value:number):number;

/**
 * Returns the cosine of angle, given in radians
 */
declare function cos(angle:number):number;

/**
 * Returns the sine of angle, given in radians
 */
declare function sin(angle:number):number;

/**
 * Returns the arc tangent of y/x
 */
declare function atan2(y:number, x:number):number;

/**
 * Returns the arc tangent of angle, given in radians
 */
declare function tan(angle:number):number;


/**
 * Returns the lowest of the given values
 */
declare function min(...value):number;

/**
 * Returns the highest of the given values
 */
declare function max(...value):number;

/**
 * Returns the root of the sum of each argument squared
 */
declare function vectorLength(...args):number;

/**
 * Returns the difference between two angles given in radians
 */
declare function angleDifference(angleA, angleB):number

/**
 * Sets the target framerate that the game should update at.
 */
declare function setFPS(fps:number):void;

/**
 * Sets the current drawing color.
 * Returns a color.
 */
declare function setPen(R:number, G:number, B:number):number;

/**
 * Sets the current drawing color.
 * Returns a color.
 */
declare function setPen(color:number):number;

/**
 * Sets the font used by the text() function.
 */
declare function setFont(font:FontResource):void;

/**
 * Sets the LED color on supported hardware.
 */
declare function setLED(R:number, G:number, B:number):void;

/**
 * Fills a rectangle on the screen using the current pen color.
 */
declare function rect(x:number, y:number, width:number, height:number):void;

/**
 * Sets the texture to be used by the image() function.
 */
declare function setTexture(texture:ImageResource):void;

/**
 * Sets if the following image() calls should be flipped horizontally.
 */
declare function setMirrored(mirror:boolean):void;

/**
 * Sets if the following image() calls should be flipped vertically.
 */
declare function setFlipped(flip:boolean):void;

/**
 * Sets if the following image() calls should support transparency.
 */
declare function setTransparent(transparent:boolean):void;

/**
 * Returns the screen's width in pixels.
 */
declare function getWidth():number;

/**
 * Returns the screen's height in pixels.
 */
declare function getHeight():number;

/**
 * Returns the image's width in pixels.
 */
declare function getWidth(image:ImageResource):number;

/**
 * Returns the image's height in pixels.
 */
declare function getHeight(image:ImageResource):number;

/**
 * Fills the entire screen with the current pen's color.
 */
declare function clear():void;

/**
 * Draws the active texture onto the screen at position 0, 0.
 */
declare function image():void;

/**
 * Draws texture onto the screen at position 0, 0.
 */
declare function image(texture:ImageResource):void;

/**
 * Draws the active texture onto the screen at position X, Y.
 */
declare function image(X:number, Y:number):void;

/**
 * Draws texture onto the screen at position X, Y.
 */
declare function image(texture:ImageResource, X:number, Y:number, rotation?:number, scale?:number):void;

/**
 * Draws text onto the screen.
 */
declare function text(message:string, x?:number, y?:number):void;

/**
 * True while button is pressed, false otherwise.
 */
var UP:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var DOWN:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var LEFT:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var RIGHT:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var A:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var B:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var C:boolean;

/**
 * True while button is pressed, false otherwise.
 */
var D:boolean;

`},{}]},{},[96]);